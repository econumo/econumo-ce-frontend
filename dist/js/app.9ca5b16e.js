(()=>{var __webpack_modules__={8584:(e,t,a)=>{"use strict";var n=a(9104),o=a(5210),l=a(8734),s=a(1758);const c=(0,s.pM)(Object.assign({name:"App"},{__name:"App",setup(e){return(e,t)=>{const a=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.Wv)(a)}}})),i=c,r=i;var d=a(1573),u=a(587);const m=(0,d.M_)((()=>(0,u.Ey)()));var g,p=a(455);(function(e){e["LOGIN"]="login",e["REGISTER"]="register",e["LOGOUT"]="logout",e["HOME"]="home",e["ACCOUNT"]="account",e["BUDGET"]="budget",e["BUDGET_CREATE"]="budgetCreate",e["SETTINGS"]="settings",e["SETTINGS_PROFILE"]="settingsProfile",e["SETTINGS_CHANGE_PASSWORD"]="settingsChangePassword",e["SETTINGS_ACCOUNTS"]="settingsAccounts",e["SETTINGS_CATEGORIES"]="settingsCategories",e["SETTINGS_PAYEES"]="settingsPayees",e["SETTINGS_TAGS"]="settingsTags",e["SETTINGS_CONNECTIONS"]="settingsConnections",e["SETTINGS_BUDGETS"]="settingsBudgets"})(g||(g={}));var b=a(8790),v=a(2713),f=a.n(v);const h={class:"login-layout-lang-link"},A={class:"login-layout-head"},M={class:"row login-layout-head-logo justify-center"},y=["alt"],k={class:"login-layout-head-tabs flex no-wrap justify-between"},C={class:"login-layout-head-tabs-item col flex justify-center"},E={class:"login-layout-head-tabs-item col flex justify-center"},I={class:"login-layout-body"},T=(0,s.Lk)("div",{class:"login-layout-social"},[(0,s.Lk)("a",{target:"_blank",href:"https://github.com/econumo/",class:"login-layout-ico -gh",rel:"nofollow","aria-label":"GitHub"}),(0,s.Lk)("a",{target:"_blank",href:"https://twitter.com/econumo",class:"login-layout-ico -tw",rel:"nofollow","aria-label":"Twitter"})],-1),L={class:"login-layout-help"},D=["href","aria-label"];function N(e,t,a,n,o,l){const c=(0,s.g2)("router-link"),i=(0,s.g2)("router-view"),r=(0,s.g2)("change-language-modal"),d=(0,s.g2)("q-page-container"),u=(0,s.g2)("q-layout");return(0,s.uX)(),(0,s.Wv)(u,{class:"fullscreen login"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"login-layout full-width column wrap justify-center items-center content-center"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",{class:"login-layout-lang",onClick:t[0]||(t[0]=(...t)=>e.openLanguageModal&&e.openLanguageModal(...t))},[(0,s.Lk)("span",h,(0,b.v_)(e.shortLanguageLabel()),1)]),(0,s.Lk)("div",A,[(0,s.Lk)("div",M,[(0,s.Lk)("div",null,[(0,s.Lk)("img",{src:f(),width:"194",height:"20",alt:e.$t("elements.econumo.label")},null,8,y)])]),(0,s.Lk)("div",k,[(0,s.Lk)("div",C,[(0,s.bF)(c,{to:{name:"login"},class:"login-layout-head-tabs-link"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("pages.login.header")),1)])),_:1})]),(0,s.Lk)("div",E,[(0,s.bF)(c,{to:{name:"register"},class:"login-layout-head-tabs-link"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("pages.registration.header")),1)])),_:1})])])]),(0,s.Lk)("div",I,[(0,s.bF)(i)]),T,(0,s.Lk)("div",L,[(0,s.Lk)("a",{target:"_blank",href:e.$t("blocks.help.url"),class:"login-layout-help-link",rel:"nofollow","aria-label":e.$t("blocks.help.label")},(0,b.v_)(e.$t("blocks.help.label")),9,D)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.isLanguageModalOpened?((0,s.uX)(),(0,s.Wv)(r,{key:0,onCancel:t[1]||(t[1]=t=>e.closeLanguageModal())})):(0,s.Q3)("",!0)]))])),_:1})])),_:1})}const w={class:"econumo-modal lang-modal"},O={class:"lang-modal-text"},F={class:"lang-modal-button"};function S(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(i,{"model-value":!0,minimized:"",onHide:t[0]||(t[0]=t=>e.$emit("cancel"))},{default:(0,s.k6)((()=>[(0,s.Lk)("div",w,[(0,s.Lk)("div",O,(0,b.v_)(e.$t("modals.change_language.header")),1),(0,s.Lk)("div",F,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.localeOptions,(t=>((0,s.uX)(),(0,s.Wv)(c,{class:(0,b.C4)(t.value===e.locale?"econumo-btn -medium -yellow full-width":"econumo-btn -medium -transparent full-width"),label:t.label,type:"button",key:t.value,onClick:a=>e.selectLocale(t),flat:""},null,8,["class","label","onClick"])))),128))])])])),_:1})}var x=a(3445),U=a(3537);const R=(0,s.pM)({setup(){const{locale:e}=(0,U.s9)({useScope:"global"});return{locale:e}},computed:{localeOptions:function(){return x.A.getLocaleOptions()}},methods:{selectLocale:function(e){this.locale!==e.value&&(this.locale=e,x.A.locale(e.value),window.location.reload()),this.$emit("cancel")}}});var $=a(2807),j=a(558),Q=a(6384),q=a(8582),z=a.n(q);const P=(0,$.A)(R,[["render",S]]),W=P;z()(R,"components",{QDialog:j.A,QBtn:Q.A});var Y=a(3436),B=a.n(Y);const H={data(){return{isLanguageModalOpened:!1}},methods:{openLanguageModal(){this.isLanguageModalOpened=!0},closeLanguageModal(){this.isLanguageModalOpened=!1},fullLanguageLabel(){return B().find(x.A.getLocaleOptions(),{value:x.A.locale()}).label},shortLanguageLabel(){return B().find(x.A.getLocaleOptions(),{value:x.A.locale()}).short}}},V=(0,s.pM)({name:"LoginLayout",components:{ChangeLanguageModal:W},mixins:[H],data(){return{}},methods:{}});var X=a(557),G=a(5205);const K=(0,$.A)(V,[["render",N]]),Z=K;z()(V,"components",{QLayout:X.A,QPageContainer:G.A});var J=a(6843),ee=a.n(J);const te={class:"application"},ae={class:"application-layout-logo"},ne=(0,s.Lk)("object",{type:"image/svg+xml",data:"~assets/econumo.svg",width:"145",height:"15"},[(0,s.Lk)("img",{src:f(),width:"145",height:"15",alt:"Econumo"})],-1),oe={key:0,class:"application-layout-logo-plan"},le={class:"application-layout-user full-width"},se={class:"row no-wrap inline q-col-gutter-none no-padding"},ce={class:"col q-col-gutter-none"},ie=["src"],re={class:"application-layout-user-info"},de={class:"application-layout-user-name"},ue={class:"application-layout-user-login"},me={key:0,class:"full-width application-layout-account"},ge={key:0,class:"application-layout-account-create"},pe={class:"application-layout-account-list-name-block"},be=["src"],ve=["src"],fe={class:"application-layout-footer"},he={class:"application-layout-footer-social"},_e={class:"application-layout-footer-logo"},Ae=(0,s.Lk)("img",{src:ee(),width:"125",height:"20",alt:"Econumo"},null,-1),Me={key:0,class:"application-layout-footer-logo-plan"},ye={class:"application-layout-footer-social-block"},ke={class:"application-layout-footer-links"},Ce=["href","aria-label"],Ee={class:"text-grey"};function Ie(e,t,a,o,l,c){const i=(0,s.g2)("q-avatar"),r=(0,s.g2)("router-link"),d=(0,s.g2)("q-icon"),u=(0,s.g2)("q-item-section"),m=(0,s.g2)("q-item"),g=(0,s.g2)("q-list"),p=(0,s.g2)("q-expansion-item"),v=(0,s.g2)("router-view"),f=(0,s.g2)("q-page-container"),h=(0,s.g2)("q-layout"),_=(0,s.g2)("transaction-modal"),A=(0,s.g2)("account-modal"),M=(0,s.g2)("loading-modal"),y=(0,s.g2)("q-space"),k=(0,s.g2)("q-btn"),C=(0,s.g2)("q-card-section"),E=(0,s.g2)("q-card"),I=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.CE)("div",te,[(0,s.bF)(h,{class:"application-layout"},{default:(0,s.k6)((()=>[((0,s.uX)(),(0,s.Wv)((0,s.$y)(e.$q.screen.lt.lg?"q-pull-to-refresh":"div"),{class:(0,b.C4)("application-layout-sidebar "+("sidebar"===e.activeArea?e.$q.screen.lt.lg?"col-grow":"":"gt-md")),onRefresh:e.refresh},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ae,[ne,e.econumoEdition?((0,s.uX)(),(0,s.CE)("div",oe,(0,b.v_)(e.econumoEdition),1)):(0,s.Q3)("",!0)]),(0,s.bF)(r,{class:"application-layout-link",to:{name:"settingsProfile"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",le,[(0,s.Lk)("div",se,[(0,s.Lk)("div",ce,[(0,s.bF)(i,{class:"application-layout-user-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.userAvatar+"?s=100",class:"q-col-gutter-none no-padding"},null,8,ie)])),_:1})]),(0,s.Lk)("div",re,[(0,s.Lk)("div",de,(0,b.v_)(e.userName),1),(0,s.Lk)("div",ue,(0,b.v_)(e.userLogin),1)])])])])),_:1}),e.isFullyLoaded?((0,s.uX)(),(0,s.CE)("div",me,[(0,s.bF)(r,{to:{name:"budget"},class:"application-layout-account-main",onClick:e.openBudget},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.main.budget")),1)])),_:1},8,["onClick"]),!e.accountsTree.length&&e.folders.length?((0,s.uX)(),(0,s.CE)("div",ge,[(0,s.Lk)("a",{class:"text-decoration-underline text-purple cursor-pointer",onClick:t[0]||(t[0]=t=>e.openCreateAccountModal())},(0,b.v_)(e.$t("elements.main.accounts_empty.create")),1),(0,s.eW)(" "+(0,b.v_)(e.$t("elements.main.accounts_empty.account")),1)])):(0,s.Q3)("",!0),e.isFullyLoaded?((0,s.uX)(),(0,s.Wv)(g,{key:1,class:"application-layout-account-gap"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.accountsTree,(t=>((0,s.uX)(),(0,s.Wv)(p,{class:"application-layout-account-folder","expand-icon":"navigate_next","expanded-icon":"expand_more",key:t.folder.id,label:t.folder.name,caption:e.moneyFormat(t.amount,t.currency.symbol),"expand-icon-class":"application-layout-account-folder-caption","default-opened":t.folder.opened,onShow:a=>e.openAccountFolder(t.folder.id),onHide:a=>e.closeAccountFolder(t.folder.id)},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"application-layout-account-list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.accounts,(t=>((0,s.uX)(),(0,s.Wv)(m,{class:"application-layout-account-list-item",clickable:"",key:t.id,onClick:a=>e.selectAccount(t.id),active:t.id===e.selectedAccountId},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"application-layout-account-list-section-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(d,{name:t.icon},null,8,["name"])])),_:2},1024),(0,s.Lk)("div",pe,[(0,s.bF)(u,{class:"application-layout-account-list-section-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(t.name),1)])),_:2},1024),(0,s.bF)(u,{class:"application-layout-account-list-section-balance",side:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.moneyFormat(t.balance,t.currency.symbol)),1)])),_:2},1024)]),t.sharedAccess.length>0?((0,s.uX)(),(0,s.Wv)(u,{key:0,side:"",class:"application-layout-account-list-section-people"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{name:"people"})])),_:1})):(0,s.Q3)("",!0),t.sharedAccess.length>0?((0,s.uX)(),(0,s.Wv)(u,{key:1,side:"",class:"application-layout-account-list-section-shared"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"application-layout-account-list-section-shared-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:t.owner.avatar+"?s=30"},null,8,be)])),_:2},1024),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.sharedAccess,(e=>((0,s.uX)(),(0,s.Wv)(i,{class:"application-layout-account-list-section-shared-avatar",key:e.user.id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.user.avatar+"?s=30"},null,8,ve)])),_:2},1024)))),128))])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1032,["onClick","active"])))),128))])),_:2},1024)])),_:2},1032,["label","caption","default-opened","onShow","onHide"])))),128))])),_:1})):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),(0,s.Lk)("div",fe,[(0,s.Lk)("div",he,[(0,s.Lk)("div",_e,[Ae,e.econumoEdition?((0,s.uX)(),(0,s.CE)("div",Me,(0,b.v_)(e.econumoEdition),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ye,[(0,s.Lk)("a",{href:"#",onClick:t[1]||(t[1]=(0,n.D$)(((...t)=>e.sync&&e.sync(...t)),["prevent"])),class:"application-layout-footer-social-ico -sync"})])]),(0,s.Lk)("div",ke,[(0,s.Lk)("div",{class:"application-layout-footer-links-item -settings",onClick:t[2]||(t[2]=(...t)=>e.openSettings&&e.openSettings(...t))},(0,b.v_)(e.$t("pages.settings.settings.menu_item")),1),e.websiteUrl?((0,s.uX)(),(0,s.CE)("a",{key:0,target:"_blank",href:e.websiteUrl,class:"application-layout-footer-links-item -website","aria-label":e.$t("blocks.help.label")},(0,b.v_)(e.$t("blocks.website.label")),9,Ce)):(0,s.Q3)("",!0)])])])),_:1},40,["class","onRefresh"])),(0,s.Lk)("div",{class:(0,b.C4)("application-layout-workspace "+("workspace"===e.activeArea?"":"gt-md"))},[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(v)])),_:1})],2)])),_:1}),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,s.bF)(_),e.isFullyLoaded&&!e.accountsTree.length?((0,s.uX)(),(0,s.Wv)(A,{key:0})):(0,s.Q3)("",!0),e.isFullyLoaded?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(M,{key:1,"header-label":e.$t("modals.loading.data_loading")},null,8,["header-label"])),(0,s.bF)(I,{"model-value":!!e.transactionModalSwitchAccount,seamless:"",position:"bottom",class:"switch-account-modal"},{default:(0,s.k6)((()=>[(0,s.bF)(E,null,{default:(0,s.k6)((()=>[(0,s.bF)(C,{class:"row items-center no-wrap"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",{class:"switch-account-modal-text",onClick:t[3]||(t[3]=t=>e.selectAccount(e.transactionModalSwitchAccount))},[(0,s.Lk)("div",Ee,[(0,s.eW)((0,b.v_)(e.$t("elements.switch_to_account"))+" ",1),(0,s.Lk)("b",null,(0,b.v_)(e.getAccountName(e.transactionModalSwitchAccount)),1)])]),(0,s.bF)(y),(0,s.bF)(k,{flat:"",round:"",icon:"close",onClick:t[4]||(t[4]=t=>e.closeModalSwitchAccount())})])),_:1})])),_:1})])),_:1},8,["model-value"])]))])}a(239);const Te={methods:{moneyHTML:function(e,t=""){e=parseFloat(e)??0;let a=e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),n=a.split("."),o=['<span class="money-amount">',n[0],"</span>",'<span class="money-decimal">.',n[1],"</span>"];return""!==t&&o.push('<span class="money-currency">'+t+"</span>"),o.join("")},moneyFormat:function(e,t=""){e=parseFloat(e)??0;let a=e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return""!==t&&(a+=" "+t),a},transactionFormat:function(e,t,a){switch(e){case"expense":return"-"+this.moneyFormat(t,a);case"income":return"+"+this.moneyFormat(t,a)}}}};var Le=a(8099),De=a.n(Le);const Ne={class:"transaction-modal-header-wrapper"},we={class:"transaction-modal-header-title"},Oe={class:"transaction-modal-header-calendar"},Fe={class:"transaction-modal-header-previous-day"},Se={class:"transaction-modal-toggle-wrapper"},xe={key:0,class:"transaction-modal-main-account"},Ue={class:"transaction-modal-main-amount"},Re={key:1,class:"transaction-modal-main-amount"},$e={key:2,class:"transaction-modal-main-category"},je={key:3,class:"transaction-modal-main-from-account"},Qe={key:4,class:"transaction-modal-main-recipient"},qe={class:"transaction-modal-options-title"},ze={key:0,class:"transaction-modal-options-payee"},Pe={key:1,class:"transaction-modal-options-tags"},We=(0,s.Lk)("img",{src:De(),alt:""},null,-1),Ye={class:"econumo-modal transaction-modal-add-tag"},Be={class:"transaction-modal-add-tag-actions"};function He(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-date"),r=(0,s.g2)("q-popup-proxy"),d=(0,s.g2)("q-icon"),u=(0,s.g2)("q-input"),m=(0,s.g2)("q-card-section"),g=(0,s.g2)("q-btn-toggle"),p=(0,s.g2)("q-select"),v=(0,s.g2)("calculator-widget"),f=(0,s.g2)("q-avatar"),h=(0,s.g2)("q-card-actions"),_=(0,s.g2)("q-form"),A=(0,s.g2)("q-card"),M=(0,s.g2)("q-dialog"),y=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,s.bF)(M,{class:"transaction-modal",modelValue:e.isModalOpened,"onUpdate:modelValue":t[14]||(t[14]=t=>e.isModalOpened=t)},{default:(0,s.k6)((()=>[(0,s.bF)(A,{class:"transaction-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(_,{ref:"transactionForm",onSubmit:e.submit,onReset:e.closeModal},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"transaction-modal-header"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ne,[(0,s.Lk)("div",we,(0,b.v_)(e.isTransactionModalCreation?e.$t("modals.transaction.create_form.header"):e.$t("modals.transaction.update_form.header")),1),(0,s.Lk)("div",null,[(0,s.Lk)("div",Oe,[(0,s.bF)(u,{class:"transaction-modal-header-calendar-input",modelValue:e.transactionDate,"onUpdate:modelValue":t[1]||(t[1]=t=>e.transactionDate=t)},{append:(0,s.k6)((()=>[(0,s.bF)(d,{class:"transaction-modal-header-calendar-icon"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{ref:"qDateProxy",cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"transaction-modal-header-calendar-date",modelValue:e.transactionDate,"onUpdate:modelValue":t[0]||(t[0]=t=>e.transactionDate=t),"today-btn":"",mask:"YYYY-MM-DD","first-day-of-week":"1"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.bo)((0,s.bF)(c,{class:"transaction-modal-header-calendar-date-btn",label:e.$t("elements.button.ok.label"),flat:""},null,8,["label"]),[[y]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue"])]),(0,s.Lk)("div",Fe,[(0,s.bF)(c,{flat:"",size:"sm",icon:"arrow_back",onClick:t[2]||(t[2]=t=>e.previousDay())})])])])])),_:1}),(0,s.bF)(m,{class:"transaction-modal-toggle"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Se,[(0,s.bF)(g,{class:"transaction-modal-toggle-btn",modelValue:e.transactionType,"onUpdate:modelValue":t[3]||(t[3]=t=>e.transactionType=t),options:[{label:e.$t("modals.transaction.transaction_type.income"),value:"income"},{label:e.$t("modals.transaction.transaction_type.transfer"),value:"transfer"},{label:e.$t("modals.transaction.transaction_type.expense"),value:"expense"}]},null,8,["modelValue","options"])])])),_:1}),(0,s.bF)(m,{class:"transaction-modal-main"},{default:(0,s.k6)((()=>[e.isTransfer?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",xe,[(0,s.bF)(p,{class:"transaction-modal-main-account-select",modelValue:e.account,"onUpdate:modelValue":t[4]||(t[4]=t=>e.account=t),options:e.accountsOptions,label:e.account.name,"popup-content-class":"modal-popup","options-selected-class":"modal-popup-selected","hide-dropdown-icon":""},{prepend:(0,s.k6)((()=>[(0,s.bF)(d,{name:e.account.icon},null,8,["name"])])),_:1},8,["modelValue","options","label"])])),(0,s.Lk)("div",Ue,[(0,s.bF)(u,{class:(0,b.C4)(["transaction-modal-main-amount-input amount",{transfer:e.isTransfer}]),modelValue:e.amount,"onUpdate:modelValue":t[5]||(t[5]=t=>e.amount=t),label:e.$t("modals.transaction.form.amount.label"),"lazy-rules":"",autofocus:"",inputmode:"decimal",pattern:"[0-9+\\-\\*\\.=,]*",rules:[t=>e.isNotEmpty(t)||e.$t("modals.transaction.form.amount.validation.required_field"),t=>e.isValidNumber(t)||e.$t("modals.transaction.form.amount.validation.required_field"),t=>e.isValidFormula(t)||e.$t("modals.transaction.form.amount.validation.required_field")]},null,8,["modelValue","label","class","rules"]),(0,s.bF)(v,{value:e.amount,onUpdate:t[6]||(t[6]=t=>e.amount=t)},null,8,["value"])]),e.isTransfer&&e.account&&e.accountRecipient&&e.account.currencyId!==e.accountRecipient.currencyId?((0,s.uX)(),(0,s.CE)("div",Re,[(0,s.bF)(u,{class:(0,b.C4)(["transaction-modal-options-input amount-recipient",{transfer:e.isTransfer}]),inputmode:"decimal",step:"0.01",modelValue:e.amountRecipient,"onUpdate:modelValue":t[7]||(t[7]=t=>e.amountRecipient=t),label:e.$t("modals.transaction.form.amount_recipient.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("modals.transaction.form.amount_recipient.validation.required_field"),t=>e.isValidNumber(t)||e.$t("modals.transaction.form.amount_recipient.validation.required_field")]},null,8,["modelValue","label","class","rules"])])):(0,s.Q3)("",!0),e.isTransfer?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",$e,[(0,s.bF)(p,{class:"form-select transaction-modal-main-category-select",outlined:"","bottom-slots":"",modelValue:e.category,"onUpdate:modelValue":t[8]||(t[8]=t=>e.category=t),"use-input":e.canChangeAccountData,"popup-content-class":"modal-popup","options-selected-class":"modal-popup-selected",onNewValue:e.createCategory,onFilter:e.filterCategories,onFilterAbort:e.filterCategoriesAbort,options:e.categoriesOptions,label:e.$t("modals.transaction.form.category.label"),rules:[t=>!!t||e.$t("modals.transaction.form.category.validation.required_field")]},{before:(0,s.k6)((()=>[(0,s.bF)(d,{class:"form-select-icon transaction-modal-main-category-select-icon",name:e.category?.icon||"pending"},null,8,["name"])])),_:1},8,["modelValue","use-input","onNewValue","onFilter","onFilterAbort","options","label","rules"])])),e.isTransfer?((0,s.uX)(),(0,s.CE)("div",je,[(0,s.bF)(p,{class:"form-select transaction-modal-main-from-account-select",outlined:"","bottom-slots":"",modelValue:e.account,"onUpdate:modelValue":t[10]||(t[10]=t=>e.account=t),disable:!e.isTransactionModalCreation,"popup-content-class":"modal-popup","options-selected-class":"modal-popup-selected",options:e.accountsOptions,label:e.$t("modals.transaction.form.from.label"),"option-disable":t=>t.value===e.transactionModalAccountRecipientId},{before:(0,s.k6)((()=>[(0,s.bF)(d,{class:"form-select-icon transaction-modal-main-from-account-select-icon",name:e.account?.icon||"pending"},null,8,["name"])])),after:(0,s.k6)((()=>[(0,s.bF)(d,{class:"form-select-icon transaction-modal-main-from-account-select-icon after cursor-pointer",onClick:t[9]||(t[9]=t=>e.swapAccounts()),name:"swap_vert"})])),_:1},8,["modelValue","disable","options","label","option-disable"])])):(0,s.Q3)("",!0),e.isTransfer?((0,s.uX)(),(0,s.CE)("div",Qe,[(0,s.bF)(p,{class:"form-select transaction-modal-main-recipient-select",outlined:"","bottom-slots":"",modelValue:e.accountRecipient,"onUpdate:modelValue":t[11]||(t[11]=t=>e.accountRecipient=t),"popup-content-class":"modal-popup","options-selected-class":"modal-popup-selected",options:e.accountsOptions,label:e.$t("modals.transaction.form.to.label"),"option-disable":t=>t.value===e.transactionModalAccountId},{before:(0,s.k6)((()=>[(0,s.bF)(d,{class:"form-select-icon transaction-modal-main-recipient-select-icon",name:e.accountRecipient?.icon||"pending"},null,8,["name"])])),_:1},8,["modelValue","options","label","option-disable"])])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(m,{class:"transaction-modal-options"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",qe,(0,b.v_)(e.$t("modals.transaction.form.options.header")),1),(0,s.Lk)("div",null,[(0,s.bF)(u,{class:"transaction-modal-options-input",modelValue:e.description,"onUpdate:modelValue":t[12]||(t[12]=t=>e.description=t),autogrow:"",placeholder:e.$t("modals.transaction.form.description.placeholder"),label:e.$t("modals.transaction.form.description.label")},null,8,["modelValue","placeholder","label"])]),e.isTransfer?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",ze,[(0,s.bF)(p,{class:"transaction-modal-options-payee-select form-select",outlined:"",modelValue:e.payee,"onUpdate:modelValue":t[13]||(t[13]=t=>e.payee=t),"use-input":e.canChangeAccountData,"input-debounce":"0","popup-content-class":"modal-popup","options-selected-class":"modal-popup-selected",onNewValue:e.createPayee,onFilter:e.filterPayees,onFilterAbort:e.filterPayeesAbort,options:e.payeesOptions,label:e.$t("modals.transaction.form.payee."+e.transactionType)},null,8,["modelValue","use-input","onNewValue","onFilter","onFilterAbort","options","label"])])),e.isExpense?((0,s.uX)(),(0,s.CE)("div",Pe,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.accountOwnerTags,(t=>((0,s.uX)(),(0,s.Wv)(c,{class:"transaction-modal-options-tags-tag-btn",label:t.name,onClick:a=>e.selectTag(t.id),style:(0,b.Tr)(e.transactionModalTagId===t.id?"background: #F4CFFF; color: #93489F":"background: #F5F5F5; color: #666666"),ripple:!1,key:t.id},null,8,["label","onClick","style"])))),128)),e.canChangeAccountData?((0,s.uX)(),(0,s.Wv)(c,{key:0,class:"transaction-modal-options-tags-tag-add-btn",round:"",unelevated:"",ripple:!1,onClick:e.openAddTagModal},{default:(0,s.k6)((()=>[(0,s.bF)(f,{class:"transaction-modal-options-tags-tag-add-btn-icon"},{default:(0,s.k6)((()=>[We])),_:1})])),_:1},8,["onClick"])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(h,{class:"transaction-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(c,{class:"econumo-btn -medium -grey transaction-modal-actions-btn",flat:"",label:e.$t("elements.button.cancel.label"),onClose:e.closeModal},null,8,["label","onClose"]),[[y]]),e.isTransactionModalCreation?((0,s.uX)(),(0,s.Wv)(c,{key:0,class:"econumo-btn -medium -magenta transaction-modal-actions-btn",flat:"",label:e.$t("elements.button.add.label"),type:"submit"},null,8,["label"])):(0,s.Q3)("",!0),e.isTransactionModalCreation?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(c,{key:1,class:"econumo-btn -medium -magenta transaction-modal-actions-btn",flat:"",label:e.$t("elements.button.update.label"),type:"submit"},null,8,["label"]))])),_:1})])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(M,{modelValue:e.isAddTag,"onUpdate:modelValue":t[16]||(t[16]=t=>e.isAddTag=t),minimized:"",onHide:e.closeAddTagModal},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ye,[(0,s.bF)(p,{class:"form-select -narrow full-width",outlined:"","bottom-slots":"",modelValue:e.tag,"onUpdate:modelValue":t[15]||(t[15]=t=>e.tag=t),"use-input":!0,"popup-content-class":"modal-popup","options-selected-class":"modal-popup-selected",onNewValue:e.createTagFromSelect,onFilter:e.filterTags,onFilterAbort:e.filterTagsAbort,options:e.tagsOptions,label:e.$t("modals.transaction.dialog.new_tag.name.label"),rules:[t=>!!t||e.$t("modals.transaction.dialog.new_tag.name.validation.required_field")]},null,8,["modelValue","onNewValue","onFilter","onFilterAbort","options","label","rules"]),(0,s.Lk)("div",Be,[(0,s.bF)(c,{class:"econumo-btn -medium -grey transaction-modal-add-tag-button",label:e.$t("elements.button.cancel.label"),type:"button",onClick:e.closeAddTagModal,flat:""},null,8,["label","onClick"]),(0,s.bF)(c,{class:"econumo-btn -medium -magenta transaction-modal-add-tag-button",label:e.$t("elements.button.add.label"),type:"button",onClick:e.createNewTag,flat:""},null,8,["label","onClick"])])])])),_:1},8,["modelValue","onHide"])])}const Ve={methods:{exchange:function(e,t,a,n){if(a===n)return parseFloat(t);let o=B().findLast(e,{currencyId:a}),l=B().findLast(e,{currencyId:n}),s=parseFloat(t);return a!==o.baseCurrencyId&&(s/=parseFloat(o.rate)),n!==l.baseCurrencyId&&(s*=parseFloat(l.rate)),parseFloat(s)}}};a(7396),a(923),a(9502);var Xe=a(6671);function Ge(e){return""===e||/^\-?\d+([,\.]{1}\d+)?$/.test(e)}function Ke(e){return e.length>=3&&e.length<=18}function Ze(e){return null!==e&&""!==e}function Je(e){return(0,Xe.NF)((0,Xe.o2)(e))}const et={methods:{isValidHttpUrl(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol},isValidEmail(e){return/.+@.+/.test(e)},isValidNumber(e){return/^\-?\d+([,\.]{1}\d+)?$/.test(e)},isValidName(e){return e.length>=2&&e.length<=18},isValidFolderName(e){return e.length>=2&&e.length<=18},isValidAccountName(e){return e.length>=3&&e.length<=18},isValidCategoryName(e){return e.length>=3&&e.length<=18},isValidTagName(e){return e.length>=3&&e.length<=18},isValidPayeeName(e){return e.length>=3&&e.length<=18},isValidBudgetName(e){return e.length>=3&&e.length<=18},isValidPassword(e){return e.length>=4},isValidBudgetFolderName(e){return e.length>=3&&e.length<=18},isValidBudgetEnvelopeName(e){return e.length>=3&&e.length<=18},isNotEmpty(e){return null!==e&&""!==e},isValidRecoveryCode(e){return 12===e.length},isValidFormula(e){return Je(e)}}};var tt=a(6246),at=a(2303);const nt=e=>"function"!==typeof e?console.log:e,ot={client:"axios"};function lt(){return Intl.DateTimeFormat().resolvedOptions().timeZone}var st=a(7156);at.A.defaults.headers.common={Accept:"application/json"},at.A.interceptors.request.use((e=>(e.headers.Accept="application/json",(0,st.gf)()&&(e.headers.Authorization="Bearer "+(0,st.gf)()),e.headers["Accept-Language"]=x.A.locale(),e.headers["X-Timezone"]=lt(),e)),null,{synchronous:!0});class ct{constructor(e={}){(0,Y.defaults)(this,e,ot),this.$client=at.A.create()}}const it=Object.assign(new ct,{login(e,t,a,n){return a=nt(a),n=nt(n),console.log("[API] user.login",{username:e}),at.A.post(`${x.A.backendHost()}/api/v1/user/login-user`,{username:e,password:t}).then((e=>a(e.data))).catch((e=>{var t;return n(null===(t=e.response)||void 0===t?void 0:t.data)}))},logout(e,t){return e=nt(e),t=nt(t),console.log("[API] user.logout"),at.A.post(`${x.A.backendHost()}/api/v1/user/logout-user`).then((t=>e(t.data))).catch((e=>t(e.response)))},register(e="",t="",a="",n,o){return n=nt(n),o=nt(o),console.log("[API] user.register",{email:e}),at.A.post(`${x.A.backendHost()}/api/v1/user/register-user`,{email:e,password:t,name:a}).then((e=>n(e.data))).catch((e=>o(e.response)))},updateName(e="",t,a){return t=nt(t),a=nt(a),console.log("[API] user.updateName",{name:e}),at.A.post(`${x.A.backendHost()}/api/v1/user/update-name`,{name:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},updatePassword(e="",t="",a,n){return a=nt(a),n=nt(n),console.log("[API] user.updatePassword"),at.A.post(`${x.A.backendHost()}/api/v1/user/update-password`,{oldPassword:e,newPassword:t}).then((e=>a(e.data))).catch((e=>n(e.response)))},updateCurrency(e="",t,a){return t=nt(t),a=nt(a),console.log("[API] user.updateCurrency",{currency:e}),at.A.post(`${x.A.backendHost()}/api/v1/user/update-currency`,{currency:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},updateDefaultBudget(e,t,a){return t=nt(t),a=nt(a),console.log("[API] user.updateDefaultBudget",e),at.A.post(`${x.A.backendHost()}/api/v1/user/update-budget`,{value:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},getUserData(e,t){return e=nt(e),t=nt(t),console.log("[API] user.getUserData"),at.A.get(`${x.A.backendHost()}/api/v1/user/get-user-data`).then((t=>e(t.data.data.user))).catch((e=>t(e.response)))},remindPassword(e="",t,a){return t=nt(t),a=nt(a),console.log("[API] user.userRemindPassword",e),at.A.post(`${x.A.backendHost()}/api/v1/user/remind-password`,{username:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},resetPassword(e,t,a){return t=nt(t),a=nt(a),console.log("[API] user.userResetPassword",e),at.A.post(`${x.A.backendHost()}/api/v1/user/reset-password`,{username:e.username,code:e.code,password:e.password}).then((e=>t(e.data))).catch((e=>a(e.response)))}});var rt;function dt(e,t={}){if(!e)return;window.dataLayer=window.dataLayer||[];let a=window.location.hash;a.length>=2&&(a=window.location.hash.substring(2)),window.dataLayer.push({event:e,eventData:t,eventContext:{selfHosted:x.A.selfHosted(),locale:x.A.locale(),page:a},eventTimestamp:Date.now()})}(function(e){e["PAGE_VIEW"]="appPageView",e["USER_LOGIN"]="appUserLogin",e["USER_LOGOUT"]="appUserLogout",e["USER_REGISTRATION"]="appUserRegistration",e["USER_UPDATE_NAME"]="appUserUpdateName",e["USER_UPDATE_PASSWORD"]="appUserUpdatePassword",e["USER_UPDATE_CURRENCY"]="appUserUpdateCurrency",e["USER_UPDATE_DEFAULT_BUDGET"]="appUserUpdateDefaultBudget",e["USER_REMIND_PASSWORD"]="appUserRemindPassword",e["USER_RESET_PASSWORD"]="appUserResetPassword",e["ACCOUNT_SELECT"]="appAccountSelect",e["ACCOUNT_CREATE"]="appAccountCreate",e["ACCOUNT_UPDATE"]="appAccountUpdate",e["ACCOUNT_DELETE"]="appAccountDelete",e["ACCOUNT_ORDER_LIST"]="appApiAccountOrderList",e["ACCOUNT_FOLDER_EXPAND"]="appAccountFolderExpand",e["ACCOUNT_FOLDER_COLLAPSE"]="appAccountFolderCollapse",e["ACCOUNT_FOLDER_CREATE"]="appAccountFolderCreate",e["ACCOUNT_FOLDER_UPDATE"]="appAccountFolderUpdate",e["ACCOUNT_FOLDER_REPLACE"]="appAccountFolderReplace",e["ACCOUNT_FOLDER_ORDER_LIST"]="appAccountFolderOrderList",e["ACCOUNT_FOLDER_HIDE"]="appAccountFolderHide",e["ACCOUNT_FOLDER_SHOW"]="appAccountFolderShow",e["CATEGORY_CREATE"]="appCategoryCreate",e["CATEGORY_UPDATE"]="appCategoryUpdate",e["CATEGORY_ORDER_LIST"]="appCategoryOrderList",e["CATEGORY_CHANGE_ORDER"]="appAccountChangeOrder",e["CATEGORY_DELETE"]="appCategoryDelete",e["CATEGORY_REPLACE"]="appCategoryReplace",e["CATEGORY_ARCHIVE"]="appCategoryArchive",e["CATEGORY_UNARCHIVE"]="appCategoryUnarchive",e["PAYEE_CREATE"]="appPayeeCreate",e["PAYEE_UPDATE"]="appPayeeUpdate",e["PAYEE_ORDER_LIST"]="appPayeeOrderList",e["PAYEE_CHANGE_ORDER"]="appPayeeChangeOrder",e["PAYEE_DELETE"]="appPayeeDelete",e["PAYEE_ARCHIVE"]="appPayeeArchive",e["PAYEE_UNARCHIVE"]="appPayeeUnarchive",e["BUDGET_CREATE"]="appBudgetCreate",e["BUDGET_UPDATE"]="appBudgetUpdate",e["BUDGET_ORDER_LIST"]="appBudgetOrderList",e["BUDGET_CHANGE_ORDER"]="appBudgetChangeOrder",e["BUDGET_DELETE"]="appBudgetDelete",e["BUDGET_RESET"]="appBudgetReset",e["BUDGET_GRANT_ACCESS"]="appBudgetGrantAccess",e["BUDGET_REVOKE_ACCESS"]="appBudgetRevokeAccess",e["BUDGET_ACCEPT_ACCESS"]="appBudgetAcceptAccess",e["BUDGET_DECLINE_ACCESS"]="appBudgetAcceptAccess",e["BUDGET_FOLDER_CREATE"]="appBudgetFolderCreate",e["BUDGET_FOLDER_DELETE"]="appBudgetFolderDelete",e["BUDGET_FOLDER_UPDATE"]="appBudgetFolderUpdate",e["BUDGET_FOLDER_CHANGE_ORDER"]="appBudgetFolderChangeOrder",e["BUDGET_CHANGE_DATE"]="appBudgetChangeDate",e["BUDGET_UPDATE_ELEMENT_LIMIT"]="appBudgetUpdateElementLimit",e["BUDGET_CHANGE_ORDER_ELEMENT"]="appBudgetChangeOrderElement",e["BUDGET_TRANSFER_ENVELOPE_BUDGET"]="appBudgetTransferEnvelopeBudget",e["BUDGET_ELEMENT_CHANGE_CURRENCY"]="appBudgetElementChangeCurrency",e["BUDGET_ENVELOPE_DELETE"]="appBudgetEnvelopeDelete",e["BUDGET_ENVELOPE_UPDATE"]="appBudgetEnvelopeUpdate",e["BUDGET_ENVELOPE_CREATE"]="appBudgetEnvelopeCreate",e["BUDGET_ENVELOPE_COPY_BUDGET"]="appBudgetEnvelopeCopyBudget",e["TAG_CREATE"]="appTagCreate",e["TAG_UPDATE"]="appTagUpdate",e["TAG_ORDER_LIST"]="appTagOrderList",e["TAG_CHANGE_ORDER"]="appTagChangeOrder",e["TAG_DELETE"]="appTagDelete",e["TAG_ARCHIVE"]="appTagArchive",e["TAG_UNARCHIVE"]="appTagUnarchive",e["TRANSACTION_CREATE"]="appTransactionCreate",e["TRANSACTION_UPDATE"]="appTransactionUpdate",e["TRANSACTION_DELETE"]="appTransactionDelete",e["CONNECTION_GENERATE_INVITE"]="appConnectionGenerateInvite",e["CONNECTION_DELETE_INVITE"]="appConnectionDeleteInvite",e["CONNECTION_ACCEPT_INVITE"]="appConnectionAcceptInvite",e["CONNECTION_DELETE"]="appConnectionDelete",e["CONNECTION_UPDATE_ACCOUNT_ACCESS"]="appConnectionUpdateAccountAccess",e["CONNECTION_REVOKE_ACCOUNT_ACCESS"]="appConnectionRevokeAccountAccess",e["UI_MODAL_ACCOUNT_OPEN"]="appUIModalAccountOpen",e["UI_MODAL_ACCOUNT_CLOSE"]="appUIModalAccountClose",e["UI_MODAL_ACCOUNT_CHANGE_NAME"]="appUIModalAccountChangeName",e["UI_MODAL_ACCOUNT_CHANGE_BALANCE"]="appUIModalAccountChangeBalance",e["UI_MODAL_ACCOUNT_CHANGE_CURRENCY"]="appUIModalAccountChangeCurrency",e["UI_MODAL_ACCOUNT_CHANGE_ICON"]="appUIModalAccountChangeIcon",e["UI_MODAL_TRANSACTION_OPEN"]="appUIModalTransactionOpen",e["UI_MODAL_TRANSACTION_CLOSE"]="appUIModalTransactionClose",e["UI_MODAL_TRANSACTION_CHANGE_TYPE"]="appUIModalTransactionChangeType",e["UI_MODAL_TRANSACTION_CHANGE_ACCOUNT"]="appUIModalTransactionChangeAccount",e["UI_MODAL_TRANSACTION_CHANGE_ACCOUNT_RECIPIENT"]="appUIModalTransactionChangeAccountRecipient",e["UI_MODAL_TRANSACTION_CHANGE_AMOUNT"]="appUIModalTransactionChangeAmount",e["UI_MODAL_TRANSACTION_CHANGE_AMOUNT_RECIPIENT"]="appUIModalTransactionChangeAmountRecipient",e["UI_MODAL_TRANSACTION_CHANGE_CATEGORY"]="appUIModalTransactionChangeCategory",e["UI_MODAL_TRANSACTION_CHANGE_DESCRIPTION"]="appUIModalTransactionChangeDescription",e["UI_MODAL_TRANSACTION_CHANGE_PAYEE"]="appUIModalTransactionChangePayee",e["UI_MODAL_TRANSACTION_CHANGE_TAG"]="appUIModalTransactionChangeTag",e["UI_MODAL_TRANSACTION_CHANGE_DATE"]="appUIModalTransactionChangeDate"})(rt||(rt={}));const ut=Object.assign(new ct,{getList(e,t,a){return t=nt(t),a=nt(a),console.log("[API] currency.getList",e),at.A.get(`${x.A.backendHost()}/api/v1/currency/get-currency-list`).then((e=>t(e.data))).catch((e=>a(e.response)))},getCurrencyRatesList(e,t,a){return t=nt(t),a=nt(a),console.log("[API] currency.getCurrencyRatesList",e),at.A.get(`${x.A.backendHost()}/api/v1/currency/get-currency-rate-list`).then((e=>t(e.data))).catch((e=>a(e.response)))}});var mt=a(322);const gt="YYYY-MM-DD",pt="YYYY-MM-DD HH:mm:ss",bt=(0,u.nY)("currencies",(()=>{const e=(0,mt.Mjh)(st.cY.CURRENCIES,[]),t=(0,mt.Mjh)(st.cY.CURRENCIES_LOADED_AT,null),a=(0,s.EW)((()=>!!t.value)),n=(0,s.EW)((()=>B().keyBy(e.value,"id")));function o(){return ut.getList({},(a=>{e.value=a.data.items,t.value=tt.Ay.formatDate(new Date,pt)}),(e=>(console.log("fetchCurrencies error",e),!1)))}return{currencies:e,currenciesLoadedAt:t,isCurrenciesLoaded:a,currenciesHash:n,fetchCurrencies:o}})),vt=Object.assign(new ct,{getList(e,t){return e=nt(e),t=nt(t),console.log("[API] account.getList"),at.A.get(`${x.A.backendHost()}/api/v1/account/get-account-list`).then((t=>e(t.data.data))).catch((e=>t(e.response)))},create(e,t,a){return t=nt(t),a=nt(a),console.log("[API] account.add",e),at.A.post(`${x.A.backendHost()}/api/v1/account/create-account`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},update(e,t,a){return t=nt(t),a=nt(a),console.log("[API] account.update",e),at.A.post(`${x.A.backendHost()}/api/v1/account/update-account`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},delete(e,t,a){return t=nt(t),a=nt(a),console.log("[API] account.delete",e),at.A.post(`${x.A.backendHost()}/api/v1/account/delete-account`,{id:e}).then((e=>t())).catch((e=>a(e.response)))},orderList(e,t,a){return t=nt(t),a=nt(a),console.log("[API] account.orderList",e),at.A.post(`${x.A.backendHost()}/api/v1/account/order-account-list`,{changes:e}).then((e=>t(e.data.data))).catch((e=>a(e.response)))}});function ft(e=[],t=[]){let a=[];return e.forEach((e=>{t.forEach(((t,n)=>{e.id===t&&parseInt(e.position)!==n&&a.push({id:t,position:n})}))})),a}function ht(e=[],t=[],a=[]){let n=[];return e.forEach((e=>{t.forEach(((t,o)=>{if(e.id===t.id&&_t(e,t,a)){let o={id:t.id};a.forEach((a=>{t.hasOwnProperty(a)?o[a]=t[a]:e.hasOwnProperty(a)&&(o[a]=e[a])})),n.push(o)}}))})),n}function _t(e={},t={},a=[]){let n=!0;return a.forEach((a=>{e[a]!==t[a]&&(n=!1)})),!n}var At;(function(e){e["SIDEBAR"]="sidebar",e["WORKSPACE"]="workspace"})(At||(At={}));const Mt=(0,u.nY)("active-area",(()=>{const e=(0,l.KR)(At.SIDEBAR);function t(){e.value=At.SIDEBAR}function a(){e.value=At.WORKSPACE}return{activeArea:e,setSidebarActiveArea:t,setWorkspaceActiveArea:a}})),yt=Object.assign(new ct,{add(e,t,a){return t=nt(t),a=nt(a),console.log("[API] transaction.add",e),at.A.post(`${x.A.backendHost()}/api/v1/transaction/create-transaction`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},update(e,t,a){return t=nt(t),a=nt(a),console.log("[API] transaction.update",e),at.A.post(`${x.A.backendHost()}/api/v1/transaction/update-transaction`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},getList(e,t){return e=nt(e),t=nt(t),console.log("[API] transaction.getList"),at.A.get(`${x.A.backendHost()}/api/v1/transaction/get-transaction-list`).then((t=>e(t.data.data))).catch((e=>t(e.response)))},delete(e,t,a){return t=nt(t),a=nt(a),console.log("[API] transaction.delete",e),at.A.post(`${x.A.backendHost()}/api/v1/transaction/delete-transaction`,{id:e}).then((e=>t(e.data.data))).catch((e=>a(e.response)))}}),kt=Object.assign(new ct,{getList(e,t){return e=nt(e),t=nt(t),console.log("[API] budget.getList"),at.A.get(`${x.A.backendHost()}/api/v1/budget/get-budget-list`).then((t=>e(t.data.data))).catch((e=>t(e.response)))},create(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.create",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/create-budget`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},update(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.update",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/update-budget`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},delete(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.delete",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/delete-budget`,{id:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},grantAccess(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.grantAccess",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/grant-access`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},revokeAccess(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.revokeAccess",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/revoke-access`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},acceptAccess(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.acceptAccess",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/accept-access`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},declineAccess(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.declineAccess",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/decline-access`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},getItem(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.getItem",e),at.A.get(`${x.A.backendHost()}/api/v1/budget/get-budget?id=${e.id}&date=${e.date}`).then((e=>t(e.data))).catch((e=>a(e.response)))},getTransactionList(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.getTransactionList",e),at.A.get(`${x.A.backendHost()}/api/v1/budget/get-transaction-list?budgetId=${e.budgetId}&periodStart=${e.periodStart}&categoryId=${e.categoryId}&tagId=${e.tagId}&envelopeId=${e.envelopeId}`).then((e=>t(e.data))).catch((e=>a(e.response)))},createFolder(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.createFolder",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/create-folder`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},updateFolder(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.updateFolder",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/update-folder`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},deleteFolder(e,t,a,n){return a=nt(a),n=nt(n),console.log("[API] budget.deleteFolder",e,t),at.A.post(`${x.A.backendHost()}/api/v1/budget/delete-folder`,{budgetId:e,id:t}).then((e=>a(e.data))).catch((e=>n(e.response)))},orderFolderList(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.orderFolderList",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/order-folder-list`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},moveElementList(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.moveElementList",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/move-element-list`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},createEnvelope(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.createEnvelope",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/create-envelope`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},updateEnvelope(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.updateEnvelope",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/update-envelope`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},deleteEnvelope(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.deleteEnvelope",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/delete-envelope`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},setLimit(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.setLimit",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/set-limit`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},changeElementCurrency(e,t,a){return t=nt(t),a=nt(a),console.log("[API] budget.changeElementCurrency",e),at.A.post(`${x.A.backendHost()}/api/v1/budget/change-element-currency`,e).then((e=>t(e.data))).catch((e=>a(e.response)))}});var Ct,Et,It,Tt=a(3090);(function(e){e[e["ENVELOPE"]=0]="ENVELOPE",e[e["CATEGORY"]=1]="CATEGORY",e[e["TAG"]=2]="TAG"})(Ct||(Ct={})),function(e){e["OWNER"]="owner",e["ADMIN"]="admin",e["USER"]="user",e["READ_ONLY"]="guest"}(Et||(Et={})),function(e){e[e["ACCEPTED"]=1]="ACCEPTED",e[e["NOT_ACCEPTED"]=0]="NOT_ACCEPTED"}(It||(It={}));const Lt=(0,u.nY)("budgets",(()=>{const e=(0,mt.Mjh)(st.cY.BUDGETS,[]),t=(0,mt.Mjh)(st.cY.BUDGETS_LOADED_AT,null),a=(0,mt.Mjh)(st.cY.BUDGET,null,{serializer:mt.dbR.object}),n=(0,mt.Mjh)(st.cY.BUDGET_LOADED_AT,null),o=(0,mt.Mjh)(st.cY.BUDGET_SELECTED_DATE,null),c=(0,mt.Mjh)(st.cY.BUDGET_FOLDED_FOLDERS,{}),i=(0,mt.Mjh)(st.cY.BUDGET_UNFOLDED_ELEMENTS,{}),r=(0,mt.Mjh)(st.cY.BUDGET_META,null,{serializer:mt.dbR.object}),d=(0,mt.Mjh)(st.cY.BUDGET_CURRENCIES,[]),u=(0,l.KR)(!1),m=(0,l.KR)([]),g=(0,s.EW)((()=>u.value)),p=(0,s.EW)((()=>!t.value&&!a.value)),b=(0,s.EW)((()=>!!t.value)),v=(0,s.EW)((()=>{const t=Xt();return B().orderBy(B().filter(B().cloneDeep(e.value),{ownerUserId:t.userId}),"position","asc")})),f=(0,s.EW)((()=>B().orderBy(e.value,"name","asc"))),h=(0,s.EW)((()=>!!n.value)),_=(0,s.EW)((()=>{const t=[],a=Xt();return e.value.forEach((e=>{e.access.forEach((n=>{console.log(n,a.userId,n.isAccepted),n.user.id!==a.userId||n.isAccepted||t.push(B().cloneDeep(e))}))})),t})),A=(0,s.EW)((()=>{if(!e.value)return!1;let t=!1;const a=Xt();return e.value.forEach((e=>{e.access.forEach((e=>{e.user.id===a.userId&&e.isAccepted&&(t=!0)}))})),t})),M=(0,s.EW)((()=>{if(!a.value)return!1;let e=!1;const t=Xt();return a.value.meta.access.forEach((a=>{a.user.id===t.userId&&(a.role!==Et.ADMIN&&a.role!==Et.OWNER||(e=!0))})),e})),y=(0,s.EW)((()=>{if(!a.value)return!1;let e=!1;const t=Xt();return a.value.meta.access.forEach((a=>{a.user.id===t.userId&&(a.role!==Et.USER&&a.role!==Et.ADMIN&&a.role!==Et.OWNER||(e=!0))})),e})),k=(0,s.EW)((()=>{if(!o.value){const e=new Date;e.setDate(1),o.value=tt.Ay.formatDate(e,gt)}return o.value}));function C(){return kt.getList((e=>{Y(e.items)}),(e=>(console.log("Budgets error",e),e)))}function E(t){dt(rt.BUDGET_CREATE);const o=Xt(),l=B().findLast(B().filter(e.value,{ownerUserId:o.userId}),(e=>e.name.toLowerCase()===t.name.toLowerCase()));return l?new Promise(((e,a)=>{t.name?l&&e(l):a("Budget name is empty")})):kt.create(t,(t=>{if(!t.success)return t;e.value.push(t.data.item.meta),a.value=t.data.item,n.value=tt.Ay.formatDate(new Date,pt),r.value=t.data.item.meta,d.value=[],t.data.item.balances.forEach((e=>{d.value.push(e.currencyId)}));const o=Xt();return o.fetchUserData(),t}),(e=>(console.error("[Budgets Store] createBudget",e),e)))}function I(t){dt(rt.BUDGET_UPDATE);const a=Xt();if(null!==t.name){const n=B().findLast(B().filter(e.value,{ownerUserId:a.userId}),(e=>null!==t.name&&e.name.toLowerCase()===t.name.toLowerCase()&&e.id!==t.id));if(n)return new Promise(((e,t)=>{t("Budget name exists")}))}return kt.update(t,(a=>a.success?(B().remove(e.value,(e=>e.id===t.id)),e.value.push(a.data.item),r.value=a.data.item,a):a),(e=>(console.error("[Budgets Store] updateBudget",e),e)))}function T(e){dt(rt.BUDGET_DELETE);const t=Xt();return kt.delete(e,(e=>(e.success||(C(),t.fetchUserData()),e)),(e=>(console.error("[Budgets Store] deleteBudget",e),e)))}function L(e){return dt(rt.BUDGET_GRANT_ACCESS),kt.grantAccess(e,(e=>(Y(e.data.items),e)),(e=>(console.error("[Budgets Store] grantAccess",e),e)))}function D(e){return dt(rt.BUDGET_REVOKE_ACCESS),kt.revokeAccess(e,(e=>(C(),e)),(e=>(console.error("[Budgets Store] revokeAccess",e),e)))}function N(e){return dt(rt.BUDGET_ACCEPT_ACCESS),kt.acceptAccess(e,(e=>(C(),e)),(e=>(console.error("[Budgets Store] acceptAccess",e),e)))}function w(e){return dt(rt.BUDGET_DECLINE_ACCESS),kt.declineAccess(e,(e=>(C(),e)),(e=>(console.error("[Budgets Store] declineAccess",e),e)))}function O(e){return a.value&&a.value.meta.id===e.id||(c.value={},i.value={}),n.value=null,a.value=null,kt.getItem(e,(e=>{a.value=e.data.item,n.value=tt.Ay.formatDate(new Date,pt),r.value=e.data.item.meta,d.value=[],e.data.item.balances.forEach((e=>{d.value.push(e.currencyId)}))}),(e=>(n.value=tt.Ay.formatDate(new Date,pt),a.value=null,r.value=null,d.value=[],console.error("[Budgets Store] fetchBudget",e),e)))}function F(){const e=Xt();return e.userDefaultBudgetId?O({id:e.userDefaultBudgetId,date:tt.Ay.formatDate(tt.Ay.extractDate(k.value,gt),gt)}):(n.value=tt.Ay.formatDate(new Date,pt),a.value=null,new Promise(((e,t)=>{t("Budget is not selected")})))}function S(e){return dt(rt.BUDGET_FOLDER_CREATE),kt.createFolder(e,(e=>e),(t=>(console.error("[Budgets Store] createFolder",t,e),t)))}function x(e){if(!a.value||!a.value.structure)throw new Error("Budget or its properties are not available.");dt(rt.BUDGET_FOLDER_UPDATE);const t=a.value.structure.folders.find((t=>t.id===e.id));if(!t)throw new Error("Folder not found");const n=t.name;return U(e.id,e.name),kt.updateFolder(e,(e=>e),(t=>(U(e.id,n),console.error("[Budgets Store] updateFolder",t,e),t)))}function U(e,t){if(!a.value||!a.value.structure)throw new Error("Budget or its properties are not available.");a.value.structure.folders.forEach((a=>{a.id===e&&(a.name=t)})),(0,l.i9)(a)&&(a.value=Object.assign({},a.value))}function R(e,t){return dt(rt.BUDGET_FOLDER_DELETE),kt.deleteFolder(e,t,(e=>e),(e=>(console.error("[Budgets Store] deleteFolder",e),e)))}function $(e,t){if(!a.value||!a.value.meta||!a.value.structure)throw new Error("Budget or its properties are not available.");dt(rt.BUDGET_FOLDER_CHANGE_ORDER);const n=a.value.structure.folders.find((t=>t.id===e));if(!n)throw new Error("Folder not found");const o=n.position,l=j(e,t);return kt.orderFolderList({budgetId:a.value.meta.id,items:l},(t=>(t.success||j(e,o),t)),(a=>(console.error("[Budgets Store] orderFolders",a,e,t),j(e,o),a)))}function j(e,t){if(!a.value||!a.value.structure)throw new Error("Budget or its properties are not available.");const n=a.value.structure.folders,o=n.findIndex((t=>t.id===e));if(-1===o||t<0||t>=n.length)return[];const[s]=n.splice(o,1);n.splice(t,0,s);const c=[];return n.forEach(((e,t)=>{e.position!==t&&c.push({id:e.id,position:t}),e.position=t})),(0,l.i9)(a)&&(a.value=Object.assign({},a.value)),c}function Q(e){var t,n,o,l;if(dt(rt.BUDGET_UPDATE_ELEMENT_LIMIT),!(null===(n=null===(t=a.value)||void 0===t?void 0:t.structure)||void 0===n?void 0:n.elements))throw new Error("Budget structure or elements are not defined");const s=null===(l=null===(o=a.value)||void 0===o?void 0:o.structure)||void 0===l?void 0:l.elements.find((t=>t.id===e.elementId));if(!s)throw new Error("Budget element is missing");const c=B().cloneDeep(s);return s.budgeted=null===e.amount?0:e.amount,kt.setLimit(e,(e=>(e.success||(s.budgeted=c.budgeted),e)),(t=>(console.error("[Budgets Store] setLimit",t,e),s.budgeted=c.budgeted,t)))}function q(e){var t;return dt(rt.BUDGET_ENVELOPE_CREATE),null===(t=a.value)||void 0===t||t.structure.elements.push({id:e.id,type:Ct.ENVELOPE,name:e.name,icon:e.icon,isArchived:0,spent:0,budgetSpent:0,ownerUserId:Xt().userId,currencyId:e.currencyId,folderId:e.folderId,position:-1,budgeted:0,available:0,children:[]}),te(e.id,0,e.folderId),kt.createEnvelope(e,(t=>(t.success||ne(e.id),t)),(t=>(console.error("[Budgets Store] createEnvelope",t,e),ne(e.id),t)))}function z(e){var t,n,o,l;if(dt(rt.BUDGET_ENVELOPE_UPDATE),!(null===(n=null===(t=a.value)||void 0===t?void 0:t.structure)||void 0===n?void 0:n.elements))throw new Error("Budget structure or elements are not defined");const s=null===(l=null===(o=a.value)||void 0===o?void 0:o.structure)||void 0===l?void 0:l.elements.find((t=>t.id===e.id));if(!s)throw new Error("Budget element is missing");const c=B().cloneDeep(s);return B().merge(s,e),kt.updateEnvelope(e,(e=>(e.success||B().merge(s,c),e)),(t=>(console.error("[Budgets Store] updateEnvelope",t,e),B().merge(s,c),t)))}function P(e){return dt(rt.BUDGET_ENVELOPE_DELETE),kt.deleteEnvelope(e,(e=>e),(t=>(console.error("[Budgets Store] deleteEnvelope",t,e),t)))}function W(e){return dt(rt.BUDGET_ELEMENT_CHANGE_CURRENCY),kt.changeElementCurrency(e,(t=>{var n,o,l,s;if(t.success&&(null===(o=null===(n=a.value)||void 0===n?void 0:n.structure)||void 0===o?void 0:o.elements)){const t=null===(s=null===(l=a.value)||void 0===l?void 0:l.structure)||void 0===s?void 0:s.elements.find((t=>t.id===e.elementId));t&&(t.currencyId=e.currencyId)}return t}),(t=>(console.error("[Budgets Store] changeElementCurrency",t,e),t)))}function Y(a){e.value=a,t.value=tt.Ay.formatDate(new Date,pt)}function H(){return(0,Tt.A)()}function V(e){c.value[e]=!0}function X(e){delete c.value[e]}function G(e){i.value[e]=!0}function K(e){delete i.value[e]}function Z(e){let t=e;"string"===typeof e&&(t=/^\d{4}-\d{2}-\d{2}$/.test(e)?tt.Ay.extractDate(e,"YYYY-MM-DD"):tt.Ay.extractDate(e,"YYYY-MM-DD HH:mm:ss")),o.value=tt.Ay.formatDate(t,gt)}function J(e){return u.value=!0,m.value=[],kt.getTransactionList(e,(e=>{u.value=!1,m.value=e.data.items}),(e=>(u.value=!1,m.value=[],console.error("[Budgets Store] fetchTransactionList",e),e)))}function ee(e,t,n){if(dt(rt.BUDGET_CHANGE_ORDER_ELEMENT),!a.value||!a.value.meta||!a.value.meta.id)throw new Error("Budget or its properties are not available.");const o=te(e,t,n),l=o.elements.map((e=>({id:e.id,folderId:e.folderId,position:e.position})));return kt.moveElementList({budgetId:a.value.meta.id,items:l},(e=>(e.success||te(o.element.id,o.element.origin.position,o.element.origin.folderId),e)),(e=>(te(o.element.id,o.element.origin.position,o.element.origin.folderId),console.error("[Budgets Store] moveElement",e),e)))}function te(e,t,n){var o,l;if(!(null===(l=null===(o=a.value)||void 0===o?void 0:o.structure)||void 0===l?void 0:l.elements))throw new Error("Budget structure or elements are not defined");const s=B().cloneDeep(a.value.structure.elements).filter((e=>1===e.isArchived)),c=B().cloneDeep(a.value.structure.elements).filter((e=>1!==e.isArchived)),i=[],r=c.findIndex((t=>t.id===e));if(-1===r)throw new Error("Element not found");const d=c[r],u=d.folderId,m=d.position,g=c.filter((e=>e.folderId===n));return g.length>0&&g.forEach((e=>{m<t?e.position>t?e.position+=1:e.position===t&&(e.position-=1):e.position>=t&&(e.position+=1)})),d.folderId=n,d.position=t,ae(c,n),ae(c,u),c.forEach((e=>{if(!a.value)return;const t=a.value.structure.elements.find((t=>t.id===e.id));!t||t.position===e.position&&t.folderId===e.folderId||i.push(e)})),i.sort(((e,t)=>e.position-t.position)),a.value.structure.elements=[...c,...s],{element:{id:e,origin:{position:m,folderId:u},new:{position:t,folderId:n}},elements:i}}function ae(e,t){const a=e.filter((e=>e.folderId===t));if(0!==a.length){a.sort(((e,t)=>e.position-t.position));for(let e=0;e<a.length;e++){const t=a[e];t.position!==e&&(t.position=e)}return e}}function ne(e){var t,n;if(!(null===(n=null===(t=a.value)||void 0===t?void 0:t.structure)||void 0===n?void 0:n.elements))throw new Error("Budget structure or elements are not defined");const o=B().cloneDeep(a.value.structure.elements),l=o.find((t=>t.id===e));if(!l)return;const s=l.folderId,c=o.findIndex((t=>t.id===e));-1!==c&&(o.splice(c,1),ae(o,s),a.value.structure.elements=o)}return{budgets:e,budgetsLoadedAt:t,budget:a,budgetMeta:r,budgetCurrencies:d,budgetLoadedAt:n,budgetSelectedDate:o,isBudgetsLoaded:b,isBudgetLoaded:h,isBudgetLoading:p,ownBudgets:v,budgetsOrdered:f,budgetsNotAccepted:_,isBudgetAvailable:A,budgetDate:k,budgetFoldedFolders:c,budgetUnfoldedElements:i,budgetTransactionListLoading:u,budgetTransactionList:m,isBudgetTransactionListLoading:g,canUserConfigureBudget:M,canUserUpdateLimits:y,fetchBudgets:C,createBudget:E,updateBudget:I,deleteBudget:T,grantAccess:L,revokeAccess:D,acceptAccess:N,declineAccess:w,fetchBudget:O,fetchUserBudget:F,createFolder:S,updateFolder:x,deleteFolder:R,generateId:H,foldFolder:V,unfoldFolder:X,unfoldElement:G,foldElement:K,changeBudgetPeriod:Z,fetchTransactionList:J,moveElement:ee,orderFolders:$,createEnvelope:q,updateEnvelope:z,deleteEnvelope:P,setLimit:Q,changeElementCurrency:W}})),Dt=Object.assign(new ct,{getList(e,t){return e=nt(e),t=nt(t),console.log("[API] category.getList"),at.A.get(`${x.A.backendHost()}/api/v1/category/get-category-list`).then((t=>e(t.data.data))).catch((e=>t(e.response)))},create(e,t,a){return t=nt(t),a=nt(a),console.log("[API] category.create",e),at.A.post(`${x.A.backendHost()}/api/v1/category/create-category`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},update(e,t,a){return t=nt(t),a=nt(a),console.log("[API] category.update",e),at.A.post(`${x.A.backendHost()}/api/v1/category/update-category`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},orderList(e,t,a){return t=nt(t),a=nt(a),console.log("[API] category.orderList",e),at.A.post(`${x.A.backendHost()}/api/v1/category/order-category-list`,{changes:e}).then((e=>t(e.data.data))).catch((e=>a(e)))},delete(e,t,a){return t=nt(t),a=nt(a),console.log("[API] category.delete",e),at.A.post(`${x.A.backendHost()}/api/v1/category/delete-category`,{id:e,mode:"delete"}).then((e=>t(e.data))).catch((e=>a(e.response)))},replace(e,t,a,n){return a=nt(a),n=nt(n),console.log("[API] category.replace",e,t),at.A.post(`${x.A.backendHost()}/api/v1/category/delete-category`,{id:e,replaceId:t,mode:"replace"}).then((e=>a())).catch((e=>n(e.response)))},archive(e,t,a){return t=nt(t),a=nt(a),console.log("[API] category.archive",e),at.A.post(`${x.A.backendHost()}/api/v1/category/archive-category`,{id:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},unarchive(e,t,a){return t=nt(t),a=nt(a),console.log("[API] category.unarchive",e),at.A.post(`${x.A.backendHost()}/api/v1/category/unarchive-category`,{id:e}).then((e=>t(e.data))).catch((e=>a(e.response)))}});var Nt;(function(e){e[e["FALSE"]=0]="FALSE",e[e["TRUE"]=1]="TRUE"})(Nt||(Nt={}));const wt=(0,u.nY)("categories",(()=>{const e=(0,mt.Mjh)(st.cY.CATEGORIES,[]),t=(0,mt.Mjh)(st.cY.CATEGORIES_LOADED_AT,null),a=(0,s.EW)((()=>!!t.value)),n=(0,s.EW)((()=>{const t=Xt();return B().orderBy(B().filter(B().cloneDeep(e.value),{ownerUserId:t.userId}),"position","asc")})),o=(0,s.EW)((()=>B().orderBy(B().filter(B().cloneDeep(e.value),{isArchived:Nt.FALSE}),"position","asc"))),l=(0,s.EW)((()=>B().orderBy(B().filter(B().cloneDeep(e.value),{isArchived:Nt.TRUE}),"updatedAt","desc")));function c(){return Dt.getList((e=>{v(e.items)}),(e=>(console.log("[ERROR] Categories store",e),e)))}function i(t){dt(rt.CATEGORY_CREATE),t.id=(0,Tt.A)();const a=Xt(),n=B().findLast(B().filter(e.value,{ownerUserId:a.userId}),(e=>e.name.toLowerCase()===t.name.toLowerCase()));if(n)return new Promise(((e,a)=>{t.name?n&&e(n):a("Category name is empty")}));const o=Lt();return Dt.create(t,(e=>(f(e.item),o.fetchUserBudget(),e.item)),(e=>(console.log("[ERROR] Categories store",e),e)))}function r(t){dt(rt.CATEGORY_UPDATE);const a=Xt(),n=B().findLast(B().filter(e.value,{ownerUserId:a.userId}),(e=>e.name.toLowerCase()===t.name.toLowerCase()&&e.id!==t.id));return n?new Promise(((e,t)=>{t("Category already exists")})):Dt.update(t,(e=>(h(t),!!e.data)),(e=>(console.log("[ERROR] Categories store",e),e)))}function d(t){dt(rt.CATEGORY_ORDER_LIST);const a=ft(e.value,t);return a.length?Dt.orderList(a,(e=>(v(e.items),e.items)),(e=>(console.log("[ERROR] Categories store",e),e))):new Promise(((e,t)=>{t("No changes")}))}function u(e){dt(rt.CATEGORY_DELETE);const t=Lt(),a=Ut();return Dt.delete(e,(n=>!!n.data&&(a.TRANSACTIONS_CATEGORY_DELETE(e),_(e),t.fetchUserBudget(),!0)),(e=>(console.log("[ERROR] Categories store",e),e)))}function m(e){dt(rt.CATEGORY_REPLACE);const t=Lt(),a=Ut();return Dt.replace(e.oldId,e.newId,(()=>(a.TRANSACTIONS_CATEGORY_REPLACE(e),_(e.oldId),t.fetchUserBudget(),!0)),(e=>(console.log("[ERROR] Categories store",e),e)))}function g(e){dt(rt.CATEGORY_ARCHIVE);const t=Lt();return Dt.archive(e,(a=>!!a.data&&(A({id:e,isArchived:Nt.TRUE}),t.fetchUserBudget(),!0)),(e=>(console.log("[ERROR] Categories store",e),e)))}function p(e){dt(rt.CATEGORY_UNARCHIVE);const t=Lt();return Dt.unarchive(e,(a=>!!a.data&&(A({id:e,isArchived:Nt.FALSE}),t.fetchUserBudget(),!0)),(e=>(console.log("[ERROR] Categories store",e),e)))}function b(e){dt(rt.CATEGORY_CHANGE_ORDER,e);let t=B().cloneDeep(n.value);const a={};if("name"===e.type)t=B().orderBy(t,["name"],[e.direction]);else if("count"===e.type){const n=Ut();t.forEach((e=>{a[e.id]=B().filter(n.transactions,{categoryId:e.id}).length})),t=B().orderBy(t,(e=>a[e.id]),[e.direction])}const o=[];return t.forEach((e=>{o.push(e.id)})),d(o)}function v(a){e.value=a,t.value=tt.Ay.formatDate(new Date,pt)}function f(t){e.value.push(t)}function h(t){const a=B().cloneDeep(e.value);let n=B().cloneDeep(B().find(e.value,{id:t.id}));n=B().extend(n,t),B().remove(a,(e=>e.id===t.id)),a.push(n),e.value=a}function _(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t)),e.value=a}function A(t){const a=B().find(e.value,{id:t.id});a&&(a.isArchived=t.isArchived)}return{categories:e,categoriesLoadedAt:t,isCategoriesLoaded:a,ownCategories:n,categoriesOrdered:o,categoriesArchived:l,fetchCategories:c,createCategory:i,updateCategory:r,orderCategoryList:d,deleteCategory:u,replaceCategory:m,archiveCategory:g,unarchiveCategory:p,changeCategoriesSortMode:b}})),Ot=Object.assign(new ct,{getList(e,t){return e=nt(e),t=nt(t),console.log("[API] tag.getList"),at.A.get(`${x.A.backendHost()}/api/v1/tag/get-tag-list`).then((t=>e(t.data.data))).catch((e=>t(e)))},create(e,t,a){return t=nt(t),a=nt(a),console.log("[API] tag.create",e),at.A.post(`${x.A.backendHost()}/api/v1/tag/create-tag`,e).then((e=>t(e.data.data))).catch((e=>a(e)))},update(e,t,a){return t=nt(t),a=nt(a),console.log("[API] tag.update",e),at.A.post(`${x.A.backendHost()}/api/v1/tag/update-tag`,e).then((e=>t(e.data))).catch((e=>a(e)))},orderList(e,t,a){return t=nt(t),a=nt(a),console.log("[API] tag.orderList",e),at.A.post(`${x.A.backendHost()}/api/v1/tag/order-tag-list`,{changes:e}).then((e=>t(e.data.data))).catch((e=>a(e)))},delete(e,t,a){return t=nt(t),a=nt(a),console.log("[API] tag.delete",e),at.A.post(`${x.A.backendHost()}/api/v1/tag/delete-tag`,{id:e}).then((e=>t(e.data))).catch((e=>a(e)))},archive(e,t,a){return t=nt(t),a=nt(a),console.log("[API] tag.archive",e),at.A.post(`${x.A.backendHost()}/api/v1/tag/archive-tag`,{id:e}).then((e=>t(e.data))).catch((e=>a(e)))},unarchive(e,t,a){return t=nt(t),a=nt(a),console.log("[API] tag.unarchive",e),at.A.post(`${x.A.backendHost()}/api/v1/tag/unarchive-tag`,{id:e}).then((e=>t(e.data))).catch((e=>a(e)))}}),Ft=(0,u.nY)("tags",(()=>{const e=(0,mt.Mjh)(st.cY.TAGS,[]),t=(0,mt.Mjh)(st.cY.TAGS_LOADED_AT,null),a=(0,s.EW)((()=>!!t.value)),n=(0,s.EW)((()=>{const t=Xt();return B().orderBy(B().filter(B().cloneDeep(e.value),{ownerUserId:t.userId}),"position","asc")})),o=(0,s.EW)((()=>B().orderBy(B().filter(B().cloneDeep(e.value),{isArchived:Nt.FALSE}),"position","asc"))),l=(0,s.EW)((()=>B().orderBy(B().filter(B().cloneDeep(e.value),{isArchived:Nt.TRUE}),"updatedAt","desc")));function c(){return Ot.getList((e=>{b(e.items)}),(e=>e))}function i(t){dt(rt.TAG_CREATE),t.id=(0,Tt.A)();const a=Xt(),n=B().findLast(B().filter(e.value,{ownerUserId:a.userId}),(e=>e.name.toLowerCase()===t.name.toLowerCase()));if(n)return new Promise(((e,a)=>{t.name?n&&e(n):a("Tag is empty")}));const o=Lt();return Ot.create(t,(e=>(v(e.item),o.fetchUserBudget(),e.item)),(e=>e))}function r(t){dt(rt.TAG_UPDATE);const a=B().findLast(B().filter(e.value,{ownerUserId:Xt().userId}),(e=>e.name.toLowerCase()===t.name.toLowerCase()&&e.id!==t.id));return a?new Promise(((e,t)=>{t("Tag name exists")})):Ot.update(t,(e=>(f(t),!!e.data)),(e=>e))}function d(e){dt(rt.TAG_DELETE);const t=Ut(),a=Lt();return Ot.delete(e,(n=>!!n.data&&(h(e),t.TRANSACTIONS_TAG_DELETE(e),a.fetchUserBudget(),!0)),(e=>e))}function u(e){dt(rt.TAG_ARCHIVE);const t=Lt();return Ot.archive(e,(a=>!!a.data&&(_({id:e,isArchived:Nt.TRUE}),t.fetchUserBudget(),!0)),(e=>e))}function m(e){dt(rt.TAG_UNARCHIVE);const t=Lt();return Ot.unarchive(e,(a=>!!a.data&&(_({id:e,isArchived:Nt.FALSE}),t.fetchUserBudget(),!0)),(e=>e))}function g(e){dt(rt.TAG_CHANGE_ORDER,e);let t=B().cloneDeep(n.value);const a={};if("name"===e.type)t=B().orderBy(t,["name"],[e.direction]);else if("count"===e.type){const n=Ut();t.forEach((e=>{a[e.id]=B().filter(n.transactions,{tagId:e.id}).length})),t=B().orderBy(t,(e=>a[e.id]),[e.direction])}const o=[];return t.forEach((e=>{o.push(e.id)})),p(o)}function p(t){dt(rt.TAG_ORDER_LIST);const a=ft(e.value,t);return a.length?Ot.orderList(a,(e=>(b(e.items),e.items)),(e=>e)):new Promise(((e,t)=>{t("No changes")}))}function b(a){e.value=a,t.value=tt.Ay.formatDate(new Date,pt)}function v(t){t.isArchived=Nt.FALSE,e.value.push(t)}function f(t){const a=B().cloneDeep(e.value),n=B().cloneDeep(B().find(a,{id:t.id}));B().remove(a,(e=>e.id===t.id)),a.push(B().extend(n,t)),e.value=a}function h(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t)),e.value=a}function _(t){const a=B().cloneDeep(B().find(e.value,{id:t.id}));a.isArchived=t.isArchived;const n=B().cloneDeep(e.value);B().remove(n,(e=>e.id===t.id)),n.push(a),e.value=n}return{tags:e,tagsLoadedAt:t,isTagsLoaded:a,ownTags:n,tagsOrdered:o,tagsArchived:l,fetchTags:c,createTag:i,updateTag:r,deleteTag:d,archiveTag:u,unarchiveTag:m,changeTagsSortMode:g,orderTagList:p}})),St=Object.assign(new ct,{getList(e,t){return e=nt(e),t=nt(t),console.log("[API] payee.getList"),at.A.get(`${x.A.backendHost()}/api/v1/payee/get-payee-list`).then((t=>e(t.data.data))).catch((e=>t(e.response)))},create(e={},t,a){return t=nt(t),a=nt(a),console.log("[API] payee.create",e),at.A.post(`${x.A.backendHost()}/api/v1/payee/create-payee`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},update(e={},t,a){return t=nt(t),a=nt(a),console.log("[API] payee.update",e),at.A.post(`${x.A.backendHost()}/api/v1/payee/update-payee`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},orderList(e,t,a){return t=nt(t),a=nt(a),console.log("[API] payee.orderList",e),at.A.post(`${x.A.backendHost()}/api/v1/payee/order-payee-list`,{changes:e}).then((e=>t(e.data.data))).catch((e=>a(e.response)))},delete(e,t,a){return t=nt(t),a=nt(a),console.log("[API] payee.delete",e),at.A.post(`${x.A.backendHost()}/api/v1/payee/delete-payee`,{id:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},archive(e,t,a){return t=nt(t),a=nt(a),console.log("[API] payee.archive",e),at.A.post(`${x.A.backendHost()}/api/v1/payee/archive-payee`,{id:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},unarchive(e,t,a){return t=nt(t),a=nt(a),console.log("[API] payee.unarchive",e),at.A.post(`${x.A.backendHost()}/api/v1/payee/unarchive-payee`,{id:e}).then((e=>t(e.data))).catch((e=>a(e.response)))}}),xt=(0,u.nY)("payees",(()=>{const e=(0,mt.Mjh)(st.cY.PAYEES,[]),t=(0,mt.Mjh)(st.cY.PAYEES_LOADED_AT,null),a=(0,s.EW)((()=>!!t.value)),n=(0,s.EW)((()=>{const t=Xt();return B().orderBy(B().filter(B().cloneDeep(e.value),{ownerUserId:t.userId}),"position","asc")})),o=(0,s.EW)((()=>B().orderBy(B().filter(B().cloneDeep(e.value),{isArchived:Nt.FALSE}),"position","asc"))),l=(0,s.EW)((()=>B().orderBy(B().filter(B().cloneDeep(e.value),{isArchived:Nt.TRUE}),"updatedAt","desc")));function c(){return St.getList((e=>{b(e.items)}),(e=>(console.log("Payees error",e),e)))}function i(t){dt(rt.PAYEE_CREATE),t.id=(0,Tt.A)();const a=Xt(),n=B().findLast(B().filter(e.value,{ownerUserId:a.userId}),(e=>e.name.toLowerCase()===t.name.toLowerCase()));return n?new Promise(((e,a)=>{t.name?n&&e(n):a("Payee name is empty")})):St.create(t,(e=>(v(e.item),e.item)),(e=>(console.log("Payees error",e),e)))}function r(t){dt(rt.PAYEE_UPDATE);const a=Xt(),n=B().findLast(B().filter(e.value,{ownerUserId:a.userId}),(e=>e.name.toLowerCase()===t.name.toLowerCase()&&e.id!==t.id));return n?new Promise(((e,t)=>{t("Payee name exists")})):St.update(t,(()=>(f(t),t)),(e=>(console.log("Payees error",e),e)))}function d(t){dt(rt.PAYEE_ORDER_LIST);const a=ft(e.value,t);return a.length?St.orderList(a,(e=>(b(e.items),e.items)),(e=>(console.log("Payees error",e),e))):new Promise(((e,t)=>{t("No changes")}))}function u(e){dt(rt.PAYEE_DELETE);const t=Ut();return St.delete(e,(a=>!!a.data&&(h(e),t.TRANSACTIONS_PAYEE_DELETE(e),!0)),(e=>(console.log("Payees error",e),e)))}function m(e){dt(rt.PAYEE_CHANGE_ORDER,e);let t=B().cloneDeep(n.value);const a={};if("name"===e.type)t=B().orderBy(t,["name"],[e.direction]);else if("count"===e.type){const n=Ut();t.forEach((e=>{a[e.id]=B().filter(n.transactions,{payeeId:e.id}).length})),t=B().orderBy(t,(e=>a[e.id]),[e.direction])}const o=[];return t.forEach((e=>{o.push(e.id)})),d(o)}function g(e){return dt(rt.PAYEE_ARCHIVE),St.archive(e,(t=>!!t.data&&(_({id:e,isArchived:Nt.TRUE}),!0)),(e=>(console.log("Payees error",e),e)))}function p(e){return dt(rt.PAYEE_UNARCHIVE),St.unarchive(e,(t=>!!t.data&&(_({id:e,isArchived:Nt.FALSE}),!0)),(e=>(console.log("Payees error",e),e)))}function b(a){e.value=a,t.value=tt.Ay.formatDate(new Date,pt)}function v(t){e.value.push(t)}function f(t){const a=B().cloneDeep(e.value);let n=B().cloneDeep(B().find(a,{id:t.id}));n=B().extend(n,t),B().remove(a,(e=>e.id===t.id)),a.push(n),e.value=a}function h(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t)),e.value=a}function _(t){const a=B().cloneDeep(B().find(e.value,{id:t.id}));a.isArchived=t.isArchived;const n=B().cloneDeep(e.value);B().remove(n,(e=>e.id===t.id)),n.push(a),e.value=n}return{payees:e,payeesLoadedAt:t,isPayeesLoaded:a,ownPayees:n,payeesOrdered:o,payeesArchived:l,fetchPayees:c,createPayee:i,updatePayee:r,orderPayeeList:d,deletePayee:u,changePayeesSortMode:m,archivePayee:g,unarchivePayee:p}})),Ut=(0,u.nY)("transactions",(()=>{const e=(0,mt.Mjh)(st.cY.TRANSACTIONS,[]),t=(0,mt.Mjh)(st.cY.TRANSACTIONS_LOADED_AT,null),a=(0,s.EW)((()=>!!t.value)),n=(0,s.EW)((()=>{const t=wt(),a=Ft(),n=xt(),o=Rt(),l=t.categories,s=a.tags,c=n.payees,i=o.accounts,r=[];return B().orderBy(e.value,"date","desc").forEach((e=>{var t,a,n,o,d;const u=Object.assign(Object.assign({},e),{account:null,accountRecipient:null,category:null,tag:null,payee:null,search:null});u.account=null!==(t=B().find(i,{id:e.accountId}))&&void 0!==t?t:null,u.accountRecipient=null!==(a=B().find(i,{id:e.accountRecipientId}))&&void 0!==a?a:null,u.category=B().find(l,{id:e.categoryId}),u.tag=B().find(s,{id:e.tagId}),u.payee=B().find(c,{id:e.payeeId}),u.search=[e.amount,e.amountRecipient,B().toLower("@"+e.author.name),B().toLower((null===(n=u.category)||void 0===n?void 0:n.name)||""),B().toLower(e.description),B().toLower((null===(o=u.payee)||void 0===o?void 0:o.name)||""),B().toLower((null===(d=u.tag)||void 0===d?void 0:d.name)||""),"expense"===e.type?"-":"+",B().toLower(e.type),e.date].join("|"),r.push(u)})),r})),o=(0,s.EW)((()=>n.value));function l(e){dt(rt.TRANSACTION_CREATE);const t=Rt(),a=Lt();return yt.add(e,(e=>(t.updateAccounts(e.accounts),d(e.item),a.fetchUserBudget(),e.item)),(e=>(console.log("[ERROR] Transactions store",e),e)))}function c(e){dt(rt.TRANSACTION_UPDATE);const t=Rt(),a=Lt();return yt.update(e,(e=>(t.updateAccounts(e.accounts),u(e.item),a.fetchUserBudget(),e.item)),(e=>(console.log("[ERROR] Transactions store",e),e)))}function i(){return yt.getList((e=>{g(e.items)}),(e=>(console.log("[ERROR] Transactions store",e),e)))}function r(e){dt(rt.TRANSACTION_DELETE);const t=Rt(),a=Lt();return yt.delete(e,(n=>(t.updateAccounts(n.accounts),m(e),a.fetchUserBudget(),n.item)),(e=>(console.log("[ERROR] Transactions store",e),e)))}function d(t){console.log("TRANSACTION_ADDED",t),e.value.push(t)}function u(t){B().remove(e.value,(e=>e.id===t.id)),e.value.push(t)}function m(t){B().remove(e.value,(e=>e.id===t))}function g(a){e.value=a,t.value=tt.Ay.formatDate(new Date,pt)}function p(t){e.value.forEach((e=>{e.tagId===t&&(e.tagId=null)}))}function b(t){e.value.forEach((e=>{e.payeeId===t&&(e.payeeId=null)}))}function v(t){e.value.forEach((e=>{e.categoryId===t&&(e.categoryId=null)}))}function f(t){const a=B().cloneDeep(e.value);a.forEach((e=>{e.categoryId===t.oldId&&(e.categoryId=t.newId)})),e.value=a}function h(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.accountId===t)),e.value=a}return{_transactions:e,transactions:n,transactionsLoadedAt:t,isTransactionsLoaded:a,transactionsOrdered:o,createTransaction:l,updateTransaction:c,fetchTransactions:i,deleteTransaction:r,TRANSACTION_ADDED:d,TRANSACTIONS_TAG_DELETE:p,TRANSACTIONS_PAYEE_DELETE:b,TRANSACTIONS_CATEGORY_DELETE:v,TRANSACTIONS_CATEGORY_REPLACE:f,TRANSACTIONS_ACCOUNT_DELETE:h}})),Rt=(0,u.nY)("accounts",(()=>{const e=(0,mt.Mjh)(st.cY.ACCOUNTS,[]),t=(0,mt.Mjh)(st.cY.ACCOUNTS_LOADED_AT,null),a=(0,l.KR)(null),n=(0,l.KR)(null),o=(0,s.EW)((()=>!!t.value)),c=(0,s.EW)((()=>{const t=Xt();return B().orderBy(B().filter(B().cloneDeep(e.value),{owner:{id:t.userId}}),"position","asc")})),i=(0,s.EW)((()=>B().orderBy(B().cloneDeep(e.value),"position")));function r(){return vt.getList((e=>{d(e.items)}),(e=>(console.log("Accounts error",e),e)))}function d(a){e.value=a,t.value=tt.Ay.formatDate(new Date,pt)}function u(t){dt(rt.ACCOUNT_SELECT);const o=B().find(e.value,{id:t});o?(a.value=t,n.value=o.owner.id):(a.value=null,n.value=null);const l=Mt();t?l.setWorkspaceActiveArea():l.setSidebarActiveArea()}function m(e){dt(rt.ACCOUNT_CREATE);const t=Lt();return vt.create(e,(e=>{v(e.item),e.item.balance>0&&t.fetchUserBudget()}),(e=>(console.log("Accounts error",e),e)))}function g(e){dt(rt.ACCOUNT_UPDATE),e.updatedAt=tt.Ay.formatDate(new Date,pt);const t=Lt(),a=Ut();return vt.update(e,(e=>{A(e.item),e.transaction&&(a.TRANSACTION_ADDED(e.transaction),t.fetchUserBudget())}),(e=>(console.log("Accounts error",e),e)))}function p(t){return dt(rt.ACCOUNT_DELETE),vt.delete(t,(()=>{B().remove(e.value,(e=>e.id===t));const a=Ut();a.TRANSACTIONS_ACCOUNT_DELETE(t)}),(e=>(console.log("Accounts error",e),e)))}function b(t){dt(rt.ACCOUNT_ORDER_LIST);const a=ht(e.value,t,["position","folderId"]);return a.length?vt.orderList(a,(e=>(d(e.items),e.items)),(e=>(console.log("Accounts error",e),e))):new Promise(((e,t)=>{t("No changes")}))}function v(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t.id)),d([...a,t])}function f(t){e.value.forEach((e=>{e.folderId===t.id&&(e.folderId=t.replaceId)}))}function h(t){const a=B().cloneDeep(B().find(e.value,{id:t.accountId}));a&&(B().remove(a.sharedAccess,{user:{id:t.userId}}),A(a))}function _(t){const a=B().cloneDeep(B().find(e.value,{id:t.request.accountId}));if(!a)return;const n=B().find(t.connections,{user:{id:t.request.userId}});B().remove(a.sharedAccess,{user:{id:t.request.userId}}),a.sharedAccess.push({role:t.request.role,user:n.user}),A(a)}function A(t){B().remove(e.value,(e=>e.id===t.id)),e.value.push(t)}return{accounts:e,accountsLoadedAt:t,selectedAccountId:a,selectedAccountUserId:n,isAccountsLoaded:o,ownAccounts:c,accountsOrdered:i,fetchAccounts:r,selectAccount:u,createAccount:m,updateAccount:g,deleteAccount:p,orderAccountList:b,updateAccounts:d,replaceFolder:f,accessDelete:h,accessUpdate:_}})),jt=Object.assign(new ct,{getList(e,t){return e=nt(e),t=nt(t),console.log("[API] account.getFolderList"),at.A.get(`${x.A.backendHost()}/api/v1/account/get-folder-list`).then((t=>e(t.data.data))).catch((e=>t(e.response)))},create(e,t,a){return t=nt(t),a=nt(a),console.log("[API] account.createFolder",e),at.A.post(`${x.A.backendHost()}/api/v1/account/create-folder`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},update(e,t,a){return t=nt(t),a=nt(a),console.log("[API] account.updateFolder",e),at.A.post(`${x.A.backendHost()}/api/v1/account/update-folder`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},replace(e,t,a,n){return a=nt(a),n=nt(n),console.log("[API] account.replaceFolder",e,t),at.A.post(`${x.A.backendHost()}/api/v1/account/replace-folder`,{id:e,replaceId:t}).then((e=>a(e.data))).catch((e=>n(e.response)))},orderList(e,t,a){return t=nt(t),a=nt(a),console.log("[API] account.orderFolderList",e),at.A.post(`${x.A.backendHost()}/api/v1/account/order-folder-list`,{changes:e}).then((e=>t(e.data.data))).catch((e=>a(e.response)))},hide(e,t,a){return t=nt(t),a=nt(a),console.log("[API] account.hideFolder",e),at.A.post(`${x.A.backendHost()}/api/v1/account/hide-folder`,{id:e}).then((e=>t())).catch((e=>a(e.response)))},show(e,t,a){return t=nt(t),a=nt(a),console.log("[API] account.showFolder",e),at.A.post(`${x.A.backendHost()}/api/v1/account/show-folder`,{id:e}).then((e=>t())).catch((e=>a(e.response)))}});var Qt;(function(e){e[e["Hidden"]=0]="Hidden",e[e["Visible"]=1]="Visible"})(Qt||(Qt={}));var qt=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};const zt=(0,u.nY)("account-folders",(()=>{const e=(0,mt.Mjh)(st.cY.ACCOUNT_FOLDERS,[]),t=(0,mt.Mjh)(st.cY.ACCOUNT_FOLDERS_LOADED_AT,null),a=(0,mt.Mjh)(st.cY.ACCOUNT_FOLDERS_OPENED,{}),n=(0,s.EW)((()=>!!t.value)),o=(0,s.EW)((()=>{const t=B().orderBy(B().cloneDeep(e.value),"position","asc");return t.forEach((e=>{var t;e.opened=null===(t=a.value[e.id])||void 0===t||t})),t}));function l(){return qt(this,void 0,void 0,(function*(){return jt.getList((e=>(b(e.items),e.items)),(e=>(console.log("AccountFolders error",e),e)))}))}function c(e){dt(rt.ACCOUNT_FOLDER_EXPAND),a.value[e]=!0}function i(e){dt(rt.ACCOUNT_FOLDER_COLLAPSE),a.value[e]=!1}function r(t){dt(rt.ACCOUNT_FOLDER_UPDATE);const a=B().findLast(e.value,(e=>e.name.toLowerCase()===t.name.toLowerCase()&&e.id!==t.id));if(a)throw new Error("Folder already exists");return jt.update(t,(e=>(f(e.item),e.item)),(e=>(console.log("AccountFolders error",e),e)))}function d(t){dt(rt.ACCOUNT_FOLDER_CREATE);const a=B().findLast(e.value,(e=>e.name.toLowerCase()===t.name.toLowerCase()));if(a)throw new Error("Folder already exists");return jt.create(t,(e=>(v(e.item),e.item)),(e=>(console.log("AccountFolders error",e),e)))}function u(e){dt(rt.ACCOUNT_FOLDER_REPLACE);const t=Rt();return jt.replace(e.id,e.replaceId,(a=>!!a.data&&(h(e.id),t.replaceFolder(e),!0)),(e=>(console.log("AccountFolders error",e),e)))}function m(t){dt(rt.ACCOUNT_FOLDER_ORDER_LIST);const a=ft(e.value,t);if(!a.length)throw new Error("No changes");return jt.orderList(a,(e=>(b(e.items),e.items)),(e=>(console.log("AccountFolders error",e),e)))}function g(e){return dt(rt.ACCOUNT_FOLDER_HIDE),jt.hide(e.id,(()=>(_(e.id),!0)),(e=>(console.log("AccountFolders error",e),e)))}function p(e){return dt(rt.ACCOUNT_FOLDER_SHOW),jt.show(e.id,(()=>(A(e.id),!0)),(e=>(console.log("AccountFolders error",e),e)))}function b(n){e.value=n,t.value=tt.Ay.formatDate(new Date,pt);const o={};e.value.forEach((e=>{B().isBoolean(a.value[e.id])?o[e.id]=a.value[e.id]:o[e.id]=!0})),a.value=o}function v(t){e.value.push(t)}function f(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t.id)),a.push(t),e.value=a}function h(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t)),e.value=a}function _(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t));const n=B().cloneDeep(B().find(e.value,{id:t}));if(!n)throw new Error("Folder not found");n.isVisible=0,a.push(n),e.value=a}function A(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t));const n=B().cloneDeep(B().find(e.value,{id:t}));if(!n)throw new Error("Folder not found");n.isVisible=Qt.Visible,a.push(n),e.value=a}return{accountFolders:e,accountFoldersLoadedAt:t,accountFoldersOpened:a,isAccountFoldersLoaded:n,accountFoldersOrdered:o,fetchAccountFolders:l,openAccountFolder:c,closeAccountFolder:i,updateAccountFolder:r,createAccountFolder:d,replaceAccountFolder:u,orderAccountFolderList:m,hideAccountFolder:g,showAccountFolder:p}})),Pt=(0,u.nY)("currency-rates",(()=>{const e=(0,mt.Mjh)(st.cY.CURRENCY_RATES,[]),t=(0,mt.Mjh)(st.cY.CURRENCY_RATES_LOADED_AT,null),a=(0,s.EW)((()=>!!t.value));function n(){return ut.getCurrencyRatesList({},(a=>{e.value=a.data.items,t.value=tt.Ay.formatDate(new Date,pt)}),(e=>(console.log("fetchCurrencyRates error",e),!1)))}return{currencyRates:e,currencyRatesLoadedAt:t,isCurrencyRatesLoaded:a,fetchCurrencyRates:n}})),Wt=Object.assign(new ct,{getConnectionList(e,t,a){return t=nt(t),a=nt(a),console.log("[API] connection.getUserList",e),at.A.get(`${x.A.backendHost()}/api/v1/connection/get-connection-list`).then((e=>t(e.data))).catch((e=>a(e.response)))},generateInvite(e,t){return e=nt(e),t=nt(t),console.log("[API] connection.generateInvite"),at.A.post(`${x.A.backendHost()}/api/v1/connection/generate-invite`).then((t=>e(t.data))).catch((e=>t(e.response)))},deleteInvite(e,t){return e=nt(e),t=nt(t),console.log("[API] connection.deleteInvite"),at.A.post(`${x.A.backendHost()}/api/v1/connection/delete-invite`).then((t=>e(t.data))).catch((e=>t(e.response)))},acceptInvite(e,t,a){return t=nt(t),a=nt(a),console.log("[API] connection.acceptInvite",e),at.A.post(`${x.A.backendHost()}/api/v1/connection/accept-invite`,{code:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},deleteConnection(e,t,a){return t=nt(t),a=nt(a),console.log("[API] connection.delete",e),at.A.post(`${x.A.backendHost()}/api/v1/connection/delete-connection`,{id:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},setAccountAccess(e,t,a){return t=nt(t),a=nt(a),console.log("[API] connection.setAccountAccess",e),at.A.post(`${x.A.backendHost()}/api/v1/connection/set-account-access`,{userId:e.userId,accountId:e.accountId,role:e.role}).then((e=>t(e.data))).catch((e=>a(e.response)))},revokeAccountAccess(e,t,a){return t=nt(t),a=nt(a),console.log("[API] connection.revokeAccountAccess",e),at.A.post(`${x.A.backendHost()}/api/v1/connection/revoke-account-access`,{userId:e.userId,accountId:e.accountId}).then((e=>t(e.data))).catch((e=>a(e.response)))}});var Yt=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};const Bt=(0,u.nY)("connections",(()=>{const e=(0,mt.Mjh)(st.cY.CONNECTIONS,[]),t=(0,mt.Mjh)(st.cY.CONNECTIONS_LOADED_AT,null),a=(0,s.EW)((()=>!!t.value));function n(){return Yt(this,void 0,void 0,(function*(){return Wt.getConnectionList({},(e=>{u(e.data.items)}),((e={})=>e))}))}function o(){return Yt(this,void 0,void 0,(function*(){return dt(rt.CONNECTION_GENERATE_INVITE),Wt.generateInvite((e=>e.data.item||!1),((e={})=>e))}))}function l(){return Yt(this,void 0,void 0,(function*(){return dt(rt.CONNECTION_DELETE_INVITE),Wt.deleteInvite((e=>!!e.data),((e={})=>e))}))}function c(e){return Yt(this,void 0,void 0,(function*(){return dt(rt.CONNECTION_ACCEPT_INVITE),Wt.acceptInvite(e,(e=>(u(e.data.items),!!e.data)),((e={})=>e))}))}function i(e){return Yt(this,void 0,void 0,(function*(){return dt(rt.CONNECTION_DELETE),Wt.deleteConnection(e,(t=>(m(e),!!t.data)),((e={})=>e))}))}function r(t){return Yt(this,void 0,void 0,(function*(){dt(rt.CONNECTION_UPDATE_ACCOUNT_ACCESS);const a=Rt();return Wt.setAccountAccess(t,(n=>(a.accessUpdate({request:t,connections:e.value}),!!n.data)),((e={})=>e))}))}function d(e){return Yt(this,void 0,void 0,(function*(){dt(rt.CONNECTION_REVOKE_ACCOUNT_ACCESS);const t=Rt();return Wt.revokeAccountAccess(e,(a=>(t.accessDelete(e),!!a.data)),((e={})=>e))}))}function u(a){e.value=a,t.value=tt.Ay.formatDate(new Date,pt)}function m(t){B().remove(e.value,(e=>e.user.id===t))}return{connections:e,connectionsLoadedAt:t,isConnectionsLoaded:a,fetchConnections:n,generateConnectionInvite:o,deleteConnectionInvite:l,acceptConnectionInvite:c,deleteConnection:i,setAccountAccess:r,revokeAccountAccess:d}})),Ht=(0,u.nY)("sync",(()=>{const e=(0,l.KR)(!1),t=(0,s.EW)((()=>e)),a=(0,s.EW)((()=>zt().isAccountFoldersLoaded&&Rt().isAccountsLoaded&&wt().isCategoriesLoaded&&Ft().isTagsLoaded&&xt().isPayeesLoaded&&Lt().isBudgetsLoaded&&bt().isCurrenciesLoaded&&Pt().isCurrencyRatesLoaded&&Bt().isConnectionsLoaded&&Xt().isUserDataLoaded&&Ut().isTransactionsLoaded));function n(){return c(),Promise.all([wt().fetchCategories(),Ft().fetchTags(),xt().fetchPayees(),zt().fetchAccountFolders(),Rt().fetchAccounts(),Ut().fetchTransactions(),bt().fetchCurrencies(),Pt().fetchCurrencyRates(),Bt().fetchConnections(),Lt().fetchBudgets(),Xt().fetchUserData().then((()=>{Lt().fetchUserBudget()}))]).then((()=>{e.value=!0}))}function o(){const e=[{updatedAt:Xt().userDataLoadedAt,timeout:{minutes:24},update:()=>{Xt().fetchUserData()}},{updatedAt:zt().accountFoldersLoadedAt,timeout:{minutes:10},update:()=>{zt().fetchAccountFolders()}},{updatedAt:Rt().accountsLoadedAt,timeout:{minutes:10},update:()=>{Rt().fetchAccounts()}},{updatedAt:wt().categoriesLoadedAt,timeout:{minutes:10},update:()=>{wt().fetchCategories()}},{updatedAt:Ft().tagsLoadedAt,timeout:{minutes:10},update:()=>{Ft().fetchTags()}},{updatedAt:xt().payeesLoadedAt,timeout:{minutes:10},update:()=>{xt().fetchPayees()}},{updatedAt:Ut().transactionsLoadedAt,timeout:{minutes:10},update:()=>{Ut().fetchTransactions()}},{updatedAt:bt().currenciesLoadedAt,timeout:{hours:24},update:()=>{bt().fetchCurrencies()}},{updatedAt:Pt().currencyRatesLoadedAt,timeout:{hours:24},update:()=>{Pt().fetchCurrencyRates()}},{updatedAt:Bt().connectionsLoadedAt,timeout:{minutes:10},update:()=>{Bt().fetchConnections()}},{updatedAt:Lt().budgetsLoadedAt,timeout:{minutes:10},update:()=>{Lt().fetchBudgets()}},{updatedAt:Lt().budgetLoadedAt,timeout:{minutes:10},update:()=>{Lt().fetchUserBudget()}}],t=new Date;e.forEach((e=>{let a=!1;if(e.updatedAt){const n=tt.Ay.addToDate(tt.Ay.extractDate(e.updatedAt,pt),e.timeout);a=t>n}else a=!0;a&&e.update()}))}function c(){const t=Object.assign({},st.cY);for(const e in t)t.hasOwnProperty(e)&&"string"===typeof t[e]&&(0,st.Ai)(t[e]);e.value=!1}return{initialSync:e,isInitialSynced:t,isFullyLoaded:a,fetchAll:n,fetchUpdates:o,clearCache:c}}));var Vt;(function(e){e["CURRENCY"]="currency",e["REPORT_PERIOD"]="report_period",e["BUDGET"]="budget"})(Vt||(Vt={}));const Xt=(0,u.nY)("users",(()=>{const e=(0,l.KR)(null),t=(0,mt.Mjh)(st.cY.USER_DATA,null,{serializer:mt.dbR.object}),a=(0,mt.Mjh)(st.cY.USER_DATA_LOADED_AT,null),n=(0,s.EW)((()=>!!a.value&&!!t.value)),o=(0,s.EW)((()=>(0,st.y0)())),c=(0,s.EW)((()=>{var e;return(null===(e=t.value)||void 0===e?void 0:e.id)||null})),i=(0,s.EW)((()=>{var e;return(null===(e=t.value)||void 0===e?void 0:e.avatar)||null})),r=(0,s.EW)((()=>{var e;return(null===(e=t.value)||void 0===e?void 0:e.name)||null})),d=(0,s.EW)((()=>t.value&&t.value.email||null)),u=(0,s.EW)((()=>{let e=null;const a=bt();return t.value?(t.value.options.forEach((t=>{t.name===Vt.CURRENCY&&a.currencies.forEach((a=>{a.code!==t.value||(e=a)}))})),e):null})),m=(0,s.EW)((()=>{let e=null;return t.value?(t.value.options.forEach((t=>{if(t.name===Vt.REPORT_PERIOD)return e=t.value,!1})),e):null})),g=(0,s.EW)((()=>{let e=null;return t.value?(t.value.options.forEach((t=>{if(t.name===Vt.BUDGET)return e=t.value,!1})),e):null}));function p(e,t){return it.login(e,t,(e=>(console.log("[INFO] login",e),!!e.token&&(dt(rt.USER_LOGIN),C(e.token),I(e.user),!0))),(e=>{throw console.log("[ERROR] login",e),e}))}function b(e){return dt(rt.USER_REGISTRATION),it.register(e.email,e.password,e.name,(e=>!(!e.data||!e.data.user)&&(E(e.data.user),e.data.user)),(e=>(console.log("[ERROR] register",e),e)))}function v(){return dt(rt.USER_LOGOUT),T(),it.logout((()=>!0),(e=>(console.log("[ERROR] logout",e),e)))}function f(e){return dt(rt.USER_UPDATE_NAME),it.updateName(e,(e=>(e.data.user&&I(e.data.user),!!e.data)),(e=>(console.log("[ERROR] userUpdateName",e),e)))}function h(e){return dt(rt.USER_UPDATE_PASSWORD),it.updatePassword(e.oldPassword,e.newPassword,(e=>e),(e=>(console.log("[ERROR] userUpdatePassword",e),e)))}function _(e){return dt(rt.USER_UPDATE_CURRENCY),it.updateCurrency(e.currency,(e=>(e.data.user&&I(e.data.user),!!e.data)),(e=>(console.log("[ERROR] userUpdateCurrency",e),e)))}function A(){return it.getUserData((e=>(I(e),!0)),(e=>(console.log("[ERROR] fetchUserData",e),e)))}function M(e){return dt(rt.USER_UPDATE_DEFAULT_BUDGET),it.updateDefaultBudget(e,(e=>(e.data.user&&I(e.data.user),!!e.data)),(e=>(console.log("[ERROR] userUpdateDefaultBudget",e),e)))}function y(e){return dt(rt.USER_REMIND_PASSWORD),it.remindPassword(e,(()=>!0),(e=>(console.log("[ERROR] userRemindPassword",e),e)))}function k(e){return dt(rt.USER_RESET_PASSWORD),it.resetPassword(e,(e=>!!e.data),(e=>(console.log("[ERROR] userResetPassword",e),e)))}function C(t){(0,st.WG)(t),e.value=t}function E(e){t.value=e,a.value=tt.Ay.formatDate(new Date,pt)}function I(e){t.value=B().cloneDeep(e),a.value=tt.Ay.formatDate(new Date,pt)}function T(){(0,st.eF)(),e.value=null,Ht().clearCache()}return{token:e,userData:t,userDataLoadedAt:a,isUserDataLoaded:n,isUserAuthenticated:o,userId:c,userAvatar:i,userName:r,userLogin:d,userCurrency:u,userReportPeriod:m,userDefaultBudgetId:g,login:p,register:b,logout:v,userUpdateName:f,userUpdatePassword:h,userUpdateCurrency:_,fetchUserData:A,userUpdateDefaultBudget:M,userRemindPassword:y,userResetPassword:k}})),Gt=(0,u.nY)("transaction-modal",(()=>{const e=(0,l.KR)(!1),t=(0,l.KR)(!1),a=(0,l.KR)(null),n=(0,l.KR)(null),o=(0,l.KR)(null),c=(0,l.KR)(null),i=(0,l.KR)(null),r=(0,l.KR)(null),d=(0,l.KR)(null),u=(0,l.KR)(null),m=(0,l.KR)(null),g=(0,l.KR)(null),p=(0,l.KR)(null),b=(0,l.KR)(null),v=(0,l.KR)(null),f=(0,s.EW)((()=>e.value)),h=(0,s.EW)((()=>t.value));function _(l){var s;dt(rt.UI_MODAL_TRANSACTION_OPEN,{type:l.id?"edit":"create"});const f={};f.id=l.id||(0,Tt.A)(),f.isNew=!l.id,f.date=l.date||tt.Ay.formatDate(Date.now(),pt),f.type=l.type||"expense";const h=Rt();f.accountId=l.accountId||h.selectedAccountId,f.accountId&&(f.userId=(null===(s=B().find(h.accountsOrdered,{id:f.accountId}))||void 0===s?void 0:s.owner.id)||null),f.accountRecipientId=l.accountRecipientId||null,f.amount=l.amount||null,f.amountRecipient=l.amountRecipient||null,f.categoryId=l.categoryId||null,f.description=l.description||"",f.payeeId=l.payeeId||null,f.tagId=l.tagId||null,t.value=!0,e.value=f.isNew,a.value=f.id,n.value=f.date,o.value=f.type,i.value=f.accountId,c.value=f.userId,r.value=f.accountRecipientId,d.value=f.amount,u.value=f.amountRecipient,m.value=f.categoryId,g.value=f.description,p.value=f.payeeId,b.value=f.tagId,v.value=null}function A(){dt(rt.UI_MODAL_TRANSACTION_CLOSE),t.value=!1,v.value=null,c.value=null,n.value=null,o.value=null,i.value=null,r.value=null}function M(e){dt(rt.UI_MODAL_TRANSACTION_CHANGE_TYPE,{type:e}),o.value=e}function y(e){dt(rt.UI_MODAL_TRANSACTION_CHANGE_ACCOUNT),i.value=e}function k(e){dt(rt.UI_MODAL_TRANSACTION_CHANGE_ACCOUNT_RECIPIENT),r.value=e}function C(e){dt(rt.UI_MODAL_TRANSACTION_CHANGE_AMOUNT),d.value=e}function E(e){dt(rt.UI_MODAL_TRANSACTION_CHANGE_AMOUNT_RECIPIENT),u.value=e}function I(e){dt(rt.UI_MODAL_TRANSACTION_CHANGE_CATEGORY),m.value=e}function T(e){dt(rt.UI_MODAL_TRANSACTION_CHANGE_DESCRIPTION),g.value=e}function L(e){dt(rt.UI_MODAL_TRANSACTION_CHANGE_PAYEE),p.value=e}function D(e){dt(rt.UI_MODAL_TRANSACTION_CHANGE_TAG),b.value=e}function N(e){dt(rt.UI_MODAL_TRANSACTION_CHANGE_DATE),n.value=e}function w(e){v.value=e}return{transactionModalNew:e,transactionModalOpened:t,transactionModalId:a,transactionModalOpenDate:n,transactionModalType:o,transactionModalUserId:c,transactionModalAccountId:i,transactionModalAccountRecipientId:r,transactionModalAmount:d,transactionModalAmountRecipient:u,transactionModalCategoryId:m,transactionModalDescription:g,transactionModalPayeeId:p,transactionModalTagId:b,transactionModalSwitchAccount:v,isTransactionModalCreation:f,isTransactionModalOpened:h,openTransactionModal:_,closeTransactionModal:A,changeTransactionModalType:M,changeTransactionModalAccount:y,changeTransactionModalAccountRecipient:k,changeTransactionModalAmount:C,changeTransactionModalAmountRecipient:E,changeTransactionModalCategory:I,changeTransactionModalDescription:T,changeTransactionModalPayee:L,changeTransactionModalTag:D,changeTransactionModalOpenDate:N,changeTransactionModalSwitchAccount:w}})),Kt={class:"calculator-container-widget"};function Zt(e,t,a,o,l,c){return(0,s.uX)(),(0,s.CE)("div",Kt,[(0,s.Lk)("button",{tabindex:"-1",onClick:t[0]||(t[0]=(0,n.D$)((t=>e.update("+")),["prevent"]))},"+"),(0,s.Lk)("button",{tabindex:"-1",onClick:t[1]||(t[1]=(0,n.D$)((t=>e.update("-")),["prevent"]))},""),(0,s.Lk)("button",{tabindex:"-1",onClick:t[2]||(t[2]=(0,n.D$)((t=>e.update("*")),["prevent"]))},""),(0,s.Lk)("button",{tabindex:"-1",onClick:t[3]||(t[3]=(0,n.D$)((t=>e.update("/")),["prevent"]))},""),(0,s.Lk)("button",{tabindex:"-1",onClick:t[4]||(t[4]=(0,n.D$)((t=>e.update("=")),["prevent"]))},"=")])}const Jt=(0,s.pM)({props:["value"],methods:{update:function(e){let t=this.value.toString();this.$emit("update",t+e)}}}),ea=(0,$.A)(Jt,[["render",Zt]]),ta=ea,aa=(0,s.pM)({components:{CalculatorWidget:ta},mixins:[Te,Ve,et],data(){return{categorySearchFilter:"",tagSearchFilter:"",payeeSearchFilter:"",isAddTag:!1,tag:"",customTags:null}},computed:{...(0,u.aH)(Xt,["userId"]),...(0,u.aH)(Pt,["currencyRates"]),...(0,u.aH)(Ft,["tags"]),...(0,u.aH)(wt,["categoriesOrdered"]),...(0,u.aH)(Gt,["isTransactionModalOpened","isTransactionModalCreation","transactionModalOpenDate","transactionModalAccountId","transactionModalAmount","transactionModalAccountRecipientId","transactionModalAmountRecipient","transactionModalCategoryId","transactionModalDescription","transactionModalPayeeId","transactionModalTagId","transactionModalType","transactionModalId"]),...(0,u.aH)(Gt,{accountOwnerId:"transactionModalUserId"}),...(0,u.aH)(Rt,{accounts:"accountsOrdered"}),...(0,u.aH)(xt,{availablePayees:"payeesOrdered"}),...(0,u.aH)(Ft,{availableTags:"tagsOrdered"}),...(0,u.aH)(zt,{folders:"accountFoldersOrdered"}),isModalOpened:{get(){return this.isTransactionModalOpened},set(e){e?Gt().openTransactionModal({type:this.transactionType}):Gt().closeTransactionModal()}},transactionDate:{get(){const e=tt.Ay.extractDate(this.transactionModalOpenDate,"YYYY-MM-DD HH:mm:ss");return tt.Ay.formatDate(e,"YYYY-MM-DD")},set(e){const t=tt.Ay.extractDate(e,"YYYY-MM-DD");Gt().changeTransactionModalOpenDate(tt.Ay.formatDate(t,"YYYY-MM-DD HH:mm:ss"))}},transactionType:{get(){return this.transactionModalType},set(e){this.$refs.transactionForm&&this.$refs.transactionForm.resetValidation(),Gt().changeTransactionModalType(e),Gt().changeTransactionModalCategory(null),this.calculateAmountRecipient(this.amount)}},account:{get(){const e=B().find(this.accounts,{id:this.transactionModalAccountId});return{name:e.name,label:this.moneyFormat(e.balance,e.currency.symbol),value:this.transactionModalAccountId,icon:e.icon,currencySign:e.currency.symbol,currencyId:e.currency.id}},set(e){Gt().changeTransactionModalAccount(e.value),this.isTransactionModalCreation&&this.calculateAmountRecipient(this.amount)}},accountRecipient:{get(){const e=B().find(this.accounts,{id:this.transactionModalAccountRecipientId});return e?{label:e.name+" - "+this.moneyFormat(e.balance,e.currency.symbol),value:this.transactionModalAccountRecipientId,icon:e.icon,currencySign:e.currency.symbol,currencyId:e.currency.id}:null},set(e){Gt().changeTransactionModalAccountRecipient(e.value),this.calculateAmountRecipient(this.amount)}},amount:{get(){return this.transactionModalAmount},set(e){e=(0,Xe.o2)(e),(0,Xe.NF)(e)?(e=(0,Xe.w9)(e),Gt().changeTransactionModalAmount(e),this.calculateAmountRecipient(e)):Gt().changeTransactionModalAmount(e)}},amountRecipient:{get(){return this.transactionModalAmountRecipient},set(e){Gt().changeTransactionModalAmountRecipient(e)}},category:{get(){const e=B().find(this.categories,{id:this.transactionModalCategoryId});return e?{label:e.name,value:e.id,icon:e.icon}:null},set(e){Gt().changeTransactionModalCategory(e?e.value:null)}},description:{get(){return this.transactionModalDescription},set(e){Gt().changeTransactionModalDescription(e)}},payee:{get(){const e=B().find(this.payees,{id:this.transactionModalPayeeId});return e?{label:e.name,value:e.id}:null},set(e){Gt().changeTransactionModalPayee(e?e.value:null)}},accountsOptions:function(){let e=[],t={};return this.folders.forEach((e=>{t[e.id]=!!e.isVisible})),this.accounts.forEach((a=>{this.isTransactionModalCreation&&!t[a.folderId]||e.push({label:a.name+" - "+this.moneyFormat(a.balance,a.currency.symbol),value:a.id,icon:a.icon,currencySign:a.currency.symbol})})),e},categoriesOptions:function(){let e=[];return this.categories.forEach((t=>{(!this.categorySearchFilter||t.name.toLowerCase().indexOf(this.categorySearchFilter)>-1)&&e.push({label:t.name,value:t.id,icon:t.icon})})),e},tagsOptions:function(){let e=[];return B().filter(this.tags,{ownerUserId:this.accountOwnerId}).forEach((t=>{(!this.tagSearchFilter||t.name.toLowerCase().indexOf(this.tagSearchFilter)>-1)&&e.push({label:t.name,value:t.id})})),e},payeesOptions:function(){let e=[];return this.payees.forEach((t=>{(!this.payeeSearchFilter||t.name.toLowerCase().indexOf(this.payeeSearchFilter)>-1)&&e.push({label:t.name,value:t.id})})),e},isTransfer:function(){return"transfer"===this.transactionModalType},isExpense:function(){return"expense"===this.transactionModalType},categories:function(){return B().filter(this.categoriesOrdered,{type:this.transactionType,ownerUserId:this.accountOwnerId})},payees:function(){return B().filter(this.availablePayees,{ownerUserId:this.accountOwnerId})},accountOwnerTags:{get(){if(this.customTags)return this.customTags;let e=B().filter(this.availableTags,{isArchived:0,ownerUserId:this.accountOwnerId});if(this.transactionModalTagId){let t=!!B().findLast(e,{id:this.transactionModalTagId});if(!t){const t=B().find(this.tags,{id:this.transactionModalTagId});t&&e.push(t)}}return e},set(e){this.customTags=e}},canChangeAccountData:function(){if(!this.transactionModalAccountId)return!1;const e=B().find(this.accounts,{id:this.transactionModalAccountId});if(e.owner.id===this.userId)return!0;let t=!1;return e.sharedAccess.forEach((e=>{e.user?.id===this.userId&&"admin"===e.role&&(t=!0)})),t}},methods:{calculateAmountRecipient:function(e){this.amountRecipient=this.accountRecipient?this.convert(e,this.account,this.accountRecipient):e},convert:function(e,t,a){return this.exchange(this.currencyRates,e,t.currencyId,a.currencyId)},createCategory:function(e,t){this.canChangeAccountData?this.isValidCategoryName(e)&&wt().createCategory({name:e,type:this.transactionModalType,accountId:this.transactionModalAccountId}).then((e=>{Gt().changeTransactionModalCategory(e.id),t({label:e.name,value:e.id,icon:e.icon})})):t()},filterCategories:function(e,t){t((()=>{this.categorySearchFilter=e.toLowerCase()}))},filterCategoriesAbort:function(){this.categorySearchFilter=""},filterTags:function(e,t){t((()=>{this.tagSearchFilter=e.toLowerCase()}))},filterTagsAbort:function(){this.tagSearchFilter=""},createPayee:function(e,t){this.canChangeAccountData?this.isValidPayeeName(e)&&xt().createPayee({name:e,accountId:this.transactionModalAccountId}).then((e=>{console.log(e),Gt().changeTransactionModalPayee(e.id),t({label:e.name,value:e.id})})):t()},filterPayees:function(e,t){t((()=>{this.payeeSearchFilter=e.toLowerCase()}))},filterPayeesAbort:function(){this.payeeSearchFilter=""},selectTag:function(e){this.transactionModalTagId===e&&(e=null),Gt().changeTransactionModalTag(e)},createTagFromSelect:function(e,t){this.canChangeAccountData?this.isValidTagName(e)&&Ft().createTag({name:e,accountId:this.transactionModalAccountId}).then((e=>{this.selectTag(e.id),t({label:e.name,value:e.id}),this.closeAddTagModal()})):t()},createNewTag:function(){if(!this.canChangeAccountData)return done(),void this.closeAddTagModal();this.closeAddTagModal();const e=B().find(this.tags,{id:this.tag.value});if(B().find(this.accountOwnerTags,{id:e.id}))this.selectTag(e.id);else if(e){let t=B().cloneDeep(this.accountOwnerTags);t.push(e),this.accountOwnerTags=t,this.selectTag(e.id)}else Ft().createTag({name:this.tag.label,accountId:this.transactionModalAccountId}).then((e=>{Gt().changeTransactionModalTag(e.id)}))},submit:function(){const e={id:this.transactionModalId,type:this.transactionModalType,amount:this.transactionModalAmount,amountRecipient:this.transactionModalAmountRecipient,accountId:this.transactionModalAccountId,accountRecipientId:this.transactionModalAccountRecipientId,categoryId:this.transactionModalCategoryId,description:this.transactionModalDescription||"",payeeId:this.transactionModalPayeeId,tagId:this.transactionModalTagId,date:this.transactionModalOpenDate};this.isTransactionModalCreation?Ut().createTransaction(e).then((()=>{this.closeModal(),"transfer"===e.type&&Gt().changeTransactionModalSwitchAccount(e.accountRecipientId)})):Ut().updateTransaction(e).then((()=>{this.closeModal()}))},closeModal:function(){this.$refs.transactionForm&&this.$refs.transactionForm.resetValidation(),this.categorySearchFilter="",this.tagSearchFilter="",this.payeeSearchFilter="",this.tag="",this.customTags=null,Gt().closeTransactionModal()},openAddTagModal(){this.isAddTag=!0},closeAddTagModal(){this.isAddTag=!1},swapAccounts(){if(this.account&&this.accountRecipient){const e=this.account;this.account=this.accountRecipient,this.accountRecipient=e}else this.account&&!this.accountRecipient?(this.accountRecipient=B().cloneDeep(this.account),this.account=null):!this.account&&this.accountRecipient&&(this.account=B().cloneDeep(this.accountRecipient),this.accountRecipient=null)},previousDay(){const e=tt.Ay.subtractFromDate(tt.Ay.extractDate(this.transactionDate,"YYYY-MM-DD"),{hours:24});this.transactionDate=tt.Ay.formatDate(e,"YYYY-MM-DD")}}});var na=a(3316),oa=a(9200),la=a(4189),sa=a(9270),ca=a(492),ia=a(8975),ra=a(8670),da=a(6939),ua=a(4940),ma=a(3952),ga=a(2669),pa=a(8672);const ba=(0,$.A)(aa,[["render",He]]),va=ba;z()(aa,"components",{QDialog:j.A,QCard:na.A,QForm:oa.A,QCardSection:la.A,QInput:sa.A,QIcon:ca.A,QPopupProxy:ia.A,QDate:ra.A,QBtn:Q.A,QBtnToggle:da.A,QSelect:ua.A,QAvatar:ma.A,QCardActions:ga.A}),z()(aa,"directives",{ClosePopup:pa.A});const fa={class:"settings-toolbar-mobile"},ha={key:0,class:"settings-toolbar-mobile-title"},_a={key:1,class:"settings-toolbar-mobile-title"},Aa={key:0,class:"responsive-modal-header"},Ma={class:"responsive-modal-control"},ya={class:"responsive-modal-control-icon"},ka={class:"responsive-modal-control"},Ca={class:"responsive-modal-control"},Ea={class:"responsive-modal-icon-label"};function Ia(e,t,a,n,o,l){const c=(0,s.g2)("q-icon"),i=(0,s.g2)("q-input"),r=(0,s.g2)("q-select"),d=(0,s.g2)("q-card-section"),u=(0,s.g2)("q-btn"),m=(0,s.g2)("q-carousel-slide"),g=(0,s.g2)("q-carousel"),p=(0,s.g2)("q-card-actions"),v=(0,s.g2)("q-form"),f=(0,s.g2)("q-card"),h=(0,s.g2)("q-dialog"),_=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,s.bF)(h,{class:"responsive-modal",modelValue:e.isModalOpened,"onUpdate:modelValue":t[4]||(t[4]=t=>e.isModalOpened=t)},{default:(0,s.k6)((()=>[(0,s.bF)(f,{class:"responsive-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(v,{ref:"accountForm",onSubmit:e.submit,onReset:e.closeModal,class:"responsive-modal-form"},{default:(0,s.k6)((()=>[(0,s.bF)(d,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",fa,[(0,s.Lk)("div",null,[e.isAccountModalCreation?((0,s.uX)(),(0,s.CE)("h4",ha,(0,b.v_)(e.$t("modals.account.create_form.header")),1)):((0,s.uX)(),(0,s.CE)("h4",_a,(0,b.v_)(e.$t("modals.account.update_form.header")),1))])]),e.isAccountModalCreation?((0,s.uX)(),(0,s.CE)("div",Aa,(0,b.v_)(e.$t("modals.account.create_form.header")),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",Ma,[(0,s.bF)(i,{class:"form-input full-width",outlined:"",placeholder:e.$t("elements.form.account.name.placeholder"),modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t),label:e.$t("elements.form.account.name.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.account.name.validation.required_field"),t=>e.isValidAccountName(t)||e.$t("elements.form.account.name.validation.invalid_name")],maxlength:"18"},{before:(0,s.k6)((()=>[(0,s.Lk)("div",ya,[(0,s.bF)(c,{class:"responsive-modal-control-icon-img",name:e.icon},null,8,["name"])])])),_:1},8,["placeholder","modelValue","label","rules"])]),(0,s.Lk)("div",ka,[(0,s.bF)(i,{class:"responsive-modal-control-input",modelValue:e.balance,"onUpdate:modelValue":t[1]||(t[1]=t=>e.balance=t),inputmode:"decimal","lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.account.balance.validation.required_field"),t=>e.isValidNumber(t)||e.$t("elements.form.account.balance.validation.invalid_number")],step:"0.01",label:e.$t("elements.form.account.balance.label"),placeholder:e.$t("elements.form.account.balance.placeholder")},null,8,["modelValue","rules","label","placeholder"])]),(0,s.Lk)("div",Ca,[(0,s.bF)(r,{class:"form-select",outlined:"",modelValue:e.currency,"onUpdate:modelValue":t[2]||(t[2]=t=>e.currency=t),"use-input":"",options:e.currenciesOptions,label:e.$t("elements.form.account.currency.label"),readonly:!e.isAccountModalCreation,onFilter:e.filterCurrencies,onFilterAbort:e.filterCurrenciesAbort},null,8,["modelValue","options","label","readonly","onFilter","onFilterAbort"])])])),_:1}),(0,s.bF)(d,{class:"responsive-modal-section-icon"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ea,(0,b.v_)(e.$t("modals.account.form.icon.label")),1),(0,s.bF)(g,{swipeable:"",animated:"",navigation:"",infinite:"",modelValue:e.iconScreen,"onUpdate:modelValue":t[3]||(t[3]=t=>e.iconScreen=t),"control-color":"purple-5",class:"responsive-modal-icon-carousel"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.iconGroups,((t,a)=>((0,s.uX)(),(0,s.Wv)(m,{name:"icons-"+a,class:"responsive-modal-icon",key:a},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t,(t=>((0,s.uX)(),(0,s.Wv)(u,{class:(0,b.C4)(["responsive-modal-icon-btn",e.icon===t?"-active":""]),icon:t,key:t,onClick:a=>e.icon=t},null,8,["class","icon","onClick"])))),128))])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,s.bF)(p,{class:"responsive-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(u,{class:"econumo-btn -medium -grey responsive-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClose:e.closeModal},null,8,["label","onClose"]),[[_]]),e.isAccountModalCreation?((0,s.uX)(),(0,s.Wv)(u,{key:0,class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.add.label"),type:"submit"},null,8,["label"])):((0,s.uX)(),(0,s.Wv)(u,{key:1,class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.update.label"),type:"submit"},null,8,["label"]))])),_:1})])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1},8,["modelValue"])])}const Ta=["home","account_balance","wallet","savings","credit_card","account_balance_wallet","shopping_cart","shopping_bag","shopping_basket","store","bar_chart","change_history","all_inclusive","support","extension","stars","alarm","celebration","fingerprint","question_mark","lightbulb","event","lock","warning","schedule","calendar_month","visibility","account_circle","medical_information","health_and_safety","credit_score","loyalty","favorite","delete","assistant_navigation","face","payments","currency_exchange","qr_code","receipt","redeem","currency_bitcoin","euro","currency_yen","currency_pound","currency_ruble","currency_lira","currency_yuan","currency_franc","trolley","location_on","map","explore","restaurant","flag","my_location","local_mall","near_me","restaurant_menu","handyman","medical_services","home_work","layers","local_activity","emergency","fastfood","navigation","local_parking","home_repair_service","local_hospital","local_police","local_florist","park","theater_comedy","local_drink","local_pizza","not_listed_location","local_post_office","wine_bar","signpost","church","local_laundry_service","ev_station","soup_kitchen","pest_control","local_pharmacy","castle","set_meal","folder","menu_book","cloud","newspaper","book","tag","functions","imagesearch_roller","mic","videocam","music_note","movie","speed","local_shipping","directions_car","flight","directions_run","flight_takeoff","directions_bus","train","directions_bike","airport_shuttle","pedal_bike","directions_boat","agriculture","local_taxi","sailing","electric_car","commute","motorcycle","tram","subway","electric_bike","snowmobile","school","construction","engineering","volunteer_activism","science","sports_esports","cake","self_improvement","sports_soccer","water","hiking","sports_basketball","theaters","sports_tennis","nights_stay","sports_gymnastics","backpack","sports_motorsports","surfing","sports_kabaddi","piano","sports_volleyball","sports_baseball","sports_martial_arts","downhill_skiing","kayaking","phishing","sports_football","skateboarding","sports_golf","sports_cricket","roller_skating","kitesurfing","rowing","scuba_diving","paragliding","snowboarding","sports_hockey","ice_skating","snowshoeing","sports_rugby","sledding","phone_iphone","print","computer","desktop_windows","headphones","mouse","watch","smart_toy","power","android","battery_6_bar","security","vpn_key","apartment","location_city","fitness_center","spa","cottage","hotel","beach_access","local_bar","luggage","casino","airplane_ticket","room_service","nightlife","local_dining","icecream","smoking_rooms","carpenter","car_repair","house","bed","chair","electric_bolt","child_care","checkroom","grass","king_bed","weekend","bedroom_baby","crib","iron","umbrella","tools_power_drill","paid","supervisor_account","trending_up","euro_symbol","front_hand","real_estate_agent","lunch_dining","local_airport","star","villa","desktop_mac","time_to_leave","mode_edit","factory","festival","sentiment_satisfied_alt","emoji_events","child_friendly"],La=B().uniq(Ta).slice(0,45);function Da(e,t){const a=B().uniq(Ta),n=[],o=e*t;for(let e=0;e<a.length;e+=o)n.push(a.slice(e,e+o));return n}const Na=La[0],wa=La[0],Oa=La[0],Fa=(0,u.nY)("account-modal",(()=>{const e=(0,l.KR)(!1),t=(0,l.KR)([]),a=(0,l.KR)(null),n=(0,l.KR)({}),o=(0,l.KR)(!1),c=(0,l.KR)(!1),i=(0,l.KR)(null),r=(0,l.KR)(null),d=(0,l.KR)(null),u=(0,l.KR)(null),m=(0,l.KR)(null),g=(0,l.KR)(null),p=(0,s.EW)((()=>c.value)),b=(0,s.EW)((()=>o.value));function v(e){var t,a,n,o,l,s,c;dt(rt.UI_MODAL_ACCOUNT_OPEN);const i={};i.isNew=!e.id,i.id=e.id||(0,Tt.A)(),i.name=null!==(t=e.name)&&void 0!==t?t:"",e.currency?i.currencyId=null!==(n=null===(a=e.currency)||void 0===a?void 0:a.id)&&void 0!==n?n:null:e.currencyId&&(i.currencyId=null!==(o=e.currencyId)&&void 0!==o?o:null),i.balance=null!==(l=e.balance)&&void 0!==l?l:0,i.icon=null!==(s=e.icon)&&void 0!==s?s:Na,i.folderId=null!==(c=e.folderId)&&void 0!==c?c:null,y(i)}function f(){dt(rt.UI_MODAL_ACCOUNT_CLOSE),k()}function h(e){dt(rt.UI_MODAL_ACCOUNT_CHANGE_NAME),r.value=e}function _(e){dt(rt.UI_MODAL_ACCOUNT_CHANGE_BALANCE),d.value=e}function A(e){dt(rt.UI_MODAL_ACCOUNT_CHANGE_CURRENCY),u.value=e}function M(e){dt(rt.UI_MODAL_ACCOUNT_CHANGE_ICON),m.value=e}function y(e){o.value=!0,c.value=e.isNew,i.value=e.id,r.value=e.name,d.value=e.balance,u.value=e.currencyId,m.value=e.icon,g.value=e.folderId}function k(){o.value=!1,i.value=null,r.value=null,d.value=null,u.value=null,m.value=null,g.value=null}return{accountFoldersLoaded:e,accountFolders:t,accountFoldersLoadedAt:a,accountFoldersOpened:n,accountModalOpened:o,accountModalNew:c,accountModalId:i,accountModalName:r,accountModalBalance:d,accountModalCurrencyId:u,accountModalIcon:m,accountModalFolderId:g,isAccountModalCreation:p,isAccountModalOpened:b,openAccountModal:v,closeAccountModal:f,changeAccountModalName:h,changeAccountModalBalance:_,changeAccountModalCurrencyId:A,changeAccountModalIcon:M}})),Sa=(0,s.pM)({mixins:[Te,et],data(){return{currencySearchFilter:"",iconScreen:"icons-0"}},computed:{...(0,u.aH)(Fa,["isAccountModalCreation","isAccountModalOpened","accountModalId","accountModalName","accountModalBalance","accountModalCurrencyId","accountModalIcon","accountModalFolderId"]),...(0,u.aH)(bt,["currencies"]),...(0,u.aH)(Bt,["connections"]),icons:function(){return La},iconGroups:function(){return Da(6,8)},isModalOpened:{get(){return this.isAccountModalOpened},set(e){e?Fa().openAccountModal({type:this.transactionType}):Fa().closeAccountModal()}},name:{get(){return this.accountModalName},set(e){Fa().changeAccountModalName(e)}},balance:{get(){return this.accountModalBalance},set(e){Fa().changeAccountModalBalance(e)}},icon:{get(){return this.accountModalIcon},set(e){Fa().changeAccountModalIcon(e)}},currency:{get(){const e=B().find(this.currencies,{id:this.accountModalCurrencyId});return e?{label:e.code,value:e.id,sign:e.symbol}:null},set(e){Fa().changeAccountModalCurrencyId(e?e.value:null)}},currenciesOptions:function(){let e=[];return this.currencies.forEach((t=>{(!this.currencySearchFilter||t.name.toLowerCase().indexOf(this.currencySearchFilter)>-1||t.symbol.toLowerCase().indexOf(this.currencySearchFilter)>-1||t.code.toLowerCase().indexOf(this.currencySearchFilter)>-1)&&e.push({label:t.name+" ("+t.symbol+")",value:t.id,symbol:t.symbol,code:t.code})})),e}},methods:{submit:function(){let e={id:this.accountModalId??null,name:this.name,balance:this.balance,icon:this.icon};this.isAccountModalCreation?(e.folderId=this.accountModalFolderId,e.currencyId=this.currency.value,Rt().createAccount(e).then((()=>{this.closeModal()}))):Rt().updateAccount(e).then((()=>{this.closeModal()}))},closeModal:function(){this.$refs.accountForm&&this.$refs.accountForm.resetValidation(),Fa().closeAccountModal()},deleteAccount:function(){Rt().deleteAccount(this.id).then((()=>{this.closeModal()}))},filterCurrencies:function(e,t){t((()=>{this.currencySearchFilter=e.toLowerCase()}))},filterCurrenciesAbort:function(){this.currencySearchFilter=""}}});var xa=a(3454),Ua=a(8951);const Ra=(0,$.A)(Sa,[["render",Ia]]),$a=Ra;z()(Sa,"components",{QDialog:j.A,QCard:na.A,QForm:oa.A,QCardSection:la.A,QInput:sa.A,QIcon:ca.A,QSelect:ua.A,QCarousel:xa.A,QCarouselSlide:Ua.A,QBtn:Q.A,QCardActions:ga.A}),z()(Sa,"directives",{ClosePopup:pa.A});const ja={class:"econumo-modal spinner-modal"},Qa={class:"spinner-modal-title"};function qa(e,t,a,n,o,l){const c=(0,s.g2)("q-spinner"),i=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(i,{"model-value":!0,persistent:"",minimized:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ja,[(0,s.bF)(c,{class:"econumo-spinner"}),(0,s.Lk)("div",Qa,(0,b.v_)(e.headerLabel),1)])])),_:1})}const za=(0,s.pM)({props:["headerLabel"],methods:{close:function(){this.$emit("close")}}});var Pa=a(564);const Wa=(0,$.A)(za,[["render",qa]]),Ya=Wa;var Ba;function Ha(){return"one"===Ba.CLOUD?Ba.CLOUD:"one"===Ba.FAMILY?Ba.FAMILY:Ba.ONE}function Va(){return"one"===Ba.CLOUD}function Xa(){return"one"!==Ba.ONE}z()(za,"components",{QDialog:j.A,QSpinner:Pa.A}),function(e){e["ONE"]="one",e["FAMILY"]="family",e["CLOUD"]="cloud"}(Ba||(Ba={}));const Ga={edition:Ha(),includesConnections:Va(),includesSharedAccess:Xa()},Ka=(0,s.pM)({components:{TransactionModal:va,AccountModal:$a,LoadingModal:Ya},mixins:[Te,Ve],data(){return{seamless:!0}},created(){Mt().setSidebarActiveArea(),Ht().fetchUpdates(),document.addEventListener("visibilitychange",(()=>{Ht().fetchUpdates()}))},computed:{...(0,u.aH)(Xt,["userAvatar","userName","userLogin","userCurrency"]),...(0,u.aH)(Rt,["selectedAccountId","selectedAccountUserId","accountsLoadedAt"]),...(0,u.aH)(Pt,["currencyRates"]),...(0,u.aH)(Mt,["activeArea"]),...(0,u.aH)(Gt,["transactionModalSwitchAccount"]),...(0,u.aH)(Ht,["isFullyLoaded","isInitialSynced"]),...(0,u.aH)(Rt,{accounts:"accountsOrdered"}),...(0,u.aH)(zt,{folders:"accountFoldersOrdered"}),selectedAccount:function(){return B().find(this.accounts,{id:this.selectedAccountId})},websiteUrl:function(){return(0,x.$)()},econumoEdition:function(){return Ga.edition},accountsTree:function(){let e=[],t=[],a=0;return this.folders.forEach((t=>{if(!t.isVisible)return;let a={folder:t,accounts:[],amount:0,currency:this.userCurrency,amountAccountCurrency:0,accountCurrency:null};this.accounts.forEach((e=>{if(e.folderId===t.id){if(a.accounts.push(e),a.amount+=this.convert(e.balance,e.currency.id),null===a.accountCurrency&&(a.accountCurrency=e.currency),!1===a.accountCurrency)return;a.accountCurrency.id===e.currency.id?a.amountAccountCurrency+=e.balance:(a.accountCurrency=!1,a.amountAccountCurrency=0)}})),!1!==a.accountCurrency&&(a.amount=a.amountAccountCurrency,a.currency=a.accountCurrency),a.accounts.length>0&&e.push(a)})),this.accounts.forEach((e=>{e.folderId||(t.push(e),a+=this.convert(e.balance,e.currency.id))})),t.length&&e.push({folder:{id:0,name:this.$t("elements.folders.default_folder"),position:this.folders-1,opened:!0},accounts:t,amount:a,currency:this.userCurrency}),e}},methods:{...(0,u.i0)(zt,["openAccountFolder","closeAccountFolder"]),openBudget:function(){this.openPage("budget","budget")},openPage:function(e,t){this.$q.screen.gt.md?this.$router.push({name:e}):this.$router.push({name:t}),Rt().selectAccount({id:null}),Mt().setWorkspaceActiveArea()},selectAccount:function(e){Rt().selectAccount(e),this.$router.push({name:"account",params:{id:e}}),Gt().changeTransactionModalSwitchAccount(null)},openSettings:function(){this.openPage("settings","settings")},openAnalytics:function(){this.openPage("analytics","analytics")},sync:function(){Ht().fetchAll()},refresh:function(e){Ht().fetchAll().finally((()=>{e()}))},openCreateAccountModal:function(){Fa().openAccountModal({folderId:this.folders[0].id})},convert:function(e,t){return this.exchange(this.currencyRates,e,t,this.userCurrency.id)},getAccountName(e){let t=B().find(this.accounts,{id:e});return t?t.name:""},closeModalSwitchAccount(){Gt().changeTransactionModalSwitchAccount(null)}}});var Za=a(8095),Ja=a(3999),en=a(8858),tn=a(124),an=a(5173),nn=a(3676);const on=(0,$.A)(Ka,[["render",Ie]]),ln=on;z()(Ka,"components",{QLayout:X.A,QPullToRefresh:Za.A,QAvatar:ma.A,QList:Ja.A,QExpansionItem:en.A,QItem:tn.A,QItemSection:an.A,QIcon:ca.A,QPageContainer:G.A,QDialog:j.A,QCard:na.A,QCardSection:la.A,QSpace:nn.A,QBtn:Q.A});const sn={class:"form-container full-width column wrap justify-center items-center content-center"},cn={class:"form-checkbox-group"},rn={class:"form-btn-container"},dn={class:"econumo-modal form-fail-modal"},un={class:"form-fail-modal-title"},mn={class:"form-fail-modal-description"},gn={class:"form-fail-modal-button"},pn={class:"econumo-modal recovery-modal"},bn={class:"recovery-modal-title"},vn={class:"recovery-modal-description"},fn={class:"recovery-modal-input"},hn={key:0,class:"recovery-modal-description"},_n={key:1,class:"recovery-modal-input"},An={key:2,class:"recovery-modal-input"};function Mn(e,t,a,o,l,c){const i=(0,s.g2)("q-input"),r=(0,s.g2)("q-checkbox"),d=(0,s.g2)("q-btn"),u=(0,s.g2)("q-form"),m=(0,s.g2)("loading-modal"),g=(0,s.g2)("self-hosted-info-modal"),p=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",sn,[(0,s.bF)(u,{onSubmit:c.submit,class:"full-width"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{outlined:"",class:"form-input full-width",placeholder:e.$t("elements.form.user.email.placeholder"),type:"email",modelValue:l.username,"onUpdate:modelValue":t[0]||(t[0]=e=>l.username=e),label:e.$t("elements.form.user.email.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.user.email.validation.required_field"),t=>e.isValidEmail(t)||e.$t("elements.form.user.email.validation.invalid_email")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.bF)(i,{outlined:"",class:"form-input full-width",placeholder:e.$t("elements.form.user.password.placeholder"),type:"password",modelValue:l.password,"onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),label:e.$t("elements.form.user.password.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.user.password.validation.required_field")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.Lk)("div",cn,[(0,s.bF)(r,{class:"form-checkbox full-width",modelValue:l.selfHosted,"onUpdate:modelValue":t[2]||(t[2]=e=>l.selfHosted=e),label:e.$t("elements.form.user.server_host.self_hosted")},null,8,["modelValue","label"]),(0,s.Lk)("div",{onClick:t[3]||(t[3]=t=>e.openSelfHostedInfoModal()),class:"form-checkbox-hint"})]),(0,s.bo)((0,s.bF)(i,{outlined:"",class:"form-input full-width",placeholder:e.$t("elements.form.user.server_host.placeholder"),type:"url",modelValue:l.host,"onUpdate:modelValue":t[4]||(t[4]=e=>l.host=e),label:e.$t("elements.form.user.server_host.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.user.server_host.validation.required_field"),t=>e.isValidHttpUrl(t)||e.$t("elements.form.user.server_host.validation.invalid_url")]},null,8,["placeholder","modelValue","label","rules"]),[[n.aG,l.selfHosted]]),(0,s.Lk)("div",rn,[(0,s.bF)(d,{class:"econumo-btn -large -yellow full-width",label:e.$t("pages.login.form.action.login"),type:"submit",flat:""},null,8,["label"])]),(0,s.Lk)("div",null,[(0,s.bF)(d,{class:"econumo-btn -large -grey full-width",label:e.$t("pages.login.form.action.forget_password"),type:"button",onClick:c.openModalRecovery,flat:""},null,8,["label","onClick"])])])),_:1},8,["onSubmit"])]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.isLoadingModalOpened?((0,s.uX)(),(0,s.Wv)(m,{key:0,onClose:t[5]||(t[5]=t=>e.closeLoadingModal()),"header-label":e.$t("pages.login.dialog.authorization.label")},null,8,["header-label"])):(0,s.Q3)("",!0),e.isSelfHostedInfoModalOpened?((0,s.uX)(),(0,s.Wv)(g,{key:1,onCancel:e.closeSelfHostedInfoModal},null,8,["onCancel"])):(0,s.Q3)("",!0),(0,s.bF)(p,{modelValue:l.isFailLogin,"onUpdate:modelValue":t[6]||(t[6]=e=>l.isFailLogin=e),minimized:"",onHide:c.closeModalFail},{default:(0,s.k6)((()=>[(0,s.Lk)("div",dn,[(0,s.Lk)("div",un,(0,b.v_)(e.$t("pages.login.dialog.login_failed.header")),1),(0,s.Lk)("div",mn,(0,b.v_)(e.$t("pages.login.dialog.login_failed.information")),1),(0,s.Lk)("div",gn,[(0,s.bF)(d,{class:"econumo-btn -small -yellow full-width",label:e.$t("elements.button.ok.label"),type:"button",onClick:c.closeModalFail,flat:""},null,8,["label","onClick"])])])])),_:1},8,["modelValue","onHide"]),(0,s.bF)(p,{modelValue:l.isRecovery,"onUpdate:modelValue":t[10]||(t[10]=e=>l.isRecovery=e),minimized:"",onHide:c.closeModalRecovery},{default:(0,s.k6)((()=>[(0,s.Lk)("div",pn,[(0,s.Lk)("div",bn,(0,b.v_)(e.$t("pages.login.access_recovery.header")),1),(0,s.Lk)("div",vn,(0,b.v_)(e.$t("pages.login.access_recovery.information")),1),(0,s.Lk)("div",fn,[(0,s.bF)(i,{class:"form-input -narrow full-width",outlined:"",modelValue:l.recovery,"onUpdate:modelValue":t[7]||(t[7]=e=>l.recovery=e),disable:l.isCodeSent,autofocus:!l.isCodeSent,type:"email",label:e.$t("elements.form.user.email.placeholder"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.user.email.validation.required_field"),t=>e.isValidEmail(t)||e.$t("elements.form.user.email.validation.invalid_email")]},null,8,["modelValue","disable","autofocus","label","rules"])]),l.isCodeSent?((0,s.uX)(),(0,s.CE)("div",hn,(0,b.v_)(e.$t("pages.login.access_recovery.instruction")),1)):(0,s.Q3)("",!0),l.isCodeSent?((0,s.uX)(),(0,s.CE)("div",_n,[(0,s.bF)(i,{class:"form-input -narrow full-width",outlined:"",modelValue:l.recoveryCode,"onUpdate:modelValue":t[8]||(t[8]=e=>l.recoveryCode=e),type:"text",autofocus:l.isCodeSent,label:e.$t("elements.form.user.code.placeholder"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.user.code.validation.required_field"),t=>e.isValidRecoveryCode(t)||e.$t("elements.form.user.code.validation.invalid_code")]},null,8,["modelValue","autofocus","label","rules"])])):(0,s.Q3)("",!0),l.isCodeSent?((0,s.uX)(),(0,s.CE)("div",An,[(0,s.bF)(i,{class:"form-input -narrow full-width",outlined:"",modelValue:l.newPassword,"onUpdate:modelValue":t[9]||(t[9]=e=>l.newPassword=e),type:"password",label:e.$t("elements.form.user.password.placeholder"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.user.password.validation.required_field"),t=>e.isValidPassword(t)||e.$t("elements.form.user.password.validation.invalid_password")]},null,8,["modelValue","label","rules"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",null,[l.isCodeSent?((0,s.uX)(),(0,s.Wv)(d,{key:1,class:"econumo-btn -small -yellow full-width recovery-modal-button",label:e.$t("pages.login.access_recovery.action.change_password.label"),type:"button",onClick:c.resetPassword,flat:""},null,8,["label","onClick"])):((0,s.uX)(),(0,s.Wv)(d,{key:0,class:"econumo-btn -small -yellow full-width recovery-modal-button",label:e.$t("pages.login.access_recovery.action.recover.label"),type:"button",onClick:c.sendRecoveryCode,flat:""},null,8,["label","onClick"]))])])])),_:1},8,["modelValue","onHide"])]))],64)}const yn={data(){return{isLoadingModalOpened:!1}},methods:{openLoadingModal(){this.isLoadingModalOpened=!0},closeLoadingModal(){this.isLoadingModalOpened=!1}}},kn={class:"econumo-modal form-hint-modal"},Cn={class:"form-hint-modal-text"},En={class:"form-hint-modal-button"};function In(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(i,{"model-value":!0,minimized:"",onHide:e.close},{default:(0,s.k6)((()=>[(0,s.Lk)("div",kn,[(0,s.Lk)("div",Cn,(0,b.v_)(e.$t("modals.self_hosted.information")),1),(0,s.Lk)("div",En,[(0,s.bF)(c,{class:"econumo-btn -small -yellow full-width",label:e.$t("elements.button.ok.label"),type:"button",onClick:e.close,flat:""},null,8,["label","onClick"])])])])),_:1},8,["onHide"])}const Tn=(0,s.pM)({methods:{close:function(){this.$emit("cancel")}}}),Ln=(0,$.A)(Tn,[["render",In]]),Dn=Ln;z()(Tn,"components",{QDialog:j.A,QBtn:Q.A});const Nn={data(){return{isSelfHostedInfoModalOpened:!1}},methods:{openSelfHostedInfoModal(){this.isSelfHostedInfoModalOpened=!0},closeSelfHostedInfoModal(){this.isSelfHostedInfoModalOpened=!1}}},wn={name:"LoginPage",components:{LoadingModal:Ya,SelfHostedInfoModal:Dn},mixins:[et,Nn,yn],data(){return{isFailLogin:!1,isRecovery:!1,isCodeSent:!1,selfHosted:!1,recovery:"",recoveryCode:"",newPassword:"",host:"",username:"",password:""}},created(){this.selfHosted=x.A.selfHosted(),this.host=x.A.backendHost(),this.username=""},mounted(){this.isUserAuthenticated()&&this.$router.push({name:"home"})},watch:{host:function(e){x.A.backendHost(e)},selfHosted:function(e){x.A.selfHosted(e)}},computed:{...(0,u.aH)(Xt,["userLogin"])},methods:{...(0,u.aH)(Xt,["isUserAuthenticated"]),openModalFail(){this.isFailLogin=!0},closeModalFail(){this.isFailLogin=!1},openModalRecovery(){this.isRecovery=!0},closeModalRecovery(){this.isRecovery=!1,this.isCodeSent=!1,this.recovery="",this.recoveryCode="",this.newPassword=""},sendRecoveryCode(){Xt().userRemindPassword(this.recovery).finally((()=>{this.isCodeSent=!0}))},resetPassword(){return Xt().userResetPassword({username:this.recovery,code:this.recoveryCode,password:this.newPassword}).then((e=>{!0===e&&this.closeModalRecovery()}))},submit:function(){return this.openLoadingModal(),Xt().login(this.username,this.password).then((e=>{e?window.location="/":this.openModalFail()})).catch((()=>{this.openModalFail()})).finally((()=>{this.closeLoadingModal()}))}}};var On=a(460);const Fn=(0,$.A)(wn,[["render",Mn]]),Sn=Fn;z()(wn,"components",{QForm:oa.A,QInput:sa.A,QCheckbox:On.A,QBtn:Q.A,QDialog:j.A});const xn={class:"fullscreen"};function Un(e,t,a,n,o,l){return(0,s.uX)(),(0,s.CE)("div",xn,"")}const Rn={name:"LogoutPage",mounted(){Xt().logout().finally((()=>{window.location.href="/"}))}},$n=(0,$.A)(Rn,[["render",Un]]),jn=$n,Qn={class:"account column"},qn={class:"account-toolbar-mobile"},zn={class:"account-toolbar-mobile-head"},Pn={class:"account-toolbar-mobile-head-title"},Wn={class:"account-toolbar-mobile-balance"},Yn={class:"account-toolbar-mobile-balance-container"},Bn={class:"account-toolbar-mobile-balance-currency"},Hn={key:0,class:"account-toolbar-mobile-balance-shared"},Vn=["src"],Xn=["src"],Gn={class:"account-toolbar-mobile-search"},Kn={class:"account-toolbar-desktop"},Zn={class:"account-toolbar-desktop-head"},Jn={class:"account-toolbar-desktop-head-title"},eo={class:"account-toolbar-desktop-currency"},to={class:"account-toolbar-desktop-currency-balance"},ao={class:"account-toolbar-desktop-currency-balance-check"},no={key:0,class:"account-toolbar-desktop-currency-shared"},oo=["src","alt","title"],lo=["src","title","alt"],so={class:"account-toolbar-desktop-control"},co={key:0},io={class:"account-transactions-item-container"},ro={class:"account-transactions-item-info"},uo={class:"account-transactions-item-info-avatar"},mo=["src","title","alt"],go={class:"account-transactions-item-info-description"},po={key:0,class:"account-transactions-item-info-description-category"},bo={key:1,class:"account-transactions-item-info-description-category"},vo={class:"account-transactions-item-info-description-note"},fo={class:"account-transactions-item-wrapper"},ho={class:"account-transactions-item-tags -desktop"},_o={class:"account-transactions-item-tags-block"},Ao={key:0,class:"account-transactions-item-tags-payee"},Mo={class:"account-transactions-item-check"},yo={class:"account-transactions-item-check-currency"},ko={class:"account-transactions-item-tags -mobile"},Co={class:"account-transactions-item-tags-block"},Eo={key:0,class:"account-transactions-item-tags-payee"},Io={key:0,class:"account-transactions-add-mobile"};function To(e,t,a,o,l,c){const i=(0,s.g2)("q-btn"),r=(0,s.g2)("q-icon"),d=(0,s.g2)("q-avatar"),u=(0,s.g2)("q-input"),m=(0,s.g2)("q-item-label"),g=(0,s.g2)("q-badge"),p=(0,s.g2)("q-item-section"),v=(0,s.g2)("q-item"),f=(0,s.g2)("q-list"),h=(0,s.g2)("q-menu"),_=(0,s.g2)("q-virtual-scroll"),A=(0,s.g2)("loading-modal"),M=(0,s.g2)("account-modal"),y=(0,s.g2)("confirmation-dialog-modal"),k=(0,s.g2)("view-transaction-modal"),C=(0,s.g2)("q-page");return e.account?((0,s.uX)(),(0,s.Wv)(C,{key:0},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Qn,[(0,s.Lk)("div",qn,[(0,s.Lk)("div",zn,[(0,s.Lk)("div",null,[(0,s.bF)(i,{class:"account-toolbar-mobile-head-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("home",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",Pn,(0,b.v_)(e.account.name),1)]),(0,s.Lk)("div",null,[e.canUpdateAccountSettings?((0,s.uX)(),(0,s.Wv)(i,{key:0,class:"account-toolbar-mobile-head-button",flat:"",icon:"settings",onClick:t[1]||(t[1]=t=>e.openAccountSettingsModal())})):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Wn,[(0,s.Lk)("div",Yn,[(0,s.bF)(r,{class:"account-toolbar-mobile-balance-icon",name:e.account.icon},null,8,["name"]),(0,s.Lk)("span",Bn,(0,b.v_)(e.moneyFormat(e.account.balance,e.account.currency.symbol)),1)]),e.account.sharedAccess.length>0?((0,s.uX)(),(0,s.CE)("div",Hn,[(0,s.bF)(d,{class:"account-toolbar-mobile-balance-shared-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.account.owner.avatar+"?s=30"},null,8,Vn)])),_:1}),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.account.sharedAccess,(e=>((0,s.uX)(),(0,s.Wv)(d,{class:"account-toolbar-mobile-balance-shared-avatar",key:e.user.id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.user.avatar+"?s=30"},null,8,Xn)])),_:2},1024)))),128))])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Gn,[(0,s.bF)(u,{class:"form-input -narrow full-width",outlined:"",modelValue:e.search,"onUpdate:modelValue":t[2]||(t[2]=t=>e.search=t),label:e.$t("pages.account.toolbar.search")},null,8,["modelValue","label"])])]),(0,s.Lk)("div",Kn,[(0,s.Lk)("div",Zn,[(0,s.Lk)("h4",Jn,[(0,s.eW)((0,b.v_)(e.account.name)+" ",1),(0,s.bF)(r,{class:"account-toolbar-desktop-head-icon",name:e.account.icon},null,8,["name"])])]),(0,s.Lk)("div",eo,[(0,s.Lk)("div",to,[(0,s.Lk)("div",ao,(0,b.v_)(e.moneyFormat(e.account.balance,e.account.currency.symbol)),1),e.account.sharedAccess.length>0?((0,s.uX)(),(0,s.CE)("div",no,[(0,s.bF)(d,{class:"account-toolbar-desktop-currency-shared-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.account.owner.avatar+"?s=30",alt:e.account.owner.name,title:e.account.owner.name},null,8,oo)])),_:1}),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.account.sharedAccess,(e=>((0,s.uX)(),(0,s.Wv)(d,{class:"account-toolbar-desktop-currency-shared-avatar",key:e.user.id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.user.avatar+"?s=30",title:e.user.name,alt:e.user.name},null,8,lo)])),_:2},1024)))),128))])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,[e.canUpdateAccountSettings?((0,s.uX)(),(0,s.CE)("a",{key:0,class:"account-toolbar-desktop-currency-settings",href:"",onClick:t[3]||(t[3]=(0,n.D$)(((...t)=>e.openAccountSettingsModal&&e.openAccountSettingsModal(...t)),["prevent"]))},(0,b.v_)(e.$t("pages.account.toolbar.settings")),1)):(0,s.Q3)("",!0)])])]),(0,s.Lk)("div",so,[e.canChangeTransaction?((0,s.uX)(),(0,s.CE)("div",co,[(0,s.bF)(i,{class:"econumo-btn -small -magenta account-toolbar-desktop-control-btn",flat:"",label:e.$t("pages.account.transaction_list.action.add_transaction"),onClick:t[4]||(t[4]=t=>e.openCreateTransactionModal())},null,8,["label"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",null,[(0,s.bF)(u,{class:"form-input -narrow account-toolbar-desktop-control-search",outlined:"",modelValue:e.search,"onUpdate:modelValue":t[5]||(t[5]=t=>e.search=t),label:e.$t("pages.account.toolbar.search")},null,8,["modelValue","label"])])]),(0,s.bF)(_,{class:"account-transactions",items:e.accountTransactionsDailyList,ref:"transactionList"},{default:(0,s.k6)((({item:t})=>[t.isSeparator?((0,s.uX)(),(0,s.Wv)(m,{class:"account-transactions-date",header:"",key:t.id},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.Lk)("span",{class:"account-transactions-date-content"},(0,b.v_)(e.$t("pages.account.transaction_list."+t.alias)),513),[[n.aG,"none"!==t.alias]]),(0,s.bo)((0,s.Lk)("span",{class:"account-transactions-date-content"},(0,b.v_)(t.date),513),[[n.aG,"none"===t.alias]])])),_:2},1024)):((0,s.uX)(),(0,s.Wv)(v,{class:(0,b.C4)("account-transactions-item "+(t.isInFuture?"account-transactions-item-future":"")),key:t.id,clickable:e.$q.screen.lt.lg,onClick:a=>e.openPreviewTransactionModal(t.id)},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"account-transactions-item-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",io,[(0,s.Lk)("div",ro,[(0,s.Lk)("div",uo,[(0,s.bF)(r,{class:"account-transactions-item-info-avatar-icon",name:"transfer"===t.type?"sync_alt":t.category?.icon||"question_mark"},null,8,["name"]),e.account.sharedAccess.length>0?((0,s.uX)(),(0,s.Wv)(d,{key:0,class:"account-transactions-item-info-avatar-shared"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:t.author.avatar+"?s=30",title:t.author.name,alt:t.author.name},null,8,mo)])),_:2},1024)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",go,["transfer"!==t.type?((0,s.uX)(),(0,s.CE)("div",po,(0,b.v_)(t.category?.name||""),1)):(0,s.Q3)("",!0),"transfer"===t.type?((0,s.uX)(),(0,s.CE)("div",bo,(0,b.v_)(t.accountId!==e.selectedAccountId?e.$t("pages.account.transaction_list.item.transfer_from")+" "+(t.account?.name||e.$t("elements.account.name_hidden")):e.$t("pages.account.transaction_list.item.transfer_to")+" "+(t.accountRecipient?.name||e.$t("elements.account.name_hidden"))),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",vo,(0,b.v_)(t.description),1)])]),(0,s.Lk)("div",fo,[(0,s.Lk)("div",ho,[(0,s.Lk)("div",_o,[t.payee?((0,s.uX)(),(0,s.CE)("div",Ao,(0,b.v_)(t.payee?.name||""),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,[t.tag?((0,s.uX)(),(0,s.Wv)(g,{key:0,class:"account-transactions-item-tags-tag"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(t.tag?.name||""),1)])),_:2},1024)):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Mo,[(0,s.Lk)("span",{class:(0,b.C4)("account-transactions-item-check-income "+(e.isIncome(t)?"income-color":"expense-color"))},(0,b.v_)(e.transactionDisplayAmount(t)),3),(0,s.Lk)("span",yo,(0,b.v_)(e.account.currency.symbol),1),e.canChangeTransaction&&("transfer"!==t.type||"transfer"===t.type&&t.account&&t.accountRecipient)?((0,s.uX)(),(0,s.Wv)(i,{key:0,square:"",flat:"",icon:"more_vert",class:"account-transactions-item-check-button"},{default:(0,s.k6)((()=>[(0,s.bF)(h,{cover:"","auto-close":"",class:"account-transactions-item-check-button-menu"},{default:(0,s.k6)((()=>[(0,s.bF)(f,{class:"account-transactions-item-check-button-list"},{default:(0,s.k6)((()=>[(0,s.bF)(v,{clickable:"",onClick:a=>e.openUpdateTransactionModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:2},1032,["onClick"]),(0,s.bF)(v,{clickable:"",onClick:a=>e.openDeleteTransactionModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,s.Q3)("",!0)])])]),(0,s.Lk)("div",ko,[(0,s.Lk)("div",null,[t.tag?((0,s.uX)(),(0,s.Wv)(g,{key:0,class:"account-transactions-item-tags-tag"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(t.tag?.name||""),1)])),_:2},1024)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Co,[t.payee?((0,s.uX)(),(0,s.CE)("div",Eo,(0,b.v_)(t.payee?.name||""),1)):(0,s.Q3)("",!0)])])])),_:2},1024)])),_:2},1032,["class","clickable","onClick"]))])),_:1},8,["items"]),e.canChangeTransaction?((0,s.uX)(),(0,s.CE)("div",Io,[(0,s.bF)(i,{class:"account-transactions-add-mobile-btn econumo-btn -medium -magenta",flat:"",label:e.$t("pages.account.transaction_list.action.add_transaction"),onClick:t[6]||(t[6]=t=>e.openCreateTransactionModal())},null,8,["label"])])):(0,s.Q3)("",!0)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.isTransactionsLoaded?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(A,{key:0,"header-label":e.$t("modals.loading.data_loading")},null,8,["header-label"])),(0,s.bF)(M),e.deleteTransactionModal.isOpened?((0,s.uX)(),(0,s.Wv)(y,{key:1,"question-label":e.$t("pages.account.delete_transaction_modal.question"),"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:e.closeModal,onProceed:t[7]||(t[7]=t=>e.deleteTransaction(e.deleteTransactionModal.transaction.id))},null,8,["question-label","action-label","cancel-label","onCancel"])):(0,s.Q3)("",!0),e.previewTransactionModal.isOpened?((0,s.uX)(),(0,s.Wv)(k,{key:2,position:e.$q.screen.gt.md?"standard":"bottom",transaction:e.previewTransactionModal.transaction,account:e.previewTransactionModal.account,"account-recipient":e.previewTransactionModal.accountRecipient,"can-change-transaction":e.canChangeTransaction,onCancel:e.closeModal,onUpdate:e.openUpdateTransactionModal,onDelete:e.openDeleteTransactionModal},null,8,["position","transaction","account","account-recipient","can-change-transaction","onCancel","onUpdate","onDelete"])):(0,s.Q3)("",!0)]))])),_:1})):(0,s.Q3)("",!0)}const Lo={methods:{filterByAccount:function(e,t){return B().filter(e,(e=>e.accountId===t||e.accountRecipientId===t))},transactionsDailyList:function(e,t="date"){const a=B().orderBy(e,t,"desc"),n=new Date,o=tt.Ay.subtractFromDate(n,{days:1}),l=tt.Ay.startOfDate(tt.Ay.addToDate(n,{days:1}),"date");let s=[],c="";return B().forEach(a,(function(e){const a=tt.Ay.extractDate(e[t],"YYYY-MM-DD HH:mm:ss"),i=tt.Ay.formatDate(a,"YYYY-MM-DD"),r=tt.Ay.formatDate(a,"Do MMMM YYYY");let d="none";i===tt.Ay.formatDate(n,"YYYY-MM-DD")?d="today":i===tt.Ay.formatDate(o,"YYYY-MM-DD")&&(d="yesterday"),c!==i&&(c=i,s.push({id:i,isSeparator:!0,alias:d,date:r})),e.isInFuture=a>=l,s.push(e)})),s}}},Do={methods:{accountName:function(e,t,a=null){const n=B().find(e,{id:t});return void 0===n?null===a?"":a:n.name??a}}},No={methods:{navigateTo:function(e,t=!1){t?Mt().setSidebarActiveArea():Mt().setWorkspaceActiveArea(),this.$router.push({name:e})}}},wo={key:1,class:"confirmation-dialog-title"},Oo={class:"confirmation-dialog-label"},Fo={class:"confirmation-dialog-actions-buttons"},So={class:"confirmation-dialog-actions-buttons"};function xo(e,t,a,n,o,l){const c=(0,s.g2)("q-avatar"),i=(0,s.g2)("q-card-section"),r=(0,s.g2)("q-btn"),d=(0,s.g2)("q-card-actions"),u=(0,s.g2)("q-card"),m=(0,s.g2)("q-dialog"),g=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(m,{"model-value":!0,persistent:""},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"confirmation-dialog"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"confirmation-dialog-section"},{default:(0,s.k6)((()=>[e.icon?((0,s.uX)(),(0,s.Wv)(c,{key:0,icon:e.icon,color:"primary","text-color":"white"},null,8,["icon"])):(0,s.Q3)("",!0),e.questionTitle?((0,s.uX)(),(0,s.CE)("span",wo,(0,b.v_)(e.questionTitle),1)):(0,s.Q3)("",!0),(0,s.Lk)("span",Oo,(0,b.v_)(e.questionLabel),1)])),_:1}),(0,s.bF)(d,{class:"confirmation-dialog-actions"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Fo,[e.cancelLabel?(0,s.bo)(((0,s.uX)(),(0,s.Wv)(r,{key:0,flat:"",label:e.cancelLabel,class:"econumo-btn -medium -grey full-width",onClick:t[0]||(t[0]=t=>e.$emit("cancel"))},null,8,["label"])),[[g]]):(0,s.Q3)("",!0)]),(0,s.Lk)("div",So,[(0,s.bF)(r,{flat:"",label:e.actionLabel,class:"econumo-btn -medium -magenta full-width",onClick:t[1]||(t[1]=t=>e.$emit("proceed"))},null,8,["label"])])])),_:1})])),_:1})])),_:1})}const Uo=(0,s.pM)({props:["icon","questionTitle","questionLabel","actionLabel","cancelLabel"]}),Ro=(0,$.A)(Uo,[["render",xo]]),$o=Ro;z()(Uo,"components",{QDialog:j.A,QCard:na.A,QCardSection:la.A,QAvatar:ma.A,QCardActions:ga.A,QBtn:Q.A}),z()(Uo,"directives",{ClosePopup:pa.A});const jo={data(){return{previewTransactionModal:{isOpened:!1,transaction:null,account:null,accountRecipient:null}}},methods:{openPreviewTransactionModal:function(e){const t=B().cloneDeep(B().find(this.transactions,{id:e}));this.previewTransactionModal.transaction=t,this.previewTransactionModal.isOpened=!0,this.previewTransactionModal.account=B().find(this.accounts,{id:t.accountId}),t.accountRecipientId&&(this.previewTransactionModal.accountRecipient=B().find(this.accounts,{id:t.accountRecipientId}))}}},Qo={class:"account-preview-modal-head"},qo={class:"account-preview-modal-head-title"},zo={class:"account-preview-modal-head-badge"},Po={class:"account-preview-modal-account"},Wo={key:0,class:"account-preview-modal-account-title"},Yo={class:"account-preview-modal-account-item-box"},Bo={key:0,class:"account-preview-modal-account -recipient"},Ho={key:0,class:"account-preview-modal-account-title"},Vo={class:"account-preview-modal-account-item-box"},Xo={class:"account-preview-modal-account-info"},Go={key:0,class:"account-preview-modal-account-info-item"},Ko={class:"account-preview-modal-account-info-item-label"},Zo={class:"account-preview-modal-account-info-item-content"},Jo={key:1,class:"account-preview-modal-account-info-item"},el={class:"account-preview-modal-account-info-item-label"},tl={class:"account-preview-modal-account-info-item-content"},al={key:2},nl={class:"account-preview-modal-account-info-item"},ol={class:"account-preview-modal-account-info-item-label"},ll={class:"account-preview-modal-account-info-item-content"},sl={key:3},cl={class:"account-preview-modal-account-info-item"},il={class:"account-preview-modal-account-info-item-label"},rl={class:"account-preview-modal-account-info-item-content -tags"},dl={key:4,class:"account-preview-modal-account-info-item"},ul={class:"account-preview-modal-account-info-item-label"},ml={class:"account-preview-modal-account-info-item-content"},gl=["src"],pl={class:"account-preview-modal-account-info-item"},bl={class:"account-preview-modal-account-info-item-label"},vl={class:"account-preview-modal-account-info-item-content"};function fl(e,t,a,n,o,l){const c=(0,s.g2)("q-badge"),i=(0,s.g2)("q-icon"),r=(0,s.g2)("q-item-section"),d=(0,s.g2)("q-item"),u=(0,s.g2)("q-card-section"),m=(0,s.g2)("q-avatar"),g=(0,s.g2)("q-chip"),p=(0,s.g2)("q-btn"),v=(0,s.g2)("q-card-actions"),f=(0,s.g2)("q-card"),h=(0,s.g2)("q-dialog"),_=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(h,{class:"account-preview-modal","model-value":!0,position:e.position,onHide:e.cancel},{default:(0,s.k6)((()=>[(0,s.bF)(f,{class:"account-preview-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"account-preview-modal-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Qo,[(0,s.Lk)("div",qo,(0,b.v_)(e.$t("pages.account.preview_transaction_modal.header")),1),(0,s.Lk)("div",zo,[(0,s.bF)(c,{class:(0,b.C4)(["account-preview-modal-head-badge-label",e.isTransfer(e.transaction)?"-transfer":""])},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("pages.account.preview_transaction_modal.type."+e.transaction.type)),1)])),_:1},8,["class"])])]),(0,s.Lk)("div",Po,[e.isTransfer(e.transaction)?((0,s.uX)(),(0,s.CE)("div",Wo,(0,b.v_)(e.$t("pages.account.preview_transaction_modal.sender.label")),1)):(0,s.Q3)("",!0),(0,s.bF)(d,{class:"account-preview-modal-account-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-preview-modal-account-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"account-preview-modal-account-item-avatar-icon",name:e.account.icon},null,8,["name"])])),_:1}),(0,s.Lk)("div",Yo,[(0,s.bF)(r,{class:"account-preview-modal-account-item-box-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.account.name),1)])),_:1}),(0,s.bF)(r,{class:"account-preview-modal-account-item-box-balance",side:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.moneyFormat(e.transaction.amount,e.account.currency.symbol)),1)])),_:1})])])),_:1})])])),_:1}),(0,s.bF)(u,{class:"account-preview-modal-section -info"},{default:(0,s.k6)((()=>[e.accountRecipient?((0,s.uX)(),(0,s.CE)("div",Bo,[e.isTransfer(e.transaction)?((0,s.uX)(),(0,s.CE)("div",Ho,(0,b.v_)(e.$t("pages.account.preview_transaction_modal.recipient.label")),1)):(0,s.Q3)("",!0),(0,s.bF)(d,{class:"account-preview-modal-account-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-preview-modal-account-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"account-preview-modal-account-item-avatar-icon",name:e.accountRecipient.icon},null,8,["name"])])),_:1}),(0,s.Lk)("div",Vo,[(0,s.bF)(r,{class:"account-preview-modal-account-item-box-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.accountRecipient.name),1)])),_:1}),(0,s.bF)(r,{class:"account-preview-modal-account-item-box-balance",side:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.moneyFormat(e.transaction.amountRecipient,e.accountRecipient.currency.symbol)),1)])),_:1})])])),_:1})])):(0,s.Q3)("",!0),(0,s.Lk)("div",Xo,[e.transaction.category?((0,s.uX)(),(0,s.CE)("div",Go,[(0,s.Lk)("div",Ko,(0,b.v_)(e.$t("pages.account.preview_transaction_modal.category.label")),1),(0,s.Lk)("div",Zo,(0,b.v_)(e.transaction.category.name),1)])):(0,s.Q3)("",!0),e.transaction.description?((0,s.uX)(),(0,s.CE)("div",Jo,[(0,s.Lk)("div",el,(0,b.v_)(e.$t("pages.account.preview_transaction_modal.description.label")),1),(0,s.Lk)("div",tl,(0,b.v_)(e.transaction.description||""),1)])):(0,s.Q3)("",!0),!e.isTransfer(e.transaction)&&e.transaction.payee?((0,s.uX)(),(0,s.CE)("div",al,[(0,s.Lk)("div",nl,[(0,s.Lk)("div",ol,(0,b.v_)(e.$t("pages.account.preview_transaction_modal.payee.label")),1),(0,s.Lk)("div",ll,(0,b.v_)(e.transaction.payee?.name||""),1)])])):(0,s.Q3)("",!0),!e.isTransfer(e.transaction)&&e.transaction.tag?((0,s.uX)(),(0,s.CE)("div",sl,[(0,s.Lk)("div",cl,[(0,s.Lk)("div",il,(0,b.v_)(e.$t("pages.account.preview_transaction_modal.tags.label")),1),(0,s.Lk)("div",rl,(0,b.v_)(e.transaction.tag?.name||""),1)])])):(0,s.Q3)("",!0),e.account.sharedAccess.length>0||e.isTransfer(e.transaction)&&e.accountRecipient.sharedAccess.length>0?((0,s.uX)(),(0,s.CE)("div",dl,[(0,s.Lk)("div",ul,(0,b.v_)(e.$t("pages.account.preview_transaction_modal.author.label")),1),(0,s.Lk)("div",ml,[(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.transaction.author.avatar+"?s=20"},null,8,gl)])),_:1}),(0,s.eW)(" "+(0,b.v_)(e.transaction.author.name),1)])),_:1})])])):(0,s.Q3)("",!0),(0,s.Lk)("div",pl,[(0,s.Lk)("div",bl,(0,b.v_)(e.$t("pages.account.preview_transaction_modal.created_at.label")),1),(0,s.Lk)("div",vl,(0,b.v_)(e.transaction.date||""),1)])])])),_:1}),(0,s.bF)(v,{class:"preview-modal-account-info-access-actions"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"econumo-btn -large -grey preview-modal-account-info-access-actions-btn",title:e.$t("elements.button.delete.label"),flat:"",icon:"delete",onClick:t[0]||(t[0]=t=>e.openDeleteModal(e.transaction.id)),disable:!e.canChangeTransaction||"transfer"===e.transaction.type&&(!e.transaction.account||!e.transaction.accountRecipient)},null,8,["title","disable"]),(0,s.bF)(p,{class:"econumo-btn -large -grey preview-modal-account-info-access-actions-btn -wide",label:e.$t("elements.button.edit.label"),flat:"",onClick:t[1]||(t[1]=t=>e.openUpdateModal(e.transaction.id)),disable:!e.canChangeTransaction||"transfer"===e.transaction.type&&(!e.transaction.account||!e.transaction.accountRecipient)},null,8,["label","disable"]),(0,s.bo)((0,s.bF)(p,{class:"econumo-btn -large -grey preview-modal-account-info-access-actions-btn",title:e.$t("elements.button.cancel.label"),flat:"",icon:"expand_more",onClick:e.cancel},null,8,["title","onClick"]),[[_]])])),_:1})])),_:1})])),_:1},8,["position","onHide"])}const hl=(0,s.pM)({props:["position","transaction","account","accountRecipient","canChangeTransaction"],mixins:[Te],methods:{cancel:function(){this.$emit("cancel")},openUpdateModal:function(e){this.$emit("update",e)},openDeleteModal:function(e){this.$emit("delete",e)},isTransfer:function(e){return"transfer"===e.type}}});var _l=a(3954),Al=a(6760);const Ml=(0,$.A)(hl,[["render",fl]]),yl=Ml;z()(hl,"components",{QDialog:j.A,QCard:na.A,QCardSection:la.A,QBadge:_l.A,QItem:tn.A,QItemSection:an.A,QIcon:ca.A,QChip:Al.A,QAvatar:ma.A,QCardActions:ga.A,QBtn:Q.A}),z()(hl,"directives",{ClosePopup:pa.A});const kl=(0,s.pM)({name:"AccountPage",components:{AccountModal:$a,ConfirmationDialogModal:$o,LoadingModal:Ya,ViewTransactionModal:yl},mixins:[Te,Lo,Do,No,jo],data(){return{search:"",deleteTransactionModal:{isOpened:!1,transaction:null}}},created(){this.isTransactionsLoaded||Ut().fetchTransactions(),this.$router.currentRoute.value.params.id&&Rt().selectAccount(this.$router.currentRoute.value.params.id)},mounted(){this.$router.currentRoute.value.params.id&&Rt().selectAccount(this.$router.currentRoute.value.params.id)},watch:{$route(e,t){"account"!==e.name||t.name===e.name&&t.params.id===e.params.id||(Rt().selectAccount(e.params.id),this.search="")},accountTransactionsDailyList(){this.$refs.transactionList&&this.$refs.transactionList.refresh()}},computed:{...(0,u.aH)(Xt,["userId","userName","userAvatar"]),...(0,u.aH)(Rt,["accounts","accountsOrdered","selectedAccountId","selectedAccountUserId"]),...(0,u.aH)(Ut,["isTransactionsLoaded","transactionsOrdered"]),...(0,u.aH)(Ft,["tags"]),...(0,u.aH)(xt,["payees"]),account:function(){return B().find(this.accountsOrdered,{id:this.selectedAccountId})},transactions:function(){if(!this.search)return this.transactionsOrdered;let e=this.transactionsOrdered;return this.search.split(" ").forEach((t=>{e=B().filter(e,(e=>-1!==e.search.indexOf(B().toLower(t))))})),e},sharedAccess:function(){let e=this.account.sharedAccess??[];return 1===e.length?e.unshift({role:"admin",user:{id:this.userId,avatar:this.userAvatar,name:this.userName}}):e>3&&(e=B().slice(e,0,3)),e},canUpdateAccountSettings:function(){if(this.account.owner.id===this.userId)return!0;let e=!1;return this.account.sharedAccess.forEach((t=>{t.user?.id===this.userId&&"admin"===t.role&&(e=!0)})),e},canChangeTransaction:function(){if(this.account.owner.id===this.userId)return!0;let e=!1;return this.account.sharedAccess.forEach((t=>{t.user?.id!==this.userId||"admin"!==t.role&&"user"!==t.role||(e=!0)})),e},accountTransactionsDailyList:function(){return this.transactionsDailyList(this.filterByAccount(this.transactions,this.selectedAccountId))}},methods:{openAccountSettingsModal:function(){Fa().openAccountModal(this.account)},transactionDisplayAmount:function(e){return"transfer"===e.type?e.accountId===this.selectedAccountId?this.transactionFormat("expense",e.amount):this.transactionFormat("income",e.amountRecipient):this.transactionFormat(e.type,e.amount)},isIncome:function(e){return"transfer"===e.type?e.accountId!==this.selectedAccountId:"expense"!==e.type},isTransfer:function(e){return"transfer"===e.type},openDeleteTransactionModal:function(e){this.closeModal(),this.deleteTransactionModal.transaction=B().cloneDeep(B().find(this.transactions,{id:e})),this.deleteTransactionModal.isOpened=!0},openCreateTransactionModal:function(){Gt().openTransactionModal({type:"expense"})},openUpdateTransactionModal:function(e){this.closeModal();const t=B().cloneDeep(B().find(this.transactionsOrdered,{id:e}));Gt().openTransactionModal(t)},deleteTransaction:function(e){Ut().deleteTransaction(e),this.closeModal()},closeModal:function(){this.previewTransactionModal.transaction=null,this.previewTransactionModal.account=null,this.previewTransactionModal.accountRecipient=null,this.previewTransactionModal.isOpened=!1,this.deleteTransactionModal.transaction=null,this.deleteTransactionModal.isOpened=!1}}});var Cl=a(7716),El=a(525),Il=a(3796),Tl=a(9519);const Ll=(0,$.A)(kl,[["render",To]]),Dl=Ll;z()(kl,"components",{QPage:Cl.A,QBtn:Q.A,QIcon:ca.A,QAvatar:ma.A,QInput:sa.A,QVirtualScroll:El.A,QItemLabel:Il.A,QItem:tn.A,QItemSection:an.A,QBadge:_l.A,QMenu:Tl.A,QList:Ja.A});const Nl={class:"form-container full-width column wrap justify-center items-center content-center"},wl={class:"form-checkbox-group"},Ol={class:"form-btn-container"},Fl=["innerHTML"],Sl={class:"econumo-modal form-fail-modal"},xl={class:"form-fail-modal-title"},Ul={class:"form-fail-modal-description"},Rl={class:"form-fail-modal-button"};function $l(e,t,a,o,l,c){const i=(0,s.g2)("q-input"),r=(0,s.g2)("q-checkbox"),d=(0,s.g2)("q-btn"),u=(0,s.g2)("loading-modal"),m=(0,s.g2)("self-hosted-info-modal"),g=(0,s.g2)("q-dialog"),p=(0,s.g2)("q-form");return(0,s.uX)(),(0,s.CE)("div",Nl,[(0,s.bF)(p,{novalidate:"",onSubmit:c.submit,class:"full-width"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{outlined:"",class:"form-input full-width",placeholder:e.$t("elements.form.user.name.placeholder"),type:"text",modelValue:l.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.name=e),label:e.$t("elements.form.user.name.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.user.name.validation.required_field"),t=>e.isValidName(t)||e.$t("elements.form.user.name.validation.invalid_name")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.bF)(i,{outlined:"",class:"form-input full-width",placeholder:e.$t("elements.form.user.email.placeholder"),type:"email",modelValue:l.email,"onUpdate:modelValue":t[1]||(t[1]=e=>l.email=e),label:e.$t("elements.form.user.email.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.user.email.validation.required_field"),t=>e.isValidEmail(t)||e.$t("elements.form.user.email.validation.invalid_email")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.bF)(i,{outlined:"",class:"form-input full-width",placeholder:e.$t("elements.form.user.password.placeholder"),type:"password",modelValue:l.password,"onUpdate:modelValue":t[2]||(t[2]=e=>l.password=e),label:e.$t("elements.form.user.password.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.user.password.validation.required_field"),t=>e.isValidPassword(t)||e.$t("elements.form.user.password.validation.invalid_password")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.bF)(i,{outlined:"",class:"form-input full-width",placeholder:e.$t("elements.form.user.password_retry.placeholder"),type:"password",modelValue:l.passwordRetry,"onUpdate:modelValue":t[3]||(t[3]=e=>l.passwordRetry=e),label:e.$t("elements.form.user.password_retry.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.user.password_retry.validation.invalid_password"),t=>t===l.password||e.$t("elements.form.user.password_retry.validation.not_equals")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.Lk)("div",wl,[(0,s.bF)(r,{class:"form-checkbox full-width",modelValue:l.selfHosted,"onUpdate:modelValue":t[4]||(t[4]=e=>l.selfHosted=e),label:e.$t("elements.form.user.server_host.self_hosted")},null,8,["modelValue","label"]),(0,s.Lk)("div",{onClick:t[5]||(t[5]=t=>e.openSelfHostedInfoModal()),class:"form-checkbox-hint"})]),(0,s.bo)((0,s.bF)(i,{outlined:"",class:"form-input full-width",placeholder:e.$t("elements.form.user.server_host.placeholder"),type:"url",modelValue:l.host,"onUpdate:modelValue":t[6]||(t[6]=e=>l.host=e),label:e.$t("elements.form.user.server_host.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.user.server_host.validation.required_field"),t=>e.isValidHttpUrl(t)||e.$t("elements.form.user.server_host.validation.invalid_url")]},null,8,["placeholder","modelValue","label","rules"]),[[n.aG,l.selfHosted]]),(0,s.Lk)("div",Ol,[(0,s.bF)(d,{class:"econumo-btn -large -yellow full-width",label:e.$t("pages.registration.form.action.register"),type:"submit",flat:""},null,8,["label"])]),(0,s.Lk)("div",{class:"register-form-privacy",innerHTML:e.$t("pages.registration.privacy.text")},null,8,Fl),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.isLoadingModalOpened?((0,s.uX)(),(0,s.Wv)(u,{key:0,onClose:t[7]||(t[7]=t=>e.closeLoadingModal()),"header-label":e.$t("pages.registration.dialog.registration.label")},null,8,["header-label"])):(0,s.Q3)("",!0),e.isSelfHostedInfoModalOpened?((0,s.uX)(),(0,s.Wv)(m,{key:1,onCancel:e.closeSelfHostedInfoModal},null,8,["onCancel"])):(0,s.Q3)("",!0),(0,s.bF)(g,{modelValue:l.isFailRegistration,"onUpdate:modelValue":t[8]||(t[8]=e=>l.isFailRegistration=e),minimized:"",onHide:c.closeModalFailRegistration},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Sl,[(0,s.Lk)("div",xl,(0,b.v_)(e.$t("pages.registration.dialog.registration_failed.header")),1),(0,s.Lk)("div",Ul,(0,b.v_)(e.$t("pages.registration.dialog.registration_failed.information")),1),(0,s.Lk)("div",Rl,[(0,s.bF)(d,{class:"econumo-btn -small -yellow full-width",label:e.$t("elements.button.ok.label"),type:"button",onClick:c.closeModalFailRegistration,flat:""},null,8,["label","onClick"])])])])),_:1},8,["modelValue","onHide"])]))])),_:1},8,["onSubmit"])])}const jl={name:"RegistrationPage",components:{SelfHostedInfoModal:Dn,LoadingModal:Ya},mixins:[et,Nn,yn],data(){return{isFailRegistration:!1,selfHosted:!1,host:"",name:"",email:"",password:"",passwordRetry:""}},mounted(){this.isUserAuthenticated()&&this.$router.push({name:"home"}),this.selfHosted=x.A.selfHosted(),this.host=x.A.backendHost()},watch:{host:function(e){x.A.backendHost(e)},selfHosted:function(e){x.A.selfHosted(e)}},methods:{...(0,u.aH)(Xt,["isUserAuthenticated"]),openModalFailRegistration(){this.isFailRegistration=!0},closeModalFailRegistration(){this.isFailRegistration=!1},submit:function(){return this.openLoadingModal(),Xt().register({email:this.email,password:this.password.toString(),name:this.name.toString()}).then((e=>{e?this.$router.push({name:"login"}):this.openModalFailRegistration()})).catch((()=>{this.openModalFailRegistration()})).finally((()=>{this.closeLoadingModal()}))}}},Ql=(0,$.A)(jl,[["render",$l]]),ql=Ql;z()(jl,"components",{QForm:oa.A,QInput:sa.A,QCheckbox:On.A,QBtn:Q.A,QDialog:j.A});const zl={class:"settings-toolbar-mobile"},Pl={class:"settings-toolbar-mobile-title"},Wl=(0,s.Lk)("div",{class:"settings-toolbar-mobile-container"},null,-1),Yl={class:"settings-main-user-avatar"},Bl=["src"],Hl={class:"settings-main-user-block"},Vl={class:"settings-main-user-name"},Xl={class:"settings-main-user-login"},Gl={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},Kl={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},Zl={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},Jl={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},es={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},ts={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},as={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},ns={class:"settings-main-item-field-control settings-main-item-field-currency-control self-center full-width no-outline",tabindex:"0"},os={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"};function ls(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-item-label"),r=(0,s.g2)("q-item"),d=(0,s.g2)("q-icon"),u=(0,s.g2)("q-field"),m=(0,s.g2)("q-item-section"),g=(0,s.g2)("q-select"),p=(0,s.g2)("q-list"),v=(0,s.g2)("change-language-modal"),f=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(f,{class:"settings"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",zl,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("home",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",Pl,(0,b.v_)(e.$t("pages.settings.settings.header")),1)]),Wl]),(0,s.bF)(i,{class:"settings-label-header"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("pages.settings.settings.header_desktop")),1)])),_:1}),(0,s.Lk)("div",null,[(0,s.bF)(p,{class:"settings-main"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"settings-main-user cursor-pointer",clickable:"",to:{name:"settingsProfile"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Yl,[(0,s.Lk)("img",{class:"settings-main-user-avatar-img",src:e.userAvatar+"?s=50"},null,8,Bl)]),(0,s.Lk)("div",Hl,[(0,s.Lk)("div",Vl,(0,b.v_)(e.userName),1),(0,s.Lk)("div",Xl,(0,b.v_)(e.userLogin),1)])])),_:1}),(0,s.bF)(i,{class:"settings-main-label"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("pages.settings.settings.groups.service")),1)])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",onClick:e.sync},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{borderless:"",class:"settings-main-item-field cursor-pointer","bottom-slots":""},{control:(0,s.k6)((()=>[(0,s.Lk)("div",Gl,(0,b.v_)(e.$t("pages.settings.sync.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(d,{class:"settings-main-item-field-arrow",name:"sync"})])),hint:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.lastSyncAt),1)])),_:1})])),_:1})])),_:1},8,["onClick"]),e.econumoPackage.includesConnections?((0,s.uX)(),(0,s.Wv)(r,{key:0,class:"settings-main-item cursor-pointer",clickable:"",to:{name:"settingsConnections"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",Kl,(0,b.v_)(e.$t("pages.settings.connections.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(d,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_right"})])),_:1})])),_:1})])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",to:{name:"settingsBudgets"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",Zl,(0,b.v_)(e.$t("pages.settings.budgets.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(d,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_right"})])),_:1})])),_:1})])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",to:{name:"settingsAccounts"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",Jl,(0,b.v_)(e.$t("pages.settings.accounts.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(d,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_right"})])),_:1})])),_:1})])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",to:{name:"settingsCategories"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",es,(0,b.v_)(e.$t("pages.settings.categories.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(d,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_right"})])),_:1})])),_:1})])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",to:{name:"settingsPayees"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",ts,(0,b.v_)(e.$t("pages.settings.payees.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(d,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_right"})])),_:1})])),_:1})])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",to:{name:"settingsTags"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",as,(0,b.v_)(e.$t("pages.settings.tags.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(d,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_right"})])),_:1})])),_:1})])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(g,{borderless:"","use-input":"",modelValue:e.currency,"onUpdate:modelValue":t[1]||(t[1]=t=>e.currency=t),options:e.currenciesOptions,"dropdown-icon":"keyboard_arrow_down","popup-content-class":"modal-popup","options-selected-class":"modal-popup-selected",onFilter:e.filterCurrencies,onFilterAbort:e.filterCurrenciesAbort,label:e.$t("pages.settings.currency.menu_item"),class:"settings-main-item-field-currency settings-main-item-field cursor-pointer settings-main-item-field-control"},{"selected-item":(0,s.k6)((e=>[(0,s.Lk)("div",ns,(0,b.v_)(e.opt.label),1)])),_:1},8,["modelValue","options","onFilter","onFilterAbort","label"])])),_:1})])),_:1}),(0,s.bF)(i,{class:"settings-main-label"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("pages.settings.settings.groups.user_interface")),1)])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",onClick:e.openLanguageModal},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{borderless:"",class:"settings-main-item-field cursor-pointer",label:e.$t("pages.settings.language.menu_item"),"stack-label":""},{control:(0,s.k6)((()=>[(0,s.Lk)("div",os,(0,b.v_)(e.fullLanguageLabel()),1)])),append:(0,s.k6)((()=>[(0,s.bF)(d,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_down"})])),_:1},8,["label"])])),_:1})])),_:1},8,["onClick"])])),_:1})]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.isLanguageModalOpened?((0,s.uX)(),(0,s.Wv)(v,{key:0,onCancel:t[2]||(t[2]=t=>e.closeLanguageModal())})):(0,s.Q3)("",!0)]))])),_:1})}const ss=(0,s.pM)({name:"SettingsSettingsPage",mixins:[No,H],components:{ChangeLanguageModal:W},data(){return{currencySearchFilter:""}},created(){"settings"===this.$router.currentRoute.value.name&&Mt().setWorkspaceActiveArea()},computed:{...(0,u.aH)(Xt,["userAvatar","userName","userLogin","userCurrency"]),...(0,u.aH)(Rt,["accountsLoadedAt"]),...(0,u.aH)(zt,["accountFoldersLoadedAt"]),...(0,u.aH)(wt,["categoriesLoadedAt"]),...(0,u.aH)(xt,["payeesLoadedAt"]),...(0,u.aH)(Ft,["tagsLoadedAt"]),...(0,u.aH)(Ut,["transactionsLoadedAt"]),...(0,u.aH)(bt,["currenciesLoadedAt","currencies"]),lastSyncAt:function(){let e=null;return[this.accountsLoadedAt,this.accountFoldersLoadedAt,this.categoriesLoadedAt,this.payeesLoadedAt,this.tagsLoadedAt,this.transactionsLoadedAt,this.currenciesLoadedAt].forEach((t=>{null===e&&t&&(e=t),t&&tt.Ay.extractDate(t,"YYYY-MM-DD HH:mm:ss")<tt.Ay.extractDate(e,"YYYY-MM-DD HH:mm:ss")&&(e=t)})),e||"-"},currency:{get(){const e=this.userCurrency;return e?{label:e.name,value:e.id,sign:e.symbol}:null},set(e){Xt().userUpdateCurrency({currency:e.code})}},currenciesOptions:function(){let e=[];return this.currencies.forEach((t=>{(!this.currencySearchFilter||t.name.toLowerCase().indexOf(this.currencySearchFilter)>-1||t.symbol.toLowerCase().indexOf(this.currencySearchFilter)>-1||t.code.toLowerCase().indexOf(this.currencySearchFilter)>-1)&&e.push({label:t.name+" ("+t.symbol+")",value:t.id,symbol:t.symbol,code:t.code})})),e},econumoPackage:function(){return Ga}},methods:{sync:function(){Ht().fetchAll()},filterCurrencies:function(e,t,a){t((()=>{this.currencySearchFilter=e.toLowerCase()}))},filterCurrenciesAbort:function(e,t,a){this.currencySearchFilter=""}}});var cs=a(4775);const is=(0,$.A)(ss,[["render",ls]]),rs=is;z()(ss,"components",{QPage:Cl.A,QBtn:Q.A,QItemLabel:Il.A,QList:Ja.A,QItem:tn.A,QItemSection:an.A,QField:cs.A,QIcon:ca.A,QSelect:ua.A});const ds={class:"settings-profile-wrapper"},us={class:"settings-toolbar-mobile"},ms={class:"settings-toolbar-mobile-title"},gs={class:"settings-toolbar-mobile-container"},ps={class:"settings-toolbar-desktop"},bs={class:"settings-breadcrumbs"},vs={class:"settings-label-header"},fs={class:"settings-profile-user"},hs=["src"],_s={class:"settings-profile-user-group"},As={class:"settings-profile-user-group-name"},Ms={class:"settings-profile-user-group-login"},ys={class:"settings-profile-controls"},ks={class:"settings-profile-controls-group"},Cs={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"};function Es(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-avatar"),r=(0,s.g2)("q-input"),d=(0,s.g2)("q-item-label"),u=(0,s.g2)("q-icon"),m=(0,s.g2)("q-field"),g=(0,s.g2)("q-item-section"),p=(0,s.g2)("q-item"),v=(0,s.g2)("confirmation-dialog-modal"),f=(0,s.g2)("q-page"),h=(0,s.gN)("ripple");return(0,s.uX)(),(0,s.Wv)(f,{class:"settings-profile"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ds,[(0,s.Lk)("div",us,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("settings",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",ms,(0,b.v_)(e.$t("pages.settings.profile.header")),1)]),(0,s.Lk)("div",gs,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"power_settings_new",onClick:e.openLogoutDialogModal},null,8,["onClick"])])]),(0,s.Lk)("div",ps,[(0,s.Lk)("div",bs,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[1]||(t[1]=t=>e.navigateTo("settings",!0))},(0,b.v_)(e.$t("pages.settings.settings.header_desktop")),1)])]),(0,s.Lk)("h4",vs,(0,b.v_)(e.$t("pages.settings.profile.header")),1),(0,s.Lk)("div",fs,[(0,s.bF)(i,{class:"settings-profile-user-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{class:"settings-profile-user-avatar-img",src:e.userAvatar+"?s=100"},null,8,hs)])),_:1}),(0,s.Lk)("div",_s,[(0,s.Lk)("div",As,(0,b.v_)(e.userName),1),(0,s.Lk)("div",Ms,(0,b.v_)(e.userLogin),1),(0,s.Lk)("div",{class:"settings-profile-user-group-logout",onClick:t[2]||(t[2]=(...t)=>e.openLogoutDialogModal&&e.openLogoutDialogModal(...t))},(0,b.v_)(e.$t("pages.settings.settings.logout")),1)])]),(0,s.Lk)("div",ys,[(0,s.Lk)("div",ks,[(0,s.bF)(r,{outlined:"",class:"settings-profile-controls-input -name form-input full-width",placeholder:e.$t("elements.form.user.name.placeholder"),type:"text","model-value":e.name,label:e.$t("elements.form.user.name.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.user.name.validation.required_field"),t=>e.isValidName(t)||e.$t("elements.form.user.name.validation.invalid_name")],onChange:e.changeName},null,8,["placeholder","model-value","label","rules","onChange"]),(0,s.bF)(r,{outlined:"",disable:"",readonly:"",class:"settings-profile-controls-input form-input full-width",placeholder:e.$t("elements.form.user.email.placeholder"),type:"email","model-value":e.email,label:e.$t("elements.form.user.email.label"),"lazy-rules":""},null,8,["placeholder","model-value","label"])])]),(0,s.bF)(d,{class:"settings-main-label"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("pages.settings.profile.groups.security")),1)])),_:1}),(0,s.bo)(((0,s.uX)(),(0,s.Wv)(p,{class:"settings-main-item cursor-pointer",clickable:"",to:{name:"settingsChangePassword"}},{default:(0,s.k6)((()=>[(0,s.bF)(g,null,{default:(0,s.k6)((()=>[(0,s.bF)(m,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",Cs,(0,b.v_)(e.$t("pages.settings.profile.change_password.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(u,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_right"})])),_:1})])),_:1})])),_:1})),[[h]]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.logoutDialogModal.isOpened?((0,s.uX)(),(0,s.Wv)(v,{key:0,"question-title":e.$t("pages.settings.profile.logout_dialog_modal.title"),"question-label":e.$t("pages.settings.profile.logout_dialog_modal.question"),"action-label":e.$t("pages.settings.profile.logout_dialog_modal.action.logout"),"cancel-label":e.$t("pages.settings.profile.logout_dialog_modal.action.cancel"),onCancel:e.closeModal,onProceed:e.logout},null,8,["question-title","question-label","action-label","cancel-label","onCancel","onProceed"])):(0,s.Q3)("",!0)]))])])),_:1})}const Is=(0,s.pM)({name:"SettingsProfilePage",mixins:[No,et],components:{ConfirmationDialogModal:$o},data(){return{nameCopy:null,emailCopy:null,logoutDialogModal:{isOpened:!1}}},created(){"settingsProfile"===this.$router.currentRoute.value.name&&Mt().setWorkspaceActiveArea()},computed:{...(0,u.aH)(Xt,["userAvatar","userName","userLogin"]),name:{get(){return this.nameCopy||this.userName},set(e){this.nameCopy=e,Xt().userUpdateName(e)}},email:{get(){return this.userLogin},set(e){console.log(e)}}},methods:{changeName:function(e){this.name=e},openLogoutDialogModal:function(){this.logoutDialogModal.isOpened=!0},closeModal:function(){this.logoutDialogModal.isOpened=!1},logout:function(){this.$router.push({name:"logout"})}}});var Ts=a(9626);const Ls=(0,$.A)(Is,[["render",Es]]),Ds=Ls;z()(Is,"components",{QPage:Cl.A,QBtn:Q.A,QAvatar:ma.A,QInput:sa.A,QItemLabel:Il.A,QItem:tn.A,QItemSection:an.A,QField:cs.A,QIcon:ca.A}),z()(Is,"directives",{Ripple:Ts.A});var Ns=a(1459),ws=a.n(Ns);const Os={class:"settings-change-password-wrapper"},Fs={class:"settings-toolbar-mobile"},Ss={class:"settings-toolbar-mobile-title"},xs=(0,s.Lk)("div",{class:"settings-toolbar-mobile-container"},null,-1),Us={class:"settings-toolbar-desktop"},Rs={class:"settings-breadcrumbs"},$s=(0,s.Lk)("div",{class:"settings-breadcrumbs-arrow"},[(0,s.Lk)("img",{src:ws()})],-1),js={class:"settings-label-header"},Qs={class:"settings-change-password-form"},qs={class:"econumo-modal form-hint-modal"},zs={class:"form-hint-modal-text"},Ps={class:"form-hint-modal-button"},Ws={class:"econumo-modal form-fail-modal"},Ys={class:"form-fail-modal-title"},Bs={class:"form-fail-modal-description"},Hs={class:"form-fail-modal-button"};function Vs(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-input"),r=(0,s.g2)("q-form"),d=(0,s.g2)("loading-modal"),u=(0,s.g2)("q-dialog"),m=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(m,{class:"settings-change-password"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Os,[(0,s.Lk)("div",Fs,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("settingsProfile",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",Ss,(0,b.v_)(e.$t("pages.settings.profile.change_password.header")),1)]),xs]),(0,s.Lk)("div",Us,[(0,s.Lk)("div",Rs,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[1]||(t[1]=t=>e.navigateTo("settings",!0))},(0,b.v_)(e.$t("pages.settings.settings.header_desktop")),1),$s,(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[2]||(t[2]=t=>e.navigateTo("settingsProfile",!0))},(0,b.v_)(e.$t("pages.settings.profile.menu_item")),1)])]),(0,s.Lk)("h4",js,(0,b.v_)(e.$t("pages.settings.profile.change_password.header")),1),(0,s.Lk)("div",Qs,[(0,s.bF)(r,{ref:"changePasswordForm",novalidate:"",onSubmit:e.submit},{default:(0,s.k6)((()=>[(0,s.bF)(i,{outlined:"",class:"form-input full-width",placeholder:e.$t("pages.settings.profile.form.change_password.password.placeholder"),type:"password",modelValue:e.oldPassword,"onUpdate:modelValue":t[3]||(t[3]=t=>e.oldPassword=t),label:e.$t("pages.settings.profile.form.change_password.password.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("pages.settings.profile.form.change_password.password.validation.invalid_password")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.bF)(i,{outlined:"",class:"form-input full-width",placeholder:e.$t("pages.settings.profile.form.change_password.new_password.placeholder"),type:"password",modelValue:e.newPassword,"onUpdate:modelValue":t[4]||(t[4]=t=>e.newPassword=t),label:e.$t("pages.settings.profile.form.change_password.new_password.label"),"lazy-rules":"",rules:[t=>e.isValidPassword(t)||e.$t("elements.form.user.password.validation.invalid_password"),t=>t!==e.oldPassword||e.$t("pages.settings.profile.form.change_password.new_password.validation.not_equals")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.bF)(i,{outlined:"",class:"form-input full-width",placeholder:e.$t("pages.settings.profile.form.change_password.new_password_retry.placeholder"),type:"password",modelValue:e.newPasswordRetry,"onUpdate:modelValue":t[5]||(t[5]=t=>e.newPasswordRetry=t),label:e.$t("pages.settings.profile.form.change_password.new_password_retry.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.user.password_retry.validation.required_field"),t=>e.isValidPassword(t)||e.$t("elements.form.user.password_retry.validation.invalid_password"),t=>t===e.newPassword||e.$t("pages.settings.profile.form.change_password.new_password_retry.validation.not_equals")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.bF)(c,{class:"econumo-btn -medium -magenta full-width",label:e.$t("pages.settings.profile.form.change_password.submit.label"),type:"submit",flat:""},null,8,["label"])])),_:1},8,["onSubmit"])]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.isLoadingModalOpened?((0,s.uX)(),(0,s.Wv)(d,{key:0,onHide:t[6]||(t[6]=t=>e.closeLoadingModal()),"header-label":e.$t("pages.settings.profile.form.change_password.loading.label")},null,8,["header-label"])):(0,s.Q3)("",!0),(0,s.bF)(u,{modelValue:e.isSuccess,"onUpdate:modelValue":t[8]||(t[8]=t=>e.isSuccess=t),minimized:"",onHide:t[9]||(t[9]=t=>e.isSuccess=!1)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",qs,[(0,s.Lk)("div",zs,(0,b.v_)(e.$t("pages.settings.profile.form.change_password.success.text")),1),(0,s.Lk)("div",Ps,[(0,s.bF)(c,{class:"econumo-btn -small -yellow full-width",label:e.$t("elements.button.close.label"),type:"button",onClick:t[7]||(t[7]=t=>e.isSuccess=!1),flat:""},null,8,["label"])])])])),_:1},8,["modelValue"]),(0,s.bF)(u,{modelValue:e.isError,"onUpdate:modelValue":t[11]||(t[11]=t=>e.isError=t),minimized:"",onHide:t[12]||(t[12]=t=>e.isError=!1)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ws,[(0,s.Lk)("div",Ys,(0,b.v_)(e.$t("pages.settings.profile.form.change_password.error.header")),1),(0,s.Lk)("div",Bs,(0,b.v_)(e.errorMessage),1),(0,s.Lk)("div",Hs,[(0,s.bF)(c,{class:"econumo-btn -small -yellow full-width",label:e.$t("elements.button.close.label"),type:"button",onClick:t[10]||(t[10]=t=>e.isError=!1),flat:""},null,8,["label"])])])])),_:1},8,["modelValue"])]))])])),_:1})}const Xs=(0,s.pM)({name:"SettingsChangePasswordPage",mixins:[No,et,yn],components:{LoadingModal:Ya},data(){return{oldPassword:"",newPassword:"",newPasswordRetry:"",isError:!1,errorMessage:"",isSuccess:!1}},created(){"settingsChangePassword"===this.$router.currentRoute.value.name&&Mt().setWorkspaceActiveArea()},computed:{},methods:{submit:function(){return this.openLoadingModal(),Xt().userUpdatePassword({oldPassword:this.oldPassword.toString(),newPassword:this.newPassword.toString()}).then((e=>{e.data?(this.newPassword="",this.oldPassword="",this.newPasswordRetry="",this.$refs.changePasswordForm.reset(),this.isSuccess=!0):(this.isError=!0,this.errorMessage=e.message||this.$t("pages.settings.profile.form.change_password.error.text"))})).catch((e=>{this.isError=!0,this.errorMessage=e.message||this.$t("pages.settings.profile.form.change_password.error.text")})).finally((()=>{this.closeLoadingModal()}))}}}),Gs=(0,$.A)(Xs,[["render",Vs]]),Ks=Gs;z()(Xs,"components",{QPage:Cl.A,QBtn:Q.A,QForm:oa.A,QInput:sa.A,QDialog:j.A});const Zs={class:"settings-accounts-wrapper"},Js={class:"settings-toolbar-mobile"},ec={class:"settings-toolbar-mobile-title"},tc={class:"settings-toolbar-mobile-container"},ac={class:"settings-toolbar-desktop"},nc={class:"settings-breadcrumbs"},oc={class:"settings-label-header settings-accounts-header"},lc={class:"settings-accounts-create-folder"},sc={class:"settings-accounts-container"},cc={class:"settings-accounts-account-head-controls"},ic={class:"settings-accounts-account-list-item-wrapper"},rc={class:"settings-accounts-account-list-item-info"},dc={class:"settings-accounts-account-list-item-info-container"},uc=["src"],mc=["src"],gc={key:0,class:"settings-accounts-empty"},pc={key:0},bc={class:"preview-modal-head"},vc={class:"preview-modal-head-title"},fc={key:0,class:"preview-modal-head-shared"},hc={class:"preview-modal-head-shared-label"},_c={class:"preview-modal-account"},Ac={class:"preview-modal-account-item-box"},Mc=["src"],yc=["src"],kc={class:"preview-modal-account-info"},Cc={class:"preview-modal-account-info-item"},Ec={class:"preview-modal-account-info-item-label"},Ic={class:"preview-modal-account-info-item-content"},Tc={class:"preview-modal-account-info-item"},Lc={class:"preview-modal-account-info-item-label"},Dc={class:"preview-modal-account-info-item-content"},Nc={class:"preview-modal-account-info-item"},wc={class:"preview-modal-account-info-item-label"},Oc={class:"preview-modal-account-info-item-content"},Fc={key:0,class:"preview-modal-account-info-access"},Sc={class:"preview-modal-account-info-item"},xc={class:"preview-modal-account-info-item-label -access"},Uc={key:0},Rc={class:"preview-modal-account-info-access-item"},$c=["src"],jc={class:"preview-modal-account-info-access-item-user"},Qc={class:"preview-modal-account-info-access-item-user-name"},qc={class:"preview-modal-account-info-access-item-user-role"},zc={key:1,class:"preview-modal-account-info-access-empty"},Pc={class:"preview-modal-account-info-access-item"},Wc=["src"],Yc={class:"preview-modal-account-info-access-item-user"},Bc={class:"preview-modal-account-info-access-item-user-name"},Hc={class:"preview-modal-account-info-access-item-user-role"},Vc={key:1};function Xc(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-icon"),r=(0,s.g2)("q-item-section"),d=(0,s.g2)("q-item"),u=(0,s.g2)("q-list"),m=(0,s.g2)("q-menu"),g=(0,s.g2)("q-avatar"),p=(0,s.g2)("draggable"),v=(0,s.g2)("account-modal"),f=(0,s.g2)("confirmation-dialog-modal"),h=(0,s.g2)("prompt-dialog-modal"),_=(0,s.g2)("q-card-section"),A=(0,s.g2)("q-card-actions"),M=(0,s.g2)("q-card"),y=(0,s.g2)("q-dialog"),k=(0,s.g2)("access-dialog-modal"),C=(0,s.g2)("access-level-dialog-modal"),E=(0,s.g2)("q-page"),I=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(E,{class:"settings-accounts"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Zs,[(0,s.Lk)("div",Js,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("settings",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",ec,(0,b.v_)(e.$t("pages.settings.accounts.header")),1)]),(0,s.Lk)("div",tc,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"create_new_folder",onClick:t[1]||(t[1]=t=>e.openCreateFolderModal())})])]),(0,s.Lk)("div",ac,[(0,s.Lk)("div",nc,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[2]||(t[2]=t=>e.navigateTo("settings",!0))},(0,b.v_)(e.$t("pages.settings.settings.header_desktop")),1)])]),(0,s.Lk)("h4",oc,(0,b.v_)(e.$t("pages.settings.accounts.header")),1),(0,s.Lk)("div",lc,[(0,s.bF)(c,{class:"settings-accounts-create-folder-btn econumo-btn -small -magenta",flat:"",label:e.$t("pages.settings.accounts.create_folder"),onClick:t[3]||(t[3]=t=>e.openCreateFolderModal())},null,8,["label"])]),(0,s.Lk)("div",sc,[(0,s.Lk)("div",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.accountsTree,((t,a)=>((0,s.uX)(),(0,s.CE)("div",{class:"settings-accounts-account",key:t.id},[(0,s.bF)(d,{class:"settings-accounts-account-head cursor-pointer"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"settings-accounts-account-head-title"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",null,[t.folder.isVisible?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(i,{key:0,name:"visibility_off",left:"",onClick:a=>e.showFolder(t.folder.id)},null,8,["onClick"])),(0,s.eW)(" "+(0,b.v_)(t.folder.name),1)])])),_:2},1024),(0,s.Lk)("div",cc,[(0,s.bF)(r,{class:"settings-accounts-account-head-control"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"settings-accounts-account-head-control-btn",icon:"control_point",onClick:a=>e.openCreateAccountModal(t.folder.id)},null,8,["onClick"])])),_:2},1024),(0,s.bF)(r,{class:"settings-accounts-account-head-control"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{flat:"",icon:"more_vert",class:"settings-accounts-account-head-control-btn"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{cover:"","auto-close":"",class:"account-transactions-item-check-button-menu"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"account-transactions-item-check-button-list"},{default:(0,s.k6)((()=>[a>0?((0,s.uX)(),(0,s.Wv)(d,{key:0,clickable:"",onClick:a=>e.orderFolder(t.folder.id,-1),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.up.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),a<e.accountsTree.length-1?((0,s.uX)(),(0,s.Wv)(d,{key:1,clickable:"",onClick:a=>e.orderFolder(t.folder.id,1),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.down.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),(0,s.bF)(d,{clickable:"",onClick:a=>e.openUpdateFolderModal(t.folder.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:2},1032,["onClick"]),t.folder.isVisible?((0,s.uX)(),(0,s.Wv)(d,{key:2,clickable:"",onClick:a=>e.hideFolder(t.folder.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.hide.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),t.folder.isVisible?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(d,{key:3,clickable:"",onClick:a=>e.showFolder(t.folder.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.show.label")),1)])),_:1})])),_:2},1032,["onClick"])),a>0?((0,s.uX)(),(0,s.Wv)(d,{key:4,clickable:"",onClick:a=>e.openDeleteFolderModal(t.folder.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])])),_:2},1024),e.accounts.length>0?((0,s.uX)(),(0,s.Wv)(u,{key:0,class:"settings-accounts-account-list"},{default:(0,s.k6)((()=>[(0,s.bF)(p,(0,s.v6)({list:t.accounts},e.draggableAccountOptions,{"item-key":"id","component-data":{id:t.id},onEnd:e.orderAccounts}),{item:(0,s.k6)((({element:t})=>[(0,s.bF)(d,{class:"settings-accounts-account-list-item",clickable:e.$q.screen.lt.lg,id:t.id,onClick:a=>e.openPreviewAccountModal(t.id)},{default:(0,s.k6)((()=>[(0,s.bF)(r,{side:"",class:"settings-accounts-account-list-item-draggable sortable-control"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"settings-accounts-account-list-item-draggable-icon",name:"drag_indicator"})])),_:1}),(0,s.Lk)("div",ic,[(0,s.bF)(r,{class:"settings-accounts-account-list-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"settings-accounts-account-list-item-avatar-icon",name:t.icon},null,8,["name"])])),_:2},1024),(0,s.Lk)("div",rc,[(0,s.bF)(r,{class:"settings-accounts-account-list-item-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(t.name)+" ",1),t.sharedAccess.length>0&&e.econumoPackage.includesSharedAccess?((0,s.uX)(),(0,s.Wv)(i,{key:0,class:"settings-accounts-account-list-item-shared-icon",name:"link"})):(0,s.Q3)("",!0)])),_:2},1024),(0,s.Lk)("div",dc,[(0,s.bF)(r,{class:"settings-accounts-account-list-item-balance"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.moneyFormat(t.balance,t.currency.symbol)),1)])),_:2},1024)])]),t.sharedAccess.length>0&&e.econumoPackage.includesSharedAccess?((0,s.uX)(),(0,s.Wv)(r,{key:0,class:"settings-accounts-account-list-item-shared"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"settings-accounts-account-list-item-shared-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:t.owner.avatar+"?s=30"},null,8,uc)])),_:2},1024),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.sharedAccess,(e=>((0,s.uX)(),(0,s.Wv)(g,{class:"settings-accounts-account-list-item-shared-avatar",key:e.user.id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.user.avatar+"?s=30"},null,8,mc)])),_:2},1024)))),128))])),_:2},1024)):(0,s.Q3)("",!0),e.$q.screen.gt.md?((0,s.uX)(),(0,s.Wv)(r,{key:1,class:"settings-accounts-account-list-item-more",side:""},{default:(0,s.k6)((()=>[(0,s.bF)(c,{color:"grey-7",round:"",flat:"",icon:"more_vert",class:"gt-md settings-accounts-account-list-item-more-btn"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{cover:"","auto-close":""},{default:(0,s.k6)((()=>[(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{clickable:"",onClick:a=>e.openPreviewAccountModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.view.label")),1)])),_:1})])),_:2},1032,["onClick"]),e.hasAdminAccess(t)?((0,s.uX)(),(0,s.Wv)(d,{key:0,clickable:"",onClick:a=>e.openUpdateAccountModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),e.hasAdminAccess(t)&&e.econumoPackage.includesSharedAccess?((0,s.uX)(),(0,s.Wv)(d,{key:1,clickable:"",onClick:a=>e.openAccountAccessModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("pages.settings.accounts.list_actions.access")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),(0,s.bF)(d,{clickable:"",onClick:a=>e.openDeleteAccountModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,s.Q3)("",!0)])])),_:2},1032,["clickable","id","onClick"])])),_:2},1040,["list","component-data","onEnd"])])),_:2},1024)):(0,s.Q3)("",!0)])))),128))]),e.accounts.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",gc,[(0,s.eW)((0,b.v_)(e.$t("elements.list.list_empty"))+" ",1),e.folders.length?((0,s.uX)(),(0,s.CE)("span",pc,[(0,s.Lk)("a",{class:"text-decoration-underline text-purple cursor-pointer",onClick:t[4]||(t[4]=t=>e.openCreateAccountModal(e.accountsTree[0].folder.id))},(0,b.v_)(e.$t("pages.settings.accounts.list_empty_create")),1),(0,s.eW)(" "+(0,b.v_)(e.$t("pages.settings.accounts.list_empty_new_account")),1)])):(0,s.Q3)("",!0)]))]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,s.bF)(v),e.deleteFolderModal.isOpened?((0,s.uX)(),(0,s.Wv)(f,{key:0,"question-title":e.$t("pages.settings.accounts.delete_folder_modal.title"),"question-label":e.deleteFolderModal.folder.name,"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:e.closeModals,onProceed:t[5]||(t[5]=t=>e.deleteFolder(e.deleteFolderModal.folder.id))},null,8,["question-title","question-label","action-label","cancel-label","onCancel"])):(0,s.Q3)("",!0),e.deleteAccountModal.isOpened?((0,s.uX)(),(0,s.Wv)(f,{key:1,"question-label":e.$t("pages.settings.accounts.delete_account_modal.question",{account:e.deleteAccountModal.account.name}),"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:e.closeModals,onProceed:t[6]||(t[6]=t=>e.deleteAccount(e.deleteAccountModal.account.id))},null,8,["question-label","action-label","cancel-label","onCancel"])):(0,s.Q3)("",!0),e.createFolderModal.isOpened?((0,s.uX)(),(0,s.Wv)(h,{key:2,"header-label":e.$t("pages.settings.accounts.create_folder_modal.header"),"input-value":"","input-label":e.$t("elements.form.account.folder.label"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.create.label"),validation:[t=>e.isNotEmpty(t)||e.$t("elements.form.account.folder.validation.empty_name"),t=>e.isValidFolderName(t)||e.$t("elements.form.account.folder.validation.error_name_length")],onCancel:e.closeModals,onSubmit:e.createFolder},null,8,["header-label","input-label","cancel-label","submit-label","validation","onCancel","onSubmit"])):(0,s.Q3)("",!0),e.updateFolderModal.isOpened?((0,s.uX)(),(0,s.Wv)(h,{key:3,"header-label":e.$t("pages.settings.accounts.update_folder_modal.header"),"input-value":e.updateFolderModal.folderName,"input-label":e.$t("elements.form.account.folder.label"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.update.label"),validation:[t=>e.isNotEmpty(t)||e.$t("elements.form.account.folder.validation.empty_name"),t=>e.isValidFolderName(t)||e.$t("elements.form.account.folder.validation.error_name_length")],onClose:e.closeModals,onSubmit:e.renameFolder},null,8,["header-label","input-value","input-label","cancel-label","submit-label","validation","onClose","onSubmit"])):(0,s.Q3)("",!0),(0,s.bF)(y,{class:"preview-modal",modelValue:e.previewAccountModal.isOpened,"onUpdate:modelValue":t[10]||(t[10]=t=>e.previewAccountModal.isOpened=t),position:e.$q.screen.gt.md?"standard":"bottom"},{default:(0,s.k6)((()=>[(0,s.bF)(M,{class:"preview-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(_,{class:"preview-modal-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",bc,[(0,s.Lk)("div",vc,(0,b.v_)(e.$t("pages.settings.accounts.preview_account_modal.header")),1),e.previewAccountModal.account.sharedAccess.length>0&&e.econumoPackage.includesSharedAccess?((0,s.uX)(),(0,s.CE)("div",fc,[(0,s.bF)(i,{class:"preview-modal-head-shared-icon",name:"link"}),(0,s.Lk)("div",hc,(0,b.v_)(e.$t("pages.settings.accounts.preview_account_modal.shared_access")),1)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",_c,[(0,s.bF)(d,{class:"preview-modal-account-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"preview-modal-account-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"preview-modal-account-item-avatar-icon",name:e.previewAccountModal.account.icon},null,8,["name"])])),_:1}),(0,s.Lk)("div",Ac,[(0,s.bF)(r,{class:"preview-modal-account-item-box-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.previewAccountModal.account.name),1)])),_:1}),(0,s.bF)(r,{class:"preview-modal-account-item-box-balance",side:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.moneyFormat(e.previewAccountModal.account.balance,e.previewAccountModal.account.currency.symbol)),1)])),_:1})]),e.previewAccountModal.account.sharedAccess.length>0&&e.econumoPackage.includesSharedAccess?((0,s.uX)(),(0,s.Wv)(r,{key:0,side:"",class:"settings-accounts-account-list-item-shared"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"settings-accounts-account-list-item-shared-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.previewAccountModal.account.owner.avatar+"?s=30"},null,8,Mc)])),_:1}),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.previewAccountModal.account.sharedAccess,(e=>((0,s.uX)(),(0,s.Wv)(g,{class:"settings-accounts-account-list-item-shared-avatar",key:e.user.id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.user.avatar+"?s=30"},null,8,yc)])),_:2},1024)))),128))])),_:1})):(0,s.Q3)("",!0)])),_:1})])])),_:1}),(0,s.bF)(_,{class:"preview-modal-section -info"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",kc,[(0,s.Lk)("div",Cc,[(0,s.Lk)("div",Ec,(0,b.v_)(e.$t("elements.form.account.name.label")),1),(0,s.Lk)("div",Ic,(0,b.v_)(e.previewAccountModal.account.name),1)]),(0,s.Lk)("div",Tc,[(0,s.Lk)("div",Lc,(0,b.v_)(e.$t("elements.form.account.balance.label")),1),(0,s.Lk)("div",Dc,(0,b.v_)(e.previewAccountModal.account.balance),1)]),(0,s.Lk)("div",Nc,[(0,s.Lk)("div",wc,(0,b.v_)(e.$t("elements.form.account.currency.label")),1),(0,s.Lk)("div",Oc,(0,b.v_)(e.previewAccountModal.account.currency.name),1)]),e.econumoPackage.includesSharedAccess?((0,s.uX)(),(0,s.CE)("div",Fc,[(0,s.Lk)("div",Sc,[(0,s.Lk)("div",xc,(0,b.v_)(e.$t("pages.settings.accounts.preview_account_modal.access.label")),1)]),e.previewAccountModal.account.owner.id!==e.userId?((0,s.uX)(),(0,s.CE)("div",Uc,[(0,s.Lk)("div",Rc,[(0,s.bF)(g,{class:"preview-modal-account-info-access-item-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.previewAccountModal.account.owner.avatar+"?s=100",class:"preview-modal-account-info-access-item-avatar-img"},null,8,$c)])),_:1}),(0,s.Lk)("div",jc,[(0,s.Lk)("div",Qc,(0,b.v_)(e.previewAccountModal.account.owner.name),1),(0,s.Lk)("div",qc,(0,b.v_)(e.$t("pages.settings.connections.preview_connection_modal.role.owner")),1)])])])):(0,s.Q3)("",!0),e.previewAccountModal.account.sharedAccess.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:2},(0,s.pI)(e.previewAccountModal.account.sharedAccess,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.user.id},[(0,s.Lk)("div",Pc,[(0,s.bF)(g,{class:"preview-modal-account-info-access-item-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:t.user.avatar+"?s=100",class:"preview-modal-account-info-access-item-avatar-img"},null,8,Wc)])),_:2},1024),(0,s.Lk)("div",Yc,[(0,s.Lk)("div",Bc,(0,b.v_)(t.user.name),1),(0,s.Lk)("div",Hc,(0,b.v_)(e.$t("pages.settings.connections.preview_connection_modal.role."+t.role)),1)])])])))),128)):((0,s.uX)(),(0,s.CE)("div",zc,(0,b.v_)(e.$t("pages.settings.accounts.preview_account_modal.access.no_shared_access")),1))])):(0,s.Q3)("",!0),e.hasAdminAccess(e.previewAccountModal.account)&&e.econumoPackage.includesSharedAccess?((0,s.uX)(),(0,s.CE)("div",Vc,[(0,s.Lk)("div",{class:"preview-modal-account-info-access-btn",onClick:t[7]||(t[7]=t=>e.openAccountAccessModal(e.previewAccountModal.account.id))},(0,b.v_)(e.$t("pages.settings.accounts.preview_account_modal.action.shared_access")),1)])):(0,s.Q3)("",!0)])])),_:1}),(0,s.bF)(A,{class:"preview-modal-account-info-access-actions"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"econumo-btn -large -grey preview-modal-account-info-access-actions-btn",flat:"",icon:"link_off",title:e.$t("elements.button.delete.label"),onClick:t[8]||(t[8]=t=>e.openDeleteAccountModal(e.previewAccountModal.account.id))},null,8,["title"]),e.hasAdminAccess(e.previewAccountModal.account)?((0,s.uX)(),(0,s.Wv)(c,{key:0,class:"econumo-btn -large -grey preview-modal-account-info-access-actions-btn -wide",flat:"",label:e.$t("elements.button.edit.label"),onClick:t[9]||(t[9]=t=>e.openUpdateAccountModal(e.previewAccountModal.account.id))},null,8,["label"])):(0,s.Q3)("",!0),(0,s.bo)((0,s.bF)(c,{class:"econumo-btn -large -grey preview-modal-account-info-access-actions-btn",flat:"",icon:"expand_more",title:e.$t("elements.button.cancel.label")},null,8,["title"]),[[I]])])),_:1})])),_:1})])),_:1},8,["modelValue","position"]),e.accountAccessModal.isOpened?((0,s.uX)(),(0,s.Wv)(k,{key:4,item:e.accountAccessModal.account,"user-id":e.userId,connections:e.connections,"item-owner-user-id":e.accountAccessModal.account.owner.id,onCancel:e.closeModals,onOpenAccessLevelDialog:e.openAccountAccessLevelModal},null,8,["item","user-id","connections","item-owner-user-id","onCancel","onOpenAccessLevelDialog"])):(0,s.Q3)("",!0),e.accountAccessLevelModal.isOpened?((0,s.uX)(),(0,s.Wv)(C,{key:5,user:e.accountAccessLevelModal.user,"item-id":e.accountAccessLevelModal.accountId,role:e.accountAccessLevelModal.role,onCancel:e.closeModals,onAllow:e.updateAccountAccess,onRevoke:e.revokeAccountAccess},null,8,["user","item-id","role","onCancel","onAllow","onRevoke"])):(0,s.Q3)("",!0)]))])])),_:1})}var Gc=a(57),Kc=a.n(Gc);const Zc={class:"prompt-modal-card-section-label"},Jc={class:"prompt-modal-card-section-input"};function ei(e,t,a,n,o,l){const c=(0,s.g2)("q-input"),i=(0,s.g2)("q-card-section"),r=(0,s.g2)("q-btn"),d=(0,s.g2)("q-card-actions"),u=(0,s.g2)("q-form"),m=(0,s.g2)("q-card"),g=(0,s.g2)("q-dialog"),p=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(g,{"model-value":!0,persistent:"",class:"prompt-modal"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"prompt-modal-card econumo-modal"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{ref:"folderForm",onSubmit:e.submit,onReset:e.cancel,class:"prompt-modal-card-form"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"prompt-modal-card-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Zc,(0,b.v_)(e.headerLabel),1),(0,s.Lk)("div",Jc,[(0,s.bF)(c,{class:"form-input -narrow full-width",autofocus:"",outlined:"",modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),label:e.inputLabel,rules:e.validation??[]},null,8,["modelValue","label","rules"])])])),_:1}),(0,s.bF)(d,{class:"prompt-modal-card-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(r,{flat:"",class:"econumo-btn -medium -grey prompt-modal-card-actions-button",label:e.cancelLabel,onClick:e.cancel},null,8,["label","onClick"]),[[p]]),(0,s.bF)(r,{flat:"",class:"econumo-btn -medium -magenta prompt-modal-card-actions-button",label:e.submitLabel,type:"submit"},null,8,["label"])])),_:1})])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})}const ti=(0,s.pM)({props:["headerLabel","inputValue","inputLabel","cancelLabel","submitLabel","validation","id"],data(){return{inputValueCopy:null}},computed:{value:{get(){return this.inputValueCopy??this.inputValue},set(e){this.inputValueCopy=e}}},methods:{submit:function(){this.$emit("submit",this.value,this.inputValue,this.id)},cancel:function(){this.$refs.folderForm&&this.$refs.folderForm.resetValidation(),this.$emit("close")}}}),ai=(0,$.A)(ti,[["render",ei]]),ni=ai;z()(ti,"components",{QDialog:j.A,QCard:na.A,QForm:oa.A,QCardSection:la.A,QInput:sa.A,QCardActions:ga.A,QBtn:Q.A}),z()(ti,"directives",{ClosePopup:pa.A});const oi={class:"settings-toolbar-mobile access-modal-toolbar"},li={class:"settings-toolbar-mobile-title"},si=(0,s.Lk)("div",{class:"settings-toolbar-mobile-container"},null,-1),ci={class:"access-modal-list"},ii={class:"access-modal-title"},ri={key:0,class:"access-modal-note"},di=["onClick"],ui=["src","alt","title"],mi={class:"preview-modal-account-info-access-item-user"},gi={class:"preview-modal-account-info-access-item-user-name"},pi={key:0,class:"preview-modal-account-info-access-item-user-role"},bi={key:1,class:"preview-modal-account-info-access-item-user-role"};function vi(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-card-section"),r=(0,s.g2)("q-avatar"),d=(0,s.g2)("q-card"),u=(0,s.g2)("q-dialog"),m=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(u,{class:"access-modal","model-value":!0,onHide:t[0]||(t[0]=t=>e.$emit("cancel"))},{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"access-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"access-modal-section -toolbar"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",oi,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back"},null,512),[[m]])]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",li,(0,b.v_)(e.item.name),1)]),si])])),_:1}),(0,s.bF)(i,{class:"access-modal-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ci,[(0,s.Lk)("div",ii,(0,b.v_)(e.item.name),1),e.access.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:1},(0,s.pI)(e.access,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.user.id},[t.user.id!==e.userId?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"preview-modal-account-info-access-item",onClick:a=>e.$emit("open-access-level-dialog",e.item.id,t.user.id,t.role)},[(0,s.bF)(r,{class:"preview-modal-account-info-access-item-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:t.user.avatar+"?s=100",class:"preview-modal-account-info-access-item-avatar-img",alt:t.user.name,title:t.user.name},null,8,ui)])),_:2},1024),(0,s.Lk)("div",mi,[(0,s.Lk)("div",gi,(0,b.v_)(t.user.name),1),t.role?((0,s.uX)(),(0,s.CE)("div",bi,(0,b.v_)(e.$t("modals.shared_access.level."+t.role)),1)):((0,s.uX)(),(0,s.CE)("div",pi,(0,b.v_)(e.$t("modals.shared_access.level.no_access")),1))])],8,di)):(0,s.Q3)("",!0)])))),128)):((0,s.uX)(),(0,s.CE)("div",ri,(0,b.v_)(e.$t("modals.shared_access.list_empty")),1))])])),_:1})])),_:1})])),_:1})}const fi=(0,s.pM)({props:["userId","item","itemOwnerUserId","connections"],computed:{access:function(){let e={};B().forEach(this.connections,(t=>{e[t.user.id]={user:t.user,role:t.user.id===this.itemOwnerUserId?"owner":null}})),B().forEach(this.item.sharedAccess,(t=>{t.user.id!==this.userId&&(e[t.user.id]||(e[t.user.id]={user:t.user,role:null}),e[t.user.id].role=t.user.id===this.itemOwnerUserId?"owner":t.role)}));let t=[];return B().forEach(e,(e=>{t.push(e)})),t}}}),hi=(0,$.A)(fi,[["render",vi]]),_i=hi;z()(fi,"components",{QDialog:j.A,QCard:na.A,QCardSection:la.A,QBtn:Q.A,QAvatar:ma.A}),z()(fi,"directives",{ClosePopup:pa.A});const Ai={class:"account-access-dialog-modal-user"},Mi=["src"],yi={class:"account-access-dialog-modal-user-name"},ki={class:"account-access-dialog-modal-user-name-title"};function Ci(e,t,a,n,o,l){const c=(0,s.g2)("q-avatar"),i=(0,s.g2)("q-card-section"),r=(0,s.g2)("q-item-section"),d=(0,s.g2)("q-item"),u=(0,s.g2)("q-list"),m=(0,s.g2)("q-card"),g=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(g,{class:"account-access-dialog-modal","model-value":!0,onHide:t[4]||(t[4]=t=>e.$emit("cancel"))},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"account-access-dialog-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"account-access-dialog-modal-section -padding"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ai,[(0,s.bF)(c,{class:"account-access-dialog-modal-user-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.user.avatar+"?s=100",class:"account-access-dialog-modal-user-avatar-img"},null,8,Mi)])),_:1}),(0,s.Lk)("div",yi,[(0,s.Lk)("div",ki,(0,b.v_)(e.user.name),1)])])])),_:1}),(0,s.bF)(i,{class:"account-access-dialog-modal-section"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"account-access-dialog-modal-list"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:(0,b.C4)(["account-access-dialog-modal-item","control_point "+("guest"===e.role?"active":"")]),clickable:"",onClick:t[0]||(t[0]=t=>e.$emit("allow",e.user.id,e.itemId,"guest"))},{default:(0,s.k6)((()=>[(0,s.bF)(r,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("modals.shared_access.level.guest")),1)])),_:1})])),_:1},8,["class"]),(0,s.bF)(d,{class:(0,b.C4)(["account-access-dialog-modal-item","control_point "+("user"===e.role?"active":"")]),clickable:"",onClick:t[1]||(t[1]=t=>e.$emit("allow",e.user.id,e.itemId,"user"))},{default:(0,s.k6)((()=>[(0,s.bF)(r,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("modals.shared_access.level.user")),1)])),_:1})])),_:1},8,["class"]),(0,s.bF)(d,{class:(0,b.C4)(["account-access-dialog-modal-item","control_point "+("admin"===e.role?"active":"")]),clickable:"",onClick:t[2]||(t[2]=t=>e.$emit("allow",e.user.id,e.itemId,"admin"))},{default:(0,s.k6)((()=>[(0,s.bF)(r,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("modals.shared_access.level.admin")),1)])),_:1})])),_:1},8,["class"]),e.role?((0,s.uX)(),(0,s.Wv)(d,{key:0,class:"account-access-dialog-modal-item -delete",clickable:"",onClick:t[3]||(t[3]=t=>e.$emit("revoke",e.user.id,e.itemId))},{default:(0,s.k6)((()=>[(0,s.bF)(r,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("modals.shared_access.revoke_access")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})}const Ei=(0,s.pM)({props:["user","itemId","role"]}),Ii=(0,$.A)(Ei,[["render",Ci]]),Ti=Ii;z()(Ei,"components",{QDialog:j.A,QCard:na.A,QCardSection:la.A,QAvatar:ma.A,QList:Ja.A,QItem:tn.A,QItemSection:an.A});const Li=(0,s.pM)({name:"SettingsAccountsPage",mixins:[No,Te,et],components:{AccessDialogModal:_i,AccessLevelDialogModal:Ti,PromptDialogModal:ni,draggable:Kc(),AccountModal:$a,ConfirmationDialogModal:$o},data(){return{accountsCopy:null,accountFoldersCopy:null,deleteFolderModal:{isOpened:!1,folder:null},createFolderModal:{isOpened:!1},updateFolderModal:{isOpened:!1,folderId:null,folderName:null},previewAccountModal:{isOpened:!1,account:null},deleteAccountModal:{isOpened:!1,account:null},accountAccessModal:{isOpened:!1,account:null},accountAccessLevelModal:{isOpened:!1,user:null,accountId:null,role:null}}},created(){"settingsAccounts"===this.$router.currentRoute.value.name&&Mt().setWorkspaceActiveArea()},computed:{...(0,u.aH)(Xt,["userId"]),...(0,u.aH)(Bt,["connections"]),...(0,u.aH)(zt,["accountFoldersOrdered"]),...(0,u.aH)(Rt,["accountsOrdered"]),...(0,u.aH)(Rt,{accountAll:"accounts"}),accounts:{get(){return this.accountsCopy||this.accountsOrdered},set(e){this.accountsCopy=e,Rt().orderAccountList(e).finally((()=>{this.accountsCopy=null}))}},folders:function(){return this.accountFoldersCopy||this.accountFoldersOrdered},draggableAccountOptions(){return{animation:200,group:"accounts",disabled:!1,ghostClass:"ghost",handle:".sortable-control"}},accountsTree:function(){let e=[];return this.folders.forEach((t=>{e.push({id:t.id,folder:t,accounts:B().orderBy(B().filter(this.accounts,{folderId:t.id}),["position"],["asc"])})})),e},econumoPackage:function(){return Ga}},methods:{hasAdminAccess:function(e){if(e.owner.id===this.userId)return!0;let t=!1;return e.sharedAccess.forEach((e=>{e.user?.id===this.userId&&"admin"===e.role&&(t=!0)})),t},createFolder:function(e){this.closeModals(),zt().createAccountFolder({name:e.toString()})},renameFolder:function(e,t){this.closeModals();const a=B().find(this.accountFoldersOrdered,{name:t});zt().updateAccountFolder({id:a.id,name:e})},orderAccounts:function(e){const t=e.to.id||null,a=e.item.id||null,n=e.newIndex;let o=[],l=[];this.accountsTree.forEach((e=>{e.accounts.forEach(((l,s)=>{e.folder.id===t&&s===n&&o.push(a),-1===B().indexOf(o,l.id)&&o.push(l.id)}))}));let s=0,c=0;o.forEach((e=>{const n=B().find(this.accounts,{id:e});e===a&&(n.folderId=t,c=s),n&&(n.position=s++,l.push(n))})),this.accounts=l},orderFolder:function(e,t){let a=B().cloneDeep(this.accountFoldersOrdered),n=B().find(a,{id:e});const o=n.position+t;a.forEach(((e,a)=>{a===o?e.position=t<0?e.position+1:e.position-1:e.id===n.id&&(e.position=o)})),this.accountFoldersCopy=B().orderBy(a,["position"],["asc"]);let l=[];B().orderBy(a,["position"],["asc"]).forEach((e=>{l.push(e.id)})),zt().orderAccountFolderList(l).finally((()=>{this.accountFoldersCopy=null}))},openCreateFolderModal:function(){this.createFolderModal.isOpened=!0},openUpdateFolderModal:function(e){this.updateFolderModal.folderId=e,this.updateFolderModal.folderName=B().find(this.folders,{id:e}).name,this.updateFolderModal.isOpened=!0},hideFolder:function(e){zt().hideAccountFolder({id:e})},showFolder:function(e){zt().showAccountFolder({id:e})},openDeleteFolderModal:function(e){this.deleteFolderModal.folder=B().cloneDeep(B().find(this.accountFoldersOrdered,{id:e})),this.deleteFolderModal.isOpened=!0},deleteFolder:function(e){const t=B().last(B().filter(this.accountFoldersOrdered,(t=>t.id!==e)));zt().replaceAccountFolder({id:e,replaceId:t.id}).finally((()=>{this.closeModals()}))},openPreviewAccountModal:function(e){this.previewAccountModal.account=B().cloneDeep(B().find(this.accountAll,{id:e})),this.previewAccountModal.isOpened=!0},openAccountAccessModal:function(e){this.accountAccessModal.account=B().cloneDeep(B().find(this.accountAll,{id:e})),this.accountAccessModal.isOpened=!0},openAccountAccessLevelModal:function(e,t,a){if("owner"===a)return;const n=B().cloneDeep(B().find(this.accountAll,{id:e})),o=B().find(n.sharedAccess,{user:{id:t}});this.accountAccessLevelModal.accountId=n.id;let l=B().find(this.connections,{user:{id:t}});this.accountAccessLevelModal.user=l?l.user:o?.user||null,this.accountAccessLevelModal.role=o?.role||null,this.accountAccessLevelModal.isOpened=!0,console.log(this.accountAccessLevelModal,e,t)},updateAccountAccess:function(e,t,a){this.closeModals(),Bt().setAccountAccess({userId:e,accountId:t,role:a}).finally((()=>{this.accountsCopy=null}))},revokeAccountAccess:function(e,t){this.closeModals(),Bt().revokeAccountAccess({userId:e,accountId:t}).finally((()=>{this.accountsCopy=null}))},openCreateAccountModal:function(e){Fa().openAccountModal({folderId:e})},openUpdateAccountModal:function(e){this.previewAccountModal.account=null,this.previewAccountModal.isOpened=!1,Fa().openAccountModal(B().cloneDeep(B().find(this.accountAll,{id:e})))},openDeleteAccountModal:function(e){this.deleteAccountModal.account=B().cloneDeep(B().find(this.accountAll,{id:e})),this.deleteAccountModal.isOpened=!0},deleteAccount:function(e){Rt().deleteAccount(e).finally((()=>{this.closeModals()}))},closeModals:function(){this.previewAccountModal.isOpened=!1,this.previewAccountModal.account=null,this.deleteAccountModal.isOpened=!1,this.deleteAccountModal.account=null,this.deleteFolderModal.isOpened=!1,this.deleteFolderModal.folder=null,this.updateFolderModal.isOpened=!1,this.updateFolderModal.folderId=null,this.updateFolderModal.folderName=null,this.createFolderModal.isOpened=!1,this.accountAccessModal.isOpened=!1,this.accountAccessModal.account=null,this.accountAccessLevelModal.isOpened=!1,this.accountAccessLevelModal.accountId=null,this.accountAccessLevelModal.user=null,this.accountAccessLevelModal.level=null,Fa().closeAccountModal()},availableConnections:function(e){return B().filter(this.connections,(t=>t.user.id!==e.owner.id&&(!B().find(t.sharedAccounts,{id:e.id})||!B().find(e.sharedAccess,{user:{id:t.user.id}}))))}}}),Di=(0,$.A)(Li,[["render",Xc]]),Ni=Di;z()(Li,"components",{QPage:Cl.A,QBtn:Q.A,QItem:tn.A,QItemSection:an.A,QIcon:ca.A,QMenu:Tl.A,QList:Ja.A,QAvatar:ma.A,QDialog:j.A,QCard:na.A,QCardSection:la.A,QCardActions:ga.A}),z()(Li,"directives",{ClosePopup:pa.A});var wi=a(1359),Oi=a.n(wi);const Fi={class:"settings-classification-wrapper"},Si={class:"settings-toolbar-mobile settings-classification-toolbar-mobile"},xi={class:"settings-toolbar-mobile-title"},Ui={class:"settings-toolbar-mobile-container"},Ri={class:"settings-toolbar-desktop"},$i={class:"settings-breadcrumbs"},ji={class:"settings-label-header settings-classification-header"},Qi={class:"settings-classification-create-class"},qi={key:0,class:"settings-classification-sort"},zi={class:"settings-classification-container"},Pi={key:0,class:"settings-classification-empty"},Wi={key:1},Yi={key:0,class:"settings-classification-list-item-description-archived"},Bi={class:"settings-toolbar-mobile"},Hi={key:0,class:"settings-toolbar-mobile-title"},Vi=(0,s.Lk)("div",{class:"settings-toolbar-mobile-container"},null,-1),Xi={key:0,class:"settings-classification-modal-header"},Gi={class:"settings-classification-modal-toggle"},Ki={class:"settings-classification-modal-control"},Zi={class:"settings-classification-modal-control-icon"},Ji={class:"settings-classification-modal-icon-label"},er={class:"settings-classification-modal-icon"},tr={class:"settings-classification-replace-modal-card-header"},ar={class:"settings-classification-replace-modal-note"},nr=(0,s.Lk)("div",{class:"settings-classification-replace-modal-note-icon"},[(0,s.Lk)("img",{src:Oi()})],-1),or={class:"settings-toolbar-mobile"},lr={key:0,class:"settings-toolbar-mobile-title"},sr=(0,s.Lk)("div",{class:"settings-toolbar-mobile-container"},null,-1),cr={key:0,class:"settings-classification-modal-header"},ir={class:"settings-classification-modal-toggle"},rr={class:"settings-classification-modal-control"},dr={class:"settings-classification-modal-control-icon"},ur={class:"settings-classification-modal-icon-label"},mr={class:"settings-classification-modal-icon"};function gr(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-icon"),r=(0,s.g2)("q-item-section"),d=(0,s.g2)("q-toggle"),u=(0,s.g2)("q-item"),m=(0,s.g2)("q-list"),g=(0,s.g2)("q-menu"),p=(0,s.g2)("draggable"),v=(0,s.g2)("context-menu-modal"),f=(0,s.g2)("sort-dialog-modal"),h=(0,s.g2)("q-btn-toggle"),_=(0,s.g2)("q-input"),A=(0,s.g2)("q-card-section"),M=(0,s.g2)("q-card-actions"),y=(0,s.g2)("q-form"),k=(0,s.g2)("q-card"),C=(0,s.g2)("q-dialog"),E=(0,s.g2)("confirmation-dialog-modal"),I=(0,s.g2)("q-page"),T=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(I,{class:"settings-classification"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Fi,[(0,s.Lk)("div",Si,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("settings",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",xi,(0,b.v_)(e.$t("pages.settings.categories.header")),1)]),(0,s.Lk)("div",Ui,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"add_circle_outline",onClick:t[1]||(t[1]=t=>e.openCreateModal())})])]),(0,s.Lk)("div",Ri,[(0,s.Lk)("div",$i,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[2]||(t[2]=t=>e.navigateTo("settings",!0))},(0,b.v_)(e.$t("pages.settings.settings.header_desktop")),1)])]),(0,s.Lk)("h4",ji,(0,b.v_)(e.$t("pages.settings.categories.header")),1),(0,s.Lk)("div",Qi,[(0,s.bF)(c,{class:"settings-classification-create-class-btn econumo-btn -small -magenta",flat:"",label:e.$t("pages.settings.categories.create_category"),onClick:t[3]||(t[3]=t=>e.openCreateModal())},null,8,["label"])]),e.categories.length>1?((0,s.uX)(),(0,s.CE)("div",qi,[(0,s.bF)(c,{class:"settings-classification-sort-btn",icon:"sort",label:e.$t("elements.list.order_list"),"no-caps":!0,flat:!0,ripple:!1,onClick:e.openSortDialogModal},null,8,["label","onClick"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",zi,[e.categories.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Pi,(0,b.v_)(e.$t("elements.list.list_empty")),1)),e.categories.length>0?((0,s.uX)(),(0,s.CE)("div",Wi,[(0,s.bF)(m,{class:"settings-classification-list"},{default:(0,s.k6)((()=>[(0,s.bF)(p,(0,s.v6)({modelValue:e.categories,"onUpdate:modelValue":t[4]||(t[4]=t=>e.categories=t),onStart:t[5]||(t[5]=t=>e.drag=!0),onEnd:t[6]||(t[6]=t=>e.drag=!1)},e.options,{"item-key":"id"}),{item:(0,s.k6)((({element:t})=>[(0,s.bF)(u,{class:"settings-classification-list-item",clickable:e.$q.screen.lt.lg,onClick:a=>e.openContextMenuModal(t.id)},{default:(0,s.k6)((()=>[(0,s.bF)(r,{side:"",class:"settings-classification-list-item-sortable sortable-control cursor-pointer"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{name:"reorder"})])),_:1}),(0,s.bF)(r,{avatar:"",class:"settings-classification-list-item-avatar"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{name:t.icon},null,8,["name"])])),_:2},1024),(0,s.bF)(r,{class:(0,b.C4)(t.isArchived?"settings-classification-list-item-text -archived":"settings-classification-list-item-text")},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(t.name)+" ",1),t.isArchived?((0,s.uX)(),(0,s.CE)("div",Yi,(0,b.v_)(e.$t("pages.settings.categories.archived_item")),1)):(0,s.Q3)("",!0)])),_:2},1032,["class"]),(0,s.bF)(r,{side:""},{default:(0,s.k6)((()=>[(0,s.bF)(d,{"model-value":!t.isArchived,onClick:a=>e.updateArchiveCategory(t.id,!!t.isArchived)},null,8,["model-value","onClick"])])),_:2},1024),e.$q.screen.gt.md?((0,s.uX)(),(0,s.Wv)(r,{key:0,side:"",class:"cursor-pointer settings-classification-list-item-check-section"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{square:"",flat:"",icon:"more_vert",class:"account-transactions-item-check-button"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{cover:"","auto-close":"",class:"account-transactions-item-check-button-menu"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"account-transactions-item-check-button-list"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{clickable:"",onClick:a=>e.openEditModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:2},1032,["onClick"]),(0,s.bF)(u,{clickable:"",onClick:a=>e.openReplaceModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.replace.label")),1)])),_:1})])),_:2},1032,["onClick"]),(0,s.bF)(u,{clickable:"",onClick:a=>e.openDeleteModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1032,["clickable","onClick"])])),_:1},16,["modelValue"])])),_:1})])):(0,s.Q3)("",!0)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.contextMenuModal.isOpened?((0,s.uX)(),(0,s.Wv)(v,{key:0,"header-label":e.contextMenuModal.category.name,actions:[{label:e.$t("elements.button.edit.label"),value:"edit",context:e.contextMenuModal.category.id},{label:e.$t("elements.button.replace.label"),value:"replace",context:e.contextMenuModal.category.id},{label:e.$t("elements.button.delete.label"),value:"delete",context:e.contextMenuModal.category.id}],onCancel:t[7]||(t[7]=t=>e.closeContextMenuModal()),onProceed:e.openNextModal},null,8,["header-label","actions","onProceed"])):(0,s.Q3)("",!0),(0,s.bF)(f,{modelValue:e.sortModal.isOpened,"onUpdate:modelValue":t[8]||(t[8]=t=>e.sortModal.isOpened=t),onCancel:e.closeSortDialogModal,onProceed:e.updateOrder},null,8,["modelValue","onCancel","onProceed"]),(0,s.bF)(C,{class:"settings-classification-modal",modelValue:e.editModal.isOpened,"onUpdate:modelValue":t[11]||(t[11]=t=>e.editModal.isOpened=t),onHide:e.closeEditModal,persistent:""},{default:(0,s.k6)((()=>[(0,s.bF)(k,{class:"settings-classification-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(y,{ref:"categoryEditForm",onSubmit:e.submitEditForm,class:"settings-classification-modal-form"},{default:(0,s.k6)((()=>[(0,s.bF)(A,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Bi,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back"},null,512),[[T]])]),(0,s.Lk)("div",null,[e.selectedCategoryId?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("h4",Hi,(0,b.v_)(e.$t("pages.settings.categories.edit_modal.header")),1))]),Vi]),e.selectedCategoryId?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Xi,(0,b.v_)(e.$t("pages.settings.categories.edit_modal.header")),1)),(0,s.Lk)("div",Gi,[(0,s.bF)(h,{class:"settings-classification-modal-toggle-btn",modelValue:e.editModal.category.type,"onUpdate:modelValue":t[9]||(t[9]=t=>e.editModal.category.type=t),disable:"",readonly:"","toggle-color":"primary",options:[{label:e.$t("elements.form.category.type.income"),value:"income"},{label:e.$t("elements.form.category.type.expense"),value:"expense"}]},null,8,["modelValue","options"])]),(0,s.Lk)("div",Ki,[(0,s.bF)(_,{outlined:"",class:"form-input full-width",modelValue:e.editModal.category.name,"onUpdate:modelValue":t[10]||(t[10]=t=>e.editModal.category.name=t),label:e.$t("elements.form.category.name.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.category.name.validation.required_field"),t=>e.isValidCategoryName(t)||e.$t("elements.form.category.name.validation.invalid_name")],maxlength:"18"},{before:(0,s.k6)((()=>[(0,s.Lk)("div",Zi,[(0,s.bF)(i,{class:"settings-classification-modal-control-icon-img",name:e.editModal.category.icon},null,8,["name"])])])),_:1},8,["modelValue","label","rules"])])])),_:1}),(0,s.bF)(A,{class:"settings-classification-modal-section-icon"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ji,(0,b.v_)(e.$t("elements.form.category.icon.label")),1),(0,s.Lk)("div",er,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.icons,(t=>((0,s.uX)(),(0,s.Wv)(c,{class:(0,b.C4)(["settings-classification-modal-icon-btn",e.editModal.category.icon===t?"-active":""]),icon:t,key:t,onClick:a=>e.editModal.category.icon=t},null,8,["class","icon","onClick"])))),128))])])),_:1}),(0,s.bF)(M,{class:"settings-classification-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"econumo-btn -medium -grey settings-classification-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClick:e.closeEditModal},null,8,["label","onClick"]),(0,s.bF)(c,{class:"econumo-btn -medium -magenta settings-classification-modal-actions-button",flat:"",label:e.$t("elements.button.update.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue","onHide"]),(0,s.bF)(C,{class:"settings-classification-replace-modal",modelValue:e.replaceModal.isOpened,"onUpdate:modelValue":t[13]||(t[13]=t=>e.replaceModal.isOpened=t),onHide:e.closeReplaceModal,position:e.$q.screen.gt.md?"standard":"bottom"},{default:(0,s.k6)((()=>[(0,s.bF)(k,{class:"settings-classification-replace-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(A,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",tr,(0,b.v_)(e.$t("pages.settings.categories.replace_modal.header")),1),(0,s.Lk)("div",null,[(0,s.bF)(m,{class:"settings-classification-replace-modal-card-list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.categoriesExcept(e.replaceModal.categoryId),(t=>((0,s.uX)(),(0,s.Wv)(u,{key:t.id,class:"settings-classification-replace-modal-card-list-item",clickable:"",onClick:a=>e.replaceModal.selectedCategoryId=t.id,active:e.replaceModal.selectedCategoryId===t.id,"active-class":"active"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{avatar:"",class:"settings-classification-replace-modal-card-list-item-avatar"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"settings-classification-replace-modal-card-list-item-avatar-icon",name:t.icon},null,8,["name"])])),_:2},1024),(0,s.bF)(r,{class:"settings-classification-replace-modal-card-list-item-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(t.name),1)])),_:2},1024)])),_:2},1032,["onClick","active"])))),128))])),_:1})])])),_:1}),(0,s.Lk)("div",ar,[nr,(0,s.eW)(" "+(0,b.v_)(e.$t("pages.settings.categories.replace_modal.note")),1)]),(0,s.bF)(M,{class:"settings-classification-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(c,{class:"econumo-btn -medium -grey settings-classification-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label")},null,8,["label"]),[[T]]),(0,s.bF)(c,{class:"econumo-btn -medium -magenta settings-classification-modal-actions-button",flat:"",label:e.$t("elements.button.replace.label"),disable:!e.replaceModal.selectedCategoryId,onClick:t[12]||(t[12]=t=>e.replaceCategory(e.replaceModal.categoryId,e.replaceModal.selectedCategoryId))},null,8,["label","disable"])])),_:1})])),_:1})])),_:1},8,["modelValue","onHide","position"]),e.deleteModal.isOpened?((0,s.uX)(),(0,s.Wv)(E,{key:1,"question-title":e.$t("pages.settings.categories.delete_modal.title"),"question-label":e.deleteModal.category?.name,"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:e.closeDeleteModal,onProceed:t[14]||(t[14]=t=>e.deleteCategory(e.deleteModal.category.id))},null,8,["question-title","question-label","action-label","cancel-label","onCancel"])):(0,s.Q3)("",!0),(0,s.bF)(C,{class:"settings-classification-modal",modelValue:e.createModal.isOpened,"onUpdate:modelValue":t[17]||(t[17]=t=>e.createModal.isOpened=t),onHide:e.closeCreateModal},{default:(0,s.k6)((()=>[(0,s.bF)(k,{class:"settings-classification-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(y,{ref:"createCategoryForm",onSubmit:e.createCategory,class:"settings-classification-modal-form"},{default:(0,s.k6)((()=>[(0,s.bF)(A,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",or,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back"},null,512),[[T]])]),(0,s.Lk)("div",null,[e.selectedCategoryId?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("h4",lr,(0,b.v_)(e.$t("pages.settings.categories.create_modal.header")),1))]),sr]),e.selectedCategoryId?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",cr,(0,b.v_)(e.$t("pages.settings.categories.create_modal.header")),1)),(0,s.Lk)("div",ir,[(0,s.bF)(h,{class:"settings-classification-modal-toggle-btn",modelValue:e.createModal.categoryType,"onUpdate:modelValue":t[15]||(t[15]=t=>e.createModal.categoryType=t),options:[{label:e.$t("elements.form.category.type.income"),value:"income"},{label:e.$t("elements.form.category.type.expense"),value:"expense"}]},null,8,["modelValue","options"])]),(0,s.Lk)("div",rr,[(0,s.bF)(_,{class:"form-input full-width",outlined:"",placeholder:e.$t("elements.form.category.name.placeholder"),modelValue:e.createModal.categoryName,"onUpdate:modelValue":t[16]||(t[16]=t=>e.createModal.categoryName=t),label:e.$t("elements.form.category.name.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.category.name.validation.required_field"),t=>e.isValidCategoryName(t)||e.$t("elements.form.category.name.validation.invalid_name")],maxlength:"18"},{before:(0,s.k6)((()=>[(0,s.Lk)("div",dr,[(0,s.bF)(i,{class:"settings-classification-modal-control-icon-img",name:e.createModal.categoryIcon},null,8,["name"])])])),_:1},8,["placeholder","modelValue","label","rules"])])])),_:1}),(0,s.bF)(A,{class:"settings-classification-modal-section-icon"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ur,(0,b.v_)(e.$t("elements.form.category.icon.label")),1),(0,s.Lk)("div",mr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.icons,(t=>((0,s.uX)(),(0,s.Wv)(c,{class:(0,b.C4)(["settings-classification-modal-icon-btn",e.createModal.categoryIcon===t?"-active":""]),icon:t,key:t,onClick:a=>e.createModal.categoryIcon=t},null,8,["class","icon","onClick"])))),128))])])),_:1}),(0,s.bF)(M,{class:"settings-classification-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(c,{class:"econumo-btn -medium -grey settings-classification-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label")},null,8,["label"]),[[T]]),(0,s.bF)(c,{class:"econumo-btn -medium -magenta settings-classification-modal-actions-button",flat:"",label:e.$t("elements.button.create.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue","onHide"])]))])])),_:1})}const pr={class:"context-menu-modal-card-label"},br={class:"context-menu-modal-card-list"},vr=(0,s.pM)(Object.assign({name:"ContextMenuModal"},{__name:"ContextMenuModal",props:{headerLabel:{},actions:{}},emits:["proceed","cancel"],setup(e,{emit:t}){const a=t;function o(e,t){a("proceed",e,t)}return(e,t)=>{const a=(0,s.g2)("q-btn"),l=(0,s.g2)("q-card"),c=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(c,{"model-value":!0,onHide:t[0]||(t[0]=t=>e.$emit("cancel")),class:"context-menu-modal"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{class:"context-menu-modal-card"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",pr,(0,b.v_)(e.headerLabel),1),(0,s.Lk)("ul",br,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.actions,(e=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("li",{key:e.value,class:"context-menu-modal-card-list-item"},[(0,s.bF)(a,{class:(0,b.C4)("delete"===e.value?"context-menu-modal-card-list-item-btn -delete":"context-menu-modal-card-list-item-btn"),flat:"",label:e.label,onClick:t=>o(e.value,e.context)},null,8,["class","label","onClick"])])),[[n.aG,!0!==e.isHidden]]))),128))])])),_:1})])),_:1})}}})),fr=vr,hr=fr;z()(vr,"components",{QDialog:j.A,QCard:na.A,QBtn:Q.A});const _r={class:"sort-modal-card-title"},Ar={class:"sort-modal-card-list"},Mr={class:"sort-modal-card-list-item"},yr={class:"sort-modal-card-list-item"},kr={class:"sort-modal-card-list-item"},Cr={class:"sort-modal-card-list-item"};function Er(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-card"),r=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(r,{"model-value":!0,onClose:t[4]||(t[4]=t=>e.$emit("cancel")),class:"sort-modal"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"econumo-modal sort-modal-card"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",_r,(0,b.v_)(e.$t("modals.sort.header")),1),(0,s.Lk)("ul",Ar,[(0,s.Lk)("li",Mr,[(0,s.bF)(c,{class:"sort-modal-card-list-item-btn",flat:"",label:e.$t("modals.sort.mode.alphabet.asc"),onClick:t[0]||(t[0]=t=>e.$emit("proceed","name","asc"))},null,8,["label"])]),(0,s.Lk)("li",yr,[(0,s.bF)(c,{class:"sort-modal-card-list-item-btn",flat:"",label:e.$t("modals.sort.mode.alphabet.desc"),onClick:t[1]||(t[1]=t=>e.$emit("proceed","name","desc"))},null,8,["label"])]),(0,s.Lk)("li",kr,[(0,s.bF)(c,{class:"sort-modal-card-list-item-btn",flat:"",label:e.$t("modals.sort.mode.count.desc"),onClick:t[2]||(t[2]=t=>e.$emit("proceed","count","desc"))},null,8,["label"])]),(0,s.Lk)("li",Cr,[(0,s.bF)(c,{class:"sort-modal-card-list-item-btn",flat:"",label:e.$t("modals.sort.mode.count.asc"),onClick:t[3]||(t[3]=t=>e.$emit("proceed","count","asc"))},null,8,["label"])])])])),_:1})])),_:1})}const Ir=(0,s.pM)({props:[]}),Tr=(0,$.A)(Ir,[["render",Er]]),Lr=Tr;z()(Ir,"components",{QDialog:j.A,QCard:na.A,QBtn:Q.A});const Dr=(0,s.pM)({name:"SettingsCategoriesPage",mixins:[No,et],components:{draggable:Kc(),ContextMenuModal:hr,ConfirmationDialogModal:$o,SortDialogModal:Lr},data(){return{categoriesCopy:null,selectedCategoryId:null,contextMenuModal:{isOpened:!1,categoryId:null},editModal:{isOpened:!1,category:null},replaceModal:{isOpened:!1,categoryId:null,selectedCategoryId:null},deleteModal:{isOpened:!1,category:null},createModal:{isOpened:!1,categoryType:"expense",categoryName:null,categoryIcon:null},sortModal:{isOpened:!1}}},created(){"settingsCategories"===this.$router.currentRoute.value.name&&Mt().setWorkspaceActiveArea()},computed:{...(0,u.aH)(Xt,["userId"]),...(0,u.aH)(wt,["ownCategories"]),icons:function(){return La},categories:{get(){return this.categoriesCopy||B().filter(this.ownCategories,{ownerUserId:this.userId})},set(e){this.categoriesCopy=e;let t=[];e.forEach((e=>{t.push(e.id)})),wt().orderCategoryList(t).finally((()=>{this.categoriesCopy=null}))}},selectedCategory:function(){return B().find(this.ownCategories,{id:this.selectedCategoryId})},options(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost",handle:".sortable-control"}},categoriesOptions:function(){let e=[];return this.categories.forEach((t=>{this.selectedCategory.type===t.type&&e.push({label:t.name,value:t.id,icon:t.icon})})),e}},methods:{openContextMenuModal:function(e){this.contextMenuModal.category=B().cloneDeep(B().find(this.categories,{id:e})),this.contextMenuModal.isOpened=!0},closeContextMenuModal:function(){this.contextMenuModal.category=null,this.contextMenuModal.isOpened=!1},openNextModal:function(e,t){this.closeContextMenuModal(),"edit"===e?this.openEditModal(t):"replace"===e?this.openReplaceModal(t):"delete"===e&&this.openDeleteModal(t)},openEditModal:function(e){this.editModal.category=B().cloneDeep(B().find(this.categories,{id:e})),this.editModal.isOpened=!0},closeEditModal:function(){this.editModal.category=null,this.editModal.isOpened=!1},submitEditForm:function(){const e={id:this.editModal.category.id,name:this.editModal.category.name,icon:this.editModal.category.icon};wt().updateCategory(e).finally((()=>{this.$refs.categoryEditForm&&this.$refs.categoryEditForm.resetValidation(),this.categoriesCopy=null,this.closeEditModal()}))},openReplaceModal:function(e){this.replaceModal.categoryId=e,this.replaceModal.selectedCategoryId=null,this.replaceModal.isOpened=!0},closeReplaceModal:function(){this.replaceModal.categoryId=null,this.replaceModal.selectedCategoryId=null,this.replaceModal.isOpened=!1},categoriesExcept:function(e){const t=B().find(this.ownCategories,{id:e});return t?B().filter(this.ownCategories,(e=>e.id!==t.id&&e.type===t.type)):[]},replaceCategory:function(e,t){wt().replaceCategory({oldId:e,newId:t}).finally((()=>{this.categoriesCopy=null,this.closeReplaceModal()}))},openDeleteModal:function(e){this.deleteModal.category=B().cloneDeep(B().find(this.categories,{id:e})),this.deleteModal.isOpened=!0},closeDeleteModal:function(){this.deleteModal.category=null,this.deleteModal.isOpened=!1},deleteCategory:function(e){wt().deleteCategory(e).finally((()=>{this.categoriesCopy=null,this.closeDeleteModal()}))},openCreateModal:function(){this.createModal.categoryType="expense",this.createModal.categoryName="",this.createModal.categoryIcon=wa,this.createModal.isOpened=!0},closeCreateModal:function(){this.createModal.categoryType="expense",this.createModal.categoryName="",this.createModal.categoryIcon="",this.createModal.isOpened=!1},createCategory:function(){let e={id:null,name:this.createModal.categoryName,type:this.createModal.categoryType,icon:this.createModal.categoryIcon};wt().createCategory(e).finally((()=>{this.$refs.createCategoryForm&&this.$refs.createCategoryForm.resetValidation(),this.closeCreateModal(),this.categoriesCopy=null}))},updateArchiveCategory:function(e,t=!1){t?wt().unarchiveCategory(e).finally((()=>{this.categoriesCopy=null})):wt().archiveCategory(e).finally((()=>{this.categoriesCopy=null}))},openSortDialogModal:function(){this.sortModal.isOpened=!0},closeSortDialogModal:function(){this.sortModal.isOpened=!1},updateOrder:function(e,t){wt().changeCategoriesSortMode({type:e,direction:t}).finally((()=>{this.categoriesCopy=null,this.closeSortDialogModal()}))}}});var Nr=a(6908);const wr=(0,$.A)(Dr,[["render",gr]]),Or=wr;z()(Dr,"components",{QPage:Cl.A,QBtn:Q.A,QList:Ja.A,QItem:tn.A,QItemSection:an.A,QIcon:ca.A,QToggle:Nr.A,QMenu:Tl.A,QDialog:j.A,QCard:na.A,QForm:oa.A,QCardSection:la.A,QBtnToggle:da.A,QInput:sa.A,QCardActions:ga.A}),z()(Dr,"directives",{ClosePopup:pa.A});const Fr={class:"settings-classification-wrapper"},Sr={class:"settings-toolbar-mobile settings-classification-toolbar-mobile"},xr={class:"settings-toolbar-mobile-title"},Ur={class:"settings-toolbar-mobile-container"},Rr={class:"settings-toolbar-desktop"},$r={class:"settings-breadcrumbs"},jr={class:"settings-label-header settings-classification-header"},Qr={class:"settings-classification-create-class"},qr={key:0,class:"settings-classification-sort"},zr={class:"settings-classification-container"},Pr={key:0,class:"settings-classification-empty"},Wr={key:1},Yr={key:0,class:"settings-classification-list-item-description-archived"};function Br(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-icon"),r=(0,s.g2)("q-item-section"),d=(0,s.g2)("q-toggle"),u=(0,s.g2)("q-item"),m=(0,s.g2)("q-list"),g=(0,s.g2)("q-menu"),p=(0,s.g2)("draggable"),v=(0,s.g2)("context-menu-modal"),f=(0,s.g2)("sort-dialog-modal"),h=(0,s.g2)("prompt-dialog-modal"),_=(0,s.g2)("confirmation-dialog-modal"),A=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(A,{class:"settings-classification"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Fr,[(0,s.Lk)("div",Sr,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("settings",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",xr,(0,b.v_)(e.$t("pages.settings.payees.header")),1)]),(0,s.Lk)("div",Ur,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"add_circle_outline",onClick:t[1]||(t[1]=t=>e.openCreateModal())})])]),(0,s.Lk)("div",Rr,[(0,s.Lk)("div",$r,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[2]||(t[2]=t=>e.navigateTo("settings",!0))},(0,b.v_)(e.$t("pages.settings.settings.header_desktop")),1)])]),(0,s.Lk)("h4",jr,(0,b.v_)(e.$t("pages.settings.payees.menu_item")),1),(0,s.Lk)("div",Qr,[(0,s.bF)(c,{class:"settings-classification-create-class-btn econumo-btn -small -magenta",flat:"",label:e.$t("pages.settings.payees.create_payee"),onClick:t[3]||(t[3]=t=>e.openCreateModal())},null,8,["label"])]),e.payees.length>1?((0,s.uX)(),(0,s.CE)("div",qr,[(0,s.bF)(c,{class:"settings-classification-sort-btn",icon:"sort",label:e.$t("elements.list.order_list"),"no-caps":!0,flat:!0,ripple:!1,onClick:e.openSortModal},null,8,["label","onClick"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",zr,[e.payees.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Pr,(0,b.v_)(e.$t("elements.list.list_empty")),1)),e.payees.length>0?((0,s.uX)(),(0,s.CE)("div",Wr,[(0,s.bF)(m,{class:"settings-classification-list"},{default:(0,s.k6)((()=>[(0,s.bF)(p,(0,s.v6)({modelValue:e.payees,"onUpdate:modelValue":t[4]||(t[4]=t=>e.payees=t),onStart:t[5]||(t[5]=t=>e.drag=!0),onEnd:t[6]||(t[6]=t=>e.drag=!1)},e.options,{"item-key":"id"}),{item:(0,s.k6)((({element:t})=>[(0,s.bF)(u,{class:"settings-classification-list-item",clickable:e.$q.screen.lt.lg,onClick:a=>e.openContextMenuModal(t.id)},{default:(0,s.k6)((()=>[(0,s.bF)(r,{side:"",class:"settings-classification-list-item-sortable sortable-control cursor-pointer"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{name:"reorder"})])),_:1}),(0,s.bF)(r,{class:(0,b.C4)(t.isArchived?"settings-classification-list-item-text -archived":"settings-classification-list-item-text")},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(t.name)+" ",1),t.isArchived?((0,s.uX)(),(0,s.CE)("div",Yr,(0,b.v_)(e.$t("pages.settings.payees.archived_item")),1)):(0,s.Q3)("",!0)])),_:2},1032,["class"]),(0,s.bF)(r,{side:""},{default:(0,s.k6)((()=>[(0,s.bF)(d,{"model-value":!t.isArchived,onClick:a=>e.updateArchivePayee(t.id,!!t.isArchived)},null,8,["model-value","onClick"])])),_:2},1024),e.$q.screen.gt.md?((0,s.uX)(),(0,s.Wv)(r,{key:0,side:"",class:"cursor-pointer settings-classification-list-item-check-section"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{square:"",flat:"",icon:"more_vert",class:"account-transactions-item-check-button"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{cover:"","auto-close":"",class:"account-transactions-item-check-button-menu"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"account-transactions-item-check-button-list"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{clickable:"",onClick:a=>e.openEditModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:2},1032,["onClick"]),(0,s.bF)(u,{clickable:"",onClick:a=>e.openDeleteModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1032,["clickable","onClick"])])),_:1},16,["modelValue"])])),_:1})])):(0,s.Q3)("",!0)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.contextMenuModal.isOpened?((0,s.uX)(),(0,s.Wv)(v,{key:0,"header-label":e.contextMenuModal.payee.name,actions:[{label:e.$t("elements.button.edit.label"),value:"edit",context:e.contextMenuModal.payee.id},{label:e.$t("elements.button.delete.label"),value:"delete",context:e.contextMenuModal.payee.id}],onCancel:t[7]||(t[7]=t=>e.closeContextMenuModal()),onProceed:e.openNextModal},null,8,["header-label","actions","onProceed"])):(0,s.Q3)("",!0),(0,s.bF)(f,{modelValue:e.sortModal.isOpened,"onUpdate:modelValue":t[8]||(t[8]=t=>e.sortModal.isOpened=t),onCancel:e.closeSortModal,onProceed:e.updateOrder},null,8,["modelValue","onCancel","onProceed"]),e.editModal.isOpened?((0,s.uX)(),(0,s.Wv)(h,{key:1,"header-label":e.$t("pages.settings.payees.edit_modal.header"),"input-value":e.editModal.payeeName,"input-label":e.$t("elements.form.payee.name.label"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.update.label"),validation:[t=>e.isNotEmpty(t)||e.$t("elements.form.payee.name.validation.required_field"),t=>e.isValidPayeeName(t)||e.$t("elements.form.payee.name.validation.invalid_name")],onClose:e.closeEditModal,onSubmit:e.updatePayee},null,8,["header-label","input-value","input-label","cancel-label","submit-label","validation","onClose","onSubmit"])):(0,s.Q3)("",!0),e.deleteModal.isOpened?((0,s.uX)(),(0,s.Wv)(_,{key:2,"question-title":e.$t("pages.settings.payees.delete_modal.title"),"question-label":e.deleteModal.payee?.name,"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:e.closeDeleteModal,onProceed:t[9]||(t[9]=t=>e.deletePayee(e.deleteModal.payee.id))},null,8,["question-title","question-label","action-label","cancel-label","onCancel"])):(0,s.Q3)("",!0),e.createModal.isOpened?((0,s.uX)(),(0,s.Wv)(h,{key:3,"header-label":e.$t("pages.settings.payees.create_modal.header"),"input-value":"","input-label":e.$t("elements.form.payee.name.label"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.create.label"),validation:[t=>e.isNotEmpty(t)||e.$t("elements.form.payee.name.validation.required_field"),t=>e.isValidPayeeName(t)||e.$t("elements.form.payee.name.validation.invalid_name")],onClose:e.closeCreateModal,onSubmit:e.createPayee},null,8,["header-label","input-label","cancel-label","submit-label","validation","onClose","onSubmit"])):(0,s.Q3)("",!0)]))])])),_:1})}const Hr=(0,s.pM)({name:"SettingsPayeesPage",mixins:[No,et],components:{draggable:Kc(),SortDialogModal:Lr,ContextMenuModal:hr,PromptDialogModal:ni,ConfirmationDialogModal:$o},data(){return{payeesCopy:null,contextMenuModal:{isOpened:!1,payee:null},editModal:{isOpened:!1,payeeId:null,payeeName:null},createModal:{isOpened:!1},sortModal:{isOpened:!1},deleteModal:{isOpened:!1,payee:null},modal:{isOpened:!1,payeeId:null,payeeName:null,payeeIsArchived:null}}},created(){"settingsPayees"===this.$router.currentRoute.value.name&&Mt().setWorkspaceActiveArea()},computed:{...(0,u.aH)(Xt,["userId"]),...(0,u.aH)(xt,["ownPayees"]),payees:{get(){return this.payeesCopy||this.ownPayees},set(e){this.payeesCopy=e;let t=[];e.forEach((e=>{t.push(e.id)})),xt().orderPayeeList(t).finally((()=>{this.payeesCopy=null}))}},options(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost",handle:".sortable-control"}}},methods:{openContextMenuModal:function(e){this.contextMenuModal.payee=B().find(this.ownPayees,{id:e}),this.contextMenuModal.isOpened=!0},closeContextMenuModal:function(){this.contextMenuModal.payee=null,this.contextMenuModal.isOpened=!1},openNextModal:function(e,t){this.closeContextMenuModal(),"edit"===e?this.openEditModal(t):"delete"===e&&this.openDeleteModal(t)},openSortModal:function(){this.sortModal.isOpened=!0},closeSortModal:function(){this.sortModal.isOpened=!1},updateOrder:function(e,t){xt().changePayeesSortMode({type:e,direction:t}).finally((()=>{this.payeesCopy=null,this.closeSortModal()}))},openEditModal:function(e){const t=B().cloneDeep(B().find(this.ownPayees,{id:e}));this.editModal.payeeId=t.id,this.editModal.payeeName=t.name,this.editModal.isOpened=!0},closeEditModal:function(){this.editModal.isOpened=!1,this.editModal.payeeId=null,this.editModal.payeeName=null},updatePayee:function(e,t){const a=B().find(this.ownPayees,{name:t});xt().updatePayee({id:a.id,name:e}).finally((()=>{this.closeEditModal(),this.payeesCopy=null}))},openDeleteModal:function(e){this.deleteModal.payee=B().cloneDeep(B().find(this.ownPayees,{id:e})),this.deleteModal.isOpened=!0},closeDeleteModal:function(){this.deleteModal.isOpened=!1,this.deleteModal.payee=null},deletePayee:function(e){xt().deletePayee(e).finally((()=>{this.closeDeleteModal(),this.payeesCopy=null}))},openCreateModal:function(){this.createModal.isOpened=!0},closeCreateModal:function(){this.createModal.isOpened=!1},createPayee:function(e){xt().createPayee({name:e}).finally((()=>{this.closeCreateModal(),this.payeesCopy=null}))},updateArchivePayee:function(e,t=!1){t?xt().unarchivePayee(e).finally((()=>{this.payeesCopy=null})):xt().archivePayee(e).finally((()=>{this.payeesCopy=null}))}}}),Vr=(0,$.A)(Hr,[["render",Br]]),Xr=Vr;z()(Hr,"components",{QPage:Cl.A,QBtn:Q.A,QList:Ja.A,QItem:tn.A,QItemSection:an.A,QIcon:ca.A,QToggle:Nr.A,QMenu:Tl.A});const Gr={class:"budget-form-wrapper"},Kr={class:"budget-form-wrapper-control"},Zr={class:"budget-form-wrapper-accounts-header"},Jr={class:"budget-form-wrapper-accounts"},ed={class:"budget-form-wrapper-accounts-item-info"},td={class:"budget-form-wrapper-accounts-item-info-container"},ad=(0,s.pM)(Object.assign({name:"BudgetForm",mixins:[et,No,Te]},{__name:"BudgetForm",props:{name:{},excluded:{},canUpdateName:{type:Boolean}},emits:["update-name","update-excluded"],setup(e,{emit:t}){const a=e,n=t,o=Rt(),c=(0,s.EW)({get(){return a.name},set(e){n("update-name",e)}}),i=(0,l.KR)(a.excluded),r=(0,s.EW)((()=>{const e=[];return o.ownAccounts.forEach((t=>{const{id:a,name:n,icon:o,balance:l,currency:s}=t,c=!_.includes(i.value,a),r={id:a,name:n,icon:o,balance:l,currency:s,included:c};e.push(r)})),e}));function d(e,t){const a=_.includes(i.value,e);a&&t?_.remove(i.value,(t=>t===e)):a||t||i.value.push(e),n("update-excluded",i)}return(e,t)=>{const a=(0,s.g2)("q-input"),n=(0,s.g2)("q-icon"),o=(0,s.g2)("q-item-section"),l=(0,s.g2)("q-toggle");return(0,s.uX)(),(0,s.CE)("div",Gr,[(0,s.Lk)("div",Kr,[(0,s.bF)(a,{class:"form-input full-width",outlined:"",autofocus:"",placeholder:e.$t("elements.form.budget.name.placeholder"),modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),disable:!e.canUpdateName,label:e.$t("elements.form.budget.name.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.budget.name.validation.required_field"),t=>e.isValidBudgetName(t)||e.$t("elements.form.budget.name.validation.invalid_name")],maxlength:"18"},null,8,["placeholder","modelValue","disable","label","rules"])]),(0,s.Lk)("h5",Zr,(0,b.v_)(e.$t("modals.budget.budget_form.accounts")),1),(0,s.Lk)("div",Jr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.value,(t=>((0,s.uX)(),(0,s.CE)("div",{class:"budget-form-wrapper-accounts-item-wrapper",key:t.id},[(0,s.bF)(o,{class:"budget-form-wrapper-accounts-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"budget-form-wrapper-accounts-item-avatar-icon",name:t.icon},null,8,["name"])])),_:2},1024),(0,s.Lk)("div",ed,[(0,s.bF)(o,{class:"budget-form-wrapper-accounts-item-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(t.name),1)])),_:2},1024),(0,s.Lk)("div",td,[(0,s.bF)(o,{class:"budget-form-wrapper-accounts-item-balance"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.moneyFormat(t.balance,t.currency.symbol)),1)])),_:2},1024)])]),(0,s.bF)(o,{class:"budget-form-wrapper-accounts-item-toggle",side:""},{default:(0,s.k6)((()=>[(0,s.bF)(l,{"model-value":t.included,onClick:e=>d(t.id,!t.included)},null,8,["model-value","onClick"])])),_:2},1024)])))),128))])])}}})),nd=ad,od=nd;z()(ad,"components",{QInput:sa.A,QItemSection:an.A,QIcon:ca.A,QToggle:Nr.A});const ld={class:"settings-toolbar-mobile"},sd={class:"settings-toolbar-mobile-title"},cd={class:"responsive-modal-header"},id=(0,s.pM)(Object.assign({name:"BudgetCreateFormModal"},{__name:"BudgetCreateFormModal",props:{id:{},name:{},excluded:{}},emits:["update-name","update-excluded","submit","close"],setup(e,{emit:t}){const a=e,o=t,l=(0,s.EW)({get(){return a.name},set(e){o("update-name",e)}}),c=(0,s.EW)({get(){return a.excluded},set(e){o("update-excluded",e)}});function i(){o("submit",{id:a.id,name:l.value,excludedAccounts:c.value,startDate:"",currencyId:""})}function r(){o("close")}return(e,t)=>{const a=(0,s.g2)("q-card-section"),o=(0,s.g2)("q-btn"),d=(0,s.g2)("q-card-actions"),u=(0,s.g2)("q-form"),m=(0,s.g2)("q-card"),g=(0,s.g2)("q-dialog"),p=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(g,{class:"responsive-modal","model-value":!0,onHide:r},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"responsive-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{ref:"budgetForm",onSubmit:(0,n.D$)(i,["prevent"]),onReset:r},{default:(0,s.k6)((()=>[(0,s.bF)(a,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",ld,[(0,s.Lk)("div",null,[(0,s.Lk)("h4",sd,(0,b.v_)(e.$t("modals.budget.create_budget_form.header")),1)])]),(0,s.Lk)("div",cd,(0,b.v_)(e.$t("modals.budget.create_budget_form.header")),1),(0,s.bF)(od,{name:l.value,excluded:c.value,"can-update-name":!0,onUpdateName:t[0]||(t[0]=e=>l.value=e),onUpdateExcluded:t[1]||(t[1]=e=>c.value=e)},null,8,["name","excluded"])])),_:1}),(0,s.bF)(d,{class:"responsive-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(o,{class:"econumo-btn -medium -grey responsive-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClick:r},null,8,["label"]),[[p]]),(0,s.bF)(o,{class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.add.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},512)])),_:1})])),_:1})}}})),rd=id,dd=rd;z()(id,"components",{QDialog:j.A,QCard:na.A,QForm:oa.A,QCardSection:la.A,QCardActions:ga.A,QBtn:Q.A}),z()(id,"directives",{ClosePopup:pa.A});const ud={class:"account-access-dialog-modal-user"},md=["src"],gd={class:"account-access-dialog-modal-user-name"},pd={class:"account-access-dialog-modal-user-name-title"},bd=(0,s.pM)(Object.assign({name:"BudgetAccessLevelModal"},{__name:"BudgetAccessLevelModal",props:{budgetId:{},user:{},role:{}},emits:["share","revoke","cancel"],setup(e,{emit:t}){return(e,t)=>{const a=(0,s.g2)("q-avatar"),n=(0,s.g2)("q-card-section"),o=(0,s.g2)("q-item-section"),c=(0,s.g2)("q-item"),i=(0,s.g2)("q-list"),r=(0,s.g2)("q-card"),d=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(d,{class:"account-access-dialog-modal","model-value":!0,onHide:t[5]||(t[5]=t=>e.$emit("cancel"))},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-access-dialog-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"account-access-dialog-modal-section -padding"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ud,[(0,s.bF)(a,{class:"account-access-dialog-modal-user-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.user.avatar+"?s=100",class:"account-access-dialog-modal-user-avatar-img"},null,8,md)])),_:1}),(0,s.Lk)("div",gd,[(0,s.Lk)("div",pd,(0,b.v_)(e.user.name),1)])])])),_:1}),(0,s.bF)(n,{class:"account-access-dialog-modal-section"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"account-access-dialog-modal-list"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:(0,b.C4)(["account-access-dialog-modal-item","control_point "+("guest"===e.role?"active":"")]),clickable:"",onClick:t[0]||(t[0]=t=>e.$emit("share",e.budgetId,e.user.id,(0,l.R1)(Et).READ_ONLY))},{default:(0,s.k6)((()=>[(0,s.bF)(o,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("modals.shared_access.level.guest")),1)])),_:1})])),_:1},8,["class"]),(0,s.bF)(c,{class:(0,b.C4)(["account-access-dialog-modal-item","control_point "+("user"===e.role?"active":"")]),clickable:"",onClick:t[1]||(t[1]=t=>e.$emit("share",e.budgetId,e.user.id,(0,l.R1)(Et).USER))},{default:(0,s.k6)((()=>[(0,s.bF)(o,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("modals.shared_access.level.user")),1)])),_:1})])),_:1},8,["class"]),(0,s.bF)(c,{class:(0,b.C4)(["account-access-dialog-modal-item","control_point "+("admin"===e.role?"active":"")]),clickable:"",onClick:t[2]||(t[2]=t=>e.$emit("share",e.budgetId,e.user.id,(0,l.R1)(Et).ADMIN))},{default:(0,s.k6)((()=>[(0,s.bF)(o,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("modals.shared_access.level.admin")),1)])),_:1})])),_:1},8,["class"]),e.role&&e.role!==(0,l.R1)(Et).OWNER?((0,s.uX)(),(0,s.Wv)(c,{key:0,class:"account-access-dialog-modal-item -delete",clickable:"",onClick:t[3]||(t[3]=t=>e.$emit("revoke",e.budgetId,e.user.id))},{default:(0,s.k6)((()=>[(0,s.bF)(o,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("modals.shared_access.revoke_access")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(c,{class:"account-access-dialog-modal-item control_point -cancel",clickable:"",onClick:t[4]||(t[4]=t=>e.$emit("cancel"))},{default:(0,s.k6)((()=>[(0,s.bF)(o,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.cancel.label")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}})),vd=bd,fd=vd;z()(bd,"components",{QDialog:j.A,QCard:na.A,QCardSection:la.A,QAvatar:ma.A,QList:Ja.A,QItem:tn.A,QItemSection:an.A});const hd={class:"settings-toolbar-mobile access-modal-toolbar"},_d={class:"settings-toolbar-mobile-title"},Ad=(0,s.Lk)("div",{class:"settings-toolbar-mobile-container"},null,-1),Md={class:"access-modal-list"},yd={class:"access-modal-title"},kd={key:0,class:"access-modal-note"},Cd=["onClick"],Ed=["src","alt","title"],Id={class:"preview-modal-account-info-access-item-user"},Td={class:"preview-modal-account-info-access-item-user-name"},Ld={key:0,class:"preview-modal-account-info-access-item-user-role"},Dd={key:1,class:"preview-modal-account-info-access-item-user-role"},Nd={key:2,class:"preview-modal-account-info-access-item-user-role"},wd=(0,s.pM)(Object.assign({name:"BudgetAccessModal"},{__name:"BudgetAccessModal",props:{budgetId:{},budgetName:{},access:{},connections:{}},emits:["cancel","user-selected"],setup(e,{emit:t}){const a=e,n=(0,s.EW)((()=>Xt().userId)),o=(0,s.EW)((()=>{const e=[],t={};let o=0;return a.connections.forEach((a=>{a.user.id!==n.value&&(e.push({userId:a.user.id,userName:a.user.name,userAvatar:a.user.avatar,role:null,isAccepted:!1}),t[a.user.id]=o,o++)})),a.access.forEach((a=>{a.user.id!==n.value&&(t.hasOwnProperty(a.user.id)?(e[t[a.user.id]].role=a.role,e[t[a.user.id]].isAccepted=a.isAccepted):e.push({userId:a.user.id,userName:a.user.name,userAvatar:a.user.avatar,role:a.role,isAccepted:a.isAccepted}))})),e}));return(e,t)=>{const a=(0,s.g2)("q-btn"),n=(0,s.g2)("q-card-section"),l=(0,s.g2)("q-avatar"),c=(0,s.g2)("q-card"),i=(0,s.g2)("q-dialog"),r=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(i,{class:"access-modal","model-value":!0,onHide:t[0]||(t[0]=t=>e.$emit("cancel"))},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"access-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"access-modal-section -toolbar"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",hd,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.bF)(a,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back"},null,512),[[r]])]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",_d,(0,b.v_)(e.budgetName),1)]),Ad])])),_:1}),(0,s.bF)(n,{class:"access-modal-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Md,[(0,s.Lk)("div",yd,(0,b.v_)(e.budgetName),1),o.value.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:1},(0,s.pI)(o.value,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.id},[(0,s.Lk)("div",{class:"preview-modal-account-info-access-item",onClick:a=>e.$emit("user-selected",e.budgetId,t.userId,t.role)},[(0,s.bF)(l,{class:"preview-modal-account-info-access-item-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:t.userAvatar+"?s=100",class:"preview-modal-account-info-access-item-avatar-img",alt:t.userName,title:t.userName},null,8,Ed)])),_:2},1024),(0,s.Lk)("div",Id,[(0,s.Lk)("div",Td,(0,b.v_)(t.userName),1),t.role?t.role&&!t.isAccepted?((0,s.uX)(),(0,s.CE)("div",Dd,(0,b.v_)(e.$t("modals.shared_access.level."+t.role))+"  "+(0,b.v_)(e.$t("modals.shared_access.not_accepted")),1)):t.role&&t.isAccepted?((0,s.uX)(),(0,s.CE)("div",Nd,(0,b.v_)(e.$t("modals.shared_access.level."+t.role)),1)):(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ld,(0,b.v_)(e.$t("modals.shared_access.level.no_access")),1))])],8,Cd)])))),128)):((0,s.uX)(),(0,s.CE)("div",kd,(0,b.v_)(e.$t("modals.shared_access.list_empty")),1))])])),_:1})])),_:1})])),_:1})}}})),Od=wd,Fd=Od;z()(wd,"components",{QDialog:j.A,QCard:na.A,QCardSection:la.A,QBtn:Q.A,QAvatar:ma.A}),z()(wd,"directives",{ClosePopup:pa.A});const Sd={class:"econumo-modal form-fail-modal"},xd={class:"form-fail-modal-title"},Ud={class:"form-fail-modal-description"},Rd={class:"form-fail-modal-button"},$d=(0,s.pM)(Object.assign({name:"ErrorModal"},{__name:"ErrorModal",props:{header:{},description:{}},emits:["close"],setup(e,{emit:t}){const a=t;function n(){a("close")}return(e,t)=>{const a=(0,s.g2)("q-btn"),o=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(o,{"model-value":!0,persistent:"",minimized:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Sd,[(0,s.Lk)("div",xd,(0,b.v_)(e.header),1),(0,s.Lk)("div",Ud,(0,b.v_)(e.description),1),(0,s.Lk)("div",Rd,[(0,s.bF)(a,{class:"econumo-btn -small -yellow full-width",label:e.$t("elements.button.ok.label"),type:"button",onClick:n,flat:""},null,8,["label"])])])])),_:1})}}})),jd=$d,Qd=jd;z()($d,"components",{QDialog:j.A,QBtn:Q.A});const qd={class:"settings-classification-wrapper"},zd={class:"settings-toolbar-mobile settings-classification-toolbar-mobile"},Pd={class:"settings-toolbar-mobile-title"},Wd={class:"settings-toolbar-mobile-container"},Yd={class:"settings-toolbar-desktop"},Bd={class:"settings-breadcrumbs"},Hd={class:"settings-label-header settings-classification-header"},Vd={class:"settings-classification-create-class"},Xd={class:"settings-classification-container"},Gd={key:0,class:"settings-classification-empty"},Kd={key:1},Zd={key:0,class:"settings-classification-list-item-description-archived"},Jd=["src","alt","title"],eu=(0,s.pM)(Object.assign({name:"SettingsBudgetsPage"},{__name:"Budgets",setup(e){const t=(0,p.rd)(),a=(0,p.lq)(),n=Lt(),o=Xt(),{t:c}=(0,U.s9)();(0,s.sV)((()=>{const e=t.currentRoute.value.name;e===g.SETTINGS_BUDGETS?Mt().setWorkspaceActiveArea():e===g.HOME&&Mt().setSidebarActiveArea()})),(0,s.wB)((()=>a),(e=>{e.name===g.SETTINGS_BUDGETS?Mt().setWorkspaceActiveArea():e.name===g.HOME&&Mt().setSidebarActiveArea()}),{immediate:!0,deep:!0});const i=(0,s.EW)((()=>n.isBudgetsLoaded));i.value||n.fetchBudgets();const r=(0,s.EW)((()=>Bt().connections)),d=(0,s.EW)((()=>B().orderBy(n.budgets,"name"))),u=(0,s.EW)((()=>o.userId)),m=(0,s.EW)((()=>o.userDefaultBudgetId));function v(e=!1){e?Mt().setSidebarActiveArea():Mt().setWorkspaceActiveArea(),t.push({name:g.SETTINGS})}const f=(0,l.Kh)({isOpened:!1,header:"",description:""});function h(e,t){f.header=e,f.description=t,f.isOpened=!0}function _(){f.isOpened=!1,f.header="",f.description=""}const A=(0,l.Kh)({isOpened:!1,budget:null});function M(e){A.budget=B().cloneDeep(B().find(d.value,{id:e})),A.isOpened=!0}function y(){A.budget=null,A.isOpened=!1}function k(e,t){y(),"access"===e?Y(t):"go_to"===e?J(t):"set_as_default"===e?R(t):"delete"===e?E(t):"accept"===e&&Z(t)}const C=(0,l.Kh)({isOpened:!1,budget:null});function E(e){C.budget=B().cloneDeep(B().find(d.value,{id:e})),C.isOpened=!0}function I(){C.isOpened=!1,C.budget=null}function T(e){n.deleteBudget(e).then((e=>{e.success||h(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{h(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))})).finally((()=>{I()}))}const L=(0,l.Kh)({isOpened:!1,budget:null});function D(e){L.budget=B().cloneDeep(B().find(d.value,{id:e})),L.isOpened=!0}function N(){L.isOpened=!1,L.budget=null}function w(e){N(),Lt().declineAccess({budgetId:e})}function O(e){if(e.ownerUserId===u.value)return!0;let t=!1;return e.access.forEach((e=>{var a;(null===(a=e.user)||void 0===a?void 0:a.id)===u.value&&e.isAccepted&&(t=!0)})),t}function F(e){if(e.ownerUserId===u.value)return!0;let t=!1;return e.access.forEach((e=>{var a;(null===(a=e.user)||void 0===a?void 0:a.id)===u.value&&(t=e.isAccepted)})),t}function S(e){if(e.ownerUserId===u.value)return Et.OWNER;let t=null;return e.access.forEach((e=>{var a;(null===(a=e.user)||void 0===a?void 0:a.id)===u.value&&(t=e.role)})),t}function x(e){if(e.ownerUserId===u.value)return!0;let t=!1;return e.access.forEach((e=>{var a;(null===(a=e.user)||void 0===a?void 0:a.id)===u.value&&"admin"===e.role&&e.isAccepted&&(t=!0)})),t}function R(e){Xt().userUpdateDefaultBudget(e)}const $=(0,l.Kh)({isOpened:!1,budgetId:null,budgetName:"",accountsExcluded:[]});function j(){$.budgetId=n.generateId(),$.isOpened=!0}function Q(){$.isOpened=!1}function q(){$.budgetId=null,$.budgetName="",$.accountsExcluded=[]}function z(e){n.createBudget(e).then((e=>{e.success?q():h(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{h(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))})).finally((()=>{Q()}))}const P=(0,l.Kh)({isOpened:!1,budget:null}),W=(0,l.Kh)({isOpened:!1,user:null,budgetId:null,role:null});function Y(e){P.budget=B().cloneDeep(B().find(d.value,{id:e})),P.isOpened=!0}function H(){P.isOpened=!1,P.budget=null,W.isOpened=!1,W.user=null,W.budgetId=null,W.role=null}function V(e,t,a){if(a===Et.OWNER)return;const n=B().cloneDeep(B().find(d.value,{id:e})),o=B().find(n.access,{user:{id:t}});W.budgetId=n.id;let l=B().find(r.value,{user:{id:t}});W.user=l?l.user:(null===o||void 0===o?void 0:o.user)||null,W.role=(null===o||void 0===o?void 0:o.role)||null,W.isOpened=!0}function X(){W.isOpened=!1,W.user=null,W.budgetId=null,W.role=null}function G(e,t,a){H(),n.grantAccess({budgetId:e,userId:t,role:a}).then((e=>{e.success||h(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{h(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))}))}function K(e,t){H(),n.revokeAccess({budgetId:e,userId:t}).then((e=>{e.success||h(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{h(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))}))}function Z(e){n.acceptAccess({budgetId:e}).then((e=>{e.success||h(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{h(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))}))}function J(e){Xt().userUpdateDefaultBudget(e).then((()=>{Mt().setWorkspaceActiveArea(),t.push({name:g.BUDGET}),Lt().fetchUserBudget()}))}return(e,t)=>{const a=(0,s.g2)("q-btn"),n=(0,s.g2)("q-item-section"),o=(0,s.g2)("q-avatar"),c=(0,s.g2)("q-item"),i=(0,s.g2)("q-list"),u=(0,s.g2)("q-menu"),g=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(g,{class:"settings-classification"},{default:(0,s.k6)((()=>{var g,p,h,U,q,B,ee,te;return[(0,s.Lk)("div",qd,[(0,s.Lk)("div",zd,[(0,s.Lk)("div",null,[(0,s.bF)(a,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=e=>v(!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",Pd,(0,b.v_)(e.$t("pages.settings.budgets.header")),1)]),(0,s.Lk)("div",Wd,[(0,s.bF)(a,{class:"settings-toolbar-mobile-button",flat:"",icon:"add_circle_outline",onClick:j})])]),(0,s.Lk)("div",Yd,[(0,s.Lk)("div",Bd,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[1]||(t[1]=e=>v(!0))},(0,b.v_)(e.$t("pages.settings.settings.header_desktop")),1)])]),(0,s.Lk)("h4",Hd,(0,b.v_)(e.$t("pages.settings.budgets.menu_item")),1),(0,s.Lk)("div",Vd,[(0,s.bF)(a,{class:"settings-classification-create-class-btn econumo-btn -small -magenta",flat:"",label:e.$t("pages.settings.budgets.create_budget"),onClick:j},null,8,["label"])]),(0,s.Lk)("div",Xd,[d.value.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Gd,(0,b.v_)(e.$t("elements.list.list_empty")),1)),d.value.length>0?((0,s.uX)(),(0,s.CE)("div",Kd,[(0,s.bF)(i,{class:"settings-classification-list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,(t=>((0,s.uX)(),(0,s.Wv)(c,{key:t.id,class:"settings-classification-list-item",clickable:e.$q.screen.lt.lg,onClick:e=>M(t.id)},{default:(0,s.k6)((()=>[(0,s.bF)(n,{side:"",class:"settings-classification-list-item-avatar",avatar:""},{default:(0,s.k6)((()=>[m.value===t.id?((0,s.uX)(),(0,s.Wv)(a,{key:0,square:"",flat:"",disable:"",icon:"turned_in"})):((0,s.uX)(),(0,s.Wv)(a,{key:1,square:"",flat:"",icon:"turned_in_not",onClick:e=>R(t.id)},null,8,["onClick"]))])),_:2},1024),(0,s.bF)(n,{class:(0,b.C4)("settings-classification-list-item-text "+(O(t)?"":"-archived"))},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(t.name)+" ",1),F(t)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Zd,(0,b.v_)(e.$t("pages.settings.budgets.level."+S(t)))+" - "+(0,b.v_)(e.$t("pages.settings.budgets.not_accepted")),1))])),_:2},1032,["class"]),t.access.length>1&&(0,l.R1)(Ga).includesSharedAccess?((0,s.uX)(),(0,s.Wv)(n,{key:0,class:"settings-classification-list-item-shared",side:""},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.access,(e=>((0,s.uX)(),(0,s.Wv)(o,{class:"settings-classification-list-item-shared-avatar",key:e.user.id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.user.avatar+"?s=30",alt:e.user.name,title:e.user.name},null,8,Jd)])),_:2},1024)))),128))])),_:2},1024)):(0,s.Q3)("",!0),e.$q.screen.gt.md?((0,s.uX)(),(0,s.Wv)(n,{key:1,side:"",class:"cursor-pointer settings-classification-list-item-check-section"},{default:(0,s.k6)((()=>[(0,s.bF)(a,{square:"",flat:"",icon:"more_vert",class:"account-transactions-item-check-button"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{cover:"","auto-close":"",class:"account-transactions-item-check-button-menu"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"account-transactions-item-check-button-list"},{default:(0,s.k6)((()=>[!F(t)&&(0,l.R1)(Ga).includesSharedAccess?((0,s.uX)(),(0,s.Wv)(c,{key:0,clickable:"",onClick:e=>Z(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.accept.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),(0,s.bF)(c,{clickable:"",onClick:e=>J(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("pages.settings.budgets.list_actions.go_to")),1)])),_:1})])),_:2},1032,["onClick"]),x(t)&&(0,l.R1)(Ga).includesSharedAccess?((0,s.uX)(),(0,s.Wv)(c,{key:1,clickable:"",onClick:e=>Y(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("pages.settings.budgets.list_actions.access")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),x(t)?((0,s.uX)(),(0,s.Wv)(c,{key:2,clickable:"",onClick:e=>E(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])):((0,s.uX)(),(0,s.Wv)(c,{key:3,clickable:"",onClick:e=>D(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.decline.label")),1)])),_:1})])),_:2},1032,["onClick"]))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1032,["clickable","onClick"])))),128))])),_:1})])):(0,s.Q3)("",!0)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[A.isOpened?((0,s.uX)(),(0,s.Wv)(hr,{key:0,"header-label":null===(g=A.budget)||void 0===g?void 0:g.name,actions:[{label:e.$t("elements.button.accept.label"),value:"accept",context:null===(p=A.budget)||void 0===p?void 0:p.id,isHidden:F(A.budget)},{label:e.$t("pages.settings.budgets.list_actions.go_to"),value:"go_to",context:null===(h=A.budget)||void 0===h?void 0:h.id,isHidden:!O(A.budget)},{label:e.$t("elements.button.set_as_default.label"),value:"set_as_default",context:null===(U=A.budget)||void 0===U?void 0:U.id,isHidden:!O(A.budget)||m.value===A.budget.id},{label:e.$t("pages.settings.accounts.list_actions.access"),value:"access",context:null===(q=A.budget)||void 0===q?void 0:q.id,isHidden:!x(A.budget)},{label:e.$t("elements.button.delete.label"),value:"delete",context:null===(B=A.budget)||void 0===B?void 0:B.id}],onCancel:y,onProceed:k},null,8,["header-label","actions"])):(0,s.Q3)("",!0),C.isOpened?((0,s.uX)(),(0,s.Wv)((0,l.R1)($o),{key:1,"question-title":e.$t("pages.settings.budgets.delete_modal.title"),"question-label":e.$t("pages.settings.budgets.delete_modal.question",{name:null===(ee=C.budget)||void 0===ee?void 0:ee.name}),"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:I,onProceed:t[2]||(t[2]=e=>T(C.budget.id))},null,8,["question-title","question-label","action-label","cancel-label"])):(0,s.Q3)("",!0),L.isOpened?((0,s.uX)(),(0,s.Wv)((0,l.R1)($o),{key:2,"question-title":e.$t("pages.settings.budgets.decline_access_modal.title"),"question-label":e.$t("pages.settings.budgets.decline_access_modal.question",{name:null===(te=L.budget)||void 0===te?void 0:te.name}),"action-label":e.$t("elements.button.decline.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:N,onProceed:t[3]||(t[3]=e=>w(L.budget.id))},null,8,["question-title","question-label","action-label","cancel-label"])):(0,s.Q3)("",!0),$.isOpened?((0,s.uX)(),(0,s.Wv)(dd,{key:3,id:$.budgetId,name:$.budgetName,excluded:$.accountsExcluded,onUpdateName:t[4]||(t[4]=e=>$.budgetName=e),onUpdateExcluded:t[5]||(t[5]=e=>$.accountsExcluded=e),onSubmit:z,onClose:Q},null,8,["id","name","excluded"])):(0,s.Q3)("",!0),P.isOpened?((0,s.uX)(),(0,s.Wv)(Fd,{key:4,"budget-id":P.budget.id,"budget-name":P.budget.name,access:P.budget.access,connections:r.value,onCancel:H,onUserSelected:V},null,8,["budget-id","budget-name","access","connections"])):(0,s.Q3)("",!0),W.isOpened?((0,s.uX)(),(0,s.Wv)(fd,{key:5,user:W.user,"budget-id":W.budgetId,role:W.role,onCancel:X,onShare:G,onRevoke:K},null,8,["user","budget-id","role"])):(0,s.Q3)("",!0),f.isOpened?((0,s.uX)(),(0,s.Wv)(Qd,{key:6,header:f.header,description:f.description,onClose:_},null,8,["header","description"])):(0,s.Q3)("",!0)]))])]})),_:1})}}})),tu=eu,au=tu;z()(eu,"components",{QPage:Cl.A,QBtn:Q.A,QList:Ja.A,QItem:tn.A,QItemSection:an.A,QAvatar:ma.A,QMenu:Tl.A});const nu={class:"settings-classification-wrapper"},ou={class:"settings-toolbar-mobile settings-classification-toolbar-mobile"},lu={class:"settings-toolbar-mobile-title"},su={class:"settings-toolbar-mobile-container"},cu={class:"settings-toolbar-desktop"},iu={class:"settings-breadcrumbs"},ru={class:"settings-label-header settings-classification-header"},du={class:"settings-classification-create-class"},uu={key:0,class:"settings-classification-sort"},mu={class:"settings-classification-container"},gu={key:0,class:"settings-classification-empty"},pu={key:1},bu={key:0,class:"settings-classification-list-item-description-archived"};function vu(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-icon"),r=(0,s.g2)("q-item-section"),d=(0,s.g2)("q-toggle"),u=(0,s.g2)("q-item"),m=(0,s.g2)("q-list"),g=(0,s.g2)("q-menu"),p=(0,s.g2)("draggable"),v=(0,s.g2)("context-menu-modal"),f=(0,s.g2)("sort-dialog-modal"),h=(0,s.g2)("prompt-dialog-modal"),_=(0,s.g2)("confirmation-dialog-modal"),A=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(A,{class:"settings-classification"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",nu,[(0,s.Lk)("div",ou,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("settings",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",lu,(0,b.v_)(e.$t("pages.settings.tags.header")),1)]),(0,s.Lk)("div",su,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"add_circle_outline",onClick:t[1]||(t[1]=t=>e.openCreateTagModal())})])]),(0,s.Lk)("div",cu,[(0,s.Lk)("div",iu,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[2]||(t[2]=t=>e.navigateTo("settings",!0))},(0,b.v_)(e.$t("pages.settings.settings.header_desktop")),1)])]),(0,s.Lk)("h4",ru,(0,b.v_)(e.$t("pages.settings.tags.header")),1),(0,s.Lk)("div",du,[(0,s.bF)(c,{class:"settings-classification-create-class-btn econumo-btn -small -magenta",flat:"",label:e.$t("pages.settings.tags.create_tag"),onClick:t[3]||(t[3]=t=>e.openCreateTagModal())},null,8,["label"])]),e.tags.length>1?((0,s.uX)(),(0,s.CE)("div",uu,[(0,s.bF)(c,{class:"settings-classification-sort-btn",icon:"sort",label:e.$t("elements.list.order_list"),"no-caps":!0,flat:!0,ripple:!1,onClick:e.openSortModal},null,8,["label","onClick"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",mu,[e.tags.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",gu,(0,b.v_)(e.$t("elements.list.list_empty")),1)),e.tags.length>0?((0,s.uX)(),(0,s.CE)("div",pu,[(0,s.bF)(m,{class:"settings-classification-list"},{default:(0,s.k6)((()=>[(0,s.bF)(p,(0,s.v6)({modelValue:e.tags,"onUpdate:modelValue":t[4]||(t[4]=t=>e.tags=t),onStart:t[5]||(t[5]=t=>e.drag=!0),onEnd:t[6]||(t[6]=t=>e.drag=!1)},e.options,{"item-key":"id"}),{item:(0,s.k6)((({element:t})=>[(0,s.bF)(u,{class:"settings-classification-list-item",clickable:e.$q.screen.lt.lg,onClick:a=>e.openContextMenuModal(t.id)},{default:(0,s.k6)((()=>[(0,s.bF)(r,{side:"",class:"settings-classification-list-item-sortable sortable-control cursor-pointer"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{name:"reorder"})])),_:1}),(0,s.bF)(r,{class:(0,b.C4)(t.isArchived?"settings-classification-list-item-text -archived":"settings-classification-list-item-text")},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(t.name)+" ",1),t.isArchived?((0,s.uX)(),(0,s.CE)("div",bu,(0,b.v_)(e.$t("pages.settings.tags.archived_item")),1)):(0,s.Q3)("",!0)])),_:2},1032,["class"]),(0,s.bF)(r,{side:""},{default:(0,s.k6)((()=>[(0,s.bF)(d,{"model-value":!t.isArchived,onClick:a=>e.updateArchiveTag(t.id,!!t.isArchived)},null,8,["model-value","onClick"])])),_:2},1024),e.$q.screen.gt.md?((0,s.uX)(),(0,s.Wv)(r,{key:0,side:"",class:"cursor-pointer settings-classification-list-item-check-section"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{square:"",flat:"",icon:"more_vert",class:"account-transactions-item-check-button"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{cover:"","auto-close":"",class:"account-transactions-item-check-button-menu"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"account-transactions-item-check-button-list"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{clickable:"",onClick:a=>e.openEditTagModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:2},1032,["onClick"]),(0,s.bF)(u,{clickable:"",onClick:a=>e.openDeleteTagModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1032,["clickable","onClick"])])),_:1},16,["modelValue"])])),_:1})])):(0,s.Q3)("",!0)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.contextMenuModal.isOpened?((0,s.uX)(),(0,s.Wv)(v,{key:0,"header-label":e.contextMenuModal.tag.name,actions:[{label:e.$t("elements.button.edit.label"),value:"edit",context:e.contextMenuModal.tag.id},{label:e.$t("elements.button.delete.label"),value:"delete",context:e.contextMenuModal.tag.id}],onCancel:t[7]||(t[7]=t=>e.closeContextMenuModal()),onProceed:e.openNextModal},null,8,["header-label","actions","onProceed"])):(0,s.Q3)("",!0),(0,s.bF)(f,{modelValue:e.sortModal.isOpened,"onUpdate:modelValue":t[8]||(t[8]=t=>e.sortModal.isOpened=t),onCancel:e.closeSortModal,onProceed:e.updateOrder},null,8,["modelValue","onCancel","onProceed"]),e.editTagModal.isOpened?((0,s.uX)(),(0,s.Wv)(h,{key:1,"header-label":e.$t("pages.settings.tags.edit_modal.header"),"input-value":e.editTagModal.tagName,"input-label":e.$t("elements.form.tag.name.label"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.update.label"),validation:[t=>e.isNotEmpty(t)||e.$t("elements.form.tag.name.validation.required_field"),t=>e.isValidTagName(t)||e.$t("elements.form.tag.name.validation.invalid_name")],onClose:e.closeEditTagModal,onSubmit:e.updateTag},null,8,["header-label","input-value","input-label","cancel-label","submit-label","validation","onClose","onSubmit"])):(0,s.Q3)("",!0),e.deleteModal.isOpened?((0,s.uX)(),(0,s.Wv)(_,{key:2,"question-title":e.$t("pages.settings.tags.delete_tag_modal.title"),"question-label":e.deleteModal.tag?.name,"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:e.closeDeleteTagModal,onProceed:t[9]||(t[9]=t=>e.deleteTag(e.deleteModal.tag.id))},null,8,["question-title","question-label","action-label","cancel-label","onCancel"])):(0,s.Q3)("",!0),e.createTagModal.isOpened?((0,s.uX)(),(0,s.Wv)(h,{key:3,"header-label":e.$t("pages.settings.tags.create_modal.header"),"input-value":"","input-label":e.$t("elements.form.tag.name.label"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.create.label"),validation:[t=>e.isNotEmpty(t)||e.$t("elements.form.tag.name.validation.required_field"),t=>e.isValidTagName(t)||e.$t("elements.form.tag.name.validation.invalid_name")],onClose:e.closeCreateTagModal,onSubmit:e.createTag},null,8,["header-label","input-label","cancel-label","submit-label","validation","onClose","onSubmit"])):(0,s.Q3)("",!0)]))])])),_:1})}const fu=(0,s.pM)({name:"SettingsTagsPage",mixins:[No,et],components:{SortDialogModal:Lr,ConfirmationDialogModal:$o,PromptDialogModal:ni,draggable:Kc(),ContextMenuModal:hr},data(){return{tagsCopy:null,contextMenuModal:{isOpened:!1,tag:null},editTagModal:{isOpened:!1,tagId:null,tagName:null},createTagModal:{isOpened:!1},sortModal:{isOpened:!1},deleteModal:{isOpened:!1,tag:null}}},created(){"settingsTags"===this.$router.currentRoute.value.name&&Mt().setWorkspaceActiveArea()},computed:{...(0,u.aH)(Xt,["userId"]),...(0,u.aH)(Ft,["ownTags"]),tags:{get(){return this.tagsCopy||this.ownTags},set(e){this.tagsCopy=e;let t=[];e.forEach((e=>{t.push(e.id)})),Ft().orderTagList(t).finally((()=>{this.tagsCopy=null}))}},options(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost",handle:".sortable-control"}}},methods:{openContextMenuModal:function(e){this.contextMenuModal.tag=B().find(this.ownTags,{id:e}),this.contextMenuModal.isOpened=!0},closeContextMenuModal:function(){this.contextMenuModal.tag=null,this.contextMenuModal.isOpened=!1},openNextModal:function(e,t){this.closeContextMenuModal(),"edit"===e?this.openEditTagModal(t):"delete"===e&&this.openDeleteTagModal(t)},openSortModal:function(){this.sortModal.isOpened=!0},closeSortModal:function(){this.sortModal.isOpened=!1},updateOrder:function(e,t){Ft().changeTagsSortMode({type:e,direction:t}).finally((()=>{this.tagsCopy=null,this.closeSortModal()}))},openEditTagModal:function(e){const t=B().find(this.ownTags,{id:e});this.editTagModal.tagId=t.id,this.editTagModal.tagName=t.name,this.editTagModal.isOpened=!0},closeEditTagModal:function(){this.editTagModal.isOpened=!1,this.editTagModal.tagId=null,this.editTagModal.tagName=null},updateTag:function(e,t){const a=B().find(this.tags,{name:t});Ft().updateTag({id:a.id,name:e}).finally((()=>{this.closeEditTagModal(),this.tagsCopy=null}))},openDeleteTagModal:function(e){this.deleteModal.tag=B().cloneDeep(B().find(this.tags,{id:e})),this.deleteModal.isOpened=!0},closeDeleteTagModal:function(){this.deleteModal.isOpened=!1,this.deleteModal.tag=null},deleteTag:function(e){Ft().deleteTag(e).finally((()=>{this.closeDeleteTagModal(),this.tagsCopy=null}))},openCreateTagModal:function(){this.createTagModal.isOpened=!0},closeCreateTagModal:function(){this.createTagModal.isOpened=!1},createTag:function(e){Ft().createTag({name:e}).finally((()=>{this.closeCreateTagModal(),this.tagsCopy=null}))},updateArchiveTag:function(e,t=!1){t?Ft().unarchiveTag(e).finally((()=>{this.tagsCopy=null})):Ft().archiveTag(e).finally((()=>{this.tagsCopy=null}))}}}),hu=(0,$.A)(fu,[["render",vu]]),_u=hu;z()(fu,"components",{QPage:Cl.A,QBtn:Q.A,QList:Ja.A,QItem:tn.A,QItemSection:an.A,QIcon:ca.A,QToggle:Nr.A,QMenu:Tl.A});const Au={class:"settings-connections-wrapper"},Mu={class:"settings-toolbar-mobile"},yu={class:"settings-toolbar-mobile-title"},ku={class:"settings-toolbar-mobile-container"},Cu={class:"settings-toolbar-desktop"},Eu={class:"settings-breadcrumbs"},Iu={class:"settings-label-header settings-connections-header"},Tu={class:"settings-connections-controls"},Lu={key:0,class:"settings-connections-empty"},Du={key:1},Nu={class:"settings-connections-list-item-section"},wu=["src"],Ou={class:"settings-connections-list-item-content"},Fu={class:"settings-connections-generate"},Su={class:"econumo-modal"},xu={class:"settings-connections-generate-modal-label"},Uu={class:"settings-connections-generate-modal-instruction"},Ru={class:"settings-connections-generate-modal-code"},$u={class:"settings-connections-generate-modal-action"},ju={class:"econumo-modal"},Qu={class:"settings-connections-accept-modal-label"},qu={class:"settings-connections-accept-modal-instruction"},zu={class:"settings-connections-accept-modal-control"},Pu={class:"settings-connections-accept-modal-actions"},Wu={class:"settings-connections-modal-card-container"},Yu={class:"settings-connections-modal-card-label"},Bu={class:"settings-connections-modal-card-user"},Hu=["src"],Vu={class:"settings-connections-modal-card-user-name"},Xu={class:"settings-connections-modal-card-account"},Gu={class:"settings-connections-modal-card-account-label"},Ku={key:0,class:"settings-connections-modal-card-account-item-role"},Zu={key:1,class:"settings-connections-modal-card-account-item-role"},Ju=["src"],em=["src"];function tm(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-item-section"),r=(0,s.g2)("q-item"),d=(0,s.g2)("q-list"),u=(0,s.g2)("q-menu"),m=(0,s.g2)("confirmation-dialog-modal"),g=(0,s.g2)("q-dialog"),p=(0,s.g2)("q-input"),v=(0,s.g2)("q-form"),f=(0,s.g2)("q-avatar"),h=(0,s.g2)("q-icon"),_=(0,s.g2)("q-card-section"),A=(0,s.g2)("q-card-actions"),M=(0,s.g2)("q-card"),y=(0,s.g2)("q-page"),k=(0,s.gN)("close-popup"),C=(0,s.gN)("ripple");return(0,s.uX)(),(0,s.Wv)(y,{class:"settings-connections"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Au,[(0,s.Lk)("div",Mu,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("settings",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",yu,(0,b.v_)(e.$t("pages.settings.connections.header")),1)]),(0,s.Lk)("div",ku,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"add_circle_outline",onClick:t[1]||(t[1]=t=>e.openAcceptInviteModal())})])]),(0,s.Lk)("div",Cu,[(0,s.Lk)("div",Eu,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[2]||(t[2]=t=>e.navigateTo("settings",!0))},(0,b.v_)(e.$t("pages.settings.settings.header_desktop")),1)])]),(0,s.Lk)("h4",Iu,(0,b.v_)(e.$t("pages.settings.connections.header")),1),(0,s.Lk)("div",Tu,[(0,s.bF)(c,{class:"econumo-btn -small -magenta settings-connections-controls-btn",flat:"",label:e.$t("pages.settings.connections.generate_invite"),onClick:t[3]||(t[3]=t=>e.generateInvite())},null,8,["label"]),(0,s.bF)(c,{class:"econumo-btn -small -grey settings-connections-controls-btn",flat:"",label:e.$t("pages.settings.connections.accept_invite"),onClick:t[4]||(t[4]=t=>e.openAcceptInviteModal())},null,8,["label"])]),e.connections.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Lu,(0,b.v_)(e.$t("elements.list.list_empty")),1)),e.connections.length>0?((0,s.uX)(),(0,s.CE)("div",Du,[(0,s.bF)(d,{class:"settings-connections-list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.connections,(t=>((0,s.uX)(),(0,s.Wv)(r,{class:"settings-connections-list-item",clickable:e.$q.screen.lt.lg,key:t.user.id,onClick:a=>e.openPreviewConnectionModal(t.user.id)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Nu,[(0,s.bF)(i,{class:"settings-connections-list-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{class:"settings-connections-list-item-avatar-img",src:t.user.avatar},null,8,wu)])),_:2},1024),(0,s.Lk)("div",Ou,[(0,s.bF)(i,{class:"settings-connections-list-item-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(t.user.name),1)])),_:2},1024)])]),(0,s.bF)(i,{class:"settings-connections-list-item-more",side:""},{default:(0,s.k6)((()=>[(0,s.bF)(c,{square:"",flat:"",icon:"more_vert",class:"account-transactions-item-check-button settings-connections-list-item-more-btn"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{cover:"","auto-close":"",class:"account-transactions-item-check-button-menu"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"account-transactions-item-check-button-list"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{clickable:"",onClick:a=>e.openPreviewConnectionModal(t.user.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.view.label")),1)])),_:1})])),_:2},1032,["onClick"]),(0,s.bF)(r,{clickable:"",onClick:a=>e.openDeleteConnectionModal(t.user.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["clickable","onClick"])))),128))])),_:1})])):(0,s.Q3)("",!0),(0,s.Lk)("div",Fu,[(0,s.bF)(c,{class:"econumo-btn -medium -magenta settings-connections-generate-btn",flat:"",label:e.$t("pages.settings.connections.generate_invite"),onClick:t[5]||(t[5]=t=>e.generateInvite())},null,8,["label"])]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.deleteConnectionModal.isOpened?((0,s.uX)(),(0,s.Wv)(m,{key:0,icon:!1,"question-label":e.$t("pages.settings.connections.delete_connection_modal.question",{name:e.deleteConnectionModal.connection.user.name}),"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:e.closeModal,onProceed:t[6]||(t[6]=t=>e.deleteConnection(e.deleteConnectionModal.connection.user.id))},null,8,["question-label","action-label","cancel-label","onCancel"])):(0,s.Q3)("",!0),(0,s.bF)(g,{class:"settings-connections-generate-modal",modelValue:e.connectionGenerateInviteModal.isOpened,"onUpdate:modelValue":t[7]||(t[7]=t=>e.connectionGenerateInviteModal.isOpened=t),onHide:e.deleteInvite},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Su,[(0,s.Lk)("div",null,[(0,s.Lk)("div",xu,(0,b.v_)(e.$t("pages.settings.connections.generate_invite_modal.code.label",{code:e.connectionGenerateInviteModal.code})),1),(0,s.Lk)("div",Uu,(0,b.v_)(e.$t("pages.settings.connections.generate_invite_modal.instruction")),1),(0,s.Lk)("div",Ru,(0,b.v_)(e.connectionGenerateInviteModal.code),1)]),(0,s.Lk)("div",$u,[(0,s.bo)((0,s.bF)(c,{class:"econumo-btn -small -transperent-magenta settings-connections-generate-modal-action-btn",flat:"",label:e.$t("elements.button.ok.label")},null,8,["label"]),[[k]])])])])),_:1},8,["modelValue","onHide"]),(0,s.bF)(g,{class:"settings-connections-accept-modal",modelValue:e.acceptInviteModal.isOpened,"onUpdate:modelValue":t[9]||(t[9]=t=>e.acceptInviteModal.isOpened=t),onHide:e.closeModal,persistent:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ju,[(0,s.bF)(v,{ref:"tagForm",onSubmit:e.acceptInvite},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Qu,(0,b.v_)(e.$t("pages.settings.connections.accept_invite_modal.label")),1),(0,s.Lk)("div",qu,(0,b.v_)(e.$t("pages.settings.connections.accept_invite_modal.instruction")),1),(0,s.Lk)("div",zu,[(0,s.bF)(p,{class:"form-input -narrow full-width",outlined:"",modelValue:e.acceptInviteModal.code,"onUpdate:modelValue":t[8]||(t[8]=t=>e.acceptInviteModal.code=t),label:e.$t("pages.settings.connections.accept_invite_modal.code.label")},null,8,["modelValue","label"])]),(0,s.Lk)("div",Pu,[(0,s.bo)((0,s.bF)(c,{class:"econumo-btn -medium -grey settings-connections-accept-modal-actions-btn",flat:"",label:e.$t("elements.button.cancel.label")},null,8,["label"]),[[k]]),(0,s.bF)(c,{class:"econumo-btn -medium -magenta settings-connections-accept-modal-actions-btn",flat:"",label:e.$t("elements.button.accept.label"),type:"submit"},null,8,["label"])])])),_:1},8,["onSubmit"])])])),_:1},8,["modelValue","onHide"]),(0,s.bF)(g,{class:"settings-connections-modal",modelValue:e.previewConnectionModal.isOpened,"onUpdate:modelValue":t[11]||(t[11]=t=>e.previewConnectionModal.isOpened=t),onHide:e.closeModal,position:e.$q.screen.gt.md?"standard":"bottom"},{default:(0,s.k6)((()=>[(0,s.bF)(M,{class:"settings-connections-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(_,{class:"settings-connections-modal-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Wu,[(0,s.Lk)("div",Yu,(0,b.v_)(e.$t("pages.settings.connections.preview_connection_modal.accounts")),1),(0,s.Lk)("div",Bu,[(0,s.bF)(f,{class:"settings-connections-modal-card-user-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{class:"settings-connections-modal-card-user-avatar-img",src:e.previewConnectionModal.connection.user.avatar},null,8,Hu)])),_:1}),(0,s.Lk)("div",Vu,(0,b.v_)(e.previewConnectionModal.connection.user.name),1)])]),(0,s.Lk)("div",Xu,[(0,s.Lk)("div",Gu,(0,b.v_)(e.$t("pages.settings.connections.preview_connection_modal.accounts")),1),(0,s.bF)(d,{class:"settings-connections-modal-card-account-list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.previewConnectionModal.connection.sharedAccounts,(t=>(0,s.bo)(((0,s.uX)(),(0,s.Wv)(r,{key:t.id,clickable:"",class:"settings-connections-modal-card-account-item"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"settings-connections-modal-card-account-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(h,{name:e.getAccount(t.id).icon},null,8,["name"])])),_:2},1024),(0,s.bF)(i,{class:"settings-connections-modal-card-account-item-name-block"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.getAccount(t.id).name)+" ",1),t.ownerUserId===e.previewConnectionModal.connection.user.id?((0,s.uX)(),(0,s.CE)("span",Ku,(0,b.v_)(e.$t("pages.settings.connections.preview_connection_modal.role.owner")),1)):(0,s.Q3)("",!0),t.ownerUserId!==e.previewConnectionModal.connection.user.id?((0,s.uX)(),(0,s.CE)("span",Zu,(0,b.v_)(e.$t("pages.settings.connections.preview_connection_modal.role."+t.role)),1)):(0,s.Q3)("",!0)])),_:2},1024),e.getAccount(t.id).sharedAccess.length>0?((0,s.uX)(),(0,s.Wv)(i,{key:0,side:"",class:"settings-connections-modal-card-account-item-shared"},{default:(0,s.k6)((()=>[(0,s.bF)(f,{class:"settings-connections-modal-card-account-item-shared-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.getAccount(t.id).owner.avatar+"?s=30"},null,8,Ju)])),_:2},1024),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.getAccount(t.id).sharedAccess,(e=>((0,s.uX)(),(0,s.Wv)(f,{class:"settings-connections-modal-card-account-item-shared-avatar",key:e.user.id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.user.avatar+"?s=30"},null,8,em)])),_:2},1024)))),128))])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1024)),[[C]]))),128))])),_:1})])])),_:1}),(0,s.bF)(A,{class:"settings-connections-modal-action"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"econumo-btn -large -grey settings-connections-modal-action-btn",flat:"",title:e.$t("elements.button.delete.label"),icon:"person_add_disabled",onClick:t[10]||(t[10]=t=>e.openDeleteConnectionModal(e.previewConnectionModal.connection.user.id))},null,8,["title"]),(0,s.bo)((0,s.bF)(c,{class:"econumo-btn -large -grey settings-connections-modal-action-btn -wide",title:e.$t("elements.button.cancel.label"),flat:"",icon:"expand_more",onClick:e.closeModal},null,8,["title","onClick"]),[[k]])])),_:1})])),_:1})])),_:1},8,["modelValue","onHide","position"])]))])])),_:1})}const am=(0,s.pM)({name:"SettingsConnectionsPage",mixins:[No,Te],components:{ConfirmationDialogModal:$o},data(){return{connectionGenerateInviteModal:{isOpened:!1,code:null,expiredAt:null},acceptInviteModal:{isOpened:!1,code:null},previewConnectionModal:{isOpened:!1,connection:null},deleteConnectionModal:{isOpened:!1,connection:null}}},created(){"settingsConnections"===this.$router.currentRoute.value.name&&Mt().setWorkspaceActiveArea(),this.isConnectionsLoaded||Bt().fetchConnections()},computed:{...(0,u.aH)(Xt,["userId"]),...(0,u.aH)(Rt,["accounts"]),...(0,u.aH)(Bt,["isConnectionsLoaded","connections"])},methods:{openAcceptInviteModal:function(){this.acceptInviteModal.code=null,this.acceptInviteModal.isOpened=!0},openGenerateInviteModal:function(e={}){this.connectionGenerateInviteModal.code=e.code,this.connectionGenerateInviteModal.expiredAt=e.expiredAt,this.connectionGenerateInviteModal.isOpened=!0},openPreviewConnectionModal:function(e){this.previewConnectionModal.connection=B().cloneDeep(B().find(this.connections,{user:{id:e}})),this.previewConnectionModal.isOpened=!0},openDeleteConnectionModal:function(e){this.deleteConnectionModal.connection=B().cloneDeep(B().find(this.connections,{user:{id:e}})),this.deleteConnectionModal.isOpened=!0},closeModal:function(){this.connectionGenerateInviteModal.code=null,this.connectionGenerateInviteModal.expiredAt=null,this.connectionGenerateInviteModal.isOpened=!1,this.acceptInviteModal.code=null,this.acceptInviteModal.isOpened=!1,this.previewConnectionModal.connection=null,this.previewConnectionModal.isOpened=!1,this.deleteConnectionModal.connection=null,this.deleteConnectionModal.isOpened=!1},generateInvite:function(){Bt().generateConnectionInvite().then((e=>{this.openGenerateInviteModal(e)}))},deleteInvite:function(){this.closeModal(),Bt().deleteConnectionInvite()},acceptInvite:function(){const e=this.acceptInviteModal.code;this.closeModal(),Bt().acceptConnectionInvite(e)},deleteConnection:function(e){this.closeModal(),Bt().deleteConnection(e)},getAccount:function(e){return B().find(this.accounts,{id:e})}}}),nm=(0,$.A)(am,[["render",tm]]),om=nm;z()(am,"components",{QPage:Cl.A,QBtn:Q.A,QList:Ja.A,QItem:tn.A,QItemSection:an.A,QMenu:Tl.A,QDialog:j.A,QForm:oa.A,QInput:sa.A,QCard:na.A,QCardSection:la.A,QAvatar:ma.A,QIcon:ca.A,QCardActions:ga.A}),z()(am,"directives",{ClosePopup:pa.A,Ripple:Ts.A});const lm=["data-folder-id"],sm={class:"row budget-table-row budget-table-row-folder"},cm={class:"budget-table-column-name"},im={key:0,class:"budget-table-column-spent"},rm={class:"budget-table-column-stat-title"},dm={class:"budget-table-column-stat-values"},um=["title","innerHTML"],mm=["title","innerHTML"],gm=["title","innerHTML"],pm={key:1,class:"budget-table-column-spent"},bm={class:"budget-table-row-folder-actions"},vm=["onDrop","onDragover"],fm={class:"row budget-table-row"},hm=["onClick","draggable","onDragstart"],_m={key:0,class:"budget-table-row-element-icon -draggable draggable sortable-control"},Am={key:1,class:"budget-table-row-element-icon"},Mm=["src","title","alt"],ym={key:2,class:"budget-table-row-item-name-wrapper"},km={class:"budget-table-row-item-name-wrapper-name"},Cm=["innerHTML"],Em={key:3,class:"budget-table-row-item-name-single"},Im=["innerHTML"],Tm=["onClick"],Lm=["innerHTML"],Dm=["onClick"],Nm=["innerHTML"],wm=["id"],Om=["onClick"],Fm={class:"budget-table-column-actions-menu"},Sm={key:0,class:"budget-table-row-element-items"},xm=["onClick"],Um={class:"budget-table-column-name budget-table-row-item-name"},Rm={class:"budget-table-row-item-name-single"},$m={class:"budget-table-row-item-name-single"},jm=["innerHTML"],Qm={key:1,class:"budget-table-row-element-items"},qm=["onClick"],zm=["draggable","onDragstart"],Pm={class:"budget-table-row-item-name-single"},Wm={class:"budget-table-row-item-name-single"},Ym={key:0,class:"budget-table-column-owner"},Bm={key:1,class:"budget-table-column-available"},Hm={key:2,class:"budget-table-column-actions"},Vm=["innerHTML"],Xm={key:0,class:"row budget-table-row-folder-empty"},Gm={class:"col"},Km={class:"row"},Zm={class:"budget-table-row-folder-empty-text"},Jm={key:0,class:"row budget-table-row-folder-empty-delete"},eg=(0,s.pM)(Object.assign({name:"BudgetTableFolder",mixins:[No,Te],components:{draggable:Kc()}},{__name:"BudgetTableFolder",props:{editMode:{type:Boolean},canUpdateLimits:{type:Boolean},access:{},budgetCurrencyId:{},folderId:{},folderName:{},elements:{},stats:{},isFirst:{type:[Boolean,null]},isLast:{type:[Boolean,null]}},emits:["update-budget","show-transaction-list","delete-folder","order-elements","order-folders","open-update-folder-modal","open-create-envelope-modal","open-update-element-modal","open-delete-element-modal","open-change-currency-modal"],setup(e,{emit:t}){const a=e,o=t,c=(0,s.EW)((()=>bt().currenciesHash[a.budgetCurrencyId])),i=(0,l.KR)(a.canUpdateLimits),r=(0,s.EW)({get(){return a.editMode}}),d=(0,l.KR)(a.folderId),u=(0,l.KR)(a.folderName),m=(0,l.KR)(null),g=(0,l.KR)(null),p=(0,s.EW)({get(){return a.elements},set(e){console.log("set",e)}}),v=Lt(),f=bt(),h=(0,s.EW)((()=>f.currenciesHash));function _(e){return h.value[e]?h.value[e].symbol:"-"}const A=(0,s.EW)((()=>v.budgetUnfoldedElements)),M=(0,s.EW)((()=>{const e={};let t=0;return a.access.forEach((a=>{a.isAccepted&&a.role!==Et.READ_ONLY&&(e[a.user.id]=a,t++)})),e.length=t,e}));function y(e){A.value[e.id]?v.foldElement(e.id):v.unfoldElement(e.id)}function k(e){m.value=e.id,g.value={id:e.id,value:0===parseFloat(e.budgeted)?"":e.budgeted}}function C(){m.value=null}function E(e){e=(0,Xe.o2)(e),(0,Xe.NF)(e)&&(e=(0,Xe.w9)(e)),g.value={id:m.value,value:e}}function I(e){g.value&&Ge(g.value.value)&&(o("update-budget",g.value.id,parseFloat(g.value.value)),m.value=null,g.value=null,e())}function T(e,t){o("delete-folder",e,t)}function L(e,t){let a=null,n=null,l=null,s=null,c=e.currencyId;null!==t?(a=t,e.type===Ct.TAG&&t.type===Ct.CATEGORY?(n=e.id,l=t.id):e.type===Ct.ENVELOPE&&t.type===Ct.CATEGORY&&(l=t.id)):(a=e,e.type===Ct.TAG?n=e.id:e.type===Ct.CATEGORY?l=e.id:e.type===Ct.ENVELOPE&&(s=e.id)),o("show-transaction-list",a,n,l,s,c)}function D(e){o("order-elements",e)}function N(e){o("order-folders",d.value,e)}function w(){o("open-update-folder-modal",d.value)}function O(){o("open-create-envelope-modal",d.value)}function F(e){o("open-update-element-modal",e)}function S(e){o("open-delete-element-modal",e)}function x(e){o("open-change-currency-modal",e)}const U=(0,l.KR)(null);function R(e,t){U.value=t.id,e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("elementId",t.id)}function $(e){U.value=null,e.dataTransfer.clearData("elementId")}function j(e,t){const a=e.dataTransfer.getData("elementId");e.dataTransfer.clearData("elementId"),console.log("Move element ",a," to ",t.id),U.value=null,a&&t.id}return(e,t)=>{const a=(0,s.g2)("q-btn"),o=(0,s.g2)("q-item-section"),v=(0,s.g2)("q-item"),f=(0,s.g2)("q-list"),h=(0,s.g2)("q-menu"),Q=(0,s.g2)("q-avatar"),q=(0,s.g2)("q-input"),z=(0,s.g2)("q-popup-edit"),P=(0,s.g2)("q-icon");return(0,s.uX)(),(0,s.CE)("div",{"data-folder-id":d.value},[(0,s.Lk)("div",sm,[(0,s.Lk)("div",cm,(0,b.v_)(u.value),1),!r.value&&p.value.length?((0,s.uX)(),(0,s.CE)("div",im,[(0,s.Lk)("div",rm,(0,b.v_)(e.$t("pages.budget.structure.tab.budgeted"))+" / "+(0,b.v_)(e.$t("pages.budget.structure.tab.spent"))+" / "+(0,b.v_)(e.$t("pages.budget.structure.tab.available")),1),(0,s.Lk)("div",dm,[(0,s.Lk)("span",{title:e.$t("pages.budget.structure.tab.budgeted"),innerHTML:(0,l.R1)(Te).methods.moneyHTML(e.stats.budgeted)},null,8,um),(0,s.eW)(" / "),(0,s.Lk)("span",{title:e.$t("pages.budget.structure.tab.spent"),innerHTML:(0,l.R1)(Te).methods.moneyHTML(e.stats.spent,c.value.symbol)},null,8,mm),(0,s.eW)(" / "),(0,s.Lk)("span",{title:e.$t("pages.budget.structure.tab.available"),innerHTML:(0,l.R1)(Te).methods.moneyHTML(e.stats.available,c.value.symbol)},null,8,gm)])])):(0,s.Q3)("",!0),r.value?((0,s.uX)(),(0,s.CE)("div",pm,[(0,s.Lk)("div",bm,[e.$q.screen.gt.md?((0,s.uX)(),(0,s.Wv)(a,{key:0,flat:"",icon:"control_point",class:"budget-table-row-folder-actions-create",onClick:t[0]||(t[0]=e=>O())})):(0,s.Q3)("",!0),e.$q.screen.gt.md?((0,s.uX)(),(0,s.Wv)(a,{key:1,flat:"",icon:"more_vert",class:"budget-table-row-folder-actions-context context-menu-button-control"},{default:(0,s.k6)((()=>[(0,s.bF)(h,{cover:"","auto-close":""},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(v,{clickable:null!==d.value,disable:null===d.value,class:"context-menu-button-item",onClick:t[1]||(t[1]=e=>w())},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:1},8,["clickable","disable"]),d.value?((0,s.uX)(),(0,s.Wv)(v,{key:0,clickable:!e.isFirst&&null!==d.value,disable:e.isFirst||!d.value,class:"context-menu-button-item",onClick:t[2]||(t[2]=e=>N(-1))},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.up.label")),1)])),_:1})])),_:1},8,["clickable","disable"])):(0,s.Q3)("",!0),d.value?((0,s.uX)(),(0,s.Wv)(v,{key:1,clickable:!e.isLast&&null!==d.value,disable:e.isLast||!d.value,class:"context-menu-button-item",onClick:t[3]||(t[3]=e=>N(1))},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.down.label")),1)])),_:1})])),_:1},8,["clickable","disable"])):(0,s.Q3)("",!0),(0,s.bF)(v,{clickable:!p.value.length&&d.value,disable:p.value.length||!d.value,class:"context-menu-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"context-menu-button-section -delete",onClick:t[4]||(t[4]=e=>T(d.value,!!p.value.length))},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:1},8,["clickable","disable"])])),_:1})])),_:1})])),_:1})):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)]),(0,s.bF)((0,l.R1)(Kc()),{list:p.value,group:"elements",disabled:!r.value,"item-key":"id",onEnd:D,"component-data":{id:d.value},handle:".sortable-control"},{item:(0,s.k6)((({element:c})=>[(0,s.Lk)("div",{class:(0,b.C4)("budget-table-row-element"+((c.children.length||1===c.type&&e.$q.screen.lt.md)&&A.value[c.id]?"":" budget-table-row-element-folded")+(c.children.length||1===c.type&&e.$q.screen.lt.md?" budget-table-row-element-with-children":"")+(m.value===c.id?" budget-table-row-element-active":"")+(U.value===c.id?" budget-table-row-element-drop-zone":"")),onDrop:e=>j(e,c),onDragover:(0,n.D$)((e=>U.value=c.id||2==c.type),["prevent"]),onDragenter:t[7]||(t[7]=(0,n.D$)((()=>{}),["prevent"]))},[(0,s.Lk)("div",fm,[(0,s.Lk)("div",{class:(0,b.C4)("budget-table-column-name budget-table-row-element-name"+(c.children.length||1===c.type&&e.$q.screen.lt.md?" budget-table-row-element-name-with-children":"")),onClick:e=>y(c),draggable:!c.children.length&&1==c.type,onDragstart:e=>R(e,c),onDragend:t[5]||(t[5]=e=>$(e))},[r.value?((0,s.uX)(),(0,s.CE)("div",_m,[(0,s.bF)(Q,{icon:"drag_indicator",class:"budget-table-row-element-icon-avatar"})])):((0,s.uX)(),(0,s.CE)("div",Am,[(0,s.bF)(Q,{icon:c.icon,class:"budget-table-row-element-icon-avatar"},null,8,["icon"]),e.$q.screen.gt.sm&&c.ownerUserId&&M.value.length>1?((0,s.uX)(),(0,s.Wv)(Q,{key:0,class:"budget-table-row-element-icon-shared"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:M.value[c.ownerUserId].user.avatar+"?s=30",title:M.value[c.ownerUserId].user.name,alt:M.value[c.ownerUserId].user.name},null,8,Mm)])),_:2},1024)):(0,s.Q3)("",!0)])),e.$q.screen.lt.md?((0,s.uX)(),(0,s.CE)("div",ym,[(0,s.Lk)("div",km,(0,b.v_)(c.name),1),(0,s.Lk)("div",{class:"budget-table-row-item-name-wrapper-budgeted",innerHTML:(0,l.R1)(Te).methods.moneyHTML(c.budgeted)},null,8,Cm)])):((0,s.uX)(),(0,s.CE)("span",Em,(0,b.v_)(c.name),1))],42,hm),(0,s.Lk)("div",{class:(0,b.C4)("budget-table-column-budget"+(m.value===c.id?" budget-table-column-budget-active":"")+(i.value?" cursor-pointer":" -no-edit"))},[(0,s.Lk)("div",{class:"budget-table-column-budget-row",innerHTML:(0,l.R1)(Te).methods.moneyHTML(c.budgeted)},null,8,Im),(0,s.bF)(z,{"model-value":c,class:"budget-table-column-budget-edit","auto-save":"",disable:!i.value,onBeforeShow:e=>k(c),onBeforeHide:C},{default:(0,s.k6)((t=>[(0,s.bF)(q,{"model-value":g.value.value,"onUpdate:modelValue":E,dense:"",autofocus:"",inputmode:"decimal",pattern:"[0-9+\\-\\*\\.=,]*",onKeyup:[(0,n.jR)((0,n.D$)((e=>I(t.cancel)),["stop","prevent"]),["enter"]),(0,n.jR)((0,n.D$)((e=>{t.cancel()}),["stop","prevent"]),["esc"])],rules:[t=>(0,l.R1)(Ge)(t.toString())||e.$t("elements.form.budget_limit.limit.validation.invalid_number"),t=>(0,l.R1)(Je)(t.toString())||e.$t("elements.form.budget_limit.limit.validation.invalid_formula")]},null,8,["model-value","onKeyup","rules"])])),_:2},1032,["model-value","disable","onBeforeShow"])],2),(0,s.Lk)("div",{class:"budget-table-column-spent -cursor-help -inactive",onClick:e=>L(c,null)},[(0,s.Lk)("div",{class:"budget-table-column-spent-row",innerHTML:(0,l.R1)(Te).methods.moneyHTML(-1*c.spent)},null,8,Lm)],8,Tm),(0,s.Lk)("div",{class:"budget-table-column-available -inactive",onClick:e=>y(c)},[(0,s.Lk)("div",{class:(0,b.C4)("budget-table-column-available-row "+(c.available+c.budgeted>=0?"income-color":"expense-color")),innerHTML:(0,l.R1)(Te).methods.moneyHTML(c.available+c.budgeted)},null,10,Nm)],8,Dm),(0,s.Lk)("div",{class:"budget-table-column-actions",id:"menu-"+c.id},[(0,s.Lk)("div",{class:"budget-table-column-actions-currency",onClick:e=>y(c)},(0,b.v_)(_(c.currencyId)),9,Om),(0,s.Lk)("div",Fm,[e.$q.screen.gt.md?((0,s.uX)(),(0,s.Wv)(a,{key:0,flat:"",icon:"more_vert",class:"context-menu-button-control"},{default:(0,s.k6)((()=>[(0,s.bF)(h,{cover:"","auto-close":"",target:"#menu-"+c.id},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[0!==c.type?((0,s.uX)(),(0,s.Wv)(v,{key:0,clickable:0!==c.type,disable:0===c.type,class:"context-menu-button-item",onClick:e=>x(c)},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("pages.budget.structure.element.action.change_currency")),1)])),_:1})])),_:2},1032,["clickable","disable","onClick"])):(0,s.Q3)("",!0),(0,s.bF)(v,{clickable:0===c.type,disable:0!==c.type,class:"context-menu-button-item",onClick:e=>F(c)},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:2},1032,["clickable","disable","onClick"]),0===c.type?((0,s.uX)(),(0,s.Wv)(v,{key:1,clickable:0===c.type,disable:0!==c.type,class:"context-menu-button-item",onClick:e=>S(c)},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"context-menu-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["clickable","disable","onClick"])):(0,s.Q3)("",!0)])),_:2},1024)])),_:2},1032,["target"])])),_:2},1024)):(0,s.Q3)("",!0)])],8,wm)]),1===c.type&&e.$q.screen.lt.md?((0,s.uX)(),(0,s.CE)("div",Sm,[(0,s.Lk)("div",{class:"row budget-table-row budget-table-row-item",onClick:e=>L(c,null)},[(0,s.Lk)("div",Um,[(0,s.Lk)("div",Rm,[(0,s.bF)(Q,{icon:c.icon,class:"budget-table-row-item-icon"},null,8,["icon"]),(0,s.eW)(""),(0,s.Lk)("span",$m,(0,b.v_)(c.name),1)])]),(0,s.Lk)("div",{class:"budget-table-column-spent -cursor-help -inactive",innerHTML:(0,l.R1)(Te).methods.moneyFormat(-1*c.spent)},null,8,jm)],8,xm)])):1!==c.type?((0,s.uX)(),(0,s.CE)("div",Qm,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.children,(a=>((0,s.uX)(),(0,s.CE)("div",{class:"row budget-table-row budget-table-row-item draggable",key:a.id,onClick:e=>L(c,a)},[(0,s.Lk)("div",{class:"budget-table-column-name budget-table-row-item-name",draggable:2!==c.type,onDragstart:e=>R(e,a),onDragend:t[6]||(t[6]=e=>$(e))},[(0,s.Lk)("div",Pm,[(0,s.bF)(Q,{icon:a.icon,class:"budget-table-row-item-icon"},null,8,["icon"]),(0,s.eW)(""),(0,s.Lk)("span",Wm,(0,b.v_)(a.name),1)])],40,zm),a.ownerUserId&&M.value.length>1&&e.$q.screen.gt.sm?((0,s.uX)(),(0,s.CE)("div",Ym,(0,b.v_)(M.value[a.ownerUserId].user.name),1)):(0,s.Q3)("",!0),a.ownerUserId&&M.value.length>1&&e.$q.screen.gt.sm?((0,s.uX)(),(0,s.CE)("div",Bm,"")):(0,s.Q3)("",!0),a.ownerUserId&&M.value.length>1&&e.$q.screen.gt.sm?((0,s.uX)(),(0,s.CE)("div",Hm,"")):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:"budget-table-column-spent -cursor-help -inactive",innerHTML:(0,l.R1)(Te).methods.moneyFormat(-1*a.spent)},null,8,Vm)],8,qm)))),128))])):(0,s.Q3)("",!0)],42,vm)])),_:1},8,["list","disabled","component-data"]),p.value.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Xm,[(0,s.Lk)("div",Gm,[(0,s.Lk)("div",Km,[(0,s.bF)(P,{class:"budget-table-row-folder-empty-icon",name:"error_outline"}),(0,s.Lk)("span",Zm,(0,b.v_)(e.$t("pages.budget.structure.empty_folder.note")),1)]),r.value?((0,s.uX)(),(0,s.CE)("div",Jm,[(0,s.bF)(a,{class:"econumo-btn -small -grey",flat:"",label:e.$t("pages.budget.structure.action.delete_folder"),onClick:t[8]||(t[8]=e=>T(d.value,!!p.value.length))},null,8,["label"])])):(0,s.Q3)("",!0)])]))],8,lm)}}}));var tg=a(3486);const ag=eg,ng=ag;z()(eg,"components",{QBtn:Q.A,QMenu:Tl.A,QList:Ja.A,QItem:tn.A,QItemSection:an.A,QAvatar:ma.A,QPopupEdit:tg.A,QInput:sa.A,QIcon:ca.A});const og={class:"budget-transaction-list-header-name"},lg=["innerHTML"],sg={class:"budget-transaction-list-header-icon"},cg=(0,s.Lk)("div",{class:"budget-transaction-list-body-loading"},"Loading...",-1),ig={key:0,class:"budget-transaction-list-body-empty"},rg={key:1,class:"budget-transaction-list-body-transactions"},dg={key:0,class:"budget-transaction-list-body-transactions-date-content"},ug={key:1,class:"budget-transaction-list-body-transactions-date-content"},mg={class:"budget-transaction-list-body-transactions-item-category"},gg={class:"budget-transaction-list-body-transactions-item-category-name"},pg={class:"budget-transaction-list-body-transactions-item-category-description"},bg={key:0,class:"budget-transaction-list-body-transactions-item-category-author"},vg=["src","title","alt"],fg={class:"budget-transaction-list-body-transactions-item-payee"},hg={key:0,class:"budget-transaction-list-body-transactions-item-payee-name"},_g={class:"budget-transaction-list-body-transactions-item-amount"},Ag=["innerHTML"],Mg=(0,s.pM)(Object.assign({name:"BudgetTransactionListModal",mixins:[Te]},{__name:"BudgetTransactionListModal",props:{budgetId:{},periodStart:{},categoryId:{},tagId:{},envelopeId:{},selectedElement:{},currencyId:{},currentUserId:{}},emits:["close"],setup(e,{emit:t}){const a=e,n=t;function o(){n("close")}const c=bt(),i=(0,s.EW)((()=>c.currenciesHash)),r=Lt(),d=(0,s.EW)((()=>r.isBudgetTransactionListLoading)),u=(0,s.EW)((()=>r.budgetTransactionList));return r.fetchTransactionList({budgetId:a.budgetId,periodStart:a.periodStart,categoryId:a.categoryId?a.categoryId:"",envelopeId:a.envelopeId?a.envelopeId:"",tagId:a.tagId?a.tagId:""}),(e,t)=>{const a=(0,s.g2)("q-avatar"),n=(0,s.g2)("q-card-section"),c=(0,s.g2)("q-item-label"),r=(0,s.g2)("q-item"),m=(0,s.g2)("q-btn"),g=(0,s.g2)("q-card-actions"),p=(0,s.g2)("q-card"),v=(0,s.g2)("q-dialog"),f=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(v,{class:"responsive-modal","model-value":!0,onHide:o,position:e.$q.screen.gt.sm?"standard":"bottom"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"budget-transaction-list"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"budget-transaction-list-header"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",og,(0,b.v_)(e.selectedElement.name),1),(0,s.Lk)("div",{class:"budget-transaction-list-header-amount",innerHTML:(0,l.R1)(Te).methods.moneyHTML(e.selectedElement.spent,i.value[e.currencyId].symbol)},null,8,lg),(0,s.Lk)("div",sg,[(0,s.bF)(a,{icon:e.selectedElement.icon,class:"budget-transaction-list-header-icon-avatar"},null,8,["icon"])])])),_:1}),d.value?((0,s.uX)(),(0,s.Wv)(n,{key:0,class:"budget-transaction-list-body"},{default:(0,s.k6)((()=>[cg])),_:1})):(0,s.Q3)("",!0),d.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(n,{key:1,class:"budget-transaction-list-body"},{default:(0,s.k6)((()=>[0===u.value.length?((0,s.uX)(),(0,s.CE)("div",ig,"No transactions")):(0,s.Q3)("",!0),u.value.length>0?((0,s.uX)(),(0,s.CE)("div",rg,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,l.R1)(Lo).methods.transactionsDailyList(u.value,"spentAt"),(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.id},[t.isSeparator?((0,s.uX)(),(0,s.Wv)(c,{class:"budget-transaction-list-body-transactions-date",header:"",key:t.id},{default:(0,s.k6)((()=>["none"!==t.alias?((0,s.uX)(),(0,s.CE)("span",dg,(0,b.v_)(e.$t("pages.account.transaction_list."+t.alias)),1)):((0,s.uX)(),(0,s.CE)("span",ug,(0,b.v_)(t.date),1))])),_:2},1024)):(0,s.Q3)("",!0),t.isSeparator?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(r,{class:"budget-transaction-list-body-transactions-item",key:t.id,clickable:e.$q.screen.lt.lg},{default:(0,s.k6)((()=>{var n,o;return[(0,s.Lk)("div",mg,[(0,s.Lk)("div",gg,(0,b.v_)((null===(n=t.category)||void 0===n?void 0:n.name)||""),1),(0,s.Lk)("div",pg,(0,b.v_)(t.description),1),(null===(o=t.author)||void 0===o?void 0:o.id)&&e.currentUserId!==t.author.id?((0,s.uX)(),(0,s.CE)("div",bg,[(0,s.bF)(a,{class:"budget-transaction-list-body-transactions-item-category-author-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:t.author.avatar+"?s=30",title:t.author.name,alt:t.author.name},null,8,vg)])),_:2},1024),(0,s.eW)(" "+(0,b.v_)(t.author.name),1)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",fg,[t.payee?((0,s.uX)(),(0,s.CE)("div",hg,(0,b.v_)(t.payee.name||""),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",_g,[(0,s.Lk)("div",{class:"budget-transaction-list-body-transactions-item-amount-value",innerHTML:(0,l.R1)(Te).methods.moneyHTML(-1*t.amount,i.value[t.currencyId].symbol)},null,8,Ag)])]})),_:2},1032,["clickable"]))])))),128))])):(0,s.Q3)("",!0)])),_:1})),(0,s.bF)(g,{class:"budget-transaction-list-footer"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(m,{class:"econumo-btn -wide -large -grey preview-modal-account-info-access-actions-btn",title:e.$t("elements.button.cancel.label"),flat:"",icon:"expand_more",onClick:o},null,8,["title"]),[[f]])])),_:1})])),_:1})])),_:1},8,["position"])}}})),yg=Mg,kg=yg;z()(Mg,"components",{QDialog:j.A,QCard:na.A,QCardSection:la.A,QAvatar:ma.A,QItemLabel:Il.A,QItem:tn.A,QCardActions:ga.A,QBtn:Q.A}),z()(Mg,"directives",{ClosePopup:pa.A});const Cg={class:"settings-toolbar-mobile"},Eg={class:"settings-toolbar-mobile-title"},Ig={class:"responsive-modal-header"},Tg=(0,s.pM)(Object.assign({name:"BudgetUpdateFormModal"},{__name:"BudgetUpdateFormModal",props:{id:{},name:{},excluded:{},canUpdateName:{type:Boolean}},emits:["update-name","update-excluded","submit","close"],setup(e,{emit:t}){const a=e,o=t,l=(0,s.EW)({get(){return a.name},set(e){o("update-name",e)}}),c=(0,s.EW)({get(){return a.excluded},set(e){o("update-excluded",e)}});function i(){o("submit",{id:a.id,name:l.value,excludedAccounts:c.value})}function r(){o("close")}return(e,t)=>{const a=(0,s.g2)("q-card-section"),o=(0,s.g2)("q-btn"),d=(0,s.g2)("q-card-actions"),u=(0,s.g2)("q-form"),m=(0,s.g2)("q-card"),g=(0,s.g2)("q-dialog"),p=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(g,{class:"responsive-modal","model-value":!0,onHide:r},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"responsive-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{ref:"budgetForm",onSubmit:(0,n.D$)(i,["prevent"]),onReset:r},{default:(0,s.k6)((()=>[(0,s.bF)(a,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Cg,[(0,s.Lk)("div",null,[(0,s.Lk)("h4",Eg,(0,b.v_)(e.$t("modals.budget.update_budget_form.header")),1)])]),(0,s.Lk)("div",Ig,(0,b.v_)(e.$t("modals.budget.update_budget_form.header")),1),(0,s.bF)(od,{name:l.value,excluded:c.value,"can-update-name":e.canUpdateName,onUpdateName:t[0]||(t[0]=e=>l.value=e),onUpdateExcluded:t[1]||(t[1]=e=>c.value=e)},null,8,["name","excluded","can-update-name"])])),_:1}),(0,s.bF)(d,{class:"responsive-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(o,{class:"econumo-btn -medium -grey responsive-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClick:r},null,8,["label"]),[[p]]),(0,s.bF)(o,{class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.update.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},512)])),_:1})])),_:1})}}})),Lg=Tg,Dg=Lg;z()(Tg,"components",{QDialog:j.A,QCard:na.A,QForm:oa.A,QCardSection:la.A,QCardActions:ga.A,QBtn:Q.A}),z()(Tg,"directives",{ClosePopup:pa.A});const Ng={class:"budget-form-wrapper"},wg={class:"responsive-modal-control"},Og={class:"responsive-modal-control-icon"},Fg={class:"responsive-modal-control"},Sg={class:"responsive-modal-control"},xg=["src","alt","title"],Ug=(0,s.pM)(Object.assign({name:"EnvelopeForm",mixins:[et,No,Te]},{__name:"EnvelopeForm",props:{id:{},name:{},icon:{},currencyId:{},categoriesIds:{},elements:{},access:{}},emits:["update-name","update-currency","update-categories"],setup(e,{emit:t}){const a=e,n=t,o=(0,s.EW)({get(){return a.name},set(e){n("update-name",e)}}),c=(0,s.EW)({get(){return a.icon}}),i=(0,s.EW)((()=>{const e={};return a.access.forEach((t=>{e[t.user.id]=t})),e.length=a.access.length,e})),r=bt(),d=(0,s.EW)({get(){return a.currencyId?v(r.currenciesHash[a.currencyId]):null},set(e){n("update-currency",e.value)}}),u=(0,l.KR)("");function m(e,t){t((()=>{u.value=e.toLowerCase()}))}function g(){u.value=""}const p=(0,s.EW)((()=>{let e=[];return r.currencies.forEach((t=>{(!u.value||t.name.toLowerCase().indexOf(this.currencySearchFilter)>-1||t.symbol.toLowerCase().indexOf(this.currencySearchFilter)>-1||t.code.toLowerCase().indexOf(this.currencySearchFilter)>-1)&&e.push(v(t))})),e}));function v(e){return{label:e.name+" ("+e.symbol+")",value:e.id}}const f=(0,s.EW)((()=>{const e=[];return a.elements.forEach((t=>{if(!t.isArchived)if(t.type===Ct.CATEGORY){const a={};a.id=t.id,a.name=t.name,a.icon=t.icon,a.ownerUserId=t.ownerUserId,e.push(a)}else t.type===Ct.ENVELOPE&&t.children.forEach((t=>{if(t.isArchived)return;const a={};a.id=t.id,a.name=t.name,a.icon=t.icon,a.ownerUserId=t.ownerUserId,e.push(a)}))})),_.orderBy(e,"name")})),h=(0,l.KR)("");function A(e,t){t((()=>{h.value=e.toLowerCase()}))}function M(){h.value=""}function y(e){return{value:e.id,label:e.name,description:e.name,icon:e.icon,ownerUserId:e.ownerUserId}}const k=(0,s.EW)((()=>{let e=[];return f.value.forEach((t=>{(!h.value||t.name.toLowerCase().indexOf(h.value)>-1)&&e.push(y(t))})),e})),C=(0,s.EW)({get(){return f.value.filter((e=>a.categoriesIds.includes(e.id))).map((e=>y(e)))},set(e){const t=[];e.forEach((e=>{e.hasOwnProperty("value")?t.push(e.value):t.push(e)})),n("update-categories",t)}});return(e,t)=>{const a=(0,s.g2)("q-icon"),n=(0,s.g2)("q-input"),l=(0,s.g2)("q-select"),r=(0,s.g2)("q-avatar"),u=(0,s.g2)("q-item-section"),v=(0,s.g2)("q-item-label"),f=(0,s.g2)("q-toggle"),h=(0,s.g2)("q-item");return(0,s.uX)(),(0,s.CE)("div",Ng,[(0,s.Lk)("div",wg,[(0,s.bF)(n,{class:"form-input full-width",outlined:"",placeholder:e.$t("elements.form.budget_envelope.name.placeholder"),modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),label:e.$t("elements.form.budget_envelope.name.label"),"lazy-rules":"",autofocus:"",rules:[t=>e.isNotEmpty(t)||e.$t("elements.form.budget_envelope.name.validation.required_field"),t=>e.isValidAccountName(t)||e.$t("elements.form.budget_envelope.name.validation.invalid_name")],maxlength:"18"},{before:(0,s.k6)((()=>[(0,s.Lk)("div",Og,[(0,s.bF)(a,{class:"responsive-modal-control-icon-img",name:c.value},null,8,["name"])])])),_:1},8,["placeholder","modelValue","label","rules"])]),(0,s.Lk)("div",Fg,[(0,s.bF)(l,{class:"form-select",outlined:"",modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),"use-input":"",options:p.value,"option-disable":e=>null===e||e.disabled,label:e.$t("elements.form.budget_envelope.currency.label"),rules:[t=>!!t||e.$t("elements.form.budget_envelope.currency.validation.required_field")],onFilter:m,onFilterAbort:g},null,8,["modelValue","options","option-disable","label","rules"])]),(0,s.Lk)("div",Sg,[(0,s.bF)(l,{class:"form-select",outlined:"",modelValue:C.value,"onUpdate:modelValue":t[2]||(t[2]=e=>C.value=e),"use-input":"",multiple:"",options:k.value,label:e.$t("elements.form.budget_envelope.categories.label"),onFilter:A,onFilterAbort:M},{option:(0,s.k6)((e=>[(0,s.bF)(h,(0,b._B)((0,s.Ng)(e.itemProps)),{default:(0,s.k6)((()=>[(0,s.bF)(u,{avatar:"",class:"budget-envelope-modal-control-avatar"},{default:(0,s.k6)((()=>[i.value.length>1?((0,s.uX)(),(0,s.Wv)(r,{key:0,size:"30px"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:i.value[e.opt.ownerUserId].user.avatar+"?s=30",alt:i.value[e.opt.ownerUserId].user.name,title:i.value[e.opt.ownerUserId].user.name},null,8,xg)])),_:2},1024)):((0,s.uX)(),(0,s.Wv)(r,{key:1,size:"30px",icon:e.opt.icon},null,8,["icon"]))])),_:2},1024),(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.bF)(v,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.opt.label),1)])),_:2},1024)])),_:2},1024),(0,s.bF)(u,{side:""},{default:(0,s.k6)((()=>[(0,s.bF)(f,{"model-value":e.selected,"onUpdate:modelValue":t=>e.toggleOption(e.opt.value)},null,8,["model-value","onUpdate:modelValue"])])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","label"])])])}}})),Rg=Ug,$g=Rg;z()(Ug,"components",{QInput:sa.A,QIcon:ca.A,QSelect:ua.A,QItem:tn.A,QItemSection:an.A,QAvatar:ma.A,QItemLabel:Il.A,QToggle:Nr.A});const jg={class:"responsive-modal-icon"},Qg={key:0,class:"responsive-modal-icon-label"},qg=(0,s.pM)(Object.assign({name:"ResponsiveModalIcons"},{__name:"Icons",props:{header:{},icon:{}},emits:["update-icon"],setup(e,{emit:t}){const a=e,n=t,o=(0,l.KR)("icons-0"),c=(0,l.KR)(Da(6,8)),i=(0,s.EW)({get(){return a.icon||Oa},set(e){n("update-icon",e)}});return(e,t)=>{const a=(0,s.g2)("q-btn"),n=(0,s.g2)("q-carousel-slide"),l=(0,s.g2)("q-carousel");return(0,s.uX)(),(0,s.CE)("div",jg,[null!==e.header?((0,s.uX)(),(0,s.CE)("div",Qg,(0,b.v_)(e.header),1)):(0,s.Q3)("",!0),(0,s.bF)(l,{swipeable:"",animated:"",navigation:"",infinite:"",modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),"control-color":"purple-5",class:"responsive-modal-icon-carousel"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(c.value,((e,t)=>((0,s.uX)(),(0,s.Wv)(n,{name:"icons-"+t,class:"responsive-modal-icon",key:t},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,(e=>((0,s.uX)(),(0,s.Wv)(a,{class:(0,b.C4)(["responsive-modal-icon-btn",i.value===e?"-active":""]),icon:e,key:e,onClick:t=>i.value=e},null,8,["class","icon","onClick"])))),128))])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])}}})),zg=qg,Pg=zg;z()(qg,"components",{QCarousel:xa.A,QCarouselSlide:Ua.A,QBtn:Q.A});const Wg={class:"settings-toolbar-mobile"},Yg={class:"settings-toolbar-mobile-title"},Bg={class:"responsive-modal-header"},Hg=(0,s.pM)(Object.assign({name:"BudgetCreateEnvelopeModal"},{__name:"BudgetCreateEnvelopeModal",props:{budgetId:{},id:{},budgetCurrencyId:{},folderId:{},elements:{},access:{}},emits:["create","close"],setup(e,{emit:t}){const a=e,o=t,c=(0,l.KR)(""),i=(0,l.KR)(Oa),r=(0,l.KR)(a.budgetCurrencyId),d=(0,l.KR)([]);function u(){o("create",{budgetId:a.budgetId,id:a.id,icon:i.value,name:c.value,currencyId:r.value,folderId:a.folderId,categories:d.value})}function m(){o("close")}return(e,t)=>{const a=(0,s.g2)("q-card-section"),o=(0,s.g2)("q-btn"),l=(0,s.g2)("q-card-actions"),g=(0,s.g2)("q-form"),p=(0,s.g2)("q-card"),v=(0,s.g2)("q-dialog"),f=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(v,{class:"responsive-modal","model-value":!0,onHide:m},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"responsive-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{ref:"budgetCreateEnvelopeForm",onSubmit:(0,n.D$)(u,["prevent"]),onReset:m},{default:(0,s.k6)((()=>[(0,s.bF)(a,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Wg,[(0,s.Lk)("div",null,[(0,s.Lk)("h4",Yg,(0,b.v_)(e.$t("modals.budget.create_envelope_form.header")),1)])]),(0,s.Lk)("div",Bg,(0,b.v_)(e.$t("modals.budget.create_envelope_form.header")),1),(0,s.bF)($g,{id:e.id,name:c.value,icon:i.value,"currency-id":r.value,"categories-ids":d.value,elements:e.elements,access:e.access,onUpdateName:t[0]||(t[0]=e=>c.value=e),onUpdateIcon:t[1]||(t[1]=e=>i.value=e),onUpdateCurrency:t[2]||(t[2]=e=>r.value=e),onUpdateCategories:t[3]||(t[3]=e=>d.value=e)},null,8,["id","name","icon","currency-id","categories-ids","elements","access"])])),_:1}),(0,s.bF)(a,{class:"responsive-modal-section-icon"},{default:(0,s.k6)((()=>[(0,s.bF)(Pg,{header:e.$t("elements.form.budget_envelope.icon.label"),icon:i.value,onUpdateIcon:t[4]||(t[4]=e=>i.value=e)},null,8,["header","icon"])])),_:1}),(0,s.bF)(l,{class:"responsive-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(o,{class:"econumo-btn -medium -grey responsive-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClick:m},null,8,["label"]),[[f]]),(0,s.bF)(o,{class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.add.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},512)])),_:1})])),_:1})}}})),Vg=Hg,Xg=Vg;z()(Hg,"components",{QDialog:j.A,QCard:na.A,QForm:oa.A,QCardSection:la.A,QCardActions:ga.A,QBtn:Q.A}),z()(Hg,"directives",{ClosePopup:pa.A});const Gg={class:"settings-toolbar-mobile"},Kg={class:"settings-toolbar-mobile-title"},Zg={class:"responsive-modal-header"},Jg={class:"responsive-modal-section"},ep=(0,s.pM)(Object.assign({name:"BudgetUpdateEnvelopeModal"},{__name:"BudgetUpdateEnvelopeModal",props:{budgetId:{},id:{},name:{},icon:{},currencyId:{},isArchived:{},categories:{},elements:{},access:{}},emits:["save","close"],setup(e,{emit:t}){const a=e,o=t,{t:c}=(0,U.s9)(),i=(0,l.KR)(a.name),r=(0,l.KR)(a.icon),d=(0,l.KR)(a.currencyId),u=(0,l.KR)(a.categories),m=(0,l.KR)([{label:c("elements.form.budget_envelope.status.option.active"),value:0},{label:c("elements.form.budget_envelope.status.option.archive"),value:1}]),g=(0,l.KR)(null),p=(0,s.EW)({get(){return g.value||m.value[a.isArchived]},set(e){g.value=e}});function v(){o("save",{budgetId:a.budgetId,id:a.id,name:i.value,icon:r.value,currencyId:d.value,isArchived:p.value.value,categories:u.value})}function f(){o("close")}return(e,t)=>{const a=(0,s.g2)("q-card-section"),o=(0,s.g2)("q-select"),l=(0,s.g2)("q-btn"),c=(0,s.g2)("q-card-actions"),g=(0,s.g2)("q-form"),h=(0,s.g2)("q-card"),_=(0,s.g2)("q-dialog"),A=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(_,{class:"responsive-modal","model-value":!0,onHide:f},{default:(0,s.k6)((()=>[(0,s.bF)(h,{class:"responsive-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{ref:"budgetUpdateEnvelopeForm",onSubmit:(0,n.D$)(v,["prevent"]),onReset:f},{default:(0,s.k6)((()=>[(0,s.bF)(a,{class:"q-pb-none"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Gg,[(0,s.Lk)("div",null,[(0,s.Lk)("h4",Kg,(0,b.v_)(e.$t("modals.budget.update_envelope_form.header")),1)])]),(0,s.Lk)("div",Zg,(0,b.v_)(e.$t("modals.budget.update_envelope_form.header")),1),(0,s.bF)($g,{id:e.id,name:i.value,icon:r.value,"currency-id":d.value,"categories-ids":u.value,elements:e.elements,access:e.access,onUpdateName:t[0]||(t[0]=e=>i.value=e),onUpdateIcon:t[1]||(t[1]=e=>r.value=e),onUpdateCurrency:t[2]||(t[2]=e=>d.value=e),onUpdateCategories:t[3]||(t[3]=e=>u.value=e)},null,8,["id","name","icon","currency-id","categories-ids","elements","access"])])),_:1}),(0,s.bF)(a,{class:"responsive-modal-section-status"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Jg,[(0,s.bF)(o,{class:"form-select",outlined:"",modelValue:p.value,"onUpdate:modelValue":t[4]||(t[4]=e=>p.value=e),"use-input":"",options:m.value,label:e.$t("elements.form.budget_envelope.status.label")},null,8,["modelValue","options","label"])])])),_:1}),(0,s.bF)(a,{class:"responsive-modal-section-icon"},{default:(0,s.k6)((()=>[(0,s.bF)(Pg,{header:e.$t("elements.form.budget_envelope.icon.label"),icon:r.value,onUpdateIcon:t[5]||(t[5]=e=>r.value=e)},null,8,["header","icon"])])),_:1}),(0,s.bF)(c,{class:"responsive-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(l,{class:"econumo-btn -medium -grey responsive-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClick:f},null,8,["label"]),[[A]]),(0,s.bF)(l,{class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.update.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},512)])),_:1})])),_:1})}}})),tp=ep,ap=tp;z()(ep,"components",{QDialog:j.A,QCard:na.A,QForm:oa.A,QCardSection:la.A,QSelect:ua.A,QCardActions:ga.A,QBtn:Q.A}),z()(ep,"directives",{ClosePopup:pa.A});const np={class:"settings-toolbar-mobile"},op={class:"settings-toolbar-mobile-title"},lp={class:"responsive-modal-header"},sp={class:"budget-form-wrapper"},cp={class:"responsive-modal-control"},ip=(0,s.pM)(Object.assign({name:"BudgetChangeCurrencyModal"},{__name:"BudgetChangeCurrencyModal",props:{id:{},currencyId:{},budgetId:{}},emits:["change-currency","close"],setup(e,{emit:t}){const a=e,o=t,c=bt(),i=(0,l.KR)(a.currencyId),r=(0,s.EW)({get(){return i.value?v(c.currenciesHash[i.value]):null},set(e){i.value=e.value}});function d(){o("change-currency",{budgetId:a.budgetId,elementId:a.id,currencyId:i.value})}const u=(0,l.KR)("");function m(e,t){t((()=>{u.value=e.toLowerCase()}))}function g(){u.value=""}const p=(0,s.EW)((()=>{let e=[];return c.currencies.forEach((t=>{(!u.value||t.name.toLowerCase().indexOf(this.currencySearchFilter)>-1||t.symbol.toLowerCase().indexOf(this.currencySearchFilter)>-1||t.code.toLowerCase().indexOf(this.currencySearchFilter)>-1)&&e.push(v(t))})),e}));function v(e){return{label:e.name+" ("+e.symbol+")",value:e.id}}function f(){o("close")}return(e,t)=>{const a=(0,s.g2)("q-select"),o=(0,s.g2)("q-card-section"),l=(0,s.g2)("q-btn"),c=(0,s.g2)("q-card-actions"),i=(0,s.g2)("q-form"),u=(0,s.g2)("q-card"),v=(0,s.g2)("q-dialog"),h=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(v,{class:"responsive-modal","model-value":!0,onHide:f},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"responsive-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{ref:"budgetForm",onSubmit:(0,n.D$)(d,["prevent"]),onReset:f},{default:(0,s.k6)((()=>[(0,s.bF)(o,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",np,[(0,s.Lk)("div",null,[(0,s.Lk)("h4",op,(0,b.v_)(e.$t("modals.budget.change_element_currency_form.header")),1)])]),(0,s.Lk)("div",lp,(0,b.v_)(e.$t("modals.budget.change_element_currency_form.header")),1),(0,s.Lk)("div",sp,[(0,s.Lk)("div",cp,[(0,s.bF)(a,{class:"form-select",outlined:"",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),"use-input":"",options:p.value,"option-disable":e=>null===e||e.disabled,label:e.$t("elements.form.budget_envelope.currency.label"),rules:[t=>!!t||e.$t("elements.form.budget_envelope.currency.validation.required_field")],onFilter:m,onFilterAbort:g},null,8,["modelValue","options","option-disable","label","rules"])])])])),_:1}),(0,s.bF)(c,{class:"responsive-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(l,{class:"econumo-btn -medium -grey responsive-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClick:f},null,8,["label"]),[[h]]),(0,s.bF)(l,{class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.save.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},512)])),_:1})])),_:1})}}})),rp=ip,dp=rp;z()(ip,"components",{QDialog:j.A,QCard:na.A,QForm:oa.A,QCardSection:la.A,QSelect:ua.A,QCardActions:ga.A,QBtn:Q.A}),z()(ip,"directives",{ClosePopup:pa.A});const up={class:"budget"},mp={class:"budget-toolbar-mobile"},gp={class:"budget-toolbar-mobile-head"},pp={key:0,class:"budget-toolbar-mobile-head-title"},bp={key:1,class:"budget-toolbar-mobile-head-title"},vp=(0,s.Lk)("div",null,"  ",-1),fp={class:"budget-toolbar-desktop"},hp={class:"budget-toolbar-desktop-head"},_p={key:0,class:"budget-toolbar-desktop-head-title"},Ap={key:1,class:"budget-toolbar-desktop-head-title"},Mp={class:"budget-toolbar-desktop-settings"},yp={key:0,class:"row"},kp={class:"budget-empty"},Cp={key:1,class:"row"},Ep=["onClick"],Ip={key:2,class:"row"},Tp={key:3,class:"row"},Lp={class:"col"},Dp={class:"budget-table"},Np=(0,s.pM)(Object.assign({name:"BudgetPage",mixins:[et]},{__name:"Budget",setup(e){const t=(0,p.rd)(),a=(0,p.lq)(),n=Lt(),o=Xt(),{t:c}=(0,U.s9)(),i=(0,s.EW)((()=>n.budgetDate)),r={left:23,right:23},d=(0,s.EW)((()=>{let e=[];const t=tt.Ay.formatDate(new Date,"YYYY");let a=i.value;a=/^\d{4}-\d{2}-\d{2}$/.test(a)?tt.Ay.extractDate(i.value,"YYYY-MM-DD"):tt.Ay.extractDate(i.value,"YYYY-MM-DD HH:mm:ss");const n=tt.Ay.adjustDate(a,{date:1,millisecond:0,second:0,minute:0,hour:0}),o=r.left,l=r.right;let s=null,c=0;for(let a=o;a>=0;a--){s=tt.Ay.subtractFromDate(n,{months:a});let o=tt.Ay.formatDate(s,"YYYY");e.push({label:tt.Ay.formatDate(s,t===o?"MMMM":"MMM YYYY"),value:tt.Ay.formatDate(s,"YYYY-MM-01"),number:c++,isActive:n.getTime()===s.getTime(),outsideBudget:s<Me.value})}for(let a=1;a<=l;a++){let o=tt.Ay.addToDate(n,{months:a}),l=tt.Ay.formatDate(o,"YYYY");e.push({label:tt.Ay.formatDate(o,t===l?"MMMM":"MMM YYYY"),value:tt.Ay.formatDate(o,"YYYY-MM-01"),number:c++,isActive:n.getTime()===o.getTime(),outsideBudget:o<Me.value})}return e})),u=(0,l.KR)(null),m=()=>{if(!u.value)return;const e=u.value,t=e.children[r.left-1];if(t){const a=e.offsetWidth,n=t.offsetWidth,o=t.offsetLeft,l=o-a/2+1.5*n;e.scrollTo({left:l,behavior:"smooth"})}};function v(e=!1){e?Mt().setSidebarActiveArea():Mt().setWorkspaceActiveArea(),t.push({name:g.SETTINGS_BUDGETS})}function f(e=!1){e?Mt().setSidebarActiveArea():Mt().setWorkspaceActiveArea(),t.push({name:g.HOME})}(0,s.sV)((()=>{const e=t.currentRoute.value.name;e===g.BUDGET?(Mt().setWorkspaceActiveArea(),m()):e===g.HOME&&Mt().setSidebarActiveArea()})),(0,s.wB)((()=>a),(e=>{e.name===g.BUDGET?(Mt().setWorkspaceActiveArea(),m()):e.name===g.HOME&&Mt().setSidebarActiveArea()}),{immediate:!0,deep:!0});const h=(0,l.KR)(!1),A=(0,s.EW)((()=>n.isBudgetLoaded)),M=(0,s.EW)((()=>n.canUserConfigureBudget)),y=(0,s.EW)((()=>{if(n.canUserUpdateLimits){const e=tt.Ay.extractDate(n.budgetDate,gt);if(E.value&&new Date(E.value.meta.startedAt)<=e)return!0}return!1}));A.value||n.fetchUserBudget();const k=bt(),C=(0,s.EW)((()=>k.currenciesHash)),E=((0,s.EW)((()=>n.isBudgetLoading)),(0,s.EW)((()=>n.budget))),I=(0,s.EW)((()=>{const e=n.budget,t={};let a=0;return _.orderBy(e.structure.folders,"position").forEach((e=>{t[e.id]=_.cloneDeep(e),t[e.id].elements=[],t[e.id].stats={budgeted:0,spent:0,available:0},a++})),_.orderBy(e.structure.elements,"position").forEach((e=>{null===e.folderId||e.isArchived||(t[e.folderId]||(t[e.folderId]={elements:[]}),t[e.folderId].elements.push(_.cloneDeep(e)),t[e.folderId].stats.budgeted+=e.budgeted,t[e.folderId].stats.spent+=e.budgetSpent,t[e.folderId].stats.available+=e.available+e.budgeted)})),0===a?[]:Object.values(t)})),T=(0,s.EW)((()=>{const e=n.budget,t={elements:[],stats:{budgeted:0,spent:0,available:0}};return _.orderBy(e.structure.elements,"position").forEach((e=>{null!==e.folderId||e.isArchived||(t.elements.push(_.cloneDeep(e)),t.stats.budgeted+=e.budgeted,t.stats.spent+=e.budgetSpent,t.stats.available+=e.available+e.budgeted)})),t})),L=(0,s.EW)((()=>{const e=n.budget,t={elements:[],stats:{budgeted:0,spent:0,available:0}};return _.orderBy(e.structure.elements,"name").forEach((e=>{e.isArchived&&(t.elements.push(_.cloneDeep(e)),t.stats.budgeted+=e.budgeted,t.stats.spent+=e.budgetSpent,t.stats.available+=e.available+e.budgeted)})),t})),D=(0,l.Kh)({isOpened:!1,header:"",description:""});function N(e,t){D.header=e,D.description=t,D.isOpened=!0}function w(){D.isOpened=!1,D.header="",D.description=""}const O=(0,l.Kh)({isOpened:!1,budgetId:null,budgetName:"",accountsExcluded:[]});function F(){O.budgetId=n.generateId(),O.isOpened=!0}function S(){O.isOpened=!1}function x(){O.budgetId=null,O.budgetName="",O.accountsExcluded=[]}function R(e){n.createBudget(e).then((e=>{e.success?x():N(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{N(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))})).finally((()=>{S(),m()}))}const $=(0,l.Kh)({isOpened:!1,budgetId:null,budgetName:"",accountsExcluded:[]});function j(){$.budgetId=E.value.meta.id,$.budgetName=E.value.meta.name,$.accountsExcluded=E.value.filters.excludedAccountsIds,$.isOpened=!0}function Q(){$.isOpened=!1,q()}function q(){$.budgetId=null,$.budgetName="",$.accountsExcluded=[]}function z(e){n.updateBudget(e).then((e=>{e.success?(q(),n.fetchUserBudget().finally((()=>{m()}))):N(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{N(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))})).finally((()=>{Q()}))}const P=(0,l.Kh)({isOpened:!1,folderId:null,folderName:""});function W(){P.folderId=n.generateId(),P.isOpened=!0}function Y(){P.isOpened=!1}function B(){P.folderId=null,P.folderName=""}function H(e,t,a){n.createFolder({budgetId:_e.value.id,id:a,name:e}).then((e=>{e.success?(B(),n.fetchUserBudget().finally((()=>{m()}))):N(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{N(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))})).finally((()=>{Y()}))}const V=(0,l.Kh)({isOpened:!1,folderId:null,folderName:null});function X(e,t){V.folderId=e,V.folderName=t,V.isOpened=!0}function G(){V.isOpened=!1,K()}function K(){V.folderId=null,V.folderName=null}function Z(e,t,a){n.updateFolder({budgetId:_e.value.id,id:a,name:e}).then((e=>{e.success||(G(),N(c("modals.budget.generic_error.header"),e.message))})).catch((()=>{N(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))})).finally((()=>{G()}))}function J(e,t){t||ee(e)}function ee(e){var t;n.deleteFolder(null===(t=E.value)||void 0===t?void 0:t.meta.id,e).then((e=>{e.success?(B(),n.fetchUserBudget().finally((()=>{m()}))):N(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{N(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))})).finally((()=>{Y()}))}const te=(0,l.Kh)({isOpened:!1,envelopeId:null,budgetId:null,folderId:null});function ae(e){te.folderId=e,te.envelopeId=n.generateId(),te.budgetId=_e.value.id,te.isOpened=!0}function ne(){te.isOpened=!1,oe()}function oe(){te.folderId=null,te.envelopeId=null,te.budgetId=null}function le(e){n.createEnvelope(e).then((t=>{t.success?(oe(),e.categories.length>0&&n.fetchUserBudget().finally((()=>{m()}))):N(c("modals.budget.generic_error.header"),t.message)})).catch((()=>{N(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))})).finally((()=>{ne()}))}function se(e){e.type===Ct.ENVELOPE&&ie(e)}const ce=(0,l.Kh)({isOpened:!1,budgetId:null,envelopeId:null,name:"",icon:"",currencyId:null,isArchived:null,categories:[]});function ie(e){ce.budgetId=_e.value.id,ce.envelopeId=e.id,ce.name=e.name,ce.icon=e.icon,ce.currencyId=e.currencyId,ce.isArchived=e.isArchived,ce.categories=[],e.children.forEach((e=>{ce.categories.push(e.id)})),ce.isOpened=!0}function re(){ce.isOpened=!1,de()}function de(){ce.folderId=null,ce.budgetId=null,ce.envelopeId=null,ce.name="",ce.icon="",ce.currencyId=null,ce.isArchived=null,ce.categories=[]}function ue(e){n.updateEnvelope(e).then((e=>{e.success?(de(),n.fetchUserBudget().finally((()=>{m()}))):N(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{N(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))})).finally((()=>{re()}))}const me=(0,l.Kh)({isOpened:!1,budgetId:null,envelopeId:null});function ge(e){me.budgetId=_e.value.id,me.envelopeId=e.id,me.isOpened=!0}function pe(){me.isOpened=!1,be()}function be(){me.budgetId=null,me.envelopeId=null}function ve(e){n.deleteEnvelope(e).then((e=>{e.success?(be(),n.fetchUserBudget().finally((()=>{m()}))):N(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{N(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))})).finally((()=>{pe()}))}function fe(e){e.type===Ct.ENVELOPE&&ge(e)}function he(e){n.changeBudgetPeriod(e),n.fetchUserBudget().then((()=>{m()}))}const _e=(0,s.EW)((()=>n.budgetMeta)),Ae=(0,s.EW)((()=>n.budgetCurrencies)),Me=(0,s.EW)((()=>new Date(_e.value.startedAt))),ye=(0,l.Kh)({isOpened:!1,budgetId:null,periodStart:"",categoryId:null,tagId:null,envelopeId:null,selectedElement:null,currencyId:null,currentUserId:null});function ke(e,t,a,n,l){ye.budgetId=_e.value.id,ye.periodStart=i.value,ye.selectedElement=e,ye.categoryId=a,ye.tagId=t,ye.envelopeId=n,ye.currencyId=l,ye.currentUserId=o.userId,ye.isOpened=!0}function Ce(){ye.isOpened=!1,ye.budgetId=null,ye.periodStart="",ye.selectedElement=null,ye.categoryId=null,ye.tagId=null,ye.envelopeId=null,ye.currencyId=null,ye.currentUserId=null}function Ee(e,t){const a=e.to.id||null,o=e.item.__draggable_context.element.id||null,l=e.newIndex;n.moveElement(o,l,a).then((e=>{e.success||N(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{N(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))}))}function Ie(e,t){const a=E.value.structure.folders.find((t=>t.id===e));n.orderFolders(e,a.position+t).then((e=>{e.success||N(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{N(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))}))}function Te(e,t){t=0==t||isNaN(t)?null:parseFloat(t);const a=tt.Ay.extractDate(n.budgetDate,gt);n.setLimit({budgetId:_e.value.id,elementId:e,amount:t,period:tt.Ay.formatDate(a,gt)}).then((e=>{e.success||N(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{N(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))}))}const Le=(0,l.Kh)({isOpened:!1,elementId:null,currencyId:null});function De(e){Le.currencyId=e.currencyId||_e.value.currencyId,Le.elementId=e.id,Le.isOpened=!0}function Ne(){Le.isOpened=!1,we()}function we(){Le.currencyId=null,Le.elementId=null}function Oe(e){n.changeElementCurrency(e).then((e=>{e.success?(we(),n.fetchUserBudget()):N(c("modals.budget.generic_error.header"),e.message)})).catch((()=>{N(c("modals.budget.generic_error.header"),c("modals.budget.generic_error.description"))})).finally((()=>{Ne()}))}return m(),(e,t)=>{const a=(0,s.g2)("q-btn"),n=(0,s.g2)("q-avatar"),o=(0,s.g2)("q-item-section"),c=(0,s.g2)("q-item"),i=(0,s.g2)("q-list"),r=(0,s.g2)("q-menu"),m=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(m,null,{default:(0,s.k6)((()=>{var m,g,p,_;return[(0,s.Lk)("div",up,[(0,s.Lk)("div",mp,[(0,s.Lk)("div",gp,[(0,s.Lk)("div",null,[(0,s.bF)(a,{class:"budget-toolbar-mobile-head-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=e=>f(!0))})]),(0,s.Lk)("div",null,[_e.value?((0,s.uX)(),(0,s.CE)("h4",pp,(0,b.v_)(_e.value.name),1)):((0,s.uX)(),(0,s.CE)("h4",bp,(0,b.v_)(e.$t("pages.budget.empty.header")),1))]),vp])]),(0,s.Lk)("div",fp,[(0,s.Lk)("div",hp,[_e.value?((0,s.uX)(),(0,s.CE)("h4",_p,[(0,s.eW)((0,b.v_)(_e.value.name)+" ",1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(Ae.value,(e=>((0,s.uX)(),(0,s.Wv)(n,{size:"24px",class:(0,b.C4)("budget-toolbar-desktop-head-icon "),key:e,title:C.value[e].name},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(C.value[e].symbol),1)])),_:2},1032,["title"])))),128))])):((0,s.uX)(),(0,s.CE)("h4",Ap,(0,b.v_)(e.$t("pages.budget.empty.header")),1))]),(0,s.Lk)("div",Mp,[h.value?((0,s.uX)(),(0,s.Wv)(a,{key:0,flat:"",class:"budget-toolbar-desktop-settings-btn econumo-btn -small -yellow",label:e.$t("pages.budget.settings.menu.edit_structure_done"),onClick:t[1]||(t[1]=e=>h.value=!1)},null,8,["label"])):(0,s.Q3)("",!0),h.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(a,{key:1,flat:"",class:"budget-toolbar-desktop-settings-btn",label:e.$t("pages.budget.settings.button")},{default:(0,s.k6)((()=>[(0,s.bF)(r,{cover:"","auto-close":""},{default:(0,s.k6)((()=>[(0,s.bF)(i,null,{default:(0,s.k6)((()=>[(0,s.bF)(c,{clickable:"",class:"context-menu-button-item",onClick:t[2]||(t[2]=e=>j())},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("pages.budget.settings.menu.edit")),1)])),_:1})])),_:1}),(0,s.bF)(c,{clickable:M.value,disable:!M.value,class:"context-menu-button-item",onClick:t[3]||(t[3]=e=>h.value=!0)},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("pages.budget.settings.menu.edit_structure")),1)])),_:1})])),_:1},8,["clickable","disable"]),(0,s.bF)(c,{clickable:"",class:"context-menu-button-item",onClick:t[4]||(t[4]=e=>v(!0))},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,b.v_)(e.$t("pages.budget.settings.menu.budget_list")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["label"]))])]),A.value&&!E.value?((0,s.uX)(),(0,s.CE)("div",yp,[(0,s.Lk)("div",kp,[(0,s.Lk)("div",null,(0,b.v_)(e.$t("pages.budget.empty.no_budget")),1),(0,s.Lk)("div",null,(0,b.v_)(e.$t("pages.budget.empty.description")),1),(0,s.bF)(a,{class:"econumo-btn -small -magenta budget-toolbar-control-btn",flat:"",label:e.$t("pages.budget.empty.create_budget"),onClick:F},null,8,["label"])])])):(0,s.Q3)("",!0),_e.value?((0,s.uX)(),(0,s.CE)("div",Cp,[(0,s.Lk)("div",{class:"budget-toolbar-period",ref_key:"periodScroll",ref:u},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,(e=>((0,s.uX)(),(0,s.CE)("div",{class:(0,b.C4)("budget-toolbar-period-item"+(e.isActive?" budget-toolbar-period-item-active":"")+(e.outsideBudget?" budget-toolbar-period-item-outside":"")),key:e.value,onClick:t=>he(e.value)},(0,b.v_)(e.label),11,Ep)))),128))],512)])):(0,s.Q3)("",!0),h.value&&A.value&&E.value?((0,s.uX)(),(0,s.CE)("div",Ip,[(0,s.bF)(a,{class:"econumo-btn -small -magenta",flat:"",label:e.$t("pages.budget.structure.action.create_folder"),onClick:t[5]||(t[5]=e=>W())},null,8,["label"])])):(0,s.Q3)("",!0),A.value&&E.value?((0,s.uX)(),(0,s.CE)("div",Tp,[(0,s.Lk)("div",Lp,[(0,s.Lk)("div",Dp,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(I.value,((e,t)=>((0,s.uX)(),(0,s.Wv)(ng,{key:e.id,"edit-mode":h.value,"can-update-limits":y.value,"budget-currency-id":_e.value.currencyId,"folder-id":e.id,"folder-name":e.name,elements:e.elements,stats:e.stats,access:_e.value.access,"is-first":0===t,"is-last":t===I.value.length-1,onUpdateBudget:Te,onShowTransactionList:ke,onDeleteFolder:J,onOrderElements:t=>Ee(t,e.id),onOrderFolders:Ie,onOpenUpdateFolderModal:t=>X(e.id,e.name),onOpenCreateEnvelopeModal:ae,onOpenUpdateElementModal:se,onOpenDeleteElementModal:fe,onOpenChangeCurrencyModal:De},null,8,["edit-mode","can-update-limits","budget-currency-id","folder-id","folder-name","elements","stats","access","is-first","is-last","onOrderElements","onOpenUpdateFolderModal"])))),128)),T.value.elements.length?((0,s.uX)(),(0,s.Wv)(ng,{key:0,"edit-mode":h.value,"can-update-limits":y.value,"budget-currency-id":_e.value.currencyId,"folder-id":null,"folder-name":e.$t("pages.budget.structure.no_folder"),elements:T.value.elements,stats:T.value.stats,access:_e.value.access,"is-first":null,"is-last":null,onUpdateBudget:Te,onShowTransactionList:ke,onDeleteFolder:()=>{},onOrderElements:t[6]||(t[6]=e=>Ee(e,null)),onOpenCreateEnvelopeModal:ae,onOpenUpdateElementModal:se,onOpenDeleteElementModal:fe,onOpenChangeCurrencyModal:De},null,8,["edit-mode","can-update-limits","budget-currency-id","folder-name","elements","stats","access"])):(0,s.Q3)("",!0),L.value.elements.length?((0,s.uX)(),(0,s.Wv)(ng,{key:1,"edit-mode":!1,"can-update-limits":y.value,"budget-currency-id":_e.value.currencyId,"folder-id":null,"folder-name":e.$t("pages.budget.structure.in_archive"),elements:L.value.elements,stats:L.value.stats,access:_e.value.access,"is-first":null,"is-last":null,onUpdateBudget:Te,onShowTransactionList:ke,onDeleteFolder:()=>{},onOrderElements:()=>{},onOpenCreateEnvelopeModal:()=>{},onOpenUpdateElementModal:se,onOpenDeleteElementModal:fe,onOpenChangeCurrencyModal:De},null,8,["can-update-limits","budget-currency-id","folder-name","elements","stats","access"])):(0,s.Q3)("",!0)])])])):(0,s.Q3)("",!0)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[O.isOpened?((0,s.uX)(),(0,s.Wv)(dd,{key:0,id:O.budgetId,name:O.budgetName,excluded:O.accountsExcluded,onUpdateName:t[7]||(t[7]=e=>O.budgetName=e),onUpdateExcluded:t[8]||(t[8]=e=>O.accountsExcluded=e),onSubmit:R,onClose:S},null,8,["id","name","excluded"])):(0,s.Q3)("",!0),$.isOpened?((0,s.uX)(),(0,s.Wv)(Dg,{key:1,id:$.budgetId,name:$.budgetName,excluded:$.accountsExcluded,"can-update-name":M.value,onUpdateName:t[9]||(t[9]=e=>$.budgetName=e),onUpdateExcluded:t[10]||(t[10]=e=>$.accountsExcluded=e),onSubmit:z,onClose:Q},null,8,["id","name","excluded","can-update-name"])):(0,s.Q3)("",!0),P.isOpened?((0,s.uX)(),(0,s.Wv)(ni,{key:2,"header-label":e.$t("modals.budget.create_folder_form.header"),"input-value":P.folderName,"input-label":e.$t("elements.form.budget.folder_name.placeholder"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.create.label"),validation:[t=>(0,l.R1)(Ze)(t)||e.$t("elements.form.budget.folder_name.validation.required_field"),t=>(0,l.R1)(Ke)(t)||e.$t("elements.form.budget.folder_name.validation.invalid_name")],id:P.folderId,onClose:Y,onSubmit:H},null,8,["header-label","input-value","input-label","cancel-label","submit-label","validation","id"])):(0,s.Q3)("",!0),V.isOpened?((0,s.uX)(),(0,s.Wv)(ni,{key:3,"header-label":e.$t("modals.budget.update_folder_form.header"),"input-value":V.folderName,"input-label":e.$t("elements.form.budget.folder_name.placeholder"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.save.label"),validation:[t=>(0,l.R1)(Ze)(t)||e.$t("elements.form.budget.folder_name.validation.required_field"),t=>(0,l.R1)(Ke)(t)||e.$t("elements.form.budget.folder_name.validation.invalid_name")],id:V.folderId,onClose:G,onSubmit:Z},null,8,["header-label","input-value","input-label","cancel-label","submit-label","validation","id"])):(0,s.Q3)("",!0),ye.isOpened?((0,s.uX)(),(0,s.Wv)(kg,{key:4,"budget-id":ye.budgetId,"period-start":ye.periodStart,"category-id":ye.categoryId,"tag-id":ye.tagId,"envelope-id":ye.envelopeId,"selected-element":ye.selectedElement,"currency-id":ye.currencyId,"current-user-id":ye.currentUserId,onClose:Ce},null,8,["budget-id","period-start","category-id","tag-id","envelope-id","selected-element","currency-id","current-user-id"])):(0,s.Q3)("",!0),te.isOpened?((0,s.uX)(),(0,s.Wv)(Xg,{key:5,id:te.envelopeId,"folder-id":te.folderId,"budget-id":te.budgetId,"budget-currency-id":E.value.meta.currencyId,elements:null===(m=E.value)||void 0===m?void 0:m.structure.elements,access:null===(g=E.value)||void 0===g?void 0:g.meta.access,onClose:ne,onCreate:le},null,8,["id","folder-id","budget-id","budget-currency-id","elements","access"])):(0,s.Q3)("",!0),ce.isOpened?((0,s.uX)(),(0,s.Wv)(ap,{key:6,"budget-id":ce.budgetId,id:ce.envelopeId,name:ce.name,icon:ce.icon,"currency-id":ce.currencyId,"is-archived":ce.isArchived,categories:ce.categories,elements:null===(p=E.value)||void 0===p?void 0:p.structure.elements,access:null===(_=E.value)||void 0===_?void 0:_.meta.access,onClose:re,onSave:ue},null,8,["budget-id","id","name","icon","currency-id","is-archived","categories","elements","access"])):(0,s.Q3)("",!0),me.isOpened?((0,s.uX)(),(0,s.Wv)($o,{key:7,icon:"","question-title":e.$t("modals.budget.delete_envelope.header"),"question-label":e.$t("modals.budget.delete_envelope.question"),"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:pe,onProceed:t[11]||(t[11]=e=>ve({budgetId:me.budgetId,id:me.envelopeId}))},null,8,["question-title","question-label","action-label","cancel-label"])):(0,s.Q3)("",!0),D.isOpened?((0,s.uX)(),(0,s.Wv)(Qd,{key:8,header:D.header,description:D.description,onClose:w},null,8,["header","description"])):(0,s.Q3)("",!0),Le.isOpened?((0,s.uX)(),(0,s.Wv)(dp,{key:9,id:Le.elementId,"currency-id":Le.currencyId,"budget-id":_e.value.id,onClose:Ne,onChangeCurrency:Oe},null,8,["id","currency-id","budget-id"])):(0,s.Q3)("",!0)]))]})),_:1})}}})),wp=Np,Op=wp;z()(Np,"components",{QPage:Cl.A,QBtn:Q.A,QAvatar:ma.A,QMenu:Tl.A,QList:Ja.A,QItem:tn.A,QItemSection:an.A});const Fp={class:"settings-classification-wrapper"},Sp={class:"settings-toolbar-mobile settings-classification-toolbar-mobile"},xp=(0,s.Lk)("div",null,[(0,s.Lk)("h4",{class:"settings-toolbar-mobile-title"},"Create a budget")],-1),Up=(0,s.Lk)("div",{class:"settings-toolbar-mobile-container"},"  ",-1),Rp={class:"settings-toolbar-desktop"},$p={class:"settings-breadcrumbs"},jp={class:"budget-form"},Qp=(0,s.Lk)("h4",{class:"budget-form-header"},"Create a budget",-1),qp=(0,s.pM)(Object.assign({name:"CreateBudgetPage",mixins:[et,No,Te]},{__name:"CreateBudget",setup(e){const t=(0,p.rd)(),a=(0,p.lq)(),o=Lt();(0,s.sV)((()=>{const e=t.currentRoute.value.name;e===g.BUDGET_CREATE?Mt().setWorkspaceActiveArea():e!==g.HOME&&e!==g.BUDGET||Mt().setSidebarActiveArea()})),(0,s.wB)((()=>a),(e=>{e.name===g.BUDGET_CREATE?Mt().setWorkspaceActiveArea():e.name!==g.HOME&&e.name!==g.BUDGET||Mt().setSidebarActiveArea()}),{immediate:!0,deep:!0});const c=(0,l.Kh)({id:null,name:""});function i(e,t,a){o.createBudget({name:t,excludedAccounts:a}).then((e=>{!0!==e.success&&this.openErrorModal($t("pages.budget.modal_create_budget_error.header"),$t("pages.budget.modal_create_budget_error.description",{error:e.messaage}))})).catch((e=>{this.openErrorModal($t("pages.budget.modal_create_budget_error.header"),$t("pages.budget.modal_create_budget_error.description"))}))}function r(){}return(e,t)=>{const a=(0,s.g2)("q-btn"),o=(0,s.g2)("q-form"),d=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(d,{class:"settings-classification"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Fp,[(0,s.Lk)("div",Sp,[(0,s.Lk)("div",null,[(0,s.bF)(a,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo((0,l.R1)(g).HOME,!0))})]),xp,Up]),(0,s.Lk)("div",Rp,[(0,s.Lk)("div",$p,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[1]||(t[1]=t=>e.navigateTo((0,l.R1)(g).HOME,!0))},(0,b.v_)(e.$t("elements.main.budget")),1)])]),(0,s.Lk)("div",jp,[Qp,(0,s.bF)(o,{ref:"budgetForm",onSubmit:(0,n.D$)(i,["prevent"]),onReset:r},{default:(0,s.k6)((()=>[(0,s.bF)(od,{id:c.id,name:c.name,excluded:[]},null,8,["id","name"])])),_:1},512)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"}))])])),_:1})}}})),zp=qp,Pp=zp;z()(qp,"components",{QPage:Cl.A,QBtn:Q.A,QForm:oa.A});const Wp=[];Wp.push({path:"/login",component:Z,children:[{path:"",name:g.LOGIN,component:Sn,meta:{requireAuth:!1}}]}),Wp.push({path:"/register",component:Z,children:[{path:"",name:g.REGISTER,component:ql,meta:{requireAuth:!1}}]}),Wp.push({path:"/logout",name:g.LOGOUT,component:jn,meta:{requireAuth:!1}}),Wp.push({path:"/",component:ln,children:[{path:"",name:g.HOME,component:Op,meta:{requireAuth:!0}},{path:"/account/:id",name:g.ACCOUNT,component:Dl,meta:{requireAuth:!0}}]}),Wp.push({path:"/budget",component:ln,children:[{path:"",name:g.BUDGET,component:Op,meta:{requireAuth:!0}},{path:"/budget/create",name:g.BUDGET_CREATE,component:Pp,meta:{requireAuth:!0}}]});const Yp=[];Yp.push({path:"",name:g.SETTINGS,component:rs,meta:{requireAuth:!0}}),Yp.push({path:"/settings/profile",name:g.SETTINGS_PROFILE,component:Ds,meta:{requireAuth:!0}}),Yp.push({path:"/settings/profile/change-password",name:g.SETTINGS_CHANGE_PASSWORD,component:Ks,meta:{requireAuth:!0}}),Yp.push({path:"/settings/accounts",name:g.SETTINGS_ACCOUNTS,component:Ni,meta:{requireAuth:!0}}),Yp.push({path:"/settings/categories",name:g.SETTINGS_CATEGORIES,component:Or,meta:{requireAuth:!0}}),Yp.push({path:"/settings/payees",name:g.SETTINGS_PAYEES,component:Xr,meta:{requireAuth:!0}}),Yp.push({path:"/settings/tags",name:g.SETTINGS_TAGS,component:_u,meta:{requireAuth:!0}}),Ga.includesConnections&&Yp.push({path:"/settings/connections",name:g.SETTINGS_CONNECTIONS,component:om,meta:{requireAuth:!0}}),Yp.push({path:"/settings/budgets",name:g.SETTINGS_BUDGETS,component:au,meta:{requireAuth:!0}}),Wp.push({path:"/settings",component:ln,children:Yp}),Wp.push({path:"/:catchAll(.*)*",component:()=>a.e(511).then(a.bind(a,9511))});const Bp=Wp,Hp=(0,d.wE)((function({store:e}){const t=p.Bt,a=(0,p.aE)({scrollBehavior:()=>({left:0,top:0}),routes:Bp,history:t("")});return a.beforeEach(((e,t,a)=>{var n;dt(rt.PAGE_VIEW,{from:null!==(n=null===t||void 0===t?void 0:t.name)&&void 0!==n?n:null,to:null===e||void 0===e?void 0:e.name}),e.matched.some((e=>e.meta.requireAuth))&&!Xt().isUserAuthenticated?a({name:"login",query:{next:e.fullPath}}):a()})),a}));async function Vp(e,t){const a=e(r);a.use(o.A,t);const n="function"===typeof m?await m({}):m;a.use(n);const s=(0,l.IG)("function"===typeof Hp?await Hp({store:n}):Hp);return n.use((({store:e})=>{e.router=s})),{app:a,store:n,router:s}}const Xp={config:{}},Gp="";async function Kp({app:e,router:t,store:a},n){let o=!1;const l=e=>{try{return t.resolve(e).href}catch(e){}return Object(e)===e?null:e},s=e=>{if(o=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const t=l(e);null!==t&&(window.location.href=t,window.location.reload())},c=window.location.href.replace(window.location.origin,"");for(let l=0;!1===o&&l<n.length;l++)try{await n[l]({app:e,router:t,store:a,ssrContext:null,redirect:s,urlPath:c,publicPath:Gp})}catch(e){return e&&e.url?void s(e.url):void console.error("[Quasar] boot error:",e)}!0!==o&&(e.use(t),e.mount("#q-app"))}Vp(n.Ef,Xp).then((e=>{const[t,n]=void 0!==Promise.allSettled?["allSettled",e=>e.map((e=>{if("rejected"!==e.status)return e.value.default;console.error("[Quasar] boot error:",e.reason)}))]:["all",e=>e.map((e=>e.default))];return Promise[t]([Promise.resolve().then(a.bind(a,5405)),Promise.resolve().then(a.bind(a,5602)),Promise.resolve().then(a.bind(a,7854))]).then((t=>{const a=n(t).filter((e=>"function"===typeof e));Kp(e,a)}))}))},3445:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,A:()=>u});var n=a(7156),o=a(5210);function l(e){if(void 0===e)return!!(0,n.Gq)("selfHosted");(0,n.SO)("selfHosted",e?"1":"0")}function s(e){if(void 0===e){const e=window.econumoConfig.API_URL?window.econumoConfig.API_URL:window.location;return l()?(0,n.Gq)("backendHost")??e:e}(0,n.SO)("backendHost",e)}function c(){return"https:"===window.location.protocol}function i(e){if(void 0===e)return(0,n.Gq)("locale")?(0,n.Gq)("locale"):o.A.lang.isoName?o.A.lang.isoName?.split("-")[0]:"en";(0,n.SO)("locale",e)}function r(){return[{value:"en",label:"English",short:"Eng"},{value:"ru",label:"",short:""}]}function d(){return"https://econumo.com"}const u={selfHosted:l,backendHost:s,isHttps:c,locale:i,getLocaleOptions:r,getWebsiteUrl:d}},7854:(e,t,a)=>{"use strict";a.r(t),a.d(t,{api:()=>l,default:()=>s});var n=a(1573),o=a(2303);const l=o.A.create({baseURL:"https://api.econumo.com"}),s=(0,n.zj)((({app:e})=>{e.config.globalProperties.$axios=o.A,e.config.globalProperties.$api=l}))},5602:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var n=a(1573),o=a(3537),l=a(3445);const s={blocks:{help:{label:"",url:"https://help.econumo.com/ru/"},website:{label:"Econumo"}},elements:{econumo:{label:"Econumo"},folders:{default_folder:" "},account:{name_hidden:"[]"},main:{budget:"",plan:"",accounts_empty:{create:"",account:" "}},switch_to_account:" ",form:{user:{name:{label:"",placeholder:" ",validation:{required_field:" ",invalid_name:"  "}},email:{label:"E-mail",placeholder:"{'@'}email",validation:{required_field:" ",invalid_email:"  "}},code:{label:"",placeholder:" ",validation:{required_field:" ",invalid_code:"  "}},password:{label:"",placeholder:"",validation:{required_field:" ",invalid_password:"     4 "}},password_retry:{label:" ",placeholder:" ",validation:{required_field:" ",invalid_password:"  ",not_equals:"  "}},server_host:{self_hosted:" ",label:" ",placeholder:"https://",validation:{required_field:" ",invalid_url:"   "}}},account:{folder:{label:" ",validation:{empty_name:"  ",error_name_length:"     3  18 "}},name:{label:" ",placeholder:" ",validation:{required_field:" ",invalid_name:"   3  18 "}},balance:{label:"",placeholder:" ",validation:{required_field:" ",invalid_number:"  "}},currency:{label:""}},category:{type:{income:"",expense:""},name:{label:" ",placeholder:" ",validation:{required_field:" ",invalid_name:"   3  18 "}},icon:{label:" "}},tag:{name:{label:"  ",validation:{required_field:" ",invalid_name:"   3  18 "}}},payee:{name:{label:"",validation:{required_field:" ",invalid_name:"  3  18 "}}},budget:{name:{label:" ",placeholder:" ",validation:{required_field:" ",invalid_name:"    3  18 "}},folder_name:{label:" ",placeholder:"  ",validation:{required_field:" ",invalid_name:"     3  18 "}}},budget_envelope:{name:{label:"Name",placeholder:"",validation:{required_field:"Required field",invalid_name:"Budget name must be from 3 to 18 characters"}},currency:{label:"Currency",validation:{required_field:"Required field"}},categories:{label:"Categories"},icon:{label:"Icon"},status:{label:"Status",option:{active:"Active",archive:"Archived"}}},budget_limit:{limit:{validation:{invalid_number:"Invalid number",invalid_formula:"Invalid formula"}}}},button:{ok:{label:"Ok"},close:{label:""},cancel:{label:""},create:{label:""},add:{label:""},edit:{label:""},set_as_default:{label:" -"},update:{label:""},save:{label:""},replace:{label:""},delete:{label:""},reset:{label:""},copy:{label:""},view:{label:""},up:{label:" "},down:{label:" "},hide:{label:""},show:{label:""},accept:{label:""},transfer:{label:""},expand:{label:""},collapse:{label:""},decline:{label:""}},list:{list_empty:" ",order_list:" "}},pages:{login:{header:"",form:{action:{login:"",forget_password:" ?"}},dialog:{login_failed:{header:"  ",information:"     .      ."},authorization:{label:"..."}},access_recovery:{header:" ",information:"        ,   .",instruction:"        .         .",action:{recover:{label:""},change_password:{label:" "}}}},registration:{header:"",form:{action:{register:" "}},privacy:{text:',    <a href="https://help.econumo.com/privacy/" target="_blank" class=\'register-form-privacy-link\'> </a>'},dialog:{registration_failed:{header:" ",information:"   .      ."},registration:{label:"..."}}},account:{toolbar:{settings:" ",search:"",shared_with:" "},transaction_list:{none:" ",today:"",yesterday:"",item:{transfer_from:"  ",transfer_to:"  "},action:{add_transaction:" "}},preview_transaction_modal:{header:" ",type:{expense:"",income:"",transfer:""},recipient:{label:""},sender:{label:""},category:{label:""},description:{label:""},payee:{label:""},tags:{label:""},author:{label:""},created_at:{label:""}},delete_transaction_modal:{question:"    ?"}},budget:{empty:{header:"Budget",no_budget:"You have not created a budget yet.",description:"Create or share a budget to start managing your finances.",create_budget:"Create a budget"},settings:{button:"Configure",menu:{edit:"Budget details",edit_structure:"Edit structure",edit_structure_done:"Done Editing",budget_list:"Open budget list"}},structure:{no_folder:"Default folder",in_archive:"Archived",tab:{budgeted:"Budget",spent:"Spent",available:"Available"},action:{create_folder:"Create a folder",delete_folder:"Delete a folder"},empty_folder:{note:"Folder is empty. Move a category/tag/envelope or create a new envelope."},element:{action:{change_currency:" "}}}},settings:{settings:{header:"",header_desktop:" ",menu_item:"",logout:"",groups:{service:"",user_interface:""}},sync:{menu_item:" "},accounts:{menu_item:"  ",header:" ",list_empty_create:"",list_empty_new_account:" ",list_actions:{access:" "},create_folder:" ",create_folder_modal:{header:"  "},update_folder_modal:{header:" "},delete_folder_modal:{title:" ?",question:'     "{folder}"?'},delete_account_modal:{question:'     "{account}"?'},preview_account_modal:{header:" ",shared_access:" ",access:{label:"",no_shared_access:"    "},action:{shared_access:" "}}},categories:{menu_item:"",header:"",archived_item:" ()",create_category:" ",income:" ",expense:" ",replace_modal:{header:" ...",note:"       "},delete_modal:{title:" ?",question:"  {name}?"},edit_modal:{header:""},create_modal:{header:" "}},tags:{menu_item:"",header:"",create_tag:" ",archived_item:" ()",edit_modal:{header:" "},create_modal:{header:" "},delete_tag_modal:{title:" ?",question:"     {name}?"}},payees:{menu_item:" (, )",header:"",create_payee:" ",archived_item:" ()",edit_modal:{header:" "},create_modal:{header:" "},delete_modal:{title:" ?",question:"    {name}?"}},budgets:{menu_item:"",header:"",create_budget:"  ",edit_modal:{header:" "},create_modal:{header:"  "},delete_modal:{title:" ?",question:"    {name}?"},decline_access_modal:{title:"  ?",question:" ,       {name}?"},not_accepted:" ",level:{guest:" ",user:" ",admin:" "},list_actions:{access:"Access control",go_to:"Go to the budget",select:"Select the budget"}},currency:{menu_item:" -"},themes:{menu_item:" "},language:{menu_item:" "},profile:{menu_item:"",header:"",groups:{security:""},change_password:{menu_item:" ",header:" "},form:{change_password:{password:{label:" ",placeholder:" ",validation:{invalid_password:"  "}},new_password:{label:" ",placeholder:"  ",validation:{not_equals:"     "}},new_password_retry:{label:"  ",placeholder:"  ",validation:{not_equals:"  "}},submit:{label:" "},success:{text:"  "},error:{header:"  ",text:"    ,       "},loading:{label:", "}}},logout_dialog_modal:{title:"  ",question:"   ?",action:{logout:"",cancel:""}}},connections:{menu_item:" ",header:" ",generate_invite:" ",accept_invite:" ",delete_connection_modal:{question:"       {name}?"},generate_invite_modal:{instruction:"   ,    .     5 .",code:{label:" "}},accept_invite_modal:{label:" ",instruction:"         .     5 .",code:{label:" "}},preview_connection_modal:{accounts:" ",role:{owner:"",admin:" ",user:" ",guest:" "}}}},analytics:{analytics:{header:"",header_desktop:"",menu_item:""}}},modals:{change_language:{header:" "},change_budget:{header:" "},self_hosted:{information:"      .      ."},transaction:{transaction_type:{expense:"",transfer:"",income:""},create_form:{header:" "},update_form:{header:" "},form:{amount:{label:" ",validation:{required_field:" "}},amount_recipient:{label:" ",validation:{required_field:" "}},category:{label:"",validation:{required_field:" "}},payee:{expense:"",income:""},options:{header:" "},description:{label:"",placeholder:" "},from:{label:""},to:{label:""}},dialog:{new_tag:{header:"  :",name:{label:" ",validation:{required_field:" "}}}}},account:{create_form:{header:" "},update_form:{header:" "},form:{icon:{label:" "}}},sort:{header:"",mode:{alphabet:{asc:"  (-)",desc:"  (-)"},count:{desc:"   (1..0)",asc:"   (0..1)"}}},shared_access:{level:{guest:" ",user:" ",admin:" ",owner:"",no_access:" "},not_accepted:"  ",revoke_access:" ",list_empty:" "},loading:{data_loading:" "},budget:{budget_form:{accounts:"Accounts"},create_budget_form:{header:"Create a budget"},update_budget_form:{header:"Update the budget"},create_folder_form:{header:"Create a folder"},update_folder_form:{header:"Rename the folder"},create_envelope_form:{header:"Create an envelope"},update_envelope_form:{header:"Update the envelope"},change_element_currency_form:{header:"Change currency"},delete_envelope:{header:"Delete the envelope?",question:"Are you sure you want to delete this envelope?"},generic_error:{header:"Error Occurred",description:"Please try again. If the error persists, report the issue to econumo@gmail.com"}}}},c={blocks:{help:{label:"Help",url:"https://help.econumo.com/"},website:{label:"Econumo"}},elements:{econumo:{label:"Econumo"},folders:{default_folder:"Accounts"},account:{name_hidden:"[hidden]"},main:{budget:"Budget",plan:"Plan",accounts_empty:{create:"Add",account:"the first account"}},switch_to_account:"Switch to",form:{user:{name:{label:"Name",placeholder:"Your name",validation:{required_field:"Required field",invalid_name:"Enter your name"}},email:{label:"E-mail",placeholder:"your email",validation:{required_field:"Required field",invalid_email:"Enter correct e-mail"}},code:{label:"Code",placeholder:"confirmation code",validation:{required_field:"Required field",invalid_code:"Enter correct code"}},password:{label:"Password",placeholder:"Password",validation:{required_field:"Required field",invalid_password:"Password must be at least 4 characters"}},password_retry:{label:"Confirm password",placeholder:"Enter password",validation:{required_field:"Required field",invalid_password:"Re-enter password",not_equals:"Passwords do not match"}},server_host:{self_hosted:"Custom server",label:"Server address",placeholder:"https://",validation:{required_field:"Required field",invalid_url:"Enter correct server address"}}},account:{folder:{label:"Name",validation:{empty_name:"Enter folder name",error_name_length:"The folder name must be from 3 to 18 characters"}},name:{label:"Name",placeholder:"Enter name",validation:{required_field:"Required field",invalid_name:"The account name must be from 3 to 18 characters"}},balance:{label:"Balance",placeholder:"Enter balance",validation:{required_field:"Required field",invalid_number:"Enter correct number"}},currency:{label:"Currency"}},category:{type:{income:"Income",expense:"Expense"},name:{label:"Name",placeholder:"Enter name",validation:{required_field:"Required field",invalid_name:"The category name can be from 3 to 18 characters"}},icon:{label:"Icon"}},tag:{name:{label:"Name",validation:{required_field:"Required field",invalid_name:"The tag name must be from 3 to 18 characters"}}},payee:{name:{label:"Name",validation:{required_field:"Required field",invalid_name:"Payee name must be from 3 to 18 characters"}}},budget:{name:{label:"Name",placeholder:"My budget",validation:{required_field:"Required field",invalid_name:"Budget name must be from 3 to 18 characters"}},folder_name:{label:"Folder name",placeholder:"Provide a folder name",validation:{required_field:"Required field",invalid_name:"Folder name must be from 3 to 18 characters"}}},budget_envelope:{name:{label:"Name",placeholder:"",validation:{required_field:"Required field",invalid_name:"Budget name must be from 3 to 18 characters"}},currency:{label:"Currency",validation:{required_field:"Required field"}},categories:{label:"Categories"},icon:{label:"Icon"},status:{label:"Status",option:{active:"Active",archive:"Archived"}}},budget_limit:{limit:{validation:{invalid_number:"Invalid number",invalid_formula:"Invalid formula"}}}},button:{ok:{label:"Ok"},close:{label:"Close"},cancel:{label:"Cancel"},create:{label:"Create"},add:{label:"Add"},edit:{label:"Edit"},set_as_default:{label:"Set as a default"},update:{label:"Update"},save:{label:"Save"},replace:{label:"Replace"},delete:{label:"Delete"},reset:{label:"Reset"},copy:{label:"Copy"},view:{label:"View"},up:{label:"Move up"},down:{label:"Move down"},hide:{label:"Hide"},show:{label:"Show"},accept:{label:"Accept"},transfer:{label:"Transfer"},expand:{label:"Expand"},collapse:{label:"Collapse"},decline:{label:"Decline"}},list:{list_empty:"List is empty",order_list:"Reorder list"}},pages:{login:{header:"Login",form:{action:{login:"Sign in",forget_password:"Forgot password?"}},dialog:{login_failed:{header:"Login failed",information:"Check that the email and password are entered correctly. In case of repeated errors, contact support."},authorization:{label:"Authentication..."}},access_recovery:{header:"Restore access",information:"To restore access to your account, enter the email address specified during registration.",instruction:"The security code has been sent to the specified email address. Enter the code in the field below and provide a new password.",action:{recover:{label:"Restore"},change_password:{label:"Change password"}}}},registration:{header:"Sign up",form:{action:{register:"Create account"}},privacy:{text:'By registering, you agree to our <a href="https://help.economy.com/privacy/" target="_blank" class=\'register-form-privacy-link\'>privacy policy</a>'},dialog:{registration_failed:{header:"Registration error",information:"Check that the data is entered correctly. In case of repeated errors, contact support."},registration:{label:"Registration..."}}},account:{toolbar:{settings:"Configure account",search:"Search",shared_with:"Shared account"},transaction_list:{none:"No transactions found",today:"Today",yesterday:"Yesterday",item:{transfer_from:"Transfer from account",transfer_to:"Transfer to account"},action:{add_transaction:"Add transaction"}},preview_transaction_modal:{header:"Details",type:{expense:"Expense",income:"Income",transfer:"Transfer"},recipient:{label:"Recipient"},sender:{label:"Sender"},category:{label:"Category"},description:{label:"Notes"},payee:{label:"Payee"},tags:{label:"Tags"},author:{label:"Author"},created_at:{label:"Date"}},delete_transaction_modal:{question:"Are you sure you want to delete this transaction?"}},budget:{empty:{header:"Budget",no_budget:"You have not created a budget yet.",description:"Create or share a budget to start managing your finances.",create_budget:"Create a budget"},settings:{button:"Configure",menu:{edit:"Budget details",edit_structure:"Edit structure",edit_structure_done:"Done Editing",budget_list:"Open budget list"}},structure:{no_folder:"Default folder",in_archive:"Archived",tab:{budgeted:"Budget",spent:"Spent",available:"Available"},action:{create_folder:"Create a folder",delete_folder:"Delete a folder"},empty_folder:{note:"Folder is empty. Move a category/tag/envelope or create a new envelope."},element:{action:{change_currency:"Change currency"}}}},settings:{settings:{header:"Settings",header_desktop:"Service settings",menu_item:"Settings",logout:"Logout",groups:{service:"Service",user_interface:"User Interface"}},sync:{menu_item:"Full sync"},accounts:{menu_item:"Accounts and folders",header:"Accounts and folders",list_empty_create:"Add",list_empty_new_account:"new account",list_actions:{access:"Access control"},create_folder:"Create folder",create_folder_modal:{header:"Create new folder"},update_folder_modal:{header:"Change name"},delete_folder_modal:{title:"Delete folder?",question:"Do you really want to delete folder {folder}?"},delete_account_modal:{question:"Are you sure you want to remove account {account}?"},preview_account_modal:{header:"Account details",shared_access:"Share",access:{label:"Access",no_shared_access:"Access to this account is not provided"},action:{shared_access:"Access control"}}},categories:{menu_item:"Categories",header:"Categories",archived_item:"Archived (inactive)",create_category:"Create category",income:"Income categories",expense:"Expenses categories",replace_modal:{header:"Replace with",note:"Original category will be deleted and replaced with the selected one"},delete_modal:{title:"Delete category?",question:"Delete category {name}?"},edit_modal:{header:"Edit"},create_modal:{header:"New category"}},tags:{menu_item:"Tags",header:"Tags",create_tag:"Create a new tag",archived_item:"Archived (inactive)",edit_modal:{header:"Edit tag"},create_modal:{header:"Create a new tag"},delete_tag_modal:{title:"Delete tag?",question:"Are you sure you want to delete tag {name}?"}},payees:{menu_item:"Payees (senders, recipients)",header:"Payees",create_payee:"Create a new payee",archived_item:"Archived (inactive)",edit_modal:{header:"Update payee"},create_modal:{header:"Create a new payee"},delete_modal:{title:"Delete payee?",question:"Are you sure you want to delete {name}?"}},budgets:{menu_item:"Budgets",header:"Budgets",create_budget:"Create a new budget",edit_modal:{header:"Update the budget"},create_modal:{header:"Create a new budget"},delete_modal:{title:"Delete the budget?",question:"Are you sure you want to delete {name}?"},decline_access_modal:{title:"Decline access to the budget?",question:"Are you sure you want to decline access to the budget {name}?"},not_accepted:"not accepted",level:{guest:"View only",user:"Regular access",admin:"Full control"},list_actions:{access:"Access control",go_to:"Go to the budget",select:"Select the budget"}},currency:{menu_item:"Currency"},themes:{menu_item:"Color scheme"},language:{menu_item:"Language"},profile:{menu_item:"Profile",header:"User profile",groups:{security:"Security"},change_password:{menu_item:"Change password",header:"Change password"},form:{change_password:{password:{label:"Current password",placeholder:"Enter password",validation:{invalid_password:"Enter current password"}},new_password:{label:"New password",placeholder:"Enter a new password",validation:{not_equals:"New password must be different than the old password"}},new_password_retry:{label:"Confirm new password",placeholder:"Enter a new password",validation:{not_equals:"Passwords do not match"}},submit:{label:"Change password"},success:{text:"You have successfully changed your password"},error:{header:"Change password error",text:"An error occurred when changing the password, check the correctness of the data or repeat the request later"},loading:{label:"Please wait"}}},logout_dialog_modal:{title:"Logout",question:"Are you sure you want to log out?",action:{logout:"Logout",cancel:"Stay"}}},connections:{menu_item:"Shared access",header:"Shared access",generate_invite:"Create an invitation",accept_invite:"Accept an invitation",delete_connection_modal:{question:"Are you sure you want to delete shared access from {name}?"},generate_invite_modal:{instruction:"To create a shared access, provide this code to your partner. The code is valid for 5 minutes",code:{label:"Invitation code"}},accept_invite_modal:{label:"Accept an invitation",instruction:"Ask your partner to tell you an invitation code and enter it below. The code is valid for 5 minutes.",code:{label:"Enter the code"}},preview_connection_modal:{accounts:"Shared accounts",role:{owner:"Owner",admin:"Full control",user:"Add transactions",guest:"View only"}}}},analytics:{analytics:{header:"Analytics",header_desktop:"Analytics",menu_item:"Analytics"}}},modals:{change_language:{header:"Language"},change_budget:{header:"Select a budget"},self_hosted:{information:"You can use the service on your hosting. Just enter the server address."},transaction:{transaction_type:{expense:"Expense",transfer:"Transfer",income:"Income"},create_form:{header:"Add transaction"},update_form:{header:"Update transaction"},form:{amount:{label:"Enter amount",validation:{required_field:"Amount is required"}},amount_recipient:{label:"Will be exchanged",validation:{required_field:"Recipient amount is required"}},category:{label:"Category",validation:{required_field:"Category is required"}},payee:{expense:"Recipient",income:"Sender"},options:{header:"Advanced"},description:{label:"Notes",placeholder:"Enter notes"},from:{label:"From"},to:{label:"To"}},dialog:{new_tag:{header:"Tag name is required",name:{label:"Tag",validation:{required_field:"Required field"}}}}},account:{create_form:{header:"New account"},update_form:{header:"Update account"},form:{icon:{label:"Icon"}}},sort:{header:"Sorting",mode:{alphabet:{asc:"Alphabetically (A-Z)",desc:"Alphabetically (Z-A)"},count:{desc:"By usage frequency (1..0)",asc:"By usage frequency (0..1)"}}},shared_access:{level:{guest:"View only",user:"Regular access",admin:"Full control",owner:"Owner",no_access:"No access"},not_accepted:"not accepted",revoke_access:"Revoke access",list_empty:"No connections found"},loading:{data_loading:"Loading details"},budget:{budget_form:{accounts:"Accounts"},create_budget_form:{header:"Create a budget"},update_budget_form:{header:"Update the budget"},create_folder_form:{header:"Create a folder"},update_folder_form:{header:"Rename the folder"},create_envelope_form:{header:"Create an envelope"},update_envelope_form:{header:"Update the envelope"},change_element_currency_form:{header:"Change currency"},delete_envelope:{header:"Delete the envelope?",question:"Are you sure you want to delete this envelope?"},generic_error:{header:"Error Occurred",description:"Please try again. If the error persists, report the issue to econumo@gmail.com"}}}},i={en:c,ru:s},r=(0,n.zj)((({app:e})=>{const t=(0,o.hU)({locale:l.A.locale(),legacy:!1,messages:i});e.use(t)}))},5405:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(587),o=a(1573);const l=(0,o.zj)((({app:e})=>{e.use((0,n.Ey)())}))},6671:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function sanitizeInput(e){e=e.toString(),e=e.replace(/[^0-9+\-*/=.,]/g,""),e=e.replace(/,/g,"."),e=e.replace(/(?<!\d)[\+\*\/\.]{2,}/g,"");const t=e.split(/([+\-*/])/),a=t.map((e=>e.includes(".")?e:e.replace(/\b0+(\d+)/g,"$1")));return a.join("")}function validateFormula(formula){if(formula=formula.toString(),""===formula)return!0;try{if(formula&&"="!==formula){const result=eval(formula.replace("=",""));if(isNaN(result))return!1}return!0}catch(e){return!1}}function evaluateFormula(value){if(value=value.toString(),value.includes("="))try{const valueWithoutEqual=value.replace("=",""),result=eval(valueWithoutEqual);return isNaN(result)?value.replace("=",""):roundToPrecision(result,10).toString()}catch(e){return value.replace("=","")}return value}function roundToPrecision(e,t){const a=Math.pow(10,t);return Math.round(e*a)/a}__webpack_require__.d(__webpack_exports__,{NF:()=>validateFormula,o2:()=>sanitizeInput,w9:()=>evaluateFormula})},7156:(e,t,a)=>{"use strict";a.d(t,{Ai:()=>g,Gq:()=>u,SO:()=>m,WG:()=>r,cY:()=>n,eF:()=>d,gf:()=>i,y0:()=>c});var n,o=a(4885),l=a(354),s=a(3445);(function(e){e["ACCOUNTS"]="store/accounts/accounts",e["ACCOUNTS_LOADED_AT"]="store/accounts/accounts_loaded_at",e["ACCOUNT_FOLDERS"]="store/account_folders/account_folders",e["ACCOUNT_FOLDERS_LOADED_AT"]="store/account_folders/account_folders_loaded_at",e["ACCOUNT_FOLDERS_OPENED"]="store/account_folders/account_folders_opened",e["BUDGET"]="store/budgets/budget",e["BUDGET_META"]="store/budgets/budget_meta",e["BUDGET_CURRENCIES"]="store/budgets/budget_currencies",e["BUDGET_LOADED_AT"]="store/budgets/budget_loaded_at",e["BUDGET_SELECTED_DATE"]="store/budgets/budget_selected_date",e["BUDGET_FOLDED_FOLDERS"]="store/budgets/budget_folded_folders",e["BUDGET_UNFOLDED_ELEMENTS"]="store/budgets/budget_unfolded_elements",e["BUDGETS"]="store/budgets/budgets",e["BUDGETS_LOADED_AT"]="store/budgets/budgets_loaded_at",e["CATEGORIES"]="store/categories/categories",e["CATEGORIES_LOADED_AT"]="store/categories/categories_loaded_at",e["CONNECTIONS"]="store/connections/connections",e["CONNECTIONS_LOADED_AT"]="store/connections/connections_loaded_at",e["CURRENCIES"]="store/currencies/currencies",e["CURRENCIES_LOADED_AT"]="store/currencies/currencies_loaded_at",e["CURRENCY_RATES"]="store/currency_rates/currency_rates",e["CURRENCY_RATES_LOADED_AT"]="store/currency_rates/currency_rates_loaded_at",e["PAYEES"]="store/payees/payees",e["PAYEES_LOADED_AT"]="store/payees/payees_loaded_at",e["TAGS"]="store/tags/tags",e["TAGS_LOADED_AT"]="store/tags/tags_loaded_at",e["TRANSACTIONS"]="store/transactions/transactions",e["TRANSACTIONS_LOADED_AT"]="store/transactions/transactions_loaded_at",e["USER_DATA"]="store/users/user_data",e["USER_DATA_LOADED_AT"]="store/users/user_data_loaded_at"})(n||(n={}));const c=function(){return!!o.A.get("token")},i=function(){return o.A.get("token")||null},r=function(e){const t=(0,l.A)(e);let a=30;t.exp&&(a=(t.exp-Math.floor(Date.now()/1e3))/60/60/24),o.A.set("token",e,{expires:a,secure:s.A.isHttps()})},d=function(){o.A.remove("token")};function u(e){const t=localStorage.getItem(e);if(void 0!==t&&null!==t)try{return JSON.parse(t)}catch(e){return null}return t}function m(e,t){localStorage.setItem(e,JSON.stringify(t))}function g(e){localStorage.removeItem(e)}},8099:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTExIDVIOVY5SDVWMTFIOVYxNUgxMVYxMUgxNVY5SDExVjVaTTEwIDBDNC40OCAwIDAgNC40OCAwIDEwQzAgMTUuNTIgNC40OCAyMCAxMCAyMEMxNS41MiAyMCAyMCAxNS41MiAyMCAxMEMyMCA0LjQ4IDE1LjUyIDAgMTAgMFpNMTAgMThDNS41OSAxOCAyIDE0LjQxIDIgMTBDMiA1LjU5IDUuNTkgMiAxMCAyQzE0LjQxIDIgMTggNS41OSAxOCAxMEMxOCAxNC40MSAxNC40MSAxOCAxMCAxOFoiIGZpbGw9IiM2NjY2NjYiLz4KPC9zdmc+Cg=="},1459:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTYgMTEuMDY2N0w5LjA2NjY3IDhMNiA0LjkzMzMzTDYuOTMzMzMgNEwxMC45MzMzIDhMNi45MzMzMyAxMkw2IDExLjA2NjdaIiBmaWxsPSIjNjY2NjY2Ii8+Cjwvc3ZnPgo="},6843:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI1IiBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgMTI1IDIwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNjAxXzExNzg4KSI+CjxwYXRoIGQ9Ik04My41MTkgMy45MDIyNkM4MC4xNTU2IDMuOTAyMjYgNzkuNzk5MSA1LjA4OTM1IDc5LjQxIDUuNjExMDFDNzguNjM5OCA0LjUzNDgzIDc3LjQyMyAzLjkwMjI2IDc1Ljk4NTEgMy45MDIyNkM3NC41MTAyIDMuOTAyMjYgNzMuNTYzOSAzLjk4MDMgNzIuNzIgNC45NzAyM1Y0LjE3MzM2SDY5Ljk1MDZWMTUuOTMzNEg3Mi43MlY4LjcyNDU2QzcyLjcyIDcuMjkxMDEgNzMuNzg1MSA2LjI2ODIyIDc1LjI4NDUgNi4yNjgyMkM3Ni42NDQ3IDYuMjY4MjIgNzcuNTc0NiA3LjM2MDg0IDc3LjU3NDYgOC45MDUyOVYxNS45MzM0SDgwLjI3NDRWOC43MjQ1NkM4MC4yNzQ0IDcuMjkxMDEgODEuMzE5IDYuMjY4MjIgODIuODM4OSA2LjI2ODIyQzg0LjE3ODYgNi4yNjgyMiA4NS4xMDg1IDcuMzYwODQgODUuMTA4NSA4LjkwNTI5VjE1LjkzMzRIODcuODA4M1Y4LjQ0OTM1Qzg3LjgwODMgNS43ODc2NCA4NS45NzI5IDMuODk4MTUgODMuNTIzMSAzLjg5ODE1TDgzLjUxOSAzLjkwMjI2Wk03Ljk3OTE1IDEzLjc1MjJDNi43NDE5MyAxMy43NTIyIDUuODQwNjUgMTMuMTg5NSA1LjI3NTMgMTIuMzc2MkwxMS40NDA5IDkuOTY5MTZMMTMuNDU2NSA5LjIwMTA0QzEzLjEzNjkgNS45MDI2NSAxMC42NzQ4IDMuOTAyMjYgNy44Mzk4NiAzLjkwMjI2QzQuNTA1MTEgMy45MDIyNiAxLjg3NSA2LjQ5NDE0IDEuODc1IDEwLjAyMjZDMS44NzUgMTMuNjM3MiA0LjY0NDQgMTYuMjA4NiA3Ljk5OTYzIDE2LjIwODZDOS42OTk3OCAxNi4yMDg2IDExLjc0NDEgMTUuNDgxNSAxMi43NjQxIDE0LjM4ODlMMTEuMDE4OSAxMi41NjkzQzEwLjM1OTQgMTMuMjUxMSA5LjA2ODg4IDEzLjc1MjIgNy45NzkxNSAxMy43NTIyVjEzLjc1MjJaTTQuNTc4ODUgMTAuMjUyNkM0LjQ3NjQzIDguMzQyNTUgNS41OTA3NSA2LjM1ODU5IDcuOTU0NTcgNi4zNTg1OUM5LjE3NTQgNi4zNTg1OSAxMC4wNTYyIDYuOTM3NzYgMTAuNjMzOCA3Ljc5MjE0TDQuNTc4ODUgMTAuMjQ4NVYxMC4yNTI2Wk0yMS42MzM2IDE2LjIwODZDMjMuNDkzNSAxNi4yMDg2IDI1LjA1ODUgMTUuNDM2MyAyNi4xOTMzIDE0LjIyODdMMjQuMzMzMyAxMi42MTQ0QzIzLjY3MzggMTMuMzY2MSAyMi42NzgzIDEzLjg0MjYgMjEuNjU4MiAxMy44NDI2QzE5LjcyODYgMTMuODQyNiAxOC4xMTg2IDEyLjExMzMgMTguMTE4NiAxMC4wNDMxQzE4LjExODYgNy45OTc1MiAxOS43Mjg2IDYuMjY4MjIgMjEuNjU4MiA2LjI2ODIyQzIyLjY1NzggNi4yNjgyMiAyMy42MzI4IDYuNzQ0NyAyNC4yNjc4IDcuNDUxMjFMMjYuMTI3NyA1LjgxMjI4QzI1LjAxNzUgNC42NTM5NSAyMy40NTI1IDMuOTAyMjYgMjEuNjgyOCAzLjkwMjI2QzE4LjI1NzkgMy45MDIyNiAxNS4zNzc5IDYuNjk5NTIgMTUuMzc3OSAxMC4wNDMxQzE1LjM3NzkgMTMuMzg2NyAxOC4yNTc5IDE2LjIwODYgMjEuNjM3NyAxNi4yMDg2SDIxLjYzMzZaTTMzLjc5MjcgMTYuMjA4NkMzNy4xOTcxIDE2LjIwODYgNDAuMDc3MSAxMy4zODY3IDQwLjA3NzEgMTAuMDQzMUM0MC4wNzcxIDYuNjk5NTIgMzcuMTk3MSAzLjkwMjI2IDMzLjc5MjcgMy45MDIyNkMzMC4zODgzIDMuOTAyMjYgMjcuNTA4MyA2LjY5OTUyIDI3LjUwODMgMTAuMDQzMUMyNy41MDgzIDEzLjM4NjcgMzAuMzg4MyAxNi4yMDg2IDMzLjc5MjcgMTYuMjA4NlpNMzMuNzkyNyAxMy44NDI2QzMxLjg0MjcgMTMuODQyNiAzMC4yMDgxIDEyLjExMzMgMzAuMjA4MSAxMC4wNDMxQzMwLjIwODEgNy45OTc1MiAzMS44NDI3IDYuMjY4MjIgMzMuNzkyNyA2LjI2ODIyQzM1LjcyMjMgNi4yNjgyMiAzNy4zNTI4IDcuOTk3NTIgMzcuMzUyOCAxMC4wNDMxQzM3LjM1MjggMTIuMTEzMyAzNS43MTgyIDEzLjg0MjYgMzMuNzkyNyAxMy44NDI2Wk00OC44NzY5IDMuOTAyMjZDNDcuMzMyNSAzLjkwMjI2IDQ2LjE5MzYgNC4wOTUzMSA0NS4yNDcyIDUuMDQwMDZWNC4xNzMzNkg0Mi40Nzc4VjE1LjkzMzRINDUuMjQ3MlY4LjQ5NDUzQzQ1LjQyNzUgNy4yNDE3MiA0Ni42MzE5IDYuMjY0MTIgNDguMDgyMiA2LjI2NDEyQzQ5LjUzMjQgNi4yNjQxMiA1MC41NTY2IDcuNDAxOTIgNTAuNTU2NiA4Ljk5MTU1VjE1LjkyOTNINTMuMjMxOFY4LjQ0NTI0QzUzLjIzMTggNS43ODM1MyA1MS40NDE1IDMuODk0MDQgNDguODc2OSAzLjg5NDA0VjMuOTAyMjZaTTY0LjE2NiA0LjE3NzQ3VjExLjYxNjNDNjMuOTg1NyAxMi44NjUgNjIuNzgxMyAxMy44NDY3IDYxLjMzMSAxMy44NDY3QzU5Ljg4MDggMTMuODQ2NyA1OC44NTY2IDEyLjcwODkgNTguODU2NiAxMS4xMTkzVjQuMTgxNTdINTYuMTgxNFYxMS42NjU2QzU2LjE4MTQgMTQuMzI3MyA1Ny45NzE3IDE2LjIxNjggNjAuNTM2MyAxNi4yMTY4QzYyLjA4MDcgMTYuMjE2OCA2My4zNTA3IDE1LjkyMSA2NC4xNjYgMTUuMDQyVjE1Ljk0MTZINjYuOTM1NFY0LjE4MTU3SDY0LjE2NlY0LjE3NzQ3WiIgZmlsbD0iIzY2NjY2NiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExNi44MTMgMy43NTA0QzExNS4xMzQgMy43NTA0IDExMy42MTQgNC40MTU4MyAxMTIuNDkxIDUuNDk2MTJDMTEyLjk4MyA2LjEzNjkxIDExMy4zNzIgNi44NjM5NSAxMTMuNjM0IDcuNjQ0MzlDMTE0LjM1NSA2LjY2Njc5IDExNS41MTEgNi4wMzQyMiAxMTYuODEzIDYuMDM0MjJDMTE4Ljk5NyA2LjAzNDIyIDEyMC43NjcgNy44MDg2OSAxMjAuNzY3IDkuOTk4MDNDMTIwLjc2NyAxMi4xODc0IDExOC45OTcgMTMuOTYxOSAxMTYuODEzIDEzLjk2MTlDMTE1LjUxMSAxMy45NjE5IDExNC4zNTEgMTMuMzI5MyAxMTMuNjM0IDEyLjM1MTdDMTEzLjM3MiAxMy4xMzYyIDExMi45ODMgMTMuODU5MiAxMTIuNDkxIDE0LjQ5OTlDMTEzLjYxNCAxNS41ODAyIDExNS4xMzQgMTYuMjQ1NyAxMTYuODEzIDE2LjI0NTdDMTIwLjI1NSAxNi4yNDU3IDEyMy4wNDkgMTMuNDQ4NCAxMjMuMDQ5IDkuOTkzOTNDMTIzLjA0OSA2LjU0MzU2IDEyMC4yNTkgMy43NDIxOSAxMTYuODEzIDMuNzQyMTlWMy43NTA0Wk05Ni40NDAzIDMuNzUwNEM5Mi45OTkxIDMuNzUwNCA5MC4yMDUxIDYuNTQ3NjcgOTAuMjA1MSAxMC4wMDIxQzkwLjIwNTEgMTMuNDUyNSA5Mi45OTUgMTYuMjUzOSA5Ni40NDAzIDE2LjI1MzlDOTkuODgxNiAxNi4yNTM5IDEwMi42NzYgMTMuNDU2NiAxMDIuNjc2IDEwLjAwMjFDMTAyLjY3NiA2LjU1MTc3IDk5Ljg4NTcgMy43NTA0IDk2LjQ0MDMgMy43NTA0Wk05Ni40NDAzIDYuMDM4MzNDOTQuMjU2OCA2LjAzODMzIDkyLjQ4NyA3LjgxMjggOTIuNDg3IDEwLjAwMjFDOTIuNDg3IDEyLjE5MTUgOTQuMjU2OCAxMy45NjYgOTYuNDQwMyAxMy45NjZDOTguNjIzOSAxMy45NjYgMTAwLjM5NCAxMi4xOTE1IDEwMC4zOTQgMTAuMDAyMUMxMDAuMzk0IDcuODEyOCA5OC42MjM5IDYuMDM4MzMgOTYuNDQwMyA2LjAzODMzWk0xMDYuNjI1IDMuNzUwNEMxMDQuOTQ1IDMuNzUwNCAxMDMuNDI1IDQuNDE1ODMgMTAyLjMwMyA1LjQ5NjEyQzEwMi43OTQgNi4xMzY5MSAxMDMuMTg0IDYuODYzOTUgMTAzLjQ0NiA3LjY0NDM5QzEwNC4xNjcgNi42NjY3OSAxMDUuMzIyIDYuMDM0MjIgMTA2LjYyNSA2LjAzNDIyQzEwOC44MDggNi4wMzQyMiAxMTAuNTc4IDcuODA4NjkgMTEwLjU3OCA5Ljk5ODAzQzExMC41NzggMTIuMTg3NCAxMDguODA4IDEzLjk2MTkgMTA2LjYyNSAxMy45NjE5QzEwNS4zMjIgMTMuOTYxOSAxMDQuMTYzIDEzLjMyOTMgMTAzLjQ0NiAxMi4zNTE3QzEwMy4xODQgMTMuMTM2MiAxMDIuNzk0IDEzLjg1OTIgMTAyLjMwMyAxNC40OTk5QzEwMy40MjUgMTUuNTgwMiAxMDQuOTQ1IDE2LjI0NTcgMTA2LjYyNSAxNi4yNDU3QzExMC4wNjYgMTYuMjQ1NyAxMTIuODYgMTMuNDQ4NCAxMTIuODYgOS45OTM5M0MxMTIuODYgNi41NDM1NiAxMTAuMDcgMy43NDIxOSAxMDYuNjI1IDMuNzQyMTlWMy43NTA0WiIgZmlsbD0iI0IxQjFCMSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzYwMV8xMTc4OCI+CjxyZWN0IHdpZHRoPSIxMjEuMTczIiBoZWlnaHQ9IjEyLjUiIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg3NSAzLjc1KSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="},2713:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTk0IiBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgMTk0IDIwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxwYXRoCiAgICBkPSJNMTMwLjYzIDAuMjQzODU3QzEyNS4yNDkgMC4yNDM4NTcgMTI0LjY3OSAyLjE0MzIgMTI0LjA1NiAyLjk3Nzg2QzEyMi44MjQgMS4yNTU5NyAxMjAuODc3IDAuMjQzODU3IDExOC41NzYgMC4yNDM4NTdDMTE2LjIxNiAwLjI0Mzg1NyAxMTQuNzAyIDAuMzY4NzI4IDExMy4zNTIgMS45NTI2MVYwLjY3NzYxOEgxMDguOTIxVjE5LjQ5MzZIMTEzLjM1MlY3Ljk1OTU0QzExMy4zNTIgNS42NjU4NiAxMTUuMDU2IDQuMDI5NCAxMTcuNDU1IDQuMDI5NEMxMTkuNjMxIDQuMDI5NCAxMjEuMTE5IDUuNzc3NTkgMTIxLjExOSA4LjI0ODcxVjE5LjQ5MzZIMTI1LjQzOVY3Ljk1OTU0QzEyNS40MzkgNS42NjU4NiAxMjcuMTEgNC4wMjk0IDEyOS41NDIgNC4wMjk0QzEzMS42ODYgNC4wMjk0IDEzMy4xNzQgNS43Nzc1OSAxMzMuMTc0IDguMjQ4NzFWMTkuNDkzNkgxMzcuNDkzVjcuNTE5MkMxMzcuNDkzIDMuMjYwNDYgMTM0LjU1NyAwLjIzNzI4NSAxMzAuNjM3IDAuMjM3Mjg1TDEzMC42MyAwLjI0Mzg1N1pNOS43NjY2MyAxNi4wMDM4QzcuNzg3MDkgMTYuMDAzOCA2LjM0NTA0IDE1LjEwMzQgNS40NDA0NyAxMy44MDIyTDE1LjMwNTQgOS45NTA4OUwxOC41MzA0IDguNzIxOUMxOC4wMTkxIDMuNDQ0NDggMTQuMDc5NyAwLjI0Mzg1NyA5LjU0Mzc3IDAuMjQzODU3QzQuMjA4MTcgMC4yNDM4NTcgMCA0LjM5MDg3IDAgMTAuMDM2M0MwIDE1LjgxOTggNC40MzEwNCAxOS45MzQgOS43OTk0MSAxOS45MzRDMTIuNTE5NiAxOS45MzQgMTUuNzkwNSAxOC43NzA3IDE3LjQyMjYgMTcuMDIyNUwxNC42MzAzIDE0LjExMTFDMTMuNTc1IDE1LjIwMiAxMS41MTAyIDE2LjAwMzggOS43NjY2MyAxNi4wMDM4Wk00LjMyNjE2IDEwLjQwNDRDNC4xNjIyOSA3LjM0ODMzIDUuOTQ1MTkgNC4xNzM5OSA5LjcyNzMxIDQuMTczOTlDMTEuNjgwNiA0LjE3Mzk5IDEzLjA4OTkgNS4xMDA2NiAxNC4wMTQxIDYuNDY3NjZMNC4zMjYxNiAxMC4zOTc4VjEwLjQwNDRaTTMxLjYxMzcgMTkuOTM0QzM0LjU4OTYgMTkuOTM0IDM3LjA5MzUgMTguNjk4NCAzOC45MDkyIDE2Ljc2NjJMMzUuOTMzMyAxNC4xODMzQzM0Ljg3OCAxNS4zODYgMzMuMjg1MiAxNi4xNDg0IDMxLjY1MzEgMTYuMTQ4NEMyOC41NjU4IDE2LjE0ODQgMjUuOTg5NyAxMy4zODE1IDI1Ljk4OTcgMTAuMDY5MkMyNS45ODk3IDYuNzk2MjcgMjguNTY1OCA0LjAyOTQgMzEuNjUzMSA0LjAyOTRDMzMuMjUyNCA0LjAyOTQgMzQuODEyNSA0Ljc5MTc3IDM1LjgyODUgNS45MjIxOEwzOC44MDQzIDMuMjk5OUMzNy4wMjggMS40NDY1NiAzNC41MjQxIDAuMjQzODU3IDMxLjY5MjQgMC4yNDM4NTdDMjYuMjEyNiAwLjI0Mzg1NyAyMS42MDQ2IDQuNzE5NDggMjEuNjA0NiAxMC4wNjkyQzIxLjYwNDYgMTUuNDE4OSAyNi4yMTI2IDE5LjkzNCAzMS42MjAzIDE5LjkzNEgzMS42MTM3Wk01MS4wNjg0IDE5LjkzNEM1Ni41MTU0IDE5LjkzNCA2MS4xMjM0IDE1LjQxODkgNjEuMTIzNCAxMC4wNjkyQzYxLjEyMzQgNC43MTk0OCA1Ni41MTU0IDAuMjQzODU3IDUxLjA2ODQgMC4yNDM4NTdDNDUuNjIxMyAwLjI0Mzg1NyA0MS4wMTMzIDQuNzE5NDggNDEuMDEzMyAxMC4wNjkyQzQxLjAxMzMgMTUuNDE4OSA0NS42MjEzIDE5LjkzNCA1MS4wNjg0IDE5LjkzNFpNNTEuMDY4NCAxNi4xNDg0QzQ3Ljk0ODMgMTYuMTQ4NCA0NS4zMzI5IDEzLjM4MTUgNDUuMzMyOSAxMC4wNjkyQzQ1LjMzMjkgNi43OTYyNyA0Ny45NDgzIDQuMDI5NCA1MS4wNjg0IDQuMDI5NEM1NC4xNTU3IDQuMDI5NCA1Ni43NjQ1IDYuNzk2MjcgNTYuNzY0NSAxMC4wNjkyQzU2Ljc2NDUgMTMuMzgxNSA1NC4xNDkxIDE2LjE0ODQgNTEuMDY4NCAxNi4xNDg0Wk03NS4yMDMxIDAuMjQzODU3QzcyLjczMTkgMC4yNDM4NTcgNzAuOTA5NyAwLjU1Mjc0NyA2OS4zOTU1IDIuMDY0MzRWMC42Nzc2MThINjQuOTY0NVYxOS40OTM2SDY5LjM5NTVWNy41OTE1QzY5LjY4NCA1LjU4NyA3MS42MTExIDQuMDIyODMgNzMuOTMxNSA0LjAyMjgzQzc2LjI1MTkgNC4wMjI4MyA3Ny44OTA1IDUuODQzMzEgNzcuODkwNSA4LjM4NjczVjE5LjQ4NzFIODIuMTcwOFY3LjUxMjYzQzgyLjE3MDggMy4yNTM4OSA3OS4zMDY0IDAuMjMwNzEzIDc1LjIwMzEgMC4yMzA3MTNWMC4yNDM4NTdaTTk5LjY2NTYgMC42ODQxOVYxMi41ODYzQzk5LjM3NzIgMTQuNTg0MiA5Ny40NSAxNi4xNTUgOTUuMTI5NiAxNi4xNTVDOTIuODA5MiAxNi4xNTUgOTEuMTcwNSAxNC4zMzQ1IDkxLjE3MDUgMTEuNzkxMVYwLjY5MDc2Mkg4Ni44OTAzVjEyLjY2NTJDODYuODkwMyAxNi45MjM5IDg5Ljc1NDcgMTkuOTQ3MSA5My44NTggMTkuOTQ3MUM5Ni4zMjkyIDE5Ljk0NzEgOTguMzYxMiAxOS40NzM5IDk5LjY2NTYgMTguMDY3NVYxOS41MDY4SDEwNC4wOTdWMC42OTA3NjJIOTkuNjY1NlYwLjY4NDE5WiIKICAgIGZpbGw9IiMzMzMzMzMiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIKICAgICAgICBkPSJNMTgzLjkwMSAwLjAwMDUwOTk4M0MxODEuMjE0IDAuMDAwNTA5OTgzIDE3OC43ODIgMS4wNjUxOSAxNzYuOTg2IDIuNzkzNjdDMTc3Ljc3MiAzLjgxODkyIDE3OC4zOTUgNC45ODIxOCAxNzguODE1IDYuMjMwODlDMTc5Ljk2OCA0LjY2NjcyIDE4MS44MTcgMy42NTQ2MSAxODMuOTAxIDMuNjU0NjFDMTg3LjM5NSAzLjY1NDYxIDE5MC4yMjcgNi40OTM3NyAxOTAuMjI3IDkuOTk2NzJDMTkwLjIyNyAxMy40OTk3IDE4Ny4zOTUgMTYuMzM4OCAxODMuOTAxIDE2LjMzODhDMTgxLjgxNyAxNi4zMzg4IDE3OS45NjIgMTUuMzI2NyAxNzguODE1IDEzLjc2MjZDMTc4LjM5NSAxNS4wMTc4IDE3Ny43NzIgMTYuMTc0NSAxNzYuOTg2IDE3LjE5OThDMTc4Ljc4MiAxOC45MjgyIDE4MS4yMTQgMTkuOTkyOSAxODMuOTAxIDE5Ljk5MjlDMTg5LjQwNyAxOS45OTI5IDE5My44NzggMTUuNTE3MyAxOTMuODc4IDkuOTkwMTVDMTkzLjg3OCA0LjQ2OTU2IDE4OS40MTQgLTAuMDEyNjM0MyAxODMuOTAxIC0wLjAxMjYzNDNWMC4wMDA1MDk5ODNaTTE1MS4zMDQgMC4wMDA1MDk5ODNDMTQ1Ljc5OCAwLjAwMDUwOTk4MyAxNDEuMzI4IDQuNDc2MTMgMTQxLjMyOCAxMC4wMDMzQzE0MS4zMjggMTUuNTIzOSAxNDUuNzkyIDIwLjAwNjEgMTUxLjMwNCAyMC4wMDYxQzE1Ni44MSAyMC4wMDYxIDE2MS4yODEgMTUuNTMwNSAxNjEuMjgxIDEwLjAwMzNDMTYxLjI4MSA0LjQ4MjcgMTU2LjgxNyAwLjAwMDUwOTk4MyAxNTEuMzA0IDAuMDAwNTA5OTgzWk0xNTEuMzA0IDMuNjYxMTlDMTQ3LjgxMSAzLjY2MTE5IDE0NC45NzkgNi41MDAzNSAxNDQuOTc5IDEwLjAwMzNDMTQ0Ljk3OSAxMy41MDYyIDE0Ny44MTEgMTYuMzQ1NCAxNTEuMzA0IDE2LjM0NTRDMTU0Ljc5OCAxNi4zNDU0IDE1Ny42MyAxMy41MDYyIDE1Ny42MyAxMC4wMDMzQzE1Ny42MyA2LjUwMDM1IDE1NC43OTggMy42NjExOSAxNTEuMzA0IDMuNjYxMTlaTTE2Ny41OTkgMC4wMDA1MDk5ODNDMTY0LjkxMiAwLjAwMDUwOTk4MyAxNjIuNDggMS4wNjUxOSAxNjAuNjg0IDIuNzkzNjdDMTYxLjQ3MSAzLjgxODkyIDE2Mi4wOTMgNC45ODIxOCAxNjIuNTEzIDYuMjMwODlDMTYzLjY2NyA0LjY2NjcyIDE2NS41MTUgMy42NTQ2MSAxNjcuNTk5IDMuNjU0NjFDMTcxLjA5MyAzLjY1NDYxIDE3My45MjUgNi40OTM3NyAxNzMuOTI1IDkuOTk2NzJDMTczLjkyNSAxMy40OTk3IDE3MS4wOTMgMTYuMzM4OCAxNjcuNTk5IDE2LjMzODhDMTY1LjUxNSAxNi4zMzg4IDE2My42NiAxNS4zMjY3IDE2Mi41MTMgMTMuNzYyNkMxNjIuMDkzIDE1LjAxNzggMTYxLjQ3MSAxNi4xNzQ1IDE2MC42ODQgMTcuMTk5OEMxNjIuNDggMTguOTI4MiAxNjQuOTEyIDE5Ljk5MjkgMTY3LjU5OSAxOS45OTI5QzE3My4xMDUgMTkuOTkyOSAxNzcuNTc2IDE1LjUxNzMgMTc3LjU3NiA5Ljk5MDE1QzE3Ny41NzYgNC40Njk1NiAxNzMuMTEyIC0wLjAxMjYzNDMgMTY3LjU5OSAtMC4wMTI2MzQzVjAuMDAwNTA5OTgzWiIKICAgICAgICBmaWxsPSIjRkZDNzFGIi8+Cjwvc3ZnPgo="},1359:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTExIDlIMTNWN0gxMVY5Wk0xMSAxN0gxM1YxMUgxMVYxN1pNMTEuOTkgMjJDNi40NyAyMiAyIDE3LjUyIDIgMTJDMiA2LjQ4IDYuNDcgMiAxMS45OSAyQzE3LjUyIDIgMjIgNi40OCAyMiAxMkMyMiAxNy41MiAxNy41MiAyMiAxMS45OSAyMlpNMTIgNEM3LjU4IDQgNCA3LjU4IDQgMTJDNCAxNi40MiA3LjU4IDIwIDEyIDIwQzE2LjQyIDIwIDIwIDE2LjQyIDIwIDEyQzIwIDcuNTggMTYuNDIgNCAxMiA0WiIgZmlsbD0iIzY2NjY2NiIvPgo8L3N2Zz4K"}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var a=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(a.exports,a,a.exports,__webpack_require__),a.loaded=!0,a.exports}__webpack_require__.m=__webpack_modules__,(()=>{var e=[];__webpack_require__.O=(t,a,n,o)=>{if(!a){var l=1/0;for(r=0;r<e.length;r++){for(var[a,n,o]=e[r],s=!0,c=0;c<a.length;c++)(!1&o||l>=o)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](a[c])))?a.splice(c--,1):(s=!1,o<l&&(l=o));if(s){e.splice(r--,1);var i=n();void 0!==i&&(t=i)}}return t}o=o||0;for(var r=e.length;r>0&&e[r-1][2]>o;r--)e[r]=e[r-1];e[r]=[a,n,o]}})(),(()=>{__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return __webpack_require__.d(t,{a:t}),t}})(),(()=>{__webpack_require__.d=(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,a)=>(__webpack_require__.f[a](e,t),t)),[]))})(),(()=>{__webpack_require__.u=e=>"js/"+e+".2304f3c9.js"})(),(()=>{__webpack_require__.miniCssF=e=>{}})(),(()=>{__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="app-frontend:";__webpack_require__.l=(a,n,o,l)=>{if(e[a])e[a].push(n);else{var s,c;if(void 0!==o)for(var i=document.getElementsByTagName("script"),r=0;r<i.length;r++){var d=i[r];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",t+o),s.src=a),e[a]=[n];var u=(t,n)=>{s.onerror=s.onload=null,clearTimeout(m);var o=e[a];if(delete e[a],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),c&&document.head.appendChild(s)}}})(),(()=>{__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{__webpack_require__.p=""})(),(()=>{var e={524:0};__webpack_require__.f.j=(t,a)=>{var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var o=new Promise(((a,o)=>n=e[t]=[a,o]));a.push(n[2]=o);var l=__webpack_require__.p+__webpack_require__.u(t),s=new Error,c=a=>{if(__webpack_require__.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var o=a&&("load"===a.type?"missing":a.type),l=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+l+")",s.name="ChunkLoadError",s.type=o,s.request=l,n[1](s)}};__webpack_require__.l(l,c,"chunk-"+t,t)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,a)=>{var n,o,[l,s,c]=a,i=0;if(l.some((t=>0!==e[t]))){for(n in s)__webpack_require__.o(s,n)&&(__webpack_require__.m[n]=s[n]);if(c)var r=c(__webpack_require__)}for(t&&t(a);i<l.length;i++)o=l[i],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return __webpack_require__.O(r)},a=globalThis["webpackChunkapp_frontend"]=globalThis["webpackChunkapp_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var __webpack_exports__=__webpack_require__.O(void 0,[121],(()=>__webpack_require__(8584)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();