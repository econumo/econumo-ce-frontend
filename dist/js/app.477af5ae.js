(()=>{var __webpack_modules__={8802:(e,t,a)=>{"use strict";var n=a(9104),o=a(6501),l=a(8734),s=a(1758);const c=(0,s.pM)(Object.assign({name:"App"},{__name:"App",setup(e){return(e,t)=>{const a=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.Wv)(a)}}})),i=c,r=i;var u=a(1573),d=a(587);const m=(0,u.M_)((()=>(0,d.Ey)()));var p,g=a(455);(function(e){e["LOGIN"]="login",e["REGISTER"]="register",e["LOGOUT"]="logout",e["HOME"]="home",e["ACCOUNT"]="account",e["BUDGET"]="budget",e["ONBOARDING"]="onboarding",e["BUDGET_CREATE"]="budgetCreate",e["SETTINGS"]="settings",e["SETTINGS_SETTINGS"]="settingsSettings",e["SETTINGS_PROFILE"]="settingsProfile",e["SETTINGS_CHANGE_PASSWORD"]="settingsChangePassword",e["SETTINGS_ACCOUNTS"]="settingsAccounts",e["SETTINGS_CATEGORIES"]="settingsCategories",e["SETTINGS_PAYEES"]="settingsPayees",e["SETTINGS_TAGS"]="settingsTags",e["SETTINGS_CONNECTIONS"]="settingsConnections",e["SETTINGS_BUDGETS"]="settingsBudgets"})(p||(p={}));var v=a(8790),b=a(2713),f=a.n(b);const h={class:"login-layout-lang-link"},_={class:"login-layout-head"},y={class:"row login-layout-head-logo justify-center"},A=["alt"],k={key:0,class:"login-layout-head-logo-edition"},M={class:"login-layout-head-tabs flex no-wrap justify-between"},C={class:"login-layout-head-tabs-item col flex justify-center"},E={class:"login-layout-head-tabs-item col flex justify-center"},I={key:0,href:"#",class:"login-layout-head-tabs-link",disabled:""},w={class:"login-layout-body"},L=(0,s.Lk)("div",{class:"login-layout-social"},[(0,s.Lk)("a",{target:"_blank",href:"https://github.com/econumo/",class:"login-layout-ico -gh",rel:"nofollow","aria-label":"GitHub"}),(0,s.Lk)("a",{target:"_blank",href:"https://x.com/econumo",class:"login-layout-ico -tw",rel:"nofollow","aria-label":"Twitter"})],-1),T={class:"login-layout-help"},N=["href","aria-label"];function D(e,t,a,n,o,l){const c=(0,s.g2)("router-link"),i=(0,s.g2)("router-view"),r=(0,s.g2)("change-language-modal"),u=(0,s.g2)("q-page-container"),d=(0,s.g2)("q-layout");return(0,s.uX)(),(0,s.Wv)(d,{class:"fullscreen login"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"login-layout full-width column wrap justify-center items-center content-center"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",{class:"login-layout-lang",onClick:t[0]||(t[0]=(...t)=>e.openLanguageModal&&e.openLanguageModal(...t))},[(0,s.Lk)("span",h,(0,v.v_)(e.shortLanguageLabel()),1)]),(0,s.Lk)("div",_,[(0,s.Lk)("div",y,[(0,s.Lk)("div",null,[(0,s.Lk)("img",{src:f(),width:"194",height:"20",alt:e.$t("elements.econumo.label")},null,8,A),e.econumoEdition?((0,s.uX)(),(0,s.CE)("div",k,(0,v.v_)(e.econumoEdition),1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",M,[(0,s.Lk)("div",C,[(0,s.bF)(c,{to:{name:"login"},class:"login-layout-head-tabs-link"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.user.page.sign_in.header")),1)])),_:1})]),(0,s.Lk)("div",E,[e.isPaywallEnabled||e.isRegistrationAllowed?((0,s.uX)(),(0,s.Wv)(c,{key:1,to:{name:"register"},class:"login-layout-head-tabs-link"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.user.page.sign_up.header")),1)])),_:1})):((0,s.uX)(),(0,s.CE)("a",I,(0,v.v_)(e.$t("modules.user.page.sign_up.header")),1))])])]),(0,s.Lk)("div",w,[(0,s.bF)(i)]),L,(0,s.Lk)("div",T,[(0,s.Lk)("a",{target:"_blank",href:e.$t("blocks.help.url"),class:"login-layout-help-link",rel:"nofollow","aria-label":e.$t("blocks.help.label")},(0,v.v_)(e.$t("blocks.help.label")),9,N)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.isLanguageModalOpened?((0,s.uX)(),(0,s.Wv)(r,{key:0,onCancel:t[1]||(t[1]=t=>e.closeLanguageModal())})):(0,s.Q3)("",!0)]))])),_:1})])),_:1})}const O={class:"econumo-modal lang-modal"},F={class:"lang-modal-text"},R={class:"lang-modal-button"};function S(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(i,{"model-value":!0,minimized:"",onHide:t[0]||(t[0]=t=>e.$emit("cancel"))},{default:(0,s.k6)((()=>[(0,s.Lk)("div",O,[(0,s.Lk)("div",F,(0,v.v_)(e.$t("modules.app.modal.change_language.header")),1),(0,s.Lk)("div",R,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.localeOptions,(t=>((0,s.uX)(),(0,s.Wv)(c,{class:(0,v.C4)(t.value===e.locale?"econumo-btn -medium -yellow full-width":"econumo-btn -medium -transparent full-width"),label:t.label,type:"button",key:t.value,onClick:a=>e.selectLocale(t),flat:""},null,8,["class","label","onClick"])))),128))])])])),_:1})}var x=a(1515),U=a(3537);const Q=(0,s.pM)({setup(){const{locale:e}=(0,U.s9)({useScope:"global"});return{locale:e}},computed:{localeOptions:function(){return x.Ay.getLocaleOptions()}},methods:{selectLocale:function(e){this.locale!==e.value&&(this.locale=e,x.Ay.locale(e.value),window.location.reload()),this.$emit("cancel")}}});var $=a(2807),j=a(558),W=a(6384),q=a(8582),z=a.n(q);const P=(0,$.A)(Q,[["render",S]]),Y=P;z()(Q,"components",{QDialog:j.A,QBtn:W.A});var V=a(3436),B=a.n(V);const X={data(){return{isLanguageModalOpened:!1}},methods:{openLanguageModal(){this.isLanguageModalOpened=!0},closeLanguageModal(){this.isLanguageModalOpened=!1},fullLanguageLabel(){return B().find(x.Ay.getLocaleOptions(),{value:x.Ay.locale()}).label},shortLanguageLabel(){return B().find(x.Ay.getLocaleOptions(),{value:x.Ay.locale()}).short}}};var H;function G(){return"ce"===H.CLOUD?H.CLOUD:H.COMMUNITY_EDITION}function K(){return String("CE")}function Z(){return"ce"===H.CLOUD}function J(){return!0}function ee(){return"ce"===H.CLOUD&&(0,x.Mu)()}function te(){if(ee())switch(G()){case H.CLOUD:return"https://pay.econumo.com/cloud/"}return""}(function(e){e["COMMUNITY_EDITION"]="ce",e["CLOUD"]="cloud"})(H||(H={}));const ae={edition:G(),label:K(),includesConnections:Z(),includesSharedAccess:J(),isPaywallEnabled:ee(),paywallUrl:te()},ne=(0,s.pM)({name:"LoginLayout",components:{ChangeLanguageModal:Y},mixins:[X],data(){return{}},computed:{econumoEdition:function(){return ae.label},isRegistrationAllowed:function(){return(0,x.Wm)()},isPaywallEnabled:function(){return ae.isPaywallEnabled}}});var oe=a(557),le=a(5205);const se=(0,$.A)(ne,[["render",D]]),ce=se;z()(ne,"components",{QLayout:oe.A,QPageContainer:le.A});var ie=a(6843),re=a.n(ie),ue=a(8099),de=a.n(ue);const me={class:"transaction-modal-header-wrapper"},pe={class:"transaction-modal-header-title"},ge={class:"transaction-modal-header-calendar"},ve={class:"transaction-modal-header-previous-day"},be={class:"transaction-modal-toggle-wrapper"},fe={key:0,class:"transaction-modal-main-account"},he={class:"transaction-modal-main-amount"},_e={key:1,class:"transaction-modal-main-amount"},ye={key:2,class:"transaction-modal-main-category"},Ae={key:3,class:"transaction-modal-main-from-account"},ke={key:4,class:"transaction-modal-main-recipient"},Me={class:"transaction-modal-options-title"},Ce={key:0,class:"transaction-modal-options-payee"},Ee={key:1,class:"transaction-modal-options-tags"},Ie=(0,s.Lk)("img",{src:de(),alt:""},null,-1),we={class:"econumo-modal transaction-modal-add-tag"},Le={class:"transaction-modal-add-tag-actions"};function Te(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-date"),r=(0,s.g2)("q-popup-proxy"),u=(0,s.g2)("q-icon"),d=(0,s.g2)("q-input"),m=(0,s.g2)("q-card-section"),p=(0,s.g2)("q-btn-toggle"),g=(0,s.g2)("q-select"),b=(0,s.g2)("calculator-input"),f=(0,s.g2)("q-avatar"),h=(0,s.g2)("q-card-actions"),_=(0,s.g2)("q-form"),y=(0,s.g2)("q-card"),A=(0,s.g2)("q-dialog"),k=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,s.bF)(A,{class:"transaction-modal",modelValue:e.isModalOpened,"onUpdate:modelValue":t[13]||(t[13]=t=>e.isModalOpened=t)},{default:(0,s.k6)((()=>[(0,s.bF)(y,{class:"transaction-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(_,{ref:"transactionForm",onSubmit:e.submit,onReset:e.closeModal},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"transaction-modal-header"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",me,[(0,s.Lk)("div",pe,(0,v.v_)(e.isTransactionModalCreation?e.$t("modals.transaction.create_form.header"):e.$t("modals.transaction.update_form.header")),1),(0,s.Lk)("div",null,[(0,s.Lk)("div",ge,[(0,s.bF)(d,{class:"transaction-modal-header-calendar-input",modelValue:e.transactionDate,"onUpdate:modelValue":t[1]||(t[1]=t=>e.transactionDate=t)},{append:(0,s.k6)((()=>[(0,s.bF)(u,{class:"transaction-modal-header-calendar-icon"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{ref:"qDateProxy",cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"transaction-modal-header-calendar-date",modelValue:e.transactionDate,"onUpdate:modelValue":t[0]||(t[0]=t=>e.transactionDate=t),"today-btn":"",mask:"YYYY-MM-DD","first-day-of-week":"1"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.bo)((0,s.bF)(c,{class:"transaction-modal-header-calendar-date-btn",label:e.$t("elements.button.ok.label"),flat:""},null,8,["label"]),[[k]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["modelValue"])]),(0,s.Lk)("div",ve,[(0,s.bF)(c,{flat:"",size:"sm",icon:"arrow_back",onClick:t[2]||(t[2]=t=>e.previousDay())})])])])])),_:1}),(0,s.bF)(m,{class:"transaction-modal-toggle"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",be,[(0,s.bF)(p,{class:"transaction-modal-toggle-btn",modelValue:e.transactionType,"onUpdate:modelValue":t[3]||(t[3]=t=>e.transactionType=t),options:[{label:e.$t("modals.transaction.transaction_type.income"),value:"income"},{label:e.$t("modals.transaction.transaction_type.transfer"),value:"transfer"},{label:e.$t("modals.transaction.transaction_type.expense"),value:"expense"}]},null,8,["modelValue","options"])])])),_:1}),(0,s.bF)(m,{class:"transaction-modal-main"},{default:(0,s.k6)((()=>[e.isTransfer?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",fe,[(0,s.bF)(g,{class:"transaction-modal-main-account-select",modelValue:e.account,"onUpdate:modelValue":t[4]||(t[4]=t=>e.account=t),options:e.accountsOptions,label:e.account.name,"popup-content-class":"modal-popup","options-selected-class":"modal-popup-selected","hide-dropdown-icon":""},{prepend:(0,s.k6)((()=>[(0,s.bF)(u,{name:e.account.icon},null,8,["name"])])),_:1},8,["modelValue","options","label"])])),(0,s.Lk)("div",he,[(0,s.bF)(b,{class:(0,v.C4)("transaction-modal-main-amount-input amount "+(e.isTransfer?"transfer":"")),modelValue:e.amount,"onUpdate:modelValue":t[5]||(t[5]=t=>e.amount=t),label:e.$t("modals.transaction.form.amount.label"),placeholder:e.$t("modals.transaction.form.amount.label"),"lazy-rules":"",autofocus:"",rules:[t=>e.isNotEmpty(t.toString())||e.$t("elements.validation.required_field"),t=>e.isValidNumber(t.toString())||e.$t("elements.validation.invalid_number"),t=>e.isValidDecimalNumber(t.toString())||e.$t("elements.validation.invalid_decimal_number"),t=>e.isValidFormula(t.toString())||e.$t("elements.validation.invalid_formula")]},null,8,["class","modelValue","label","placeholder","rules"])]),e.isTransfer&&e.account&&e.accountRecipient&&e.account.currencyId!==e.accountRecipient.currencyId?((0,s.uX)(),(0,s.CE)("div",_e,[(0,s.bF)(d,{class:(0,v.C4)(["transaction-modal-options-input amount-recipient",{transfer:e.isTransfer}]),inputmode:"decimal",step:"0.01",modelValue:e.amountRecipient,"onUpdate:modelValue":t[6]||(t[6]=t=>e.amountRecipient=t),label:e.$t("modals.transaction.form.amount_recipient.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t.toString())||e.$t("elements.validation.required_field"),t=>e.isValidNumber(t.toString())||e.$t("elements.validation.invalid_number"),t=>e.isValidDecimalNumber(t.toString())||e.$t("elements.validation.invalid_decimal_number")]},null,8,["modelValue","label","class","rules"])])):(0,s.Q3)("",!0),e.isTransfer?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",ye,[(0,s.bF)(g,{class:"form-select transaction-modal-main-category-select",outlined:"","bottom-slots":"",modelValue:e.category,"onUpdate:modelValue":t[7]||(t[7]=t=>e.category=t),"use-input":e.canChangeAccountData,"popup-content-class":"modal-popup","options-selected-class":"modal-popup-selected",onNewValue:e.createCategory,onFilter:e.filterCategories,onFilterAbort:e.filterCategoriesAbort,options:e.categoriesOptions,label:e.$t("modals.transaction.form.category.label"),rules:[t=>!!t||e.$t("modals.transaction.form.category.validation.required_field")]},{before:(0,s.k6)((()=>[(0,s.bF)(u,{class:"form-select-icon transaction-modal-main-category-select-icon",name:e.category?.icon||"pending"},null,8,["name"])])),_:1},8,["modelValue","use-input","onNewValue","onFilter","onFilterAbort","options","label","rules"])])),e.isTransfer?((0,s.uX)(),(0,s.CE)("div",Ae,[(0,s.bF)(g,{class:"form-select transaction-modal-main-from-account-select",outlined:"","bottom-slots":"",modelValue:e.account,"onUpdate:modelValue":t[9]||(t[9]=t=>e.account=t),disable:!e.isTransactionModalCreation,"popup-content-class":"modal-popup","options-selected-class":"modal-popup-selected",options:e.accountsOptions,label:e.$t("modals.transaction.form.from.label"),"option-disable":t=>t.value===e.transactionModalAccountRecipientId},{before:(0,s.k6)((()=>[(0,s.bF)(u,{class:"form-select-icon transaction-modal-main-from-account-select-icon",name:e.account?.icon||"pending"},null,8,["name"])])),after:(0,s.k6)((()=>[(0,s.bF)(u,{class:"form-select-icon transaction-modal-main-from-account-select-icon after cursor-pointer",onClick:t[8]||(t[8]=t=>e.swapAccounts()),name:"swap_vert"})])),_:1},8,["modelValue","disable","options","label","option-disable"])])):(0,s.Q3)("",!0),e.isTransfer?((0,s.uX)(),(0,s.CE)("div",ke,[(0,s.bF)(g,{class:"form-select transaction-modal-main-recipient-select",outlined:"","bottom-slots":"",modelValue:e.accountRecipient,"onUpdate:modelValue":t[10]||(t[10]=t=>e.accountRecipient=t),"popup-content-class":"modal-popup","options-selected-class":"modal-popup-selected",options:e.accountsOptions,label:e.$t("modals.transaction.form.to.label"),"option-disable":t=>t.value===e.transactionModalAccountId},{before:(0,s.k6)((()=>[(0,s.bF)(u,{class:"form-select-icon transaction-modal-main-recipient-select-icon",name:e.accountRecipient?.icon||"pending"},null,8,["name"])])),_:1},8,["modelValue","options","label","option-disable"])])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(m,{class:"transaction-modal-options"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Me,(0,v.v_)(e.$t("modals.transaction.form.options.header")),1),(0,s.Lk)("div",null,[(0,s.bF)(d,{class:"transaction-modal-options-input",modelValue:e.description,"onUpdate:modelValue":t[11]||(t[11]=t=>e.description=t),autogrow:"",placeholder:e.$t("modals.transaction.form.description.placeholder"),label:e.$t("modals.transaction.form.description.label")},null,8,["modelValue","placeholder","label"])]),e.isTransfer?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ce,[(0,s.bF)(g,{class:"transaction-modal-options-payee-select form-select",outlined:"",modelValue:e.payee,"onUpdate:modelValue":t[12]||(t[12]=t=>e.payee=t),"use-input":e.canChangeAccountData,"input-debounce":"0","popup-content-class":"modal-popup","options-selected-class":"modal-popup-selected",onNewValue:e.createPayee,onFilter:e.filterPayees,onFilterAbort:e.filterPayeesAbort,options:e.payeesOptions,label:e.$t("modals.transaction.form.payee."+e.transactionType)},null,8,["modelValue","use-input","onNewValue","onFilter","onFilterAbort","options","label"])])),e.isExpense?((0,s.uX)(),(0,s.CE)("div",Ee,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.accountOwnerTags,(t=>((0,s.uX)(),(0,s.Wv)(c,{class:"transaction-modal-options-tags-tag-btn",label:t.name,onClick:a=>e.selectTag(t.id),style:(0,v.Tr)(e.transactionModalTagId===t.id?"background: #F4CFFF; color: #93489F":"background: #F5F5F5; color: #666666"),ripple:!1,key:t.id},null,8,["label","onClick","style"])))),128)),e.canChangeAccountData?((0,s.uX)(),(0,s.Wv)(c,{key:0,class:"transaction-modal-options-tags-tag-add-btn",round:"",unelevated:"",ripple:!1,onClick:e.openAddTagModal},{default:(0,s.k6)((()=>[(0,s.bF)(f,{class:"transaction-modal-options-tags-tag-add-btn-icon"},{default:(0,s.k6)((()=>[Ie])),_:1})])),_:1},8,["onClick"])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(h,{class:"transaction-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(c,{class:"econumo-btn -medium -grey transaction-modal-actions-btn",flat:"",label:e.$t("elements.button.cancel.label"),onClose:e.closeModal},null,8,["label","onClose"]),[[k]]),e.isTransactionModalCreation?((0,s.uX)(),(0,s.Wv)(c,{key:0,class:"econumo-btn -medium -magenta transaction-modal-actions-btn",flat:"",label:e.$t("elements.button.add.label"),type:"submit"},null,8,["label"])):(0,s.Q3)("",!0),e.isTransactionModalCreation?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(c,{key:1,class:"econumo-btn -medium -magenta transaction-modal-actions-btn",flat:"",label:e.$t("elements.button.update.label"),type:"submit"},null,8,["label"]))])),_:1})])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1},8,["modelValue"]),(0,s.bF)(A,{modelValue:e.isAddTag,"onUpdate:modelValue":t[15]||(t[15]=t=>e.isAddTag=t),minimized:"",onHide:e.closeAddTagModal},{default:(0,s.k6)((()=>[(0,s.Lk)("div",we,[(0,s.bF)(g,{class:"form-select -narrow full-width",outlined:"","bottom-slots":"",modelValue:e.tag,"onUpdate:modelValue":t[14]||(t[14]=t=>e.tag=t),"use-input":!0,"popup-content-class":"modal-popup","options-selected-class":"modal-popup-selected",onNewValue:e.createTagFromSelect,onFilter:e.filterTags,onFilterAbort:e.filterTagsAbort,options:e.tagsOptions,label:e.$t("modals.transaction.dialog.new_tag.name.label"),rules:[t=>!!t||e.$t("modals.transaction.dialog.new_tag.name.validation.required_field")]},null,8,["modelValue","onNewValue","onFilter","onFilterAbort","options","label","rules"]),(0,s.Lk)("div",Le,[(0,s.bF)(c,{class:"econumo-btn -medium -grey transaction-modal-add-tag-button",label:e.$t("elements.button.cancel.label"),type:"button",onClick:e.closeAddTagModal,flat:""},null,8,["label","onClick"]),(0,s.bF)(c,{class:"econumo-btn -medium -magenta transaction-modal-add-tag-button",label:e.$t("elements.button.add.label"),type:"button",onClick:e.createNewTag,flat:""},null,8,["label","onClick"])])])])),_:1},8,["modelValue","onHide"])])}a(239);var Ne=a(6671);function De(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}function Oe(e){return/.+@.+/.test(e)}function Fe(e){return""===e||/^\-?\d+([,\.]{1}\d+)?$/.test(e)}function Re(e){return""===e||/^-?\d+([.,]\d{1,8})?$/.test(e)}function Se(e){return e.length>=2&&e.length<=18}function xe(e){return e.length>=2&&e.length<=18}function Ue(e){return e.length>=3&&e.length<=18}function Qe(e){return e.length>=3&&e.length<=18}function $e(e){return e.length>=3&&e.length<=18}function je(e){return e.length>=3&&e.length<=18}function We(e){return e.length>=3&&e.length<=18}function qe(e){return e.length>=4}function ze(e){return e.length>=3&&e.length<=18}function Pe(e){return e.length>=3&&e.length<=18}function Ye(e){return null!==e&&""!==e}function Ve(e){return 12===e.length}function Be(e){return(0,Ne.NF)((0,Ne.o2)(e))}function Xe(e){return/[+\-*/]$/.test(e)}function He(){return{isValidHttpUrl:De,isValidEmail:Oe,isValidNumber:Fe,isValidDecimalNumber:Re,isValidName:Se,isValidFolderName:xe,isValidAccountName:Ue,isValidCategoryName:Qe,isValidTagName:$e,isValidPayeeName:je,isValidBudgetName:We,isValidPassword:qe,isValidBudgetFolderName:ze,isValidBudgetEnvelopeName:Pe,isNotEmpty:Ye,isValidRecoveryCode:Ve,isValidFormula:Be,hasIncompleteFormula:Xe}}var Ge=a(2303);const Ke=e=>"function"!==typeof e?console.log:e,Ze={client:"axios"};function Je(){return Intl.DateTimeFormat().resolvedOptions().timeZone}var et=a(7156);Ge.A.defaults.headers.common={Accept:"application/json"},Ge.A.interceptors.request.use((e=>(e.headers.Accept="application/json",(0,et.gf)()&&(e.headers.Authorization="Bearer "+(0,et.gf)()),e.headers["Accept-Language"]=x.Ay.locale(),e.headers["X-Timezone"]=Je(),e)),null,{synchronous:!0});class tt{constructor(e={}){(0,V.defaults)(this,e,Ze),this.$client=Ge.A.create()}}const at=Object.assign(new tt,{getList(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] currency.getList",e),Ge.A.get(`${x.Ay.backendHost()}/api/v1/currency/get-currency-list`).then((e=>t(e.data))).catch((e=>a(e.response)))},getCurrencyRatesList(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] currency.getCurrencyRatesList",e),Ge.A.get(`${x.Ay.backendHost()}/api/v1/currency/get-currency-rate-list`).then((e=>t(e.data))).catch((e=>a(e.response)))}});var nt=a(6246),ot=a(322);const lt="YYYY-MM-DD",st="YYYY-MM-DD HH:mm:ss",ct=(0,d.nY)("currencies",(()=>{const e=(0,ot.Mjh)(et.cY.CURRENCIES,[]),t=(0,ot.Mjh)(et.cY.CURRENCIES_LOADED_AT,null),a=(0,s.EW)((()=>!!t.value)),n=(0,s.EW)((()=>B().keyBy(e.value,"id")));function o(){return at.getList({},(a=>{e.value=a.data.items,t.value=nt.Ay.formatDate(new Date,st)}),(e=>(console.log("fetchCurrencies error",e),!1)))}return{currencies:e,currenciesLoadedAt:t,isCurrenciesLoaded:a,currenciesHash:n,fetchCurrencies:o}}));function it(){const e=e=>{if(null===e||void 0===e)return"0";const t="string"===typeof e?Number(e):e;if(!Number.isFinite(t))return"0";if(Math.abs(t)<1e-6)return t.toFixed(8).replace(/\.?0+$/,"")||"0";const a=t.toString(),[n,o=""]=a.split(".");return o?`${n}.${o.slice(0,8)}`.replace(/\.?0+$/,""):n},t=(e,t,a)=>{var n,o;if(null===e||void 0===e)return"0";const l="string"===typeof e?Number(e):e;if(!Number.isFinite(l))return"0";if(0===t)return Math.round(l).toString();if(a)return l.toFixed(t);const s=null!==(o=null===(n=l.toString().split(".")[1])||void 0===n?void 0:n.length)&&void 0!==o?o:0,c=Math.max(t,Math.min(s,8));return l.toFixed(c)},a=e=>{const t=e.split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t},n=e=>{const t=e.toString().toLowerCase();return t.includes("e")};return{normalizeNumber:e,formatNumber:t,getFormattedParts:a,isScientificNotation:n}}function rt(){const e=ct(),{normalizeNumber:t,formatNumber:a,getFormattedParts:n}=it(),o=(a,n,o=!0)=>{var l,s,c;const i=t(a),r=n?e.currenciesHash[n]:null,u=o?null!==(l=null===r||void 0===r?void 0:r.fractionDigits)&&void 0!==l?l:8:Number.isInteger(Number(i))?null!==(s=null===r||void 0===r?void 0:r.fractionDigits)&&void 0!==s?s:0:Math.max(null!==(c=null===r||void 0===r?void 0:r.fractionDigits)&&void 0!==c?c:0,Math.min((i.split(".")[1]||"").length,8));return{normalizedAmount:i,currency:r,digits:u}},l=(e,t=null,l=!0,s=!0)=>{const{normalizedAmount:c,currency:i,digits:r}=o(e,t,s),u=a(c,r,s),d=n(u),m=['<span class="money-amount">',d[0],"</span>"];return d.length>1&&m.push('<span class="money-decimal">.',d[1],"</span>"),l&&i&&m.push('<span class="money-currency">'+i.symbol+"</span>"),m.join("")},s=(e,t=null,l=!0,s=!0,c=!0)=>{const{normalizedAmount:i,currency:r,digits:u}=o(e,t,s),d=a(i,u,s),m=c?n(d):d.split(".");let p=m[0];return m.length>1&&(p+="."+m[1]),l&&r&&(p+=" "+r.symbol),p};return{moneyHTML:l,moneyFormat:s}}const ut=(0,d.nY)("currency-rates",(()=>{const e=(0,ot.Mjh)(et.cY.CURRENCY_RATES,[]),t=(0,ot.Mjh)(et.cY.CURRENCY_RATES_LOADED_AT,null),a=(0,s.EW)((()=>!!t.value));function n(){return at.getCurrencyRatesList({},(a=>{e.value=a.data.items.map((e=>Object.assign(Object.assign({},e),{rate:Number(e.rate)}))),t.value=nt.Ay.formatDate(new Date,st)}),(e=>(console.log("fetchCurrencyRates error",e),!1)))}return{currencyRates:e,currencyRatesLoadedAt:t,isCurrencyRatesLoaded:a,fetchCurrencyRates:n}}));function dt(){const e=ct(),t=ut(),a=(a,n,o,l=null)=>{const s=parseFloat(o.toString());if(a===n)return s;const c=l||t.currencyRates;if(!Array.isArray(c)||0===c.length)return console.warn("Exchange rates are not available"),s;let i=s;const r=e.currencies.find((e=>e.id===n));if((0,V.isNil)(r))return console.warn("Target currency not found"),s;const u=c.find((e=>e.currencyId===a));if(void 0===u)return console.warn("Source currency rate not found"),s;a!==u.baseCurrencyId&&(i/=parseFloat(u.rate.toString()));const d=c.find((e=>e.currencyId===n));return void 0===d?(console.warn("Target currency rate not found"),s):(n!==d.baseCurrencyId&&(i*=parseFloat(d.rate.toString())),Number(i.toFixed(r.fractionDigits)))};return{exchange:a}}const mt=Object.assign(new tt,{getList(e,t){return e=Ke(e),t=Ke(t),console.log("[API] account.getList"),Ge.A.get(`${x.Ay.backendHost()}/api/v1/account/get-account-list`).then((t=>e(t.data.data))).catch((e=>t(e.response)))},create(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] account.add",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/account/create-account`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},update(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] account.update",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/account/update-account`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},delete(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] account.delete",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/account/delete-account`,{id:e}).then((e=>t())).catch((e=>a(e.response)))},orderList(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] account.orderList",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/account/order-account-list`,{changes:e}).then((e=>t(e.data.data))).catch((e=>a(e.response)))}});function pt(e=[],t=[]){let a=[];return e.forEach((e=>{t.forEach(((t,n)=>{e.id===t&&parseInt(e.position)!==n&&a.push({id:t,position:n})}))})),a}function gt(e=[],t=[],a=[]){let n=[];return e.forEach((e=>{t.forEach(((t,o)=>{if(e.id===t.id&&vt(e,t,a)){let o={id:t.id};a.forEach((a=>{t.hasOwnProperty(a)?o[a]=t[a]:e.hasOwnProperty(a)&&(o[a]=e[a])})),n.push(o)}}))})),n}function vt(e={},t={},a=[]){let n=!0;return a.forEach((a=>{e[a]!==t[a]&&(n=!1)})),!n}var bt,ft;function ht(e,t={}){if(!e)return;window.dataLayer=window.dataLayer||[];let a=window.location.hash;a.length>=2&&(a=window.location.hash.substring(2)),window.dataLayer.push({event:e,eventData:t,eventContext:{selfHosted:x.Ay.selfHosted(),locale:x.Ay.locale(),page:a},eventTimestamp:Date.now()})}(function(e){e["PAGE_VIEW"]="appPageView",e["USER_LOGIN"]="appUserLogin",e["USER_LOGOUT"]="appUserLogout",e["USER_REGISTRATION"]="appUserRegistration",e["USER_UPDATE_NAME"]="appUserUpdateName",e["USER_UPDATE_PASSWORD"]="appUserUpdatePassword",e["USER_UPDATE_CURRENCY"]="appUserUpdateCurrency",e["USER_COMPLETE_ONBOARDING"]="appUserCompleteOnboarding",e["USER_UPDATE_DEFAULT_BUDGET"]="appUserUpdateDefaultBudget",e["USER_REMIND_PASSWORD"]="appUserRemindPassword",e["USER_RESET_PASSWORD"]="appUserResetPassword",e["ACCOUNT_SELECT"]="appAccountSelect",e["ACCOUNT_CREATE"]="appAccountCreate",e["ACCOUNT_UPDATE"]="appAccountUpdate",e["ACCOUNT_DELETE"]="appAccountDelete",e["ACCOUNT_ORDER_LIST"]="appApiAccountOrderList",e["ACCOUNT_FOLDER_EXPAND"]="appAccountFolderExpand",e["ACCOUNT_FOLDER_COLLAPSE"]="appAccountFolderCollapse",e["ACCOUNT_FOLDER_CREATE"]="appAccountFolderCreate",e["ACCOUNT_FOLDER_UPDATE"]="appAccountFolderUpdate",e["ACCOUNT_FOLDER_REPLACE"]="appAccountFolderReplace",e["ACCOUNT_FOLDER_ORDER_LIST"]="appAccountFolderOrderList",e["ACCOUNT_FOLDER_HIDE"]="appAccountFolderHide",e["ACCOUNT_FOLDER_SHOW"]="appAccountFolderShow",e["CATEGORY_CREATE"]="appCategoryCreate",e["CATEGORY_UPDATE"]="appCategoryUpdate",e["CATEGORY_ORDER_LIST"]="appCategoryOrderList",e["CATEGORY_CHANGE_ORDER"]="appAccountChangeOrder",e["CATEGORY_DELETE"]="appCategoryDelete",e["CATEGORY_REPLACE"]="appCategoryReplace",e["CATEGORY_ARCHIVE"]="appCategoryArchive",e["CATEGORY_UNARCHIVE"]="appCategoryUnarchive",e["PAYEE_CREATE"]="appPayeeCreate",e["PAYEE_UPDATE"]="appPayeeUpdate",e["PAYEE_ORDER_LIST"]="appPayeeOrderList",e["PAYEE_CHANGE_ORDER"]="appPayeeChangeOrder",e["PAYEE_DELETE"]="appPayeeDelete",e["PAYEE_ARCHIVE"]="appPayeeArchive",e["PAYEE_UNARCHIVE"]="appPayeeUnarchive",e["BUDGET_CREATE"]="appBudgetCreate",e["BUDGET_UPDATE"]="appBudgetUpdate",e["BUDGET_ORDER_LIST"]="appBudgetOrderList",e["BUDGET_CHANGE_ORDER"]="appBudgetChangeOrder",e["BUDGET_DELETE"]="appBudgetDelete",e["BUDGET_RESET"]="appBudgetReset",e["BUDGET_GRANT_ACCESS"]="appBudgetGrantAccess",e["BUDGET_REVOKE_ACCESS"]="appBudgetRevokeAccess",e["BUDGET_ACCEPT_ACCESS"]="appBudgetAcceptAccess",e["BUDGET_DECLINE_ACCESS"]="appBudgetAcceptAccess",e["BUDGET_FOLDER_CREATE"]="appBudgetFolderCreate",e["BUDGET_FOLDER_DELETE"]="appBudgetFolderDelete",e["BUDGET_FOLDER_UPDATE"]="appBudgetFolderUpdate",e["BUDGET_FOLDER_CHANGE_ORDER"]="appBudgetFolderChangeOrder",e["BUDGET_CHANGE_DATE"]="appBudgetChangeDate",e["BUDGET_UPDATE_ELEMENT_LIMIT"]="appBudgetUpdateElementLimit",e["BUDGET_CHANGE_ORDER_ELEMENT"]="appBudgetChangeOrderElement",e["BUDGET_TRANSFER_ENVELOPE_BUDGET"]="appBudgetTransferEnvelopeBudget",e["BUDGET_ELEMENT_CHANGE_CURRENCY"]="appBudgetElementChangeCurrency",e["BUDGET_ENVELOPE_DELETE"]="appBudgetEnvelopeDelete",e["BUDGET_ENVELOPE_UPDATE"]="appBudgetEnvelopeUpdate",e["BUDGET_ENVELOPE_CREATE"]="appBudgetEnvelopeCreate",e["BUDGET_ENVELOPE_COPY_BUDGET"]="appBudgetEnvelopeCopyBudget",e["TAG_CREATE"]="appTagCreate",e["TAG_UPDATE"]="appTagUpdate",e["TAG_ORDER_LIST"]="appTagOrderList",e["TAG_CHANGE_ORDER"]="appTagChangeOrder",e["TAG_DELETE"]="appTagDelete",e["TAG_ARCHIVE"]="appTagArchive",e["TAG_UNARCHIVE"]="appTagUnarchive",e["TRANSACTION_CREATE"]="appTransactionCreate",e["TRANSACTION_UPDATE"]="appTransactionUpdate",e["TRANSACTION_DELETE"]="appTransactionDelete",e["CONNECTION_GENERATE_INVITE"]="appConnectionGenerateInvite",e["CONNECTION_DELETE_INVITE"]="appConnectionDeleteInvite",e["CONNECTION_ACCEPT_INVITE"]="appConnectionAcceptInvite",e["CONNECTION_DELETE"]="appConnectionDelete",e["CONNECTION_UPDATE_ACCOUNT_ACCESS"]="appConnectionUpdateAccountAccess",e["CONNECTION_REVOKE_ACCOUNT_ACCESS"]="appConnectionRevokeAccountAccess",e["UI_MODAL_ACCOUNT_OPEN"]="appUIModalAccountOpen",e["UI_MODAL_ACCOUNT_CLOSE"]="appUIModalAccountClose",e["UI_MODAL_ACCOUNT_CHANGE_NAME"]="appUIModalAccountChangeName",e["UI_MODAL_ACCOUNT_CHANGE_BALANCE"]="appUIModalAccountChangeBalance",e["UI_MODAL_ACCOUNT_CHANGE_CURRENCY"]="appUIModalAccountChangeCurrency",e["UI_MODAL_ACCOUNT_CHANGE_ICON"]="appUIModalAccountChangeIcon",e["UI_MODAL_TRANSACTION_OPEN"]="appUIModalTransactionOpen",e["UI_MODAL_TRANSACTION_CLOSE"]="appUIModalTransactionClose",e["UI_MODAL_TRANSACTION_CHANGE_TYPE"]="appUIModalTransactionChangeType",e["UI_MODAL_TRANSACTION_CHANGE_ACCOUNT"]="appUIModalTransactionChangeAccount",e["UI_MODAL_TRANSACTION_CHANGE_ACCOUNT_RECIPIENT"]="appUIModalTransactionChangeAccountRecipient",e["UI_MODAL_TRANSACTION_CHANGE_AMOUNT"]="appUIModalTransactionChangeAmount",e["UI_MODAL_TRANSACTION_CHANGE_AMOUNT_RECIPIENT"]="appUIModalTransactionChangeAmountRecipient",e["UI_MODAL_TRANSACTION_CHANGE_CATEGORY"]="appUIModalTransactionChangeCategory",e["UI_MODAL_TRANSACTION_CHANGE_DESCRIPTION"]="appUIModalTransactionChangeDescription",e["UI_MODAL_TRANSACTION_CHANGE_PAYEE"]="appUIModalTransactionChangePayee",e["UI_MODAL_TRANSACTION_CHANGE_TAG"]="appUIModalTransactionChangeTag",e["UI_MODAL_TRANSACTION_CHANGE_DATE"]="appUIModalTransactionChangeDate"})(bt||(bt={})),function(e){e["SIDEBAR"]="sidebar",e["WORKSPACE"]="workspace"}(ft||(ft={}));const _t=(0,d.nY)("active-area",(()=>{const e=(0,l.KR)(ft.SIDEBAR);function t(){e.value=ft.SIDEBAR}function a(){e.value=ft.WORKSPACE}return{activeArea:e,setSidebarActiveArea:t,setWorkspaceActiveArea:a}})),yt=Object.assign(new tt,{login(e,t,a,n){return a=Ke(a),n=Ke(n),console.log("[API] user.login",{username:e}),Ge.A.post(`${x.Ay.backendHost()}/api/v1/user/login-user`,{username:e,password:t}).then((e=>a(e.data))).catch((e=>{var t;return n(null===(t=e.response)||void 0===t?void 0:t.data)}))},logout(e,t){return e=Ke(e),t=Ke(t),console.log("[API] user.logout"),Ge.A.post(`${x.Ay.backendHost()}/api/v1/user/logout-user`).then((t=>e(t.data))).catch((e=>t(e.response)))},register(e="",t="",a="",n,o){return n=Ke(n),o=Ke(o),console.log("[API] user.register",{email:e}),Ge.A.post(`${x.Ay.backendHost()}/api/v1/user/register-user`,{email:e,password:t,name:a}).then((e=>n(e.data))).catch((e=>o(e.response)))},updateName(e="",t,a){return t=Ke(t),a=Ke(a),console.log("[API] user.updateName",{name:e}),Ge.A.post(`${x.Ay.backendHost()}/api/v1/user/update-name`,{name:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},updatePassword(e="",t="",a,n){return a=Ke(a),n=Ke(n),console.log("[API] user.updatePassword"),Ge.A.post(`${x.Ay.backendHost()}/api/v1/user/update-password`,{oldPassword:e,newPassword:t}).then((e=>a(e.data))).catch((e=>n(e.response)))},updateCurrency(e="",t,a){return t=Ke(t),a=Ke(a),console.log("[API] user.updateCurrency",{currency:e}),Ge.A.post(`${x.Ay.backendHost()}/api/v1/user/update-currency`,{currency:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},updateDefaultBudget(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] user.updateDefaultBudget",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/user/update-budget`,{value:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},getUserData(e,t){return e=Ke(e),t=Ke(t),console.log("[API] user.getUserData"),Ge.A.get(`${x.Ay.backendHost()}/api/v1/user/get-user-data`).then((t=>e(t.data.data.user))).catch((e=>t(e.response)))},remindPassword(e="",t,a){return t=Ke(t),a=Ke(a),console.log("[API] user.userRemindPassword",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/user/remind-password`,{username:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},resetPassword(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] user.userResetPassword",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/user/reset-password`,{username:e.username,code:e.code,password:e.password}).then((e=>t(e.data))).catch((e=>a(e.response)))},completeOnboarding(e,t){return e=Ke(e),t=Ke(t),console.log("[API] user.completeOnboarding"),Ge.A.post(`${x.Ay.backendHost()}/api/v1/user/complete-onboarding`).then((t=>e(t.data))).catch((e=>t(e.response)))}}),At=Object.assign(new tt,{getList(e,t){return e=Ke(e),t=Ke(t),console.log("[API] account.getFolderList"),Ge.A.get(`${x.Ay.backendHost()}/api/v1/account/get-folder-list`).then((t=>e(t.data.data))).catch((e=>t(e.response)))},create(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] account.createFolder",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/account/create-folder`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},update(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] account.updateFolder",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/account/update-folder`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},replace(e,t,a,n){return a=Ke(a),n=Ke(n),console.log("[API] account.replaceFolder",e,t),Ge.A.post(`${x.Ay.backendHost()}/api/v1/account/replace-folder`,{id:e,replaceId:t}).then((e=>a(e.data))).catch((e=>n(e.response)))},orderList(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] account.orderFolderList",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/account/order-folder-list`,{changes:e}).then((e=>t(e.data.data))).catch((e=>a(e.response)))},hide(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] account.hideFolder",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/account/hide-folder`,{id:e}).then((e=>t())).catch((e=>a(e.response)))},show(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] account.showFolder",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/account/show-folder`,{id:e}).then((e=>t())).catch((e=>a(e.response)))}});var kt;(function(e){e[e["Hidden"]=0]="Hidden",e[e["Visible"]=1]="Visible"})(kt||(kt={}));var Mt=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};const Ct=(0,d.nY)("account-folders",(()=>{const e=(0,ot.Mjh)(et.cY.ACCOUNT_FOLDERS,[]),t=(0,ot.Mjh)(et.cY.ACCOUNT_FOLDERS_LOADED_AT,null),a=(0,ot.Mjh)(et.cY.ACCOUNT_FOLDERS_OPENED,{}),n=(0,s.EW)((()=>!!t.value)),o=(0,s.EW)((()=>{const t=B().orderBy(B().cloneDeep(e.value),"position","asc");return t.forEach((e=>{var t;e.opened=null===(t=a.value[e.id])||void 0===t||t})),t}));function l(){return Mt(this,void 0,void 0,(function*(){return At.getList((e=>(v(e.items),e.items)),(e=>(console.log("AccountFolders error",e),e)))}))}function c(e){ht(bt.ACCOUNT_FOLDER_EXPAND),a.value[e]=!0}function i(e){ht(bt.ACCOUNT_FOLDER_COLLAPSE),a.value[e]=!1}function r(t){ht(bt.ACCOUNT_FOLDER_UPDATE);const a=B().findLast(e.value,(e=>e.name.toLowerCase()===t.name.toLowerCase()&&e.id!==t.id));if(a)throw new Error("Folder already exists");return At.update(t,(e=>(f(e.item),e.item)),(e=>(console.log("AccountFolders error",e),e)))}function u(t){ht(bt.ACCOUNT_FOLDER_CREATE);const a=B().findLast(e.value,(e=>e.name.toLowerCase()===t.name.toLowerCase()));if(a)throw new Error("Folder already exists");return At.create(t,(e=>(b(e.item),e.item)),(e=>(console.log("AccountFolders error",e),e)))}function d(e){ht(bt.ACCOUNT_FOLDER_REPLACE);const t=Vt();return At.replace(e.id,e.replaceId,(a=>!!a.data&&(h(e.id),t.replaceFolder(e),!0)),(e=>(console.log("AccountFolders error",e),e)))}function m(t){ht(bt.ACCOUNT_FOLDER_ORDER_LIST);const a=pt(e.value,t);if(!a.length)throw new Error("No changes");return At.orderList(a,(e=>(v(e.items),e.items)),(e=>(console.log("AccountFolders error",e),e)))}function p(e){return ht(bt.ACCOUNT_FOLDER_HIDE),At.hide(e.id,(()=>(_(e.id),!0)),(e=>(console.log("AccountFolders error",e),e)))}function g(e){return ht(bt.ACCOUNT_FOLDER_SHOW),At.show(e.id,(()=>(y(e.id),!0)),(e=>(console.log("AccountFolders error",e),e)))}function v(n){e.value=n,t.value=nt.Ay.formatDate(new Date,st);const o={};e.value.forEach((e=>{B().isBoolean(a.value[e.id])?o[e.id]=a.value[e.id]:o[e.id]=!0})),a.value=o}function b(t){e.value.push(t)}function f(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t.id)),a.push(t),e.value=a}function h(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t)),e.value=a}function _(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t));const n=B().cloneDeep(B().find(e.value,{id:t}));if(!n)throw new Error("Folder not found");n.isVisible=0,a.push(n),e.value=a}function y(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t));const n=B().cloneDeep(B().find(e.value,{id:t}));if(!n)throw new Error("Folder not found");n.isVisible=kt.Visible,a.push(n),e.value=a}return{accountFolders:e,accountFoldersLoadedAt:t,accountFoldersOpened:a,isAccountFoldersLoaded:n,accountFoldersOrdered:o,fetchAccountFolders:l,openAccountFolder:c,closeAccountFolder:i,updateAccountFolder:r,createAccountFolder:u,replaceAccountFolder:d,orderAccountFolderList:m,hideAccountFolder:p,showAccountFolder:g}}));var Et=a(3090);const It=Object.assign(new tt,{getList(e,t){return e=Ke(e),t=Ke(t),console.log("[API] category.getList"),Ge.A.get(`${x.Ay.backendHost()}/api/v1/category/get-category-list`).then((t=>e(t.data.data))).catch((e=>t(e.response)))},create(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] category.create",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/category/create-category`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},update(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] category.update",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/category/update-category`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},orderList(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] category.orderList",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/category/order-category-list`,{changes:e}).then((e=>t(e.data.data))).catch((e=>a(e)))},delete(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] category.delete",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/category/delete-category`,{id:e,mode:"delete"}).then((e=>t(e.data))).catch((e=>a(e.response)))},replace(e,t,a,n){return a=Ke(a),n=Ke(n),console.log("[API] category.replace",e,t),Ge.A.post(`${x.Ay.backendHost()}/api/v1/category/delete-category`,{id:e,replaceId:t,mode:"replace"}).then((e=>a())).catch((e=>n(e.response)))},archive(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] category.archive",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/category/archive-category`,{id:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},unarchive(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] category.unarchive",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/category/unarchive-category`,{id:e}).then((e=>t(e.data))).catch((e=>a(e.response)))}}),wt=Object.assign(new tt,{getList(e,t){return e=Ke(e),t=Ke(t),console.log("[API] budget.getList"),Ge.A.get(`${x.Ay.backendHost()}/api/v1/budget/get-budget-list`).then((t=>e(t.data.data))).catch((e=>t(e.response)))},create(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.create",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/create-budget`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},update(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.update",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/update-budget`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},delete(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.delete",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/delete-budget`,{id:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},grantAccess(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.grantAccess",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/grant-access`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},revokeAccess(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.revokeAccess",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/revoke-access`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},acceptAccess(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.acceptAccess",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/accept-access`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},declineAccess(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.declineAccess",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/decline-access`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},getItem(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.getItem",e),Ge.A.get(`${x.Ay.backendHost()}/api/v1/budget/get-budget?id=${e.id}&date=${e.date}`).then((e=>t(e.data))).catch((e=>a(e.response)))},getTransactionList(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.getTransactionList",e),Ge.A.get(`${x.Ay.backendHost()}/api/v1/budget/get-transaction-list?budgetId=${e.budgetId}&periodStart=${e.periodStart}&categoryId=${e.categoryId}&tagId=${e.tagId}&envelopeId=${e.envelopeId}`).then((e=>t(e.data))).catch((e=>a(e.response)))},createFolder(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.createFolder",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/create-folder`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},updateFolder(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.updateFolder",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/update-folder`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},deleteFolder(e,t,a,n){return a=Ke(a),n=Ke(n),console.log("[API] budget.deleteFolder",e,t),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/delete-folder`,{budgetId:e,id:t}).then((e=>a(e.data))).catch((e=>n(e.response)))},orderFolderList(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.orderFolderList",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/order-folder-list`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},moveElementList(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.moveElementList",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/move-element-list`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},createEnvelope(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.createEnvelope",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/create-envelope`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},updateEnvelope(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.updateEnvelope",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/update-envelope`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},deleteEnvelope(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.deleteEnvelope",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/delete-envelope`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},setLimit(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.setLimit",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/set-limit`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},changeElementCurrency(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] budget.changeElementCurrency",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/budget/change-element-currency`,e).then((e=>t(e.data))).catch((e=>a(e.response)))}});var Lt,Tt,Nt;(function(e){e[e["ENVELOPE"]=0]="ENVELOPE",e[e["CATEGORY"]=1]="CATEGORY",e[e["TAG"]=2]="TAG"})(Lt||(Lt={})),function(e){e["OWNER"]="owner",e["ADMIN"]="admin",e["USER"]="user",e["READ_ONLY"]="guest"}(Tt||(Tt={})),function(e){e[e["ACCEPTED"]=1]="ACCEPTED",e[e["NOT_ACCEPTED"]=0]="NOT_ACCEPTED"}(Nt||(Nt={}));const Dt=(0,d.nY)("budgets",(()=>{const e=(0,ot.Mjh)(et.cY.BUDGETS,[]),t=(0,ot.Mjh)(et.cY.BUDGETS_LOADED_AT,null),a=(0,ot.Mjh)(et.cY.BUDGET,null,{serializer:ot.dbR.object}),n=(0,ot.Mjh)(et.cY.BUDGET_LOADED_AT,null),o=(0,ot.Mjh)(et.cY.BUDGET_SELECTED_DATE,null),c=(0,ot.Mjh)(et.cY.BUDGET_FOLDED_FOLDERS,{}),i=(0,ot.Mjh)(et.cY.BUDGET_UNFOLDED_ELEMENTS,{}),r=(0,ot.Mjh)(et.cY.BUDGET_META,null,{serializer:ot.dbR.object}),u=(0,ot.Mjh)(et.cY.BUDGET_CURRENCIES,[]),d=(0,l.KR)(!1),m=(0,l.KR)([]),p=(0,s.EW)((()=>d.value)),g=(0,s.EW)((()=>!t.value&&!a.value)),v=(0,s.EW)((()=>!!t.value)),b=(0,s.EW)((()=>{const t=Yt();return B().orderBy(B().filter(B().cloneDeep(e.value),{ownerUserId:t.userId}),"position","asc")})),f=(0,s.EW)((()=>B().orderBy(e.value,"name","asc"))),h=(0,s.EW)((()=>!!n.value)),_=(0,s.EW)((()=>{const t=[],a=Yt();return e.value.forEach((e=>{e.access.forEach((n=>{console.log(n,a.userId,n.isAccepted),n.user.id!==a.userId||n.isAccepted||t.push(B().cloneDeep(e))}))})),t})),y=(0,s.EW)((()=>{if(!e.value)return!1;let t=!1;const a=Yt();return e.value.forEach((e=>{e.access.forEach((e=>{e.user.id===a.userId&&e.isAccepted&&(t=!0)}))})),t})),A=(0,s.EW)((()=>{if(!a.value)return!1;let e=!1;const t=Yt();return a.value.meta.access.forEach((a=>{a.user.id===t.userId&&(a.role!==Tt.ADMIN&&a.role!==Tt.OWNER||(e=!0))})),e})),k=(0,s.EW)((()=>{if(!a.value)return!1;let e=!1;const t=Yt();return a.value.meta.access.forEach((a=>{a.user.id===t.userId&&(a.role!==Tt.USER&&a.role!==Tt.ADMIN&&a.role!==Tt.OWNER||(e=!0))})),e})),M=(0,s.EW)((()=>{if(!o.value){const e=new Date;e.setDate(1),o.value=nt.Ay.formatDate(e,lt)}return o.value}));function C(){return wt.getList((e=>{V(e.items)}),(e=>(console.log("Budgets error",e),e)))}function E(t){ht(bt.BUDGET_CREATE);const o=Yt(),l=B().findLast(B().filter(e.value,{ownerUserId:o.userId}),(e=>e.name.toLowerCase()===t.name.toLowerCase()));return l?new Promise(((e,a)=>{t.name?l&&e(l):a("Budget name is empty")})):wt.create(t,(t=>{if(!t.success)return t;e.value.push(t.data.item.meta),a.value=t.data.item,n.value=nt.Ay.formatDate(new Date,st),r.value=t.data.item.meta,u.value=[],t.data.item.balances.forEach((e=>{u.value.push(e.currencyId)}));const o=Yt();return o.fetchUserData(),t}),(e=>(console.error("[Budgets Store] createBudget",e),e)))}function I(t){ht(bt.BUDGET_UPDATE);const a=Yt();if(null!==t.name){const n=B().findLast(B().filter(e.value,{ownerUserId:a.userId}),(e=>null!==t.name&&e.name.toLowerCase()===t.name.toLowerCase()&&e.id!==t.id));if(n)return new Promise(((e,t)=>{t("Budget name exists")}))}return wt.update(t,(a=>a.success?(B().remove(e.value,(e=>e.id===t.id)),e.value.push(a.data.item),r.value=a.data.item,a):a),(e=>(console.error("[Budgets Store] updateBudget",e),e)))}function w(e){ht(bt.BUDGET_DELETE);const t=Yt();return wt.delete(e,(e=>(R(),C(),t.fetchUserData(),e)),(e=>(console.error("[Budgets Store] deleteBudget",e),e)))}function L(e){return ht(bt.BUDGET_GRANT_ACCESS),wt.grantAccess(e,(e=>(V(e.data.items),e)),(e=>(console.error("[Budgets Store] grantAccess",e),e)))}function T(e){return ht(bt.BUDGET_REVOKE_ACCESS),wt.revokeAccess(e,(e=>(C(),e)),(e=>(console.error("[Budgets Store] revokeAccess",e),e)))}function N(e){return ht(bt.BUDGET_ACCEPT_ACCESS),wt.acceptAccess(e,(e=>(C(),Yt().fetchUserData().then((()=>{R()})),e)),(e=>(console.error("[Budgets Store] acceptAccess",e),e)))}function D(e){return ht(bt.BUDGET_DECLINE_ACCESS),wt.declineAccess(e,(e=>(C(),e)),(e=>(console.error("[Budgets Store] declineAccess",e),e)))}function O(e){return a.value&&a.value.meta.id===e.id||(c.value={},i.value={}),n.value=null,a.value=null,wt.getItem(e,(e=>{var t;(null===(t=e.data.item.structure)||void 0===t?void 0:t.elements)&&(e.data.item.structure.elements=e.data.item.structure.elements.map((e=>Object.assign(Object.assign({},e),{spent:Number(e.spent),budgetSpent:Number(e.budgetSpent),budgeted:Number(e.budgeted),available:Number(e.available),children:e.children.map((e=>Object.assign(Object.assign({},e),{spent:Number(e.spent),budgetSpent:Number(e.budgetSpent)})))})))),e.data.item.balances&&(e.data.item.balances=e.data.item.balances.map((e=>Object.assign(Object.assign({},e),{startBalance:null!==e.startBalance?Number(e.startBalance):null,endBalance:null!==e.endBalance?Number(e.endBalance):null,income:null!==e.income?Number(e.income):null,expenses:null!==e.expenses?Number(e.expenses):null,exchanges:null!==e.exchanges?Number(e.exchanges):null,holdings:null!==e.holdings?Number(e.holdings):null})))),e.data.item.currencyRates&&(e.data.item.currencyRates=e.data.item.currencyRates.map((e=>Object.assign(Object.assign({},e),{rate:Number(e.rate)})))),a.value=e.data.item,n.value=nt.Ay.formatDate(new Date,st),r.value=e.data.item.meta,u.value=[],e.data.item.balances.forEach((e=>{u.value.push(e.currencyId)}))}),(e=>(n.value=nt.Ay.formatDate(new Date,st),a.value=null,r.value=null,u.value=[],console.error("[Budgets Store] fetchBudget",e),e)))}function F(){const e=Yt();return e.userDefaultBudgetId?O({id:e.userDefaultBudgetId,date:nt.Ay.formatDate(nt.Ay.extractDate(M.value,lt),lt)}):(n.value=nt.Ay.formatDate(new Date,st),a.value=null,new Promise(((e,t)=>{t("Budget is not selected")})))}function R(){n.value=null,a.value=null,r.value=null,u.value=[]}function S(e){return ht(bt.BUDGET_FOLDER_CREATE),wt.createFolder(e,(e=>e),(t=>(console.error("[Budgets Store] createFolder",t,e),t)))}function x(e){if(!a.value||!a.value.structure)throw new Error("Budget or its properties are not available.");ht(bt.BUDGET_FOLDER_UPDATE);const t=a.value.structure.folders.find((t=>t.id===e.id));if(!t)throw new Error("Folder not found");const n=t.name;return U(e.id,e.name),wt.updateFolder(e,(e=>e),(t=>(U(e.id,n),console.error("[Budgets Store] updateFolder",t,e),t)))}function U(e,t){if(!a.value||!a.value.structure)throw new Error("Budget or its properties are not available.");a.value.structure.folders.forEach((a=>{a.id===e&&(a.name=t)})),(0,l.i9)(a)&&(a.value=Object.assign({},a.value))}function Q(e,t){return ht(bt.BUDGET_FOLDER_DELETE),wt.deleteFolder(e,t,(e=>e),(e=>(console.error("[Budgets Store] deleteFolder",e),e)))}function $(e,t){if(!a.value||!a.value.meta||!a.value.structure)throw new Error("Budget or its properties are not available.");ht(bt.BUDGET_FOLDER_CHANGE_ORDER);const n=a.value.structure.folders.find((t=>t.id===e));if(!n)throw new Error("Folder not found");const o=n.position,l=j(e,t);return wt.orderFolderList({budgetId:a.value.meta.id,items:l},(t=>(t.success||j(e,o),t)),(a=>(console.error("[Budgets Store] orderFolders",a,e,t),j(e,o),a)))}function j(e,t){if(!a.value||!a.value.structure)throw new Error("Budget or its properties are not available.");const n=a.value.structure.folders,o=n.findIndex((t=>t.id===e));if(-1===o||t<0||t>=n.length)return[];const[s]=n.splice(o,1);n.splice(t,0,s);const c=[];return n.forEach(((e,t)=>{e.position!==t&&c.push({id:e.id,position:t}),e.position=t})),(0,l.i9)(a)&&(a.value=Object.assign({},a.value)),c}function W(e){var t,n,o,l;if(ht(bt.BUDGET_UPDATE_ELEMENT_LIMIT),!(null===(n=null===(t=a.value)||void 0===t?void 0:t.structure)||void 0===n?void 0:n.elements))throw new Error("Budget structure or elements are not defined");const s=null===(l=null===(o=a.value)||void 0===o?void 0:o.structure)||void 0===l?void 0:l.elements.find((t=>t.id===e.elementId));if(!s)throw new Error("Budget element is missing");const c=B().cloneDeep(s);return s.budgeted=null===e.amount?0:Number(e.amount),wt.setLimit(e,(e=>(e.success||(s.budgeted=c.budgeted),e)),(t=>(console.error("[Budgets Store] setLimit",t,e),s.budgeted=c.budgeted,t)))}function q(e){var t;return ht(bt.BUDGET_ENVELOPE_CREATE),null===(t=a.value)||void 0===t||t.structure.elements.push({id:e.id,type:Lt.ENVELOPE,name:e.name,icon:e.icon,isArchived:0,spent:0,budgetSpent:0,ownerUserId:Yt().userId,currencyId:e.currencyId,folderId:e.folderId,position:-1,budgeted:0,available:0,children:[]}),ae(e.id,0,e.folderId),wt.createEnvelope(e,(t=>(t.success||oe(e.id),t)),(t=>(console.error("[Budgets Store] createEnvelope",t,e),oe(e.id),t)))}function z(e){var t,n,o,l;if(ht(bt.BUDGET_ENVELOPE_UPDATE),!(null===(n=null===(t=a.value)||void 0===t?void 0:t.structure)||void 0===n?void 0:n.elements))throw new Error("Budget structure or elements are not defined");const s=null===(l=null===(o=a.value)||void 0===o?void 0:o.structure)||void 0===l?void 0:l.elements.find((t=>t.id===e.id));if(!s)throw new Error("Budget element is missing");const c=B().cloneDeep(s);return B().merge(s,e),wt.updateEnvelope(e,(e=>(e.success||B().merge(s,c),e)),(t=>(console.error("[Budgets Store] updateEnvelope",t,e),B().merge(s,c),t)))}function P(e){return ht(bt.BUDGET_ENVELOPE_DELETE),wt.deleteEnvelope(e,(e=>e),(t=>(console.error("[Budgets Store] deleteEnvelope",t,e),t)))}function Y(e){return ht(bt.BUDGET_ELEMENT_CHANGE_CURRENCY),wt.changeElementCurrency(e,(t=>{var n,o,l,s;if(t.success&&(null===(o=null===(n=a.value)||void 0===n?void 0:n.structure)||void 0===o?void 0:o.elements)){const t=null===(s=null===(l=a.value)||void 0===l?void 0:l.structure)||void 0===s?void 0:s.elements.find((t=>t.id===e.elementId));t&&(t.currencyId=e.currencyId)}return t}),(t=>(console.error("[Budgets Store] changeElementCurrency",t,e),t)))}function V(a){e.value=a,t.value=nt.Ay.formatDate(new Date,st)}function X(){return(0,Et.A)()}function H(e){c.value[e]=!0}function G(e){delete c.value[e]}function K(e){i.value[e]=!0}function Z(e){delete i.value[e]}function J(e){let t=e;"string"===typeof e&&(t=/^\d{4}-\d{2}-\d{2}$/.test(e)?nt.Ay.extractDate(e,"YYYY-MM-DD"):nt.Ay.extractDate(e,"YYYY-MM-DD HH:mm:ss")),o.value=nt.Ay.formatDate(t,lt)}function ee(e){return d.value=!0,m.value=[],wt.getTransactionList(e,(e=>{d.value=!1,m.value=e.data.items}),(e=>(d.value=!1,m.value=[],console.error("[Budgets Store] fetchTransactionList",e),e)))}function te(e,t,n){if(ht(bt.BUDGET_CHANGE_ORDER_ELEMENT),!a.value||!a.value.meta||!a.value.meta.id)throw new Error("Budget or its properties are not available.");const o=ae(e,t,n),l=o.elements.map((e=>({id:e.id,folderId:e.folderId,position:e.position})));return wt.moveElementList({budgetId:a.value.meta.id,items:l},(e=>(e.success||ae(o.element.id,o.element.origin.position,o.element.origin.folderId),e)),(e=>(ae(o.element.id,o.element.origin.position,o.element.origin.folderId),console.error("[Budgets Store] moveElement",e),e)))}function ae(e,t,n){var o,l;if(!(null===(l=null===(o=a.value)||void 0===o?void 0:o.structure)||void 0===l?void 0:l.elements))throw new Error("Budget structure or elements are not defined");const s=B().cloneDeep(a.value.structure.elements).filter((e=>1===e.isArchived)),c=B().cloneDeep(a.value.structure.elements).filter((e=>1!==e.isArchived)),i=[],r=c.findIndex((t=>t.id===e));if(-1===r)throw new Error("Element not found");const u=c[r],d=u.folderId,m=u.position,p=c.filter((e=>e.folderId===n));return p.length>0&&(-1===m?p.forEach((e=>{e.position>=t&&(e.position+=1)})):p.forEach((e=>{m<t?e.position>m&&e.position<=t&&(e.position-=1):e.position>=t&&e.position<m&&(e.position+=1)}))),u.folderId=n,u.position=t,ne(c,n),ne(c,d),c.forEach((e=>{if(!a.value)return;const t=a.value.structure.elements.find((t=>t.id===e.id));!t||t.position===e.position&&t.folderId===e.folderId||i.push(e)})),i.sort(((e,t)=>e.position-t.position)),a.value.structure.elements=[...c,...s],{element:{id:e,origin:{position:m,folderId:d},new:{position:t,folderId:n}},elements:i}}function ne(e,t){const a=e.filter((e=>e.folderId===t));if(0!==a.length){a.sort(((e,t)=>e.position-t.position));for(let e=0;e<a.length;e++){const t=a[e];t.position!==e&&(t.position=e)}return e}}function oe(e){var t,n;if(!(null===(n=null===(t=a.value)||void 0===t?void 0:t.structure)||void 0===n?void 0:n.elements))throw new Error("Budget structure or elements are not defined");const o=B().cloneDeep(a.value.structure.elements),l=o.find((t=>t.id===e));if(!l)return;const s=l.folderId,c=o.findIndex((t=>t.id===e));-1!==c&&(o.splice(c,1),ne(o,s),a.value.structure.elements=o)}return{budgets:e,budgetsLoadedAt:t,budget:a,budgetMeta:r,budgetCurrencies:u,budgetLoadedAt:n,budgetSelectedDate:o,isBudgetsLoaded:v,isBudgetLoaded:h,isBudgetLoading:g,ownBudgets:b,budgetsOrdered:f,budgetsNotAccepted:_,isBudgetAvailable:y,budgetDate:M,budgetFoldedFolders:c,budgetUnfoldedElements:i,budgetTransactionListLoading:d,budgetTransactionList:m,isBudgetTransactionListLoading:p,canUserConfigureBudget:A,canUserUpdateLimits:k,fetchBudgets:C,createBudget:E,updateBudget:I,deleteBudget:w,grantAccess:L,revokeAccess:T,acceptAccess:N,declineAccess:D,fetchBudget:O,fetchUserBudget:F,resetCachedBudget:R,createFolder:S,updateFolder:x,deleteFolder:Q,generateId:X,foldFolder:H,unfoldFolder:G,unfoldElement:K,foldElement:Z,changeBudgetPeriod:J,fetchTransactionList:ee,moveElement:te,orderFolders:$,createEnvelope:q,updateEnvelope:z,deleteEnvelope:P,setLimit:W,changeElementCurrency:Y}})),Ot=Object.assign(new tt,{add(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] transaction.add",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/transaction/create-transaction`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},update(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] transaction.update",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/transaction/update-transaction`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},getList(e,t){return e=Ke(e),t=Ke(t),console.log("[API] transaction.getList"),Ge.A.get(`${x.Ay.backendHost()}/api/v1/transaction/get-transaction-list`).then((t=>e(t.data.data))).catch((e=>t(e.response)))},delete(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] transaction.delete",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/transaction/delete-transaction`,{id:e}).then((e=>t(e.data.data))).catch((e=>a(e.response)))},importTransactionList(e,t,a,n){a=Ke(a),n=Ke(n),console.log("[API] transaction.importTransactionList",{file:e.name,mapping:t});const o=new FormData;return o.append("file",e),o.append("mapping",JSON.stringify(t)),Ge.A.post(`${x.Ay.backendHost()}/api/v1/transaction/import-transaction-list`,o,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>a(e.data.data))).catch((e=>n(e.response||e)))},exportTransactionList(e,t,a){t=Ke(t),a=Ke(a),console.log("[API] transaction.exportTransactionList",{accountIds:e});const n=e.join(",");return Ge.A.get(`${x.Ay.backendHost()}/api/v1/transaction/export-transaction-list`,{params:{accountId:n},responseType:"blob"}).then((e=>t(e))).catch((e=>a(e.response||e)))}}),Ft=Object.assign(new tt,{getList(e,t){return e=Ke(e),t=Ke(t),console.log("[API] tag.getList"),Ge.A.get(`${x.Ay.backendHost()}/api/v1/tag/get-tag-list`).then((t=>e(t.data.data))).catch((e=>t(e)))},create(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] tag.create",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/tag/create-tag`,e).then((e=>t(e.data.data))).catch((e=>a(e)))},update(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] tag.update",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/tag/update-tag`,e).then((e=>t(e.data))).catch((e=>a(e)))},orderList(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] tag.orderList",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/tag/order-tag-list`,{changes:e}).then((e=>t(e.data.data))).catch((e=>a(e)))},delete(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] tag.delete",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/tag/delete-tag`,{id:e}).then((e=>t(e.data))).catch((e=>a(e)))},archive(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] tag.archive",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/tag/archive-tag`,{id:e}).then((e=>t(e.data))).catch((e=>a(e)))},unarchive(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] tag.unarchive",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/tag/unarchive-tag`,{id:e}).then((e=>t(e.data))).catch((e=>a(e)))}});var Rt;(function(e){e[e["FALSE"]=0]="FALSE",e[e["TRUE"]=1]="TRUE"})(Rt||(Rt={}));const St=(0,d.nY)("tags",(()=>{const e=(0,ot.Mjh)(et.cY.TAGS,[]),t=(0,ot.Mjh)(et.cY.TAGS_LOADED_AT,null),a=(0,s.EW)((()=>!!t.value)),n=(0,s.EW)((()=>{const t=Yt();return B().orderBy(B().filter(B().cloneDeep(e.value),{ownerUserId:t.userId}),"position","asc")})),o=(0,s.EW)((()=>B().orderBy(B().filter(B().cloneDeep(e.value),{isArchived:Rt.FALSE}),"position","asc"))),l=(0,s.EW)((()=>B().orderBy(B().filter(B().cloneDeep(e.value),{isArchived:Rt.TRUE}),"updatedAt","desc")));function c(){return Ft.getList((e=>{v(e.items)}),(e=>e))}function i(t){ht(bt.TAG_CREATE),t.id=(0,Et.A)();const a=Yt(),n=B().findLast(B().filter(e.value,{ownerUserId:a.userId}),(e=>e.name.toLowerCase()===t.name.toLowerCase()));if(n)return new Promise(((e,a)=>{t.name?n&&e(n):a("Tag is empty")}));const o=Dt();return Ft.create(t,(e=>(b(e.item),o.resetCachedBudget(),e.item)),(e=>e))}function r(t){ht(bt.TAG_UPDATE);const a=B().findLast(B().filter(e.value,{ownerUserId:Yt().userId}),(e=>e.name.toLowerCase()===t.name.toLowerCase()&&e.id!==t.id));return a?new Promise(((e,t)=>{t("Tag name exists")})):Ft.update(t,(e=>(f(t),!!e.data)),(e=>e))}function u(e){ht(bt.TAG_DELETE);const t=Qt(),a=Dt();return Ft.delete(e,(n=>!!n.data&&(h(e),t.TRANSACTIONS_TAG_DELETE(e),a.resetCachedBudget(),!0)),(e=>e))}function d(e){ht(bt.TAG_ARCHIVE);const t=Dt();return Ft.archive(e,(a=>!!a.data&&(_({id:e,isArchived:Rt.TRUE}),t.resetCachedBudget(),!0)),(e=>e))}function m(e){ht(bt.TAG_UNARCHIVE);const t=Dt();return Ft.unarchive(e,(a=>!!a.data&&(_({id:e,isArchived:Rt.FALSE}),t.resetCachedBudget(),!0)),(e=>e))}function p(e){ht(bt.TAG_CHANGE_ORDER,e);let t=B().cloneDeep(n.value);const a={};if("name"===e.type)t=B().orderBy(t,["name"],[e.direction]);else if("count"===e.type){const n=Qt();t.forEach((e=>{a[e.id]=B().filter(n.transactions,{tagId:e.id}).length})),t=B().orderBy(t,(e=>a[e.id]),[e.direction])}const o=[];return t.forEach((e=>{o.push(e.id)})),g(o)}function g(t){ht(bt.TAG_ORDER_LIST);const a=pt(e.value,t);return a.length?Ft.orderList(a,(e=>(v(e.items),e.items)),(e=>e)):new Promise(((e,t)=>{t("No changes")}))}function v(a){e.value=a,t.value=nt.Ay.formatDate(new Date,st)}function b(t){t.isArchived=Rt.FALSE,e.value.push(t)}function f(t){const a=B().cloneDeep(e.value),n=B().cloneDeep(B().find(a,{id:t.id}));B().remove(a,(e=>e.id===t.id)),a.push(B().extend(n,t)),e.value=a}function h(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t)),e.value=a}function _(t){const a=B().cloneDeep(B().find(e.value,{id:t.id}));a.isArchived=t.isArchived;const n=B().cloneDeep(e.value);B().remove(n,(e=>e.id===t.id)),n.push(a),e.value=n}return{tags:e,tagsLoadedAt:t,isTagsLoaded:a,ownTags:n,tagsOrdered:o,tagsArchived:l,fetchTags:c,createTag:i,updateTag:r,deleteTag:u,archiveTag:d,unarchiveTag:m,changeTagsSortMode:p,orderTagList:g}})),xt=Object.assign(new tt,{getList(e,t){return e=Ke(e),t=Ke(t),console.log("[API] payee.getList"),Ge.A.get(`${x.Ay.backendHost()}/api/v1/payee/get-payee-list`).then((t=>e(t.data.data))).catch((e=>t(e.response)))},create(e={},t,a){return t=Ke(t),a=Ke(a),console.log("[API] payee.create",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/payee/create-payee`,e).then((e=>t(e.data.data))).catch((e=>a(e.response)))},update(e={},t,a){return t=Ke(t),a=Ke(a),console.log("[API] payee.update",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/payee/update-payee`,e).then((e=>t(e.data))).catch((e=>a(e.response)))},orderList(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] payee.orderList",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/payee/order-payee-list`,{changes:e}).then((e=>t(e.data.data))).catch((e=>a(e.response)))},delete(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] payee.delete",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/payee/delete-payee`,{id:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},archive(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] payee.archive",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/payee/archive-payee`,{id:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},unarchive(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] payee.unarchive",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/payee/unarchive-payee`,{id:e}).then((e=>t(e.data))).catch((e=>a(e.response)))}}),Ut=(0,d.nY)("payees",(()=>{const e=(0,ot.Mjh)(et.cY.PAYEES,[]),t=(0,ot.Mjh)(et.cY.PAYEES_LOADED_AT,null),a=(0,s.EW)((()=>!!t.value)),n=(0,s.EW)((()=>{const t=Yt();return B().orderBy(B().filter(B().cloneDeep(e.value),{ownerUserId:t.userId}),"position","asc")})),o=(0,s.EW)((()=>B().orderBy(B().filter(B().cloneDeep(e.value),{isArchived:Rt.FALSE}),"position","asc"))),l=(0,s.EW)((()=>B().orderBy(B().filter(B().cloneDeep(e.value),{isArchived:Rt.TRUE}),"updatedAt","desc")));function c(){return xt.getList((e=>{v(e.items)}),(e=>(console.log("Payees error",e),e)))}function i(t){ht(bt.PAYEE_CREATE),t.id=(0,Et.A)();const a=Yt(),n=B().findLast(B().filter(e.value,{ownerUserId:a.userId}),(e=>e.name.toLowerCase()===t.name.toLowerCase()));return n?new Promise(((e,a)=>{t.name?n&&e(n):a("Payee name is empty")})):xt.create(t,(e=>(b(e.item),e.item)),(e=>(console.log("Payees error",e),e)))}function r(t){ht(bt.PAYEE_UPDATE);const a=Yt(),n=B().findLast(B().filter(e.value,{ownerUserId:a.userId}),(e=>e.name.toLowerCase()===t.name.toLowerCase()&&e.id!==t.id));return n?new Promise(((e,t)=>{t("Payee name exists")})):xt.update(t,(()=>(f(t),t)),(e=>(console.log("Payees error",e),e)))}function u(t){ht(bt.PAYEE_ORDER_LIST);const a=pt(e.value,t);return a.length?xt.orderList(a,(e=>(v(e.items),e.items)),(e=>(console.log("Payees error",e),e))):new Promise(((e,t)=>{t("No changes")}))}function d(e){ht(bt.PAYEE_DELETE);const t=Qt();return xt.delete(e,(a=>!!a.data&&(h(e),t.TRANSACTIONS_PAYEE_DELETE(e),!0)),(e=>(console.log("Payees error",e),e)))}function m(e){ht(bt.PAYEE_CHANGE_ORDER,e);let t=B().cloneDeep(n.value);const a={};if("name"===e.type)t=B().orderBy(t,["name"],[e.direction]);else if("count"===e.type){const n=Qt();t.forEach((e=>{a[e.id]=B().filter(n.transactions,{payeeId:e.id}).length})),t=B().orderBy(t,(e=>a[e.id]),[e.direction])}const o=[];return t.forEach((e=>{o.push(e.id)})),u(o)}function p(e){return ht(bt.PAYEE_ARCHIVE),xt.archive(e,(t=>!!t.data&&(_({id:e,isArchived:Rt.TRUE}),!0)),(e=>(console.log("Payees error",e),e)))}function g(e){return ht(bt.PAYEE_UNARCHIVE),xt.unarchive(e,(t=>!!t.data&&(_({id:e,isArchived:Rt.FALSE}),!0)),(e=>(console.log("Payees error",e),e)))}function v(a){e.value=a,t.value=nt.Ay.formatDate(new Date,st)}function b(t){e.value.push(t)}function f(t){const a=B().cloneDeep(e.value);let n=B().cloneDeep(B().find(a,{id:t.id}));n=B().extend(n,t),B().remove(a,(e=>e.id===t.id)),a.push(n),e.value=a}function h(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t)),e.value=a}function _(t){const a=B().cloneDeep(B().find(e.value,{id:t.id}));a.isArchived=t.isArchived;const n=B().cloneDeep(e.value);B().remove(n,(e=>e.id===t.id)),n.push(a),e.value=n}return{payees:e,payeesLoadedAt:t,isPayeesLoaded:a,ownPayees:n,payeesOrdered:o,payeesArchived:l,fetchPayees:c,createPayee:i,updatePayee:r,orderPayeeList:u,deletePayee:d,changePayeesSortMode:m,archivePayee:p,unarchivePayee:g}})),Qt=(0,d.nY)("transactions",(()=>{const e=(0,ot.Mjh)(et.cY.TRANSACTIONS,[]),t=(0,ot.Mjh)(et.cY.TRANSACTIONS_LOADED_AT,null),a=(0,s.EW)((()=>!!t.value)),n=(0,s.EW)((()=>{const t=$t(),a=St(),n=Ut(),o=Vt(),l=t.categories,s=a.tags,c=n.payees,i=o.accounts,r=[];return B().orderBy(e.value,"date","desc").forEach((e=>{var t,a,n,o,u;const d=Object.assign(Object.assign({},e),{amount:Number(e.amount),amountRecipient:null!==e.amountRecipient?Number(e.amountRecipient):null,account:null,accountRecipient:null,category:null,tag:null,payee:null,search:null});d.account=null!==(t=B().find(i,{id:e.accountId}))&&void 0!==t?t:null,d.accountRecipient=null!==(a=B().find(i,{id:e.accountRecipientId}))&&void 0!==a?a:null,d.category=B().find(l,{id:e.categoryId}),d.tag=B().find(s,{id:e.tagId}),d.payee=B().find(c,{id:e.payeeId}),d.search=[d.amount,d.amountRecipient,B().toLower("@"+e.author.name),B().toLower((null===(n=d.category)||void 0===n?void 0:n.name)||""),B().toLower(e.description),B().toLower((null===(o=d.payee)||void 0===o?void 0:o.name)||""),B().toLower((null===(u=d.tag)||void 0===u?void 0:u.name)||""),"expense"===e.type?"-":"+",B().toLower(e.type),e.date].join("|"),r.push(d)})),r})),o=(0,s.EW)((()=>n.value));function l(e){ht(bt.TRANSACTION_CREATE);const t=Vt(),a=Dt();return Ot.add(e,(e=>(t.updateAccounts(e.accounts),u(e.item),a.resetCachedBudget(),e.item)),(e=>(console.log("[ERROR] Transactions store",e),e)))}function c(e){ht(bt.TRANSACTION_UPDATE);const t=Vt(),a=Dt();return Ot.update(e,(e=>(t.updateAccounts(e.accounts),d(e.item),a.resetCachedBudget(),e.item)),(e=>(console.log("[ERROR] Transactions store",e),e)))}function i(){return Ot.getList((e=>{p(e.items)}),(e=>(console.log("[ERROR] Transactions store",e),e)))}function r(e){ht(bt.TRANSACTION_DELETE);const t=Vt(),a=Dt();return Ot.delete(e,(n=>(t.updateAccounts(n.accounts),m(e),a.resetCachedBudget(),n.item)),(e=>(console.log("[ERROR] Transactions store",e),e)))}function u(t){console.log("TRANSACTION_ADDED",t),e.value.push(Object.assign(Object.assign({},t),{amount:Number(t.amount),amountRecipient:null!==t.amountRecipient?Number(t.amountRecipient):null}))}function d(t){B().remove(e.value,(e=>e.id===t.id)),e.value.push(Object.assign(Object.assign({},t),{amount:Number(t.amount),amountRecipient:null!==t.amountRecipient?Number(t.amountRecipient):null}))}function m(t){B().remove(e.value,(e=>e.id===t))}function p(a){e.value=a.map((e=>Object.assign(Object.assign({},e),{amount:Number(e.amount),amountRecipient:null!==e.amountRecipient?Number(e.amountRecipient):null}))),t.value=nt.Ay.formatDate(new Date,st)}function g(t){e.value.forEach((e=>{e.tagId===t&&(e.tagId=null)}))}function v(t){e.value.forEach((e=>{e.payeeId===t&&(e.payeeId=null)}))}function b(t){e.value.forEach((e=>{e.categoryId===t&&(e.categoryId=null)}))}function f(t){const a=B().cloneDeep(e.value);a.forEach((e=>{e.categoryId===t.oldId&&(e.categoryId=t.newId)})),e.value=a}function h(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.accountId===t)),e.value=a}return{_transactions:e,transactions:n,transactionsLoadedAt:t,isTransactionsLoaded:a,transactionsOrdered:o,createTransaction:l,updateTransaction:c,fetchTransactions:i,deleteTransaction:r,TRANSACTION_ADDED:u,TRANSACTIONS_TAG_DELETE:g,TRANSACTIONS_PAYEE_DELETE:v,TRANSACTIONS_CATEGORY_DELETE:b,TRANSACTIONS_CATEGORY_REPLACE:f,TRANSACTIONS_ACCOUNT_DELETE:h}})),$t=(0,d.nY)("categories",(()=>{const e=(0,ot.Mjh)(et.cY.CATEGORIES,[]),t=(0,ot.Mjh)(et.cY.CATEGORIES_LOADED_AT,null),a=(0,s.EW)((()=>!!t.value)),n=(0,s.EW)((()=>{const t=Yt();return B().orderBy(B().filter(B().cloneDeep(e.value),{ownerUserId:t.userId}),"position","asc")})),o=(0,s.EW)((()=>B().orderBy(B().filter(B().cloneDeep(e.value),{isArchived:Rt.FALSE}),"position","asc"))),l=(0,s.EW)((()=>B().orderBy(B().filter(B().cloneDeep(e.value),{isArchived:Rt.TRUE}),"updatedAt","desc")));function c(){return It.getList((e=>{b(e.items)}),(e=>(console.log("[ERROR] Categories store",e),e)))}function i(t){ht(bt.CATEGORY_CREATE),t.id=(0,Et.A)();const a=Yt(),n=B().findLast(B().filter(e.value,{ownerUserId:a.userId}),(e=>e.name.toLowerCase()===t.name.toLowerCase()));if(n)return new Promise(((e,a)=>{t.name?n&&e(n):a("Category name is empty")}));const o=Dt();return It.create(t,(e=>(f(e.item),o.resetCachedBudget(),e.item)),(e=>(console.log("[ERROR] Categories store",e),e)))}function r(t){ht(bt.CATEGORY_UPDATE);const a=Yt(),n=B().findLast(B().filter(e.value,{ownerUserId:a.userId}),(e=>e.name.toLowerCase()===t.name.toLowerCase()&&e.id!==t.id));return n?new Promise(((e,t)=>{t("Category already exists")})):It.update(t,(e=>(h(t),!!e.data)),(e=>(console.log("[ERROR] Categories store",e),e)))}function u(t){ht(bt.CATEGORY_ORDER_LIST);const a=pt(e.value,t);return a.length?It.orderList(a,(e=>(b(e.items),e.items)),(e=>(console.log("[ERROR] Categories store",e),e))):new Promise(((e,t)=>{t("No changes")}))}function d(e){ht(bt.CATEGORY_DELETE);const t=Dt(),a=Qt();return It.delete(e,(n=>!!n.data&&(a.TRANSACTIONS_CATEGORY_DELETE(e),_(e),t.resetCachedBudget(),!0)),(e=>(console.log("[ERROR] Categories store",e),e)))}function m(e){ht(bt.CATEGORY_REPLACE);const t=Dt(),a=Qt();return It.replace(e.oldId,e.newId,(()=>(a.TRANSACTIONS_CATEGORY_REPLACE(e),_(e.oldId),t.resetCachedBudget(),!0)),(e=>(console.log("[ERROR] Categories store",e),e)))}function p(e){ht(bt.CATEGORY_ARCHIVE);const t=Dt();return It.archive(e,(a=>!!a.data&&(y({id:e,isArchived:Rt.TRUE}),t.resetCachedBudget(),!0)),(e=>(console.log("[ERROR] Categories store",e),e)))}function g(e){ht(bt.CATEGORY_UNARCHIVE);const t=Dt();return It.unarchive(e,(a=>!!a.data&&(y({id:e,isArchived:Rt.FALSE}),t.resetCachedBudget(),!0)),(e=>(console.log("[ERROR] Categories store",e),e)))}function v(e){ht(bt.CATEGORY_CHANGE_ORDER,e);let t=B().cloneDeep(n.value);const a={};if("name"===e.type)t=B().orderBy(t,["name"],[e.direction]);else if("count"===e.type){const n=Qt();t.forEach((e=>{a[e.id]=B().filter(n.transactions,{categoryId:e.id}).length})),t=B().orderBy(t,(e=>a[e.id]),[e.direction])}const o=[];return t.forEach((e=>{o.push(e.id)})),u(o)}function b(a){e.value=a,t.value=nt.Ay.formatDate(new Date,st)}function f(t){e.value.push(t)}function h(t){const a=B().cloneDeep(e.value);let n=B().cloneDeep(B().find(e.value,{id:t.id}));n=B().extend(n,t),B().remove(a,(e=>e.id===t.id)),a.push(n),e.value=a}function _(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t)),e.value=a}function y(t){const a=B().find(e.value,{id:t.id});a&&(a.isArchived=t.isArchived)}return{categories:e,categoriesLoadedAt:t,isCategoriesLoaded:a,ownCategories:n,categoriesOrdered:o,categoriesArchived:l,fetchCategories:c,createCategory:i,updateCategory:r,orderCategoryList:u,deleteCategory:d,replaceCategory:m,archiveCategory:p,unarchiveCategory:g,changeCategoriesSortMode:v}})),jt=Object.assign(new tt,{getConnectionList(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] connection.getUserList",e),Ge.A.get(`${x.Ay.backendHost()}/api/v1/connection/get-connection-list`).then((e=>t(e.data))).catch((e=>a(e.response)))},generateInvite(e,t){return e=Ke(e),t=Ke(t),console.log("[API] connection.generateInvite"),Ge.A.post(`${x.Ay.backendHost()}/api/v1/connection/generate-invite`).then((t=>e(t.data))).catch((e=>t(e.response)))},deleteInvite(e,t){return e=Ke(e),t=Ke(t),console.log("[API] connection.deleteInvite"),Ge.A.post(`${x.Ay.backendHost()}/api/v1/connection/delete-invite`).then((t=>e(t.data))).catch((e=>t(e.response)))},acceptInvite(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] connection.acceptInvite",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/connection/accept-invite`,{code:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},deleteConnection(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] connection.delete",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/connection/delete-connection`,{id:e}).then((e=>t(e.data))).catch((e=>a(e.response)))},setAccountAccess(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] connection.setAccountAccess",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/connection/set-account-access`,{userId:e.userId,accountId:e.accountId,role:e.role}).then((e=>t(e.data))).catch((e=>a(e.response)))},revokeAccountAccess(e,t,a){return t=Ke(t),a=Ke(a),console.log("[API] connection.revokeAccountAccess",e),Ge.A.post(`${x.Ay.backendHost()}/api/v1/connection/revoke-account-access`,{userId:e.userId,accountId:e.accountId}).then((e=>t(e.data))).catch((e=>a(e.response)))}});var Wt=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};const qt=(0,d.nY)("connections",(()=>{const e=(0,ot.Mjh)(et.cY.CONNECTIONS,[]),t=(0,ot.Mjh)(et.cY.CONNECTIONS_LOADED_AT,null),a=(0,s.EW)((()=>!!t.value));function n(){return Wt(this,void 0,void 0,(function*(){return jt.getConnectionList({},(e=>{d(e.data.items)}),((e={})=>e))}))}function o(){return Wt(this,void 0,void 0,(function*(){return ht(bt.CONNECTION_GENERATE_INVITE),jt.generateInvite((e=>e.data.item||!1),((e={})=>e))}))}function l(){return Wt(this,void 0,void 0,(function*(){return ht(bt.CONNECTION_DELETE_INVITE),jt.deleteInvite((e=>!!e.data),((e={})=>e))}))}function c(e){return Wt(this,void 0,void 0,(function*(){return ht(bt.CONNECTION_ACCEPT_INVITE),jt.acceptInvite(e,(e=>(d(e.data.items),!!e.data)),((e={})=>e))}))}function i(e){return Wt(this,void 0,void 0,(function*(){return ht(bt.CONNECTION_DELETE),jt.deleteConnection(e,(t=>(m(e),!!t.data)),((e={})=>e))}))}function r(t){return Wt(this,void 0,void 0,(function*(){ht(bt.CONNECTION_UPDATE_ACCOUNT_ACCESS);const a=Vt();return jt.setAccountAccess(t,(n=>(a.accessUpdate({request:t,connections:e.value}),!!n.data)),((e={})=>e))}))}function u(e){return Wt(this,void 0,void 0,(function*(){ht(bt.CONNECTION_REVOKE_ACCOUNT_ACCESS);const t=Vt();return jt.revokeAccountAccess(e,(a=>(t.accessDelete(e),!!a.data)),((e={})=>e))}))}function d(a){e.value=a,t.value=nt.Ay.formatDate(new Date,st)}function m(t){B().remove(e.value,(e=>e.user.id===t));const a=zt();a.fetchAll()}function p(e){const t=Yt(),a=t.userId,n=Dt(),o=[];return B().forEach(n.budgets,(t=>{let n=t.access.find((t=>t.user.id===e));n&&("owner"===n.role?(n=t.access.find((e=>e.user.id===a)),n&&o.push({id:t.id,name:t.name,user:{id:n.user.id,name:n.user.name,avatar:n.user.avatar},role:n.role})):o.push({id:t.id,name:t.name,user:{id:n.user.id,name:n.user.name,avatar:n.user.avatar},role:n.role}))})),o}function g(e){const t=Yt(),a=t.userId,n=Vt(),o=[];return B().forEach(n.accounts,(t=>{let n=t.sharedAccess.find((t=>t.user.id===e));if(n)o.push({id:t.id,name:t.name,icon:t.icon,user:{id:n.user.id,name:n.user.name,avatar:n.user.avatar},role:n.role});else{if(n=t.sharedAccess.find((e=>e.user.id===a)),!n)return;o.push({id:t.id,name:t.name,icon:t.icon,user:{id:n.user.id,name:n.user.name,avatar:n.user.avatar},role:n.role})}})),o}return{connections:e,connectionsLoadedAt:t,isConnectionsLoaded:a,fetchConnections:n,generateConnectionInvite:o,deleteConnectionInvite:l,acceptConnectionInvite:c,deleteConnection:i,setAccountAccess:r,revokeAccountAccess:u,getSharedBudgets:p,getSharedAccounts:g}})),zt=(0,d.nY)("sync",(()=>{const e=(0,l.KR)(!1),t=(0,s.EW)((()=>e)),a=(0,s.EW)((()=>Ct().isAccountFoldersLoaded&&Vt().isAccountsLoaded&&$t().isCategoriesLoaded&&St().isTagsLoaded&&Ut().isPayeesLoaded&&Dt().isBudgetsLoaded&&ct().isCurrenciesLoaded&&ut().isCurrencyRatesLoaded&&qt().isConnectionsLoaded&&Yt().isUserDataLoaded&&Qt().isTransactionsLoaded));function n(){return c(),Promise.all([$t().fetchCategories(),St().fetchTags(),Ut().fetchPayees(),Ct().fetchAccountFolders(),Vt().fetchAccounts(),Qt().fetchTransactions(),ct().fetchCurrencies(),ut().fetchCurrencyRates(),qt().fetchConnections(),Dt().fetchBudgets(),Yt().fetchUserData().then((()=>{Dt().fetchUserBudget()}))]).then((()=>{e.value=!0}))}function o(){const e=[{updatedAt:Yt().userDataLoadedAt,timeout:{minutes:24},update:()=>{Yt().fetchUserData()}},{updatedAt:Ct().accountFoldersLoadedAt,timeout:{minutes:10},update:()=>{Ct().fetchAccountFolders()}},{updatedAt:Vt().accountsLoadedAt,timeout:{minutes:10},update:()=>{Vt().fetchAccounts()}},{updatedAt:$t().categoriesLoadedAt,timeout:{minutes:10},update:()=>{$t().fetchCategories()}},{updatedAt:St().tagsLoadedAt,timeout:{minutes:10},update:()=>{St().fetchTags()}},{updatedAt:Ut().payeesLoadedAt,timeout:{minutes:10},update:()=>{Ut().fetchPayees()}},{updatedAt:Qt().transactionsLoadedAt,timeout:{minutes:10},update:()=>{Qt().fetchTransactions()}},{updatedAt:ct().currenciesLoadedAt,timeout:{hours:24},update:()=>{ct().fetchCurrencies()}},{updatedAt:ut().currencyRatesLoadedAt,timeout:{hours:24},update:()=>{ut().fetchCurrencyRates()}},{updatedAt:qt().connectionsLoadedAt,timeout:{minutes:10},update:()=>{qt().fetchConnections()}},{updatedAt:Dt().budgetsLoadedAt,timeout:{minutes:10},update:()=>{Dt().fetchBudgets()}},{updatedAt:Dt().budgetLoadedAt,timeout:{minutes:10},update:()=>{Dt().fetchUserBudget()}}],t=new Date;e.forEach((e=>{let a=!1;if(e.updatedAt){const n=nt.Ay.addToDate(nt.Ay.extractDate(e.updatedAt,st),e.timeout);a=t>n}else a=!0;a&&e.update()}))}function c(){const t=Object.assign({},et.cY);for(const e in t)t.hasOwnProperty(e)&&"string"===typeof t[e]&&(0,et.Ai)(t[e]);e.value=!1}return{initialSync:e,isInitialSynced:t,isFullyLoaded:a,fetchAll:n,fetchUpdates:o,clearCache:c}}));var Pt;(function(e){e["CURRENCY"]="currency",e["CURRENCY_ID"]="currency_id",e["REPORT_PERIOD"]="report_period",e["BUDGET"]="budget",e["ONBOARDING"]="onboarding"})(Pt||(Pt={}));const Yt=(0,d.nY)("users",(()=>{const e=(0,l.KR)(null),t=(0,ot.Mjh)(et.cY.USER_DATA,null,{serializer:ot.dbR.object}),a=(0,ot.Mjh)(et.cY.USER_DATA_LOADED_AT,null),n=(0,s.EW)((()=>!!a.value&&!!t.value)),o=(0,s.EW)((()=>(0,et.y0)())),c=(0,s.EW)((()=>{var e;if(!(null===(e=t.value)||void 0===e?void 0:e.id))throw new Error("User ID is not available");return t.value.id})),i=(0,s.EW)((()=>{if(!t.value)throw new Error("User data is not available");return t.value.avatar||""})),r=(0,s.EW)((()=>{var e;if(!(null===(e=t.value)||void 0===e?void 0:e.name))throw new Error("User name is not available");return t.value.name})),u=(0,s.EW)((()=>{var e;if(!(null===(e=t.value)||void 0===e?void 0:e.email))throw new Error("User email is not available");return t.value.email})),d=(0,s.EW)((()=>{if(!t.value)throw new Error("User data is not available");let e;if(t.value.options.forEach((t=>{t.name!==Pt.CURRENCY_ID||(e=t.value)})),void 0===e)throw new Error("User currency ID is not available");return e})),m=(0,s.EW)((()=>{if(!t.value)throw new Error("User data is not available");const e=ct();let a=null;return t.value.options.forEach((t=>{t.name===Pt.CURRENCY&&e.currencies.forEach((e=>{e.code!==t.value||(a=e)}))})),a||null})),p=(0,s.EW)((()=>{if(!t.value)throw new Error("User data is not available");let e=null;return t.value.options.forEach((t=>{if(t.name===Pt.BUDGET)return e=t.value,!1})),e||null})),g=(0,s.EW)((()=>{if(!t.value)throw new Error("User data is not available");let e=!0;return t.value.options.forEach((t=>{if(t.name===Pt.ONBOARDING)return e="completed"===t.value,!1})),e}));function v(e,t){return yt.login(e,t,(e=>(console.log("[INFO] login",e),e.token&&(ht(bt.USER_LOGIN),I(e.token),L(e.user)),e)),(e=>{throw console.log("[ERROR] login",e),e}))}function b(e){return ht(bt.USER_REGISTRATION),yt.register(e.email,e.password,e.name,(e=>!(!e.data||!e.data.user)&&(w(e.data.user),e.data.user)),(e=>(console.log("[ERROR] register",e),e)))}function f(){return ht(bt.USER_LOGOUT),T(),yt.logout((()=>!0),(e=>(console.log("[ERROR] logout",e),e)))}function h(e){return ht(bt.USER_UPDATE_NAME),yt.updateName(e,(e=>(e.data.user&&L(e.data.user),!!e.data)),(e=>(console.log("[ERROR] userUpdateName",e),e)))}function _(e){return ht(bt.USER_UPDATE_PASSWORD),yt.updatePassword(e.oldPassword,e.newPassword,(e=>e),(e=>(console.log("[ERROR] userUpdatePassword",e),e)))}function y(e){return ht(bt.USER_UPDATE_CURRENCY),yt.updateCurrency(e.currency,(e=>(e.data.user&&L(e.data.user),!!e.data)),(e=>(console.log("[ERROR] userUpdateCurrency",e),e)))}function A(){return ht(bt.USER_COMPLETE_ONBOARDING),yt.completeOnboarding((e=>(e.data.user&&L(e.data.user),!!e.data)),(e=>(console.log("[ERROR] userCompleteOnboarding",e),e)))}function k(){return yt.getUserData((e=>(L(e),!0)),(e=>(console.log("[ERROR] fetchUserData",e),e)))}function M(e){return ht(bt.USER_UPDATE_DEFAULT_BUDGET),yt.updateDefaultBudget(e,(e=>(e.data.user&&(L(e.data.user),Dt().resetCachedBudget()),!!e.data)),(e=>(console.log("[ERROR] userUpdateDefaultBudget",e),e)))}function C(e){return ht(bt.USER_REMIND_PASSWORD),yt.remindPassword(e,(()=>!0),(e=>(console.log("[ERROR] userRemindPassword",e),e)))}function E(e){return ht(bt.USER_RESET_PASSWORD),yt.resetPassword(e,(e=>!!e.data),(e=>(console.log("[ERROR] userResetPassword",e),e)))}function I(t){(0,et.WG)(t),e.value=t}function w(e){t.value=e,a.value=nt.Ay.formatDate(new Date,st)}function L(e){t.value=B().cloneDeep(e),a.value=nt.Ay.formatDate(new Date,st)}function T(){(0,et.eF)(),e.value=null,zt().clearCache()}return{token:e,userData:t,userDataLoadedAt:a,isUserDataLoaded:n,isUserAuthenticated:o,userId:c,userAvatar:i,userName:r,userLogin:u,userCurrency:m,userCurrencyId:d,userDefaultBudgetId:p,login:v,register:b,logout:f,userUpdateName:h,userUpdatePassword:_,userUpdateCurrency:y,fetchUserData:k,userUpdateDefaultBudget:M,userRemindPassword:C,userResetPassword:E,userOnboardingCompleted:g,userCompleteOnboarding:A}})),Vt=(0,d.nY)("accounts",(()=>{const e=(0,ot.Mjh)(et.cY.ACCOUNTS,[]),t=(0,ot.Mjh)(et.cY.ACCOUNTS_LOADED_AT,null),a=(0,l.KR)(null),n=(0,l.KR)(null),o=(0,s.EW)((()=>!!t.value)),c=(0,s.EW)((()=>{const t=Yt();return B().orderBy(B().filter(B().cloneDeep(e.value),{owner:{id:t.userId}}),"position","asc")})),i=(0,s.EW)((()=>B().orderBy(B().cloneDeep(e.value),"position")));function r(){return mt.getList((e=>{u(e.items)}),(e=>(console.log("Accounts error",e),e)))}function u(a){e.value=a.map((e=>Object.assign(Object.assign({},e),{balance:Number(e.balance)}))),t.value=nt.Ay.formatDate(new Date,st)}function d(t){ht(bt.ACCOUNT_SELECT);const o=B().find(e.value,{id:t});o?(a.value=t,n.value=o.owner.id):(a.value=null,n.value=null);const l=_t();t?l.setWorkspaceActiveArea():l.setSidebarActiveArea()}function m(e){ht(bt.ACCOUNT_CREATE);const t=Dt();return mt.create(e,(e=>{b(e.item),e.item.balance>0&&t.resetCachedBudget()}),(e=>(console.log("Accounts error",e),e)))}function p(e){ht(bt.ACCOUNT_UPDATE),e.updatedAt=nt.Ay.formatDate(new Date,st);const t=Dt(),a=Qt();return mt.update(e,(e=>{y(e.item),e.transaction&&(a.TRANSACTION_ADDED(e.transaction),t.resetCachedBudget())}),(e=>(console.log("Accounts error",e),e)))}function g(t){return ht(bt.ACCOUNT_DELETE),mt.delete(t,(()=>{B().remove(e.value,(e=>e.id===t));const a=Qt();a.TRANSACTIONS_ACCOUNT_DELETE(t)}),(e=>(console.log("Accounts error",e),e)))}function v(t){ht(bt.ACCOUNT_ORDER_LIST);const a=gt(e.value,t,["position","folderId"]);return a.length?mt.orderList(a,(e=>(u(e.items),e.items)),(e=>(console.log("Accounts error",e),e))):new Promise(((e,t)=>{t("No changes")}))}function b(t){const a=B().cloneDeep(e.value);B().remove(a,(e=>e.id===t.id)),u([...a,t])}function f(t){e.value.forEach((e=>{e.folderId===t.id&&(e.folderId=t.replaceId)}))}function h(t){const a=B().cloneDeep(B().find(e.value,{id:t.accountId}));a&&(B().remove(a.sharedAccess,{user:{id:t.userId}}),y(a))}function _(t){const a=B().cloneDeep(B().find(e.value,{id:t.request.accountId}));if(!a)return;const n=B().find(t.connections,{user:{id:t.request.userId}});B().remove(a.sharedAccess,{user:{id:t.request.userId}}),a.sharedAccess.push({role:t.request.role,user:n.user}),y(a)}function y(t){B().remove(e.value,(e=>e.id===t.id)),e.value.push(t)}return{accounts:e,accountsLoadedAt:t,selectedAccountId:a,selectedAccountUserId:n,isAccountsLoaded:o,ownAccounts:c,accountsOrdered:i,fetchAccounts:r,selectAccount:d,createAccount:m,updateAccount:p,deleteAccount:g,orderAccountList:v,updateAccounts:u,replaceFolder:f,accessDelete:h,accessUpdate:_}})),Bt=(0,d.nY)("transaction-modal",(()=>{const{moneyFormat:e}=rt(),t=(0,l.KR)(!1),a=(0,l.KR)(!1),n=(0,l.KR)(null),o=(0,l.KR)(null),c=(0,l.KR)(null),i=(0,l.KR)(null),r=(0,l.KR)(null),u=(0,l.KR)(null),d=(0,l.KR)(null),m=(0,l.KR)(null),p=(0,l.KR)(null),g=(0,l.KR)(null),v=(0,l.KR)(null),b=(0,l.KR)(null),f=(0,l.KR)(null),h=(0,s.EW)((()=>t.value)),_=(0,s.EW)((()=>a.value));function y(l){var s;ht(bt.UI_MODAL_TRANSACTION_OPEN,{type:l.id?"edit":"create"});const h={};h.id=l.id||(0,Et.A)(),h.isNew=!l.id,h.date=l.date||nt.Ay.formatDate(Date.now(),st),h.type=l.type||"expense";const _=Vt();h.accountId=l.accountId||_.selectedAccountId,h.accountId&&(h.userId=(null===(s=B().find(_.accountsOrdered,{id:h.accountId}))||void 0===s?void 0:s.owner.id)||null),h.accountRecipientId=l.accountRecipientId||null;const y=B().find(_.accountsOrdered,{id:h.accountId}),A=(null===y||void 0===y?void 0:y.currency.id)||null,k=B().find(_.accountsOrdered,{id:h.accountRecipientId}),M=(null===k||void 0===k?void 0:k.currency.id)||null;h.amount=l.id?e(l.amount,A,!1,!1,!1):null,h.amountRecipient=l.id?e(l.amountRecipient,M,!1,!1,!1):null,h.categoryId=l.categoryId||null,h.description=l.description||"",h.payeeId=l.payeeId||null,h.tagId=l.tagId||null,a.value=!0,t.value=h.isNew,n.value=h.id,o.value=h.date,c.value=h.type,r.value=h.accountId,i.value=h.userId,u.value=h.accountRecipientId,d.value=h.amount,m.value=h.amountRecipient,p.value=h.categoryId,g.value=h.description,v.value=h.payeeId,b.value=h.tagId,f.value=null}function A(){ht(bt.UI_MODAL_TRANSACTION_CLOSE),a.value=!1,f.value=null,i.value=null,o.value=null,c.value=null,r.value=null,u.value=null}function k(e){ht(bt.UI_MODAL_TRANSACTION_CHANGE_TYPE,{type:e}),c.value=e}function M(e){ht(bt.UI_MODAL_TRANSACTION_CHANGE_ACCOUNT),r.value=e}function C(e){ht(bt.UI_MODAL_TRANSACTION_CHANGE_ACCOUNT_RECIPIENT),u.value=e}function E(e){ht(bt.UI_MODAL_TRANSACTION_CHANGE_AMOUNT),d.value=e}function I(e){ht(bt.UI_MODAL_TRANSACTION_CHANGE_AMOUNT_RECIPIENT),m.value=e}function w(e){ht(bt.UI_MODAL_TRANSACTION_CHANGE_CATEGORY),p.value=e}function L(e){ht(bt.UI_MODAL_TRANSACTION_CHANGE_DESCRIPTION),g.value=e}function T(e){ht(bt.UI_MODAL_TRANSACTION_CHANGE_PAYEE),v.value=e}function N(e){ht(bt.UI_MODAL_TRANSACTION_CHANGE_TAG),b.value=e}function D(e){ht(bt.UI_MODAL_TRANSACTION_CHANGE_DATE),o.value=e}function O(e){f.value=e}return{transactionModalNew:t,transactionModalOpened:a,transactionModalId:n,transactionModalOpenDate:o,transactionModalType:c,transactionModalUserId:i,transactionModalAccountId:r,transactionModalAccountRecipientId:u,transactionModalAmount:d,transactionModalAmountRecipient:m,transactionModalCategoryId:p,transactionModalDescription:g,transactionModalPayeeId:v,transactionModalTagId:b,transactionModalSwitchAccount:f,isTransactionModalCreation:h,isTransactionModalOpened:_,openTransactionModal:y,closeTransactionModal:A,changeTransactionModalType:k,changeTransactionModalAccount:M,changeTransactionModalAccountRecipient:C,changeTransactionModalAmount:E,changeTransactionModalAmountRecipient:I,changeTransactionModalCategory:w,changeTransactionModalDescription:L,changeTransactionModalPayee:T,changeTransactionModalTag:N,changeTransactionModalOpenDate:D,changeTransactionModalSwitchAccount:O}}));function Xt(){const e=(e,t)=>`${e}?s=${t}`;return{avatarUrl:e}}var Ht=a(7837),Gt=a(4907),Kt=a(3316);const Zt={class:"calculator-content"},Jt={class:"calculator-grid"},ea="calculator-position",ta=(0,s.pM)({__name:"CalculatorWidget",props:{value:{}},emits:["update","focus"],setup(e,{emit:t}){const a=["+","","","","="],o=e,c=t,i=((0,Gt.A)(),(0,l.KR)()),r=(0,l.KR)({x:0,y:0}),u=(0,l.KR)(!1),d=(0,l.KR)({x:0,y:0}),m=()=>`${ea}-${window.innerWidth}x${window.innerHeight}`,p=()=>{var e;return(null===(e=window.visualViewport)||void 0===e?void 0:e.height)||window.innerHeight},g=()=>{f()},b=()=>{var e;if(!(null===(e=i.value)||void 0===e?void 0:e.$el))return{x:0,y:0};const t=i.value.$el,a=t.offsetWidth||360,n=t.offsetHeight||48;return{x:Math.max(0,Math.floor((window.innerWidth-a)/2)),y:Math.max(0,Math.floor((p()-n)/2))}},f=()=>{var e;if(!(null===(e=i.value)||void 0===e?void 0:e.$el))return;const t=localStorage.getItem(m());if(t)try{r.value=JSON.parse(t),h(),localStorage.setItem(m(),JSON.stringify(r.value))}catch(e){r.value=b(),localStorage.setItem(m(),JSON.stringify(r.value))}else r.value=b(),localStorage.setItem(m(),JSON.stringify(r.value))};(0,s.sV)((()=>{var e,t;window.addEventListener("resize",g),null===(e=window.visualViewport)||void 0===e||e.addEventListener("resize",g),(null===(t=i.value)||void 0===t?void 0:t.$el)&&i.value.$el.offsetHeight,(0,s.dY)((()=>{f()}))}));const h=()=>{var e;if(!(null===(e=i.value)||void 0===e?void 0:e.$el))return;const t=window.innerWidth-i.value.$el.offsetWidth,a=p()-i.value.$el.offsetHeight;r.value={x:Math.max(0,Math.min(r.value.x,t)),y:Math.max(0,Math.min(r.value.y,a))}},_=e=>{var t;if(!(null===(t=i.value)||void 0===t?void 0:t.$el))return;e.preventDefault(),u.value=!0;const a=i.value.$el.getBoundingClientRect(),n=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,o=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;d.value={x:n-a.left,y:o-a.top},document.addEventListener("mousemove",y),document.addEventListener("touchmove",y,{passive:!1}),document.addEventListener("mouseup",A),document.addEventListener("touchend",A)},y=e=>{var t;if(!u.value||!(null===(t=i.value)||void 0===t?void 0:t.$el))return;e.preventDefault();const a=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,n=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,o=Math.max(0,Math.min(window.innerWidth-i.value.$el.offsetWidth,a-d.value.x)),l=Math.max(0,Math.min(p()-i.value.$el.offsetHeight,n-d.value.y));r.value={x:o,y:l},localStorage.setItem(m(),JSON.stringify(r.value))},A=()=>{u.value=!1,document.removeEventListener("mousemove",y),document.removeEventListener("touchmove",y),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A)},k=e=>{const t={"":"*","":"/","":"-"},a=o.value.toString()+(t[e]||e);c("update",(0,Ne.o2)(a)),c("focus")};return(0,s.wB)((()=>o.value),(e=>{if(null===e||void 0===e?void 0:e.toString().endsWith("=")){const t=(0,Ne.o2)(e.toString()),a=(0,Ne.w9)(t);c("update",a)}}),{immediate:!0}),(0,s.hi)((()=>{var e;document.removeEventListener("mousemove",y),document.removeEventListener("touchmove",y),document.removeEventListener("mouseup",A),document.removeEventListener("touchend",A),window.removeEventListener("resize",g),null===(e=window.visualViewport)||void 0===e||e.removeEventListener("resize",g)})),(e,t)=>{const o=(0,s.g2)("q-btn"),c=(0,s.g2)("q-icon");return(0,s.uX)(),(0,s.Wv)((0,l.R1)(Kt.A),{class:"calculator-widget",style:(0,v.Tr)({position:"fixed",left:`${r.value.x}px`,top:`${r.value.y}px`,zIndex:u.value?9999:1e3,cursor:u.value?"grabbing":"default",transform:u.value?"scale(1.02)":"scale(1)"}),ref_key:"calculatorRef",ref:i},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Zt,[(0,s.Lk)("div",Jt,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(a,(e=>(0,s.bF)(o,{key:e,label:e,class:"calculator-btn",flat:"",dense:"",tabindex:"0",onClick:t=>k(e),onKeyup:(0,n.jR)((t=>k(e)),["enter"])},null,8,["label","onClick","onKeyup"]))),64))]),(0,s.Lk)("div",{class:"drag-handle",onMousedown:_,onTouchstart:_,style:(0,v.Tr)({cursor:u.value?"grabbing":"grab"})},[(0,s.bF)(c,{name:"drag_indicator",size:"20px"})],36)])])),_:1},8,["style"])}}});var aa=a(492);const na=(0,$.A)(ta,[["__scopeId","data-v-460aa75d"]]),oa=na;z()(ta,"components",{QCard:Kt.A,QBtn:W.A,QIcon:aa.A});const la={class:"calculator-input"},sa=(0,s.pM)({__name:"CalculatorInput",props:{modelValue:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,o=t,c=e=>void 0===e||null===e?"":e.toString(),i=(0,l.KR)(),r=(0,l.KR)(!1),u=e=>{var t;const a=null!==(t=null===e||void 0===e?void 0:e.toString())&&void 0!==t?t:"";if(a.endsWith("=")){const e=(0,Ne.o2)(a.slice(0,-1));if((0,Ne.NF)(e)){const t=(0,Ne.w9)(e+"=");return void o("update:modelValue",t)}}o("update:modelValue",a)},d=e=>{var t;if("Enter"===e.key){const n=(null===(t=a.modelValue)||void 0===t?void 0:t.toString())||"",l=(0,Ne.o2)(n);if(/[+\-*/]/.test(l)&&(0,Ne.NF)(l)){e.preventDefault();const t=(0,Ne.w9)(l+"=");o("update:modelValue",t)}}},m=e=>{var t;const a=e;a.relatedTarget&&a.relatedTarget.closest(".calculator-widget")?null===(t=i.value)||void 0===t||t.focus():r.value=!1},p=()=>{var e;null===(e=i.value)||void 0===e||e.focus()};return(e,t)=>((0,s.uX)(),(0,s.CE)("div",la,[(0,s.bF)((0,l.R1)(Ht.A),(0,s.v6)(e.$attrs,{"model-value":c(e.modelValue),"onUpdate:modelValue":u,ref_key:"input",ref:i,onFocus:t[0]||(t[0]=e=>r.value=!0),onBlur:m,onKeydown:d,inputmode:"decimal",pattern:"[0-9+\\-\\*\\.=,]*"}),null,16,["model-value"]),(0,s.bo)((0,s.bF)(oa,{value:c(e.modelValue),onUpdate:t[1]||(t[1]=t=>e.$emit("update:modelValue",t)),onFocus:p},null,8,["value"]),[[n.aG,r.value]])]))}}),ca=(0,$.A)(sa,[["__scopeId","data-v-5a21d27b"]]),ia=ca;z()(sa,"components",{QInput:Ht.A});const ra=(0,s.pM)({components:{CalculatorInput:ia},name:"TransactionModal",setup(){const{moneyFormat:e}=rt(),{formatNumber:t,isScientificNotation:a}=it(),n=He(),{avatarUrl:o}=Xt(),{exchange:l}=dt();return{moneyFormat:e,formatNumber:t,isScientificNotation:a,...n,avatarUrl:o,exchange:l}},data(){return{categorySearchFilter:"",tagSearchFilter:"",payeeSearchFilter:"",isAddTag:!1,tag:"",customTags:null}},computed:{...(0,d.aH)(Yt,["userId"]),...(0,d.aH)(ut,["currencyRates"]),...(0,d.aH)(St,["tags"]),...(0,d.aH)($t,["categoriesOrdered"]),...(0,d.aH)(Bt,["isTransactionModalOpened","isTransactionModalCreation","transactionModalOpenDate","transactionModalAccountId","transactionModalAmount","transactionModalAccountRecipientId","transactionModalAmountRecipient","transactionModalCategoryId","transactionModalDescription","transactionModalPayeeId","transactionModalTagId","transactionModalType","transactionModalId"]),...(0,d.aH)(Bt,{accountOwnerId:"transactionModalUserId"}),...(0,d.aH)(Vt,{accounts:"accountsOrdered"}),...(0,d.aH)(Ut,{availablePayees:"payeesOrdered"}),...(0,d.aH)(St,{availableTags:"tagsOrdered"}),...(0,d.aH)(Ct,{folders:"accountFoldersOrdered"}),isModalOpened:{get(){return this.isTransactionModalOpened},set(e){e?Bt().openTransactionModal({type:this.transactionType}):Bt().closeTransactionModal()}},transactionDate:{get(){const e=nt.Ay.extractDate(this.transactionModalOpenDate,"YYYY-MM-DD HH:mm:ss");return nt.Ay.formatDate(e,"YYYY-MM-DD")},set(e){const t=nt.Ay.extractDate(e,"YYYY-MM-DD");Bt().changeTransactionModalOpenDate(nt.Ay.formatDate(t,"YYYY-MM-DD HH:mm:ss"))}},transactionType:{get(){return this.transactionModalType},set(e){this.$refs.transactionForm&&this.$refs.transactionForm.resetValidation(),Bt().changeTransactionModalType(e),Bt().changeTransactionModalCategory(null),this.calculateAmountRecipient(this.amount)}},account:{get(){const e=B().find(this.accounts,{id:this.transactionModalAccountId});return{name:e.name,label:this.moneyFormat(e.balance,e.currency.id,!0,!0),value:this.transactionModalAccountId,icon:e.icon,currencySign:e.currency.symbol,currencyId:e.currency.id}},set(e){Bt().changeTransactionModalAccount(e.value),this.isTransactionModalCreation&&this.calculateAmountRecipient(this.amount)}},accountRecipient:{get(){const e=B().find(this.accounts,{id:this.transactionModalAccountRecipientId});return e?{label:e.name+" "+this.moneyFormat(e.balance,e.currency.id,!0,!0),value:this.transactionModalAccountRecipientId,icon:e.icon,currencySign:e.currency.symbol,currencyId:e.currency.id}:null},set(e){Bt().changeTransactionModalAccountRecipient(e.value),this.calculateAmountRecipient(this.amount)}},amount:{get(){return this.transactionModalAmount},set(e){Bt().changeTransactionModalAmount(e),this.calculateAmountRecipient(e)}},amountRecipient:{get(){return this.transactionModalAmountRecipient},set(e){Bt().changeTransactionModalAmountRecipient(e)}},category:{get(){const e=B().find(this.categories,{id:this.transactionModalCategoryId});return e?{label:e.name,value:e.id,icon:e.icon}:null},set(e){Bt().changeTransactionModalCategory(e?e.value:null)}},description:{get(){return this.transactionModalDescription},set(e){Bt().changeTransactionModalDescription(e)}},payee:{get(){const e=B().find(this.payees,{id:this.transactionModalPayeeId});return e?{label:e.name,value:e.id}:null},set(e){Bt().changeTransactionModalPayee(e?e.value:null)}},accountsOptions:function(){let e=[],t={};return this.folders.forEach((e=>{t[e.id]=!!e.isVisible})),this.accounts.forEach((a=>{this.isTransactionModalCreation&&!t[a.folderId]||e.push({label:a.name+" "+this.moneyFormat(a.balance,a.currency.id,!0,!0),value:a.id,icon:a.icon,currencySign:a.currency.symbol})})),e},categoriesOptions:function(){let e=[];return this.categories.forEach((t=>{(!this.categorySearchFilter||t.name.toLowerCase().indexOf(this.categorySearchFilter)>-1)&&e.push({label:t.name,value:t.id,icon:t.icon})})),e},tagsOptions:function(){let e=[];return B().filter(this.tags,{ownerUserId:this.accountOwnerId}).forEach((t=>{(!this.tagSearchFilter||t.name.toLowerCase().indexOf(this.tagSearchFilter)>-1)&&e.push({label:t.name,value:t.id})})),e},payeesOptions:function(){let e=[];return this.payees.forEach((t=>{(!this.payeeSearchFilter||t.name.toLowerCase().indexOf(this.payeeSearchFilter)>-1)&&e.push({label:t.name,value:t.id})})),e},isTransfer:function(){return"transfer"===this.transactionModalType},isExpense:function(){return"expense"===this.transactionModalType},categories:function(){return B().filter(this.categoriesOrdered,{type:this.transactionType,ownerUserId:this.accountOwnerId})},payees:function(){return B().filter(this.availablePayees,{ownerUserId:this.accountOwnerId})},accountOwnerTags:{get(){if(this.customTags)return this.customTags;let e=B().filter(this.availableTags,{isArchived:0,ownerUserId:this.accountOwnerId});if(this.transactionModalTagId){let t=!!B().findLast(e,{id:this.transactionModalTagId});if(!t){const t=B().find(this.tags,{id:this.transactionModalTagId});t&&e.push(t)}}return e},set(e){this.customTags=e}},canChangeAccountData:function(){if(!this.transactionModalAccountId)return!1;const e=B().find(this.accounts,{id:this.transactionModalAccountId});if(e.owner.id===this.userId)return!0;let t=!1;return e.sharedAccess.forEach((e=>{e.user?.id===this.userId&&"admin"===e.role&&(t=!0)})),t}},methods:{calculateAmountRecipient:function(e){if(!this.accountRecipient||!e||isNaN(e))return void(this.amountRecipient=e);let t=this.exchange(this.account.currencyId,this.accountRecipient.currencyId,e);this.isScientificNotation(t)&&(t=this.formatNumber(t,8,!1)),this.amountRecipient=t},createCategory:function(e,t){this.canChangeAccountData?this.isValidCategoryName(e)&&$t().createCategory({name:e,type:this.transactionModalType,accountId:this.transactionModalAccountId}).then((e=>{Bt().changeTransactionModalCategory(e.id),t({label:e.name,value:e.id,icon:e.icon})})):t()},filterCategories:function(e,t){t((()=>{this.categorySearchFilter=e.toLowerCase()}))},filterCategoriesAbort:function(){this.categorySearchFilter=""},filterTags:function(e,t){t((()=>{this.tagSearchFilter=e.toLowerCase()}))},filterTagsAbort:function(){this.tagSearchFilter=""},createPayee:function(e,t){this.canChangeAccountData?this.isValidPayeeName(e)&&Ut().createPayee({name:e,accountId:this.transactionModalAccountId}).then((e=>{console.log(e),Bt().changeTransactionModalPayee(e.id),t({label:e.name,value:e.id})})):t()},filterPayees:function(e,t){t((()=>{this.payeeSearchFilter=e.toLowerCase()}))},filterPayeesAbort:function(){this.payeeSearchFilter=""},selectTag:function(e){this.transactionModalTagId===e&&(e=null),Bt().changeTransactionModalTag(e)},createTagFromSelect:function(e,t){this.canChangeAccountData?this.isValidTagName(e)&&St().createTag({name:e,accountId:this.transactionModalAccountId}).then((e=>{this.selectTag(e.id),t({label:e.name,value:e.id}),this.closeAddTagModal()})):t()},createNewTag:function(){if(!this.canChangeAccountData)return done(),void this.closeAddTagModal();this.closeAddTagModal();const e=B().find(this.tags,{id:this.tag.value});if(B().find(this.accountOwnerTags,{id:e.id}))this.selectTag(e.id);else if(e){let t=B().cloneDeep(this.accountOwnerTags);t.push(e),this.accountOwnerTags=t,this.selectTag(e.id)}else St().createTag({name:this.tag.label,accountId:this.transactionModalAccountId}).then((e=>{Bt().changeTransactionModalTag(e.id)}))},submit:function(){const e={id:this.transactionModalId,type:this.transactionModalType,amount:Number(this.transactionModalAmount),amountRecipient:null===this.transactionModalAmountRecipient?null:Number(this.transactionModalAmountRecipient),accountId:this.transactionModalAccountId,accountRecipientId:this.transactionModalAccountRecipientId,categoryId:this.transactionModalCategoryId,description:this.transactionModalDescription||"",payeeId:this.transactionModalPayeeId,tagId:this.transactionModalTagId,date:this.transactionModalOpenDate};this.isTransactionModalCreation?Qt().createTransaction(e).then((()=>{this.closeModal(),"transfer"===e.type&&Bt().changeTransactionModalSwitchAccount(e.accountRecipientId)})):Qt().updateTransaction(e).then((()=>{this.closeModal()}))},closeModal:function(){this.$refs.transactionForm&&this.$refs.transactionForm.resetValidation(),this.categorySearchFilter="",this.tagSearchFilter="",this.payeeSearchFilter="",this.tag="",this.customTags=null,Bt().closeTransactionModal()},openAddTagModal(){this.isAddTag=!0},closeAddTagModal(){this.isAddTag=!1},swapAccounts(){if(this.account&&this.accountRecipient){const e=this.account;this.account=this.accountRecipient,this.accountRecipient=e}else this.account&&!this.accountRecipient?(this.accountRecipient=B().cloneDeep(this.account),this.account=null):!this.account&&this.accountRecipient&&(this.account=B().cloneDeep(this.accountRecipient),this.accountRecipient=null)},previousDay(){const e=nt.Ay.subtractFromDate(nt.Ay.extractDate(this.transactionDate,"YYYY-MM-DD"),{hours:24});this.transactionDate=nt.Ay.formatDate(e,"YYYY-MM-DD")}}});var ua=a(9200),da=a(4189),ma=a(8975),pa=a(8670),ga=a(6939),va=a(4940),ba=a(3952),fa=a(2669),ha=a(8672);const _a=(0,$.A)(ra,[["render",Te]]),ya=_a;z()(ra,"components",{QDialog:j.A,QCard:Kt.A,QForm:ua.A,QCardSection:da.A,QInput:Ht.A,QIcon:aa.A,QPopupProxy:ma.A,QDate:pa.A,QBtn:W.A,QBtnToggle:ga.A,QSelect:va.A,QAvatar:ba.A,QCardActions:fa.A}),z()(ra,"directives",{ClosePopup:ha.A});const Aa=["home","account_balance","wallet","savings","credit_card","account_balance_wallet","shopping_cart","shopping_bag","shopping_basket","store","bar_chart","change_history","all_inclusive","pets","support","extension","stars","alarm","celebration","fingerprint","question_mark","lightbulb","event","lock","warning","schedule","calendar_month","visibility","account_circle","medical_information","health_and_safety","credit_score","loyalty","favorite","delete","assistant_navigation","face","payments","currency_exchange","qr_code","receipt","redeem","currency_bitcoin","euro","currency_yen","currency_pound","currency_ruble","currency_lira","currency_yuan","currency_franc","trolley","location_on","map","explore","restaurant","flag","my_location","local_mall","near_me","restaurant_menu","handyman","medical_services","home_work","layers","local_activity","emergency","fastfood","navigation","local_parking","home_repair_service","local_hospital","local_police","local_florist","park","theater_comedy","local_drink","local_pizza","not_listed_location","local_post_office","wine_bar","signpost","church","local_laundry_service","ev_station","soup_kitchen","pest_control","local_pharmacy","castle","set_meal","folder","menu_book","cloud","newspaper","book","tag","functions","imagesearch_roller","mic","videocam","music_note","movie","speed","local_shipping","directions_car","flight","directions_run","flight_takeoff","directions_bus","train","directions_bike","airport_shuttle","pedal_bike","directions_boat","agriculture","local_taxi","sailing","electric_car","commute","motorcycle","tram","subway","electric_bike","snowmobile","school","construction","engineering","volunteer_activism","science","sports_esports","cake","self_improvement","sports_soccer","water","hiking","sports_basketball","theaters","sports_tennis","nights_stay","sports_gymnastics","backpack","sports_motorsports","surfing","sports_kabaddi","piano","sports_volleyball","sports_baseball","sports_martial_arts","downhill_skiing","kayaking","phishing","sports_football","skateboarding","sports_golf","sports_cricket","roller_skating","kitesurfing","rowing","scuba_diving","paragliding","snowboarding","sports_hockey","ice_skating","snowshoeing","sports_rugby","sledding","phone_iphone","print","computer","desktop_windows","headphones","mouse","watch","smart_toy","power","android","battery_6_bar","security","vpn_key","apartment","location_city","fitness_center","spa","cottage","hotel","beach_access","local_bar","luggage","casino","airplane_ticket","room_service","nightlife","local_dining","icecream","smoking_rooms","carpenter","car_repair","house","bed","chair","electric_bolt","child_care","checkroom","grass","king_bed","weekend","bedroom_baby","crib","iron","umbrella","tools_power_drill","paid","supervisor_account","trending_up","euro_symbol","front_hand","real_estate_agent","lunch_dining","local_airport","star","villa","desktop_mac","time_to_leave","mode_edit","factory","festival","sentiment_satisfied_alt","emoji_events","child_friendly"],ka=B().uniq(Aa).slice(0,45);function Ma(e,t){const a=B().uniq(Aa),n=[],o=e*t;for(let e=0;e<a.length;e+=o)n.push(a.slice(e,e+o));return n}const Ca=ka[0],Ea=ka[0],Ia=ka[0],wa=(0,d.nY)("account-modal",(()=>{const{moneyFormat:e}=rt(),t=(0,l.KR)(!1),a=(0,l.KR)([]),n=(0,l.KR)(null),o=(0,l.KR)({}),c=(0,l.KR)(!1),i=(0,l.KR)(!1),r=(0,l.KR)(null),u=(0,l.KR)(null),d=(0,l.KR)(null),m=(0,l.KR)(null),p=(0,l.KR)(null),g=(0,l.KR)(null),v=(0,s.EW)((()=>i.value)),b=(0,s.EW)((()=>c.value));function f(t){var a,n,o,l,s,c;ht(bt.UI_MODAL_ACCOUNT_OPEN);const i={};if(i.isNew=!t.id,i.id=t.id||(0,Et.A)(),i.name=null!==(a=t.name)&&void 0!==a?a:"",t.currency)i.currencyId=null!==(o=null===(n=t.currency)||void 0===n?void 0:n.id)&&void 0!==o?o:null;else if(t.currencyId)i.currencyId=null!==(l=t.currencyId)&&void 0!==l?l:null;else{const e=Yt();i.currencyId=e.userCurrencyId}i.balance=t.id?e(t.balance,i.currencyId,!1,!1,!1):0,i.icon=null!==(s=t.icon)&&void 0!==s?s:Ca,i.folderId=null!==(c=t.folderId)&&void 0!==c?c:null,M(i)}function h(){ht(bt.UI_MODAL_ACCOUNT_CLOSE),C()}function _(e){ht(bt.UI_MODAL_ACCOUNT_CHANGE_NAME),u.value=e}function y(e){ht(bt.UI_MODAL_ACCOUNT_CHANGE_BALANCE),d.value=e}function A(e){ht(bt.UI_MODAL_ACCOUNT_CHANGE_CURRENCY),m.value=e}function k(e){ht(bt.UI_MODAL_ACCOUNT_CHANGE_ICON),p.value=e}function M(e){c.value=!0,i.value=e.isNew,r.value=e.id,u.value=e.name,d.value=e.balance,m.value=e.currencyId,p.value=e.icon,g.value=e.folderId}function C(){c.value=!1,r.value=null,u.value=null,d.value=null,m.value=null,p.value=null,g.value=null}return{accountFoldersLoaded:t,accountFolders:a,accountFoldersLoadedAt:n,accountFoldersOpened:o,accountModalOpened:c,accountModalNew:i,accountModalId:r,accountModalName:u,accountModalBalance:d,accountModalCurrencyId:m,accountModalIcon:p,accountModalFolderId:g,isAccountModalCreation:v,isAccountModalOpened:b,openAccountModal:f,closeAccountModal:h,changeAccountModalName:_,changeAccountModalBalance:y,changeAccountModalCurrencyId:A,changeAccountModalIcon:k}})),La={class:"responsive-modal-section"},Ta={key:0,class:"responsive-modal-icon-label"},Na={class:"responsive-modal-icon"},Da=(0,s.pM)(Object.assign({name:"ResponsiveModalIcons"},{__name:"Icons",props:{header:{},icon:{}},emits:["update-icon"],setup(e,{emit:t}){const a=e,n=t,o=(0,Gt.A)(),c=(0,l.KR)("icons-0"),i=(0,s.EW)((()=>{let e,t;return o.screen.gt.sm?(e=6,t=8):(e=4,t=6),Ma(e,t)})),r=(0,s.EW)({get(){return a.icon||Ia},set(e){n("update-icon",e)}});return(e,t)=>{const a=(0,s.g2)("q-btn"),n=(0,s.g2)("q-carousel-slide"),u=(0,s.g2)("q-carousel");return(0,s.uX)(),(0,s.CE)("div",La,[null!==e.header?((0,s.uX)(),(0,s.CE)("div",Ta,(0,v.v_)(e.header),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",Na,[(0,s.bF)(u,{swipeable:"",animated:"",navigation:(0,l.R1)(o).screen.gt.sm,infinite:"",modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),"control-color":"purple-5",class:"responsive-modal-icon-carousel"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,((e,t)=>((0,s.uX)(),(0,s.Wv)(n,{name:"icons-"+t,class:"responsive-modal-icon",key:t},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e,(e=>((0,s.uX)(),(0,s.Wv)(a,{class:(0,v.C4)(["responsive-modal-icon-btn",r.value===e?"-active":""]),icon:e,key:e,onClick:t=>r.value=e},null,8,["class","icon","onClick"])))),128))])),_:2},1032,["name"])))),128))])),_:1},8,["navigation","modelValue"])])])}}}));var Oa=a(3454),Fa=a(8951);const Ra=Da,Sa=Ra;z()(Da,"components",{QCarousel:Oa.A,QCarouselSlide:Fa.A,QBtn:W.A});const xa={class:"self-center full-width no-outline"},Ua=(0,s.pM)({__name:"CurrencySelect",props:{modelValue:{},label:{default:""},rules:{default:()=>[]},optionDisable:{type:Function,default:()=>!1},borderless:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},dropdownIcon:{default:void 0},popupContentClass:{default:void 0},optionsSelectedClass:{default:void 0},outlined:{type:Boolean,default:!1},customClass:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,n=t,o=(0,l.KR)(null),c=ct(),i=(0,l.KR)(""),r=(0,l.KR)(""),u=(0,l.KR)(""),d=(0,s.EW)({get:()=>a.modelValue,set:e=>{var t;n("update:modelValue",e),e?(u.value=e.label,null===(t=o.value)||void 0===t||t.blur()):u.value=""}});function m(e,t){t=t.toLowerCase(),e=e.toLowerCase();let a=0,n=0;while(a<t.length&&n<e.length)t[a]===e[n]&&a++,n++;return a===t.length}const p=(0,s.EW)((()=>{const e=i.value.toLowerCase();return c.currencies.filter((t=>!e||(m(t.name,e)||m(t.symbol,e)||m(t.code,e)))).map(b)}));function g(e){const t=new Set([e.code,e.symbol,e.name]),a=Array.from(t);return a.join(", ")}function b(e){return{label:e.code,value:e.id}}function f(){var e,t;r.value=null!==(t=null===(e=d.value)||void 0===e?void 0:e.value)&&void 0!==t?t:"",n("update:modelValue",null),u.value="",i.value=""}function h(){if(!d.value&&r.value){const e=b(c.currenciesHash[r.value]);n("update:modelValue",e),u.value=e.label}else d.value?u.value=d.value.label:u.value=""}function _(e){var t;(null===(t=o.value)||void 0===t?void 0:t.hasPopupOpen)&&(i.value=e),u.value=e}function y(e,t){t((()=>{i.value=e}))}function A(){i.value="",d.value&&(u.value=d.value.label)}return(e,t)=>{const a=(0,s.g2)("q-item-label"),n=(0,s.g2)("q-item-section"),i=(0,s.g2)("q-item"),r=(0,s.g2)("q-select");return(0,s.uX)(),(0,s.Wv)(r,{ref_key:"selectRef",ref:o,class:(0,v.C4)(e.customClass),outlined:e.outlined,modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),"input-value":u.value,"use-input":"","lazy-rules":"",options:p.value,"option-disable":e.optionDisable,label:e.label,rules:e.rules,borderless:e.borderless,readonly:e.readonly,"dropdown-icon":e.dropdownIcon,"popup-content-class":e.popupContentClass,"options-selected-class":e.optionsSelectedClass,"onUpdate:inputValue":_,onPopupShow:f,onPopupHide:h,onFilter:y,onFilterAbort:A},{"selected-item":(0,s.k6)((t=>[(0,s.RG)(e.$slots,"selected-item",(0,v._B)((0,s.Ng)(t)),(()=>[(0,s.Lk)("div",xa,(0,v.v_)(t.opt.value?(0,l.R1)(c).currenciesHash[t.opt.value].code:""),1)]))])),option:(0,s.k6)((e=>[(0,s.bF)(i,(0,v._B)((0,s.Ng)(e.itemProps)),{default:(0,s.k6)((()=>[(0,s.bF)(n,null,{default:(0,s.k6)((()=>[(0,s.bF)(a,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(g((0,l.R1)(c).currenciesHash[e.opt.value])),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:3},8,["class","outlined","modelValue","input-value","options","option-disable","label","rules","borderless","readonly","dropdown-icon","popup-content-class","options-selected-class"])}}});var Qa=a(124),$a=a(5173),ja=a(3796);const Wa=Ua,qa=Wa;z()(Ua,"components",{QSelect:va.A,QItem:Qa.A,QItemSection:$a.A,QItemLabel:ja.A});const za={class:"settings-toolbar-mobile"},Pa={key:0,class:"settings-toolbar-mobile-title"},Ya={key:1,class:"settings-toolbar-mobile-title"},Va={key:0,class:"responsive-modal-header"},Ba={key:1,class:"responsive-modal-header"},Xa={class:"responsive-modal-control"},Ha={class:"responsive-modal-control-icon"},Ga={class:"responsive-modal-control"},Ka={class:"responsive-modal-control"},Za=(0,s.pM)({__name:"AccountModal",setup(e){const t=(0,l.KR)(null),a=((0,l.KR)("icons-0"),Vt()),n=wa(),o=ct(),{isNotEmpty:c,isValidNumber:i,isValidDecimalNumber:r,isValidFormula:u,isValidAccountName:d}=(qt(),He()),m=(0,s.EW)({get:()=>n.isAccountModalOpened,set:e=>{e?n.openAccountModal({}):n.closeAccountModal()}}),p=(0,s.EW)({get:()=>{var e;return null!==(e=n.accountModalName)&&void 0!==e?e:""},set:e=>n.changeAccountModalName(e)}),g=(0,s.EW)({get:()=>{var e;return null!==(e=n.accountModalBalance)&&void 0!==e?e:0},set:e=>n.changeAccountModalBalance(e)}),b=(0,s.EW)({get:()=>{var e;return null!==(e=n.accountModalIcon)&&void 0!==e?e:""},set:e=>n.changeAccountModalIcon(e)}),f=(0,s.EW)({get:()=>{const e=n.accountModalCurrencyId;if(!e)return null;const t=B().find(o.currencies,{id:e});return t?{label:t.code,value:t.id}:null},set:e=>{var t;n.changeAccountModalCurrencyId(null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:"")}}),h=(0,s.EW)((()=>n.isAccountModalCreation)),_=()=>{var e,t,o,l,s,c,i;if(h.value){const s={id:null!==(e=n.accountModalId)&&void 0!==e?e:"",name:p.value,balance:g.value,icon:b.value,folderId:null!==(t=n.accountModalFolderId)&&void 0!==t?t:null,currencyId:null!==(l=null===(o=f.value)||void 0===o?void 0:o.value)&&void 0!==l?l:""};a.createAccount(s).then((()=>{y()}))}else{const e={id:null!==(s=n.accountModalId)&&void 0!==s?s:"",name:p.value,balance:g.value,icon:b.value,currencyId:null!==(i=null===(c=f.value)||void 0===c?void 0:c.value)&&void 0!==i?i:"",updatedAt:(new Date).toISOString()};a.updateAccount(e).then((()=>{y()}))}},y=()=>{t.value&&t.value.resetValidation(),n.closeAccountModal()};return(e,a)=>{const n=(0,s.g2)("q-icon"),o=(0,s.g2)("q-input"),A=(0,s.g2)("q-card-section"),k=(0,s.g2)("q-btn"),M=(0,s.g2)("q-card-actions"),C=(0,s.g2)("q-form"),E=(0,s.g2)("q-card"),I=(0,s.g2)("q-dialog"),w=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,s.bF)(I,{class:"responsive-modal",modelValue:m.value,"onUpdate:modelValue":a[4]||(a[4]=e=>m.value=e)},{default:(0,s.k6)((()=>[(0,s.bF)(E,{class:"responsive-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(C,{ref_key:"accountForm",ref:t,onSubmit:_,onReset:y,class:"responsive-modal-form"},{default:(0,s.k6)((()=>[(0,s.bF)(A,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",za,[(0,s.Lk)("div",null,[h.value?((0,s.uX)(),(0,s.CE)("h4",Pa,(0,v.v_)(e.$t("modals.account.create_form.header")),1)):((0,s.uX)(),(0,s.CE)("h4",Ya,(0,v.v_)(e.$t("modals.account.update_form.header")),1))])]),h.value?((0,s.uX)(),(0,s.CE)("div",Va,(0,v.v_)(e.$t("modals.account.create_form.header")),1)):((0,s.uX)(),(0,s.CE)("div",Ba,(0,v.v_)(e.$t("modals.account.update_form.header")),1)),(0,s.Lk)("div",Xa,[(0,s.bF)(o,{class:"form-input full-width",outlined:"",placeholder:e.$t("elements.form.account.name.placeholder"),autofocus:h.value,modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),label:e.$t("elements.form.account.name.label"),"lazy-rules":"",rules:[t=>(0,l.R1)(c)(t.toString())||e.$t("elements.validation.required_field"),t=>(0,l.R1)(d)(t)||e.$t("elements.form.account.name.validation.invalid_name")],maxlength:"18"},{before:(0,s.k6)((()=>[(0,s.Lk)("div",Ha,[(0,s.bF)(n,{class:"responsive-modal-control-icon-img",name:b.value},null,8,["name"])])])),_:1},8,["placeholder","autofocus","modelValue","label","rules"])]),(0,s.Lk)("div",Ga,[(0,s.bF)(ia,{class:"responsive-modal-control-input",modelValue:g.value,"onUpdate:modelValue":a[1]||(a[1]=e=>g.value=e),autofocus:!h.value,"lazy-rules":"",rules:[t=>(0,l.R1)(c)(t.toString())||e.$t("elements.validation.required_field"),t=>(0,l.R1)(i)(t.toString())||e.$t("elements.validation.invalid_number"),t=>(0,l.R1)(r)(t.toString())||e.$t("elements.validation.invalid_decimal_number"),t=>(0,l.R1)(u)(t.toString())||e.$t("elements.validation.invalid_formula")],label:e.$t("elements.form.account.balance.label"),placeholder:e.$t("elements.form.account.balance.placeholder")},null,8,["modelValue","autofocus","rules","label","placeholder"])]),(0,s.Lk)("div",Ka,[(0,s.bF)(qa,{modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=e=>f.value=e),outlined:!0,"custom-class":"form-select",label:e.$t("elements.form.account.currency.label")},null,8,["modelValue","label"])])])),_:1}),(0,s.bF)(A,{class:"responsive-modal-section-icon"},{default:(0,s.k6)((()=>[(0,s.bF)(Sa,{class:"responsive-modal-icons-container",header:e.$t("modals.account.form.icon.label"),icon:b.value,onUpdateIcon:a[3]||(a[3]=e=>b.value=e)},null,8,["header","icon"])])),_:1}),(0,s.bF)(M,{class:"responsive-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(k,{class:"econumo-btn -medium -grey responsive-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClose:y},null,8,["label"]),[[w]]),h.value?((0,s.uX)(),(0,s.Wv)(k,{key:0,class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.add.label"),type:"submit"},null,8,["label"])):((0,s.uX)(),(0,s.Wv)(k,{key:1,class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.update.label"),type:"submit"},null,8,["label"]))])),_:1})])),_:1},512)])),_:1})])),_:1},8,["modelValue"])])}}}),Ja=Za,en=Ja;z()(Za,"components",{QDialog:j.A,QCard:Kt.A,QForm:ua.A,QCardSection:da.A,QInput:Ht.A,QIcon:aa.A,QCardActions:fa.A,QBtn:W.A}),z()(Za,"directives",{ClosePopup:ha.A});const tn={class:"econumo-modal spinner-modal"},an={class:"spinner-modal-title"};function nn(e,t,a,n,o,l){const c=(0,s.g2)("q-spinner"),i=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(i,{persistent:"",minimized:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",tn,[(0,s.bF)(c,{class:"econumo-spinner"}),(0,s.Lk)("div",an,(0,v.v_)(e.headerLabel),1)])])),_:1})}const on=(0,s.pM)({props:["headerLabel"],methods:{close:function(){this.$emit("close")}}});var ln=a(564);const sn=(0,$.A)(on,[["render",nn]]),cn=sn;z()(on,"components",{QDialog:j.A,QSpinner:ln.A});const rn={class:"application"},un={class:"application-layout-logo"},dn=(0,s.Lk)("object",{type:"image/svg+xml",data:"~assets/econumo.svg",width:"145",height:"15"},[(0,s.Lk)("img",{src:f(),width:"145",height:"15",alt:"Econumo"})],-1),mn={key:0,class:"application-layout-logo-plan"},pn={class:"application-layout-user full-width"},gn={class:"row no-wrap inline q-col-gutter-none no-padding"},vn={class:"col q-col-gutter-none"},bn=["src"],fn={class:"application-layout-user-info"},hn={key:0,class:"application-layout-user-name"},_n={key:1,class:"application-layout-user-login"},yn={key:0,class:"full-width application-layout-account"},An={class:"application-layout-account-list-name-block"},kn={class:"application-layout-account-list-name-block"},Mn=["src"],Cn=["src"],En={class:"application-layout-footer"},In={class:"application-layout-footer-social"},wn={class:"application-layout-footer-logo"},Ln=(0,s.Lk)("img",{src:re(),width:"125",height:"20",alt:"Econumo"},null,-1),Tn={key:0,class:"application-layout-footer-logo-edition"},Nn={class:"application-layout-footer-social-block"},Dn={class:"application-layout-footer-links"},On=["href","aria-label"],Fn={class:"text-grey"},Rn=(0,s.pM)({__name:"ApplicationLayout",setup(e){const t=(0,g.rd)(),a=(0,Gt.A)(),{moneyFormat:o}=rt(),{exchange:c}=dt(),i=Yt(),r=_t(),u=Vt(),d=Ct(),m=zt(),p=Bt(),b=wa();(0,l.KR)(!0);(0,s.sV)((()=>{m.fetchUpdates(),document.addEventListener("visibilitychange",(()=>{m.fetchUpdates()}))}));const f=(0,s.EW)((()=>i.userAvatar)),h=(0,s.EW)((()=>i.userName)),_=(0,s.EW)((()=>i.userLogin)),y=(0,s.EW)((()=>i.userCurrencyId)),A=(0,s.EW)((()=>i.userOnboardingCompleted)),k=(0,s.EW)((()=>u.selectedAccountId)),M=(0,s.EW)((()=>r.activeArea)),C=(0,s.EW)((()=>{const e=p.transactionModalSwitchAccount;return"string"===typeof e?e:null})),E=(0,s.EW)((()=>m.isFullyLoaded)),I=(0,s.EW)((()=>u.accountsOrdered)),w=(0,s.EW)((()=>d.accountFoldersOrdered)),L=(0,s.EW)((()=>(0,x.$x)())),T=(0,s.EW)((()=>ae.label)),N=(0,s.EW)((()=>{var e;return(null===(e=w.value.find((e=>e.isVisible===kt.Visible)))||void 0===e?void 0:e.name)||"elements.folders.default_folder"})),D=(0,s.EW)((()=>{const e=[],t=[];let a=0;const n=i.userCurrency;return w.value.forEach((t=>{if(!t.isVisible)return;const a={folder:Object.assign(Object.assign({},t),{opened:!0,isVisible:kt.Visible}),accounts:[],amount:0,currency:n,amountAccountCurrency:0,accountCurrency:null};I.value.forEach((e=>{if(e.folderId===t.id){if(a.accounts.push(e),a.amount+=q(e.balance,e.currency.id),null===a.accountCurrency&&(a.accountCurrency=e.currency),!1===a.accountCurrency)return;a.accountCurrency.id===e.currency.id?a.amountAccountCurrency+=e.balance:(a.accountCurrency=!1,a.amountAccountCurrency=0)}})),!1!==a.accountCurrency&&(a.amount=a.amountAccountCurrency,a.accountCurrency&&(a.currency=a.accountCurrency)),a.accounts.length>0&&e.push(a)})),I.value.forEach((e=>{e.folderId||(t.push(e),a+=q(e.balance,e.currency.id))})),t.length&&e.push({folder:{id:"0",name:"elements.folders.default_folder",position:w.value.length-1,opened:!0,isVisible:kt.Visible},accounts:t,amount:a,currency:n,amountAccountCurrency:0,accountCurrency:null}),e})),O=e=>d.openAccountFolder(e),F=e=>d.closeAccountFolder(e);function R(){S("budget","budget")}function S(e,n){a.screen.gt.md?t.push({name:e}):t.push({name:n}),u.selectAccount(null),r.setWorkspaceActiveArea()}function U(e){e&&"string"===typeof e?(u.selectAccount(e),t.push({name:"account",params:{id:e}})):u.selectAccount(null),p.changeTransactionModalSwitchAccount(null)}function Q(){S("settings","settings")}function $(){m.fetchAll()}function j(e){m.fetchAll().finally((()=>{e()}))}function W(){b.openAccountModal({folderId:w.value[0].id})}function q(e,t){return y.value?c(t,y.value,e):e}function z(e){if(!e)return"";const t=B().find(I.value,{id:e});return t?t.name:""}function P(){p.changeTransactionModalSwitchAccount(null)}return(e,t)=>{const c=(0,s.g2)("q-avatar"),i=(0,s.g2)("router-link"),r=(0,s.g2)("q-icon"),u=(0,s.g2)("q-item-section"),d=(0,s.g2)("q-item"),m=(0,s.g2)("q-list"),p=(0,s.g2)("q-expansion-item"),g=(0,s.g2)("router-view"),b=(0,s.g2)("q-page-container"),I=(0,s.g2)("q-layout"),S=(0,s.g2)("q-space"),x=(0,s.g2)("q-btn"),q=(0,s.g2)("q-card-section"),Y=(0,s.g2)("q-card"),V=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.CE)("div",rn,[(0,s.bF)(I,{class:"application-layout"},{default:(0,s.k6)((()=>[((0,s.uX)(),(0,s.Wv)((0,s.$y)((0,l.R1)(a).screen.lt.lg?"q-pull-to-refresh":"div"),{class:(0,v.C4)("application-layout-sidebar "+("sidebar"===M.value?(0,l.R1)(a).screen.lt.lg?"col-grow":"":"gt-md")),onRefresh:j},{default:(0,s.k6)((()=>[(0,s.Lk)("div",un,[dn,T.value?((0,s.uX)(),(0,s.CE)("div",mn,(0,v.v_)(T.value),1)):(0,s.Q3)("",!0)]),(0,s.bF)(i,{class:"application-layout-link",to:{name:"settingsProfile"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",pn,[(0,s.Lk)("div",gn,[(0,s.Lk)("div",vn,[(0,s.bF)(c,{class:"application-layout-user-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:f.value+"?s=100",class:"q-col-gutter-none no-padding"},null,8,bn)])),_:1})]),(0,s.Lk)("div",fn,[h.value?((0,s.uX)(),(0,s.CE)("div",hn,(0,v.v_)(h.value),1)):(0,s.Q3)("",!0),_.value?((0,s.uX)(),(0,s.CE)("div",_n,(0,v.v_)(_.value),1)):(0,s.Q3)("",!0)])])])])),_:1}),E.value?((0,s.uX)(),(0,s.CE)("div",yn,[A.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(i,{key:0,to:{name:"onboarding"},class:"application-layout-menu-item"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("blocks.main.onboarding")),1)])),_:1})),(0,s.bF)(i,{to:{name:"budget"},class:"application-layout-menu-item",onClick:R},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("blocks.main.budget")),1)])),_:1}),!D.value.length&&w.value.length?((0,s.uX)(),(0,s.Wv)(m,{key:1,class:"application-layout-account-gap"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"application-layout-account-folder","expand-icon":"navigate_next","expanded-icon":"expand_more",label:N.value,caption:y.value?(0,l.R1)(o)(0,y.value):"0","expand-icon-class":"application-layout-account-folder-caption","default-opened":!0},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"application-layout-account-list"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"application-layout-account-list-item",clickable:"",onClick:t[0]||(t[0]=e=>W())},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"application-layout-account-list-section-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(r,{name:"add_card"})])),_:1}),(0,s.Lk)("div",An,[(0,s.bF)(u,{class:"application-layout-account-list-section-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("blocks.main.create_account")),1)])),_:1}),(0,s.bF)(u,{class:"application-layout-account-list-section-balance",side:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(y.value?(0,l.R1)(o)(0,y.value):"0"),1)])),_:1})])])),_:1})])),_:1})])),_:1},8,["label","caption"])])),_:1})):(0,s.Q3)("",!0),E.value?((0,s.uX)(),(0,s.Wv)(m,{key:2,class:"application-layout-account-gap"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(D.value,(e=>((0,s.uX)(),(0,s.Wv)(p,{class:"application-layout-account-folder","expand-icon":"navigate_next","expanded-icon":"expand_more",key:e.folder.id,label:e.folder.name,caption:(0,l.R1)(o)(e.amount,e.currency.id),"expand-icon-class":"application-layout-account-folder-caption","default-opened":e.folder.opened,onShow:t=>O(e.folder.id),onHide:t=>F(e.folder.id)},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"application-layout-account-list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.accounts,(e=>((0,s.uX)(),(0,s.Wv)(d,{class:"application-layout-account-list-item",clickable:"",key:e.id,onClick:t=>U(e.id),active:e.id===k.value},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"application-layout-account-list-section-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(r,{name:e.icon},null,8,["name"])])),_:2},1024),(0,s.Lk)("div",kn,[(0,s.bF)(u,{class:"application-layout-account-list-section-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.name),1)])),_:2},1024),(0,s.bF)(u,{class:"application-layout-account-list-section-balance",side:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)((0,l.R1)(o)(e.balance,e.currency.id)),1)])),_:2},1024)]),e.sharedAccess.length>0?((0,s.uX)(),(0,s.Wv)(u,{key:0,side:"",class:"application-layout-account-list-section-people"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{name:"people"})])),_:1})):(0,s.Q3)("",!0),e.sharedAccess.length>0?((0,s.uX)(),(0,s.Wv)(u,{key:1,side:"",class:"application-layout-account-list-section-shared"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"application-layout-account-list-section-shared-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.owner.avatar+"?s=30"},null,8,Mn)])),_:2},1024),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.sharedAccess,(e=>((0,s.uX)(),(0,s.Wv)(c,{class:"application-layout-account-list-section-shared-avatar",key:e.user.id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.user.avatar+"?s=30"},null,8,Cn)])),_:2},1024)))),128))])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1032,["onClick","active"])))),128))])),_:2},1024)])),_:2},1032,["label","caption","default-opened","onShow","onHide"])))),128))])),_:1})):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),(0,s.Lk)("div",En,[(0,s.Lk)("div",In,[(0,s.Lk)("div",wn,[Ln,T.value?((0,s.uX)(),(0,s.CE)("div",Tn,(0,v.v_)(T.value),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Nn,[(0,s.Lk)("a",{href:"#",onClick:(0,n.D$)($,["prevent"]),class:"application-layout-footer-social-ico -sync"})])]),(0,s.Lk)("div",Dn,[(0,s.Lk)("div",{class:"application-layout-footer-links-item -settings",onClick:Q},(0,v.v_)(e.$t("pages.settings.settings.menu_item")),1),L.value?((0,s.uX)(),(0,s.CE)("a",{key:0,target:"_blank",href:L.value,class:"application-layout-footer-links-item -website","aria-label":e.$t("blocks.help.label")},(0,v.v_)(e.$t("blocks.website.label")),9,On)):(0,s.Q3)("",!0)])])])),_:1},40,["class"])),(0,s.Lk)("div",{class:(0,v.C4)("application-layout-workspace "+("workspace"===M.value?"":"gt-md"))},[(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.bF)(g)])),_:1})],2)])),_:1}),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,s.bF)(ya),E.value&&!D.value.length?((0,s.uX)(),(0,s.Wv)(en,{key:0})):(0,s.Q3)("",!0),E.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(cn,{key:1,"header-label":e.$t("modules.app.modal.loading.data_loading")},null,8,["header-label"])),(0,s.bF)(V,{"model-value":!!C.value,seamless:"",position:"bottom",class:"switch-account-modal"},{default:(0,s.k6)((()=>[(0,s.bF)(Y,null,{default:(0,s.k6)((()=>[(0,s.bF)(q,{class:"row items-center no-wrap"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",{class:"switch-account-modal-text",onClick:t[1]||(t[1]=e=>C.value&&U(C.value))},[(0,s.Lk)("div",Fn,[(0,s.eW)((0,v.v_)(e.$t("elements.switch_to_account"))+" ",1),(0,s.Lk)("b",null,(0,v.v_)(C.value?z(C.value):""),1)])]),(0,s.bF)(S),(0,s.bF)(x,{flat:"",round:"",icon:"close",onClick:t[2]||(t[2]=e=>P())})])),_:1})])),_:1})])),_:1},8,["model-value"])]))])}}});var Sn=a(8095),xn=a(3999),Un=a(8858),Qn=a(3676);const $n=Rn,jn=$n;z()(Rn,"components",{QLayout:oe.A,QPullToRefresh:Sn.A,QAvatar:ba.A,QList:xn.A,QExpansionItem:Un.A,QItem:Qa.A,QItemSection:$a.A,QIcon:aa.A,QPageContainer:le.A,QDialog:j.A,QCard:Kt.A,QCardSection:da.A,QSpace:Qn.A,QBtn:W.A});const Wn={class:"econumo-modal form-hint-modal"},qn={class:"form-hint-modal-text"},zn={class:"form-hint-modal-button"},Pn=(0,s.pM)(Object.assign({name:"SelfHostedInfoModal"},{__name:"SelfHostedInfoModal",props:{modelValue:{type:Boolean}},emits:["update:model-value","cancel"],setup(e,{emit:t}){const a=t,n=()=>{a("update:model-value",!1),a("cancel")};return(e,t)=>{const a=(0,s.g2)("q-btn"),o=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(o,{"model-value":e.modelValue,minimized:"",onHide:n},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Wn,[(0,s.Lk)("div",qn,(0,v.v_)(e.$t("modules.app.modal.self_hosted.information")),1),(0,s.Lk)("div",zn,[(0,s.bF)(a,{class:"econumo-btn -small -yellow full-width",label:e.$t("elements.button.ok.label"),type:"button",onClick:n,flat:""},null,8,["label"])])])])),_:1},8,["model-value"])}}})),Yn=Pn,Vn=Yn;z()(Pn,"components",{QDialog:j.A,QBtn:W.A});var Bn=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};const Xn={class:"econumo-modal recovery-modal"},Hn={class:"recovery-modal-title"},Gn={class:"recovery-modal-description"},Kn={class:"recovery-modal-input"},Zn={class:"recovery-modal-description"},Jn={class:"recovery-modal-input"},eo={class:"recovery-modal-input"},to=(0,s.pM)({__name:"RecoveryModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","close"],setup(e,{emit:t}){const a=t,n=Yt(),{isNotEmpty:o,isValidEmail:c,isValidRecoveryCode:i,isValidPassword:r}=He(),{t:u}=(0,U.s9)(),d=(0,l.KR)(!1),m=(0,l.KR)(""),p=(0,l.KR)(""),g=(0,l.KR)(""),b=(0,l.KR)(null),f=(0,l.KR)(null),h=()=>Bn(this,void 0,void 0,(function*(){var e;const t=yield null===(e=f.value)||void 0===e?void 0:e.validate();t&&(yield n.userRemindPassword(m.value).then((()=>{d.value=!0})).catch((e=>{console.error(e)})))})),_=()=>Bn(this,void 0,void 0,(function*(){yield n.userResetPassword({username:m.value,code:p.value,password:g.value}).then((()=>{a("close")})).catch((e=>{console.error(e)}))}));return(e,t)=>{const a=(0,s.g2)("q-btn"),n=(0,s.g2)("q-form"),y=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(y,{"model-value":e.modelValue,onHide:t[3]||(t[3]=t=>e.$emit("close"))},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Xn,[(0,s.Lk)("div",Hn,(0,v.v_)((0,l.R1)(u)("modules.user.modal.access_recovery.header")),1),(0,s.Lk)("div",Gn,(0,v.v_)((0,l.R1)(u)("modules.user.modal.access_recovery.information")),1),(0,s.bF)(n,{ref_key:"recoveryForm",ref:b,onSubmit:h,class:"recovery-form"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Kn,[(0,s.bF)((0,l.R1)(Ht.A),{ref_key:"emailInput",ref:f,class:"form-input -narrow full-width",outlined:"",modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),disable:d.value,autofocus:!d.value,type:"email",label:(0,l.R1)(u)("modules.user.form.user.email.placeholder"),"lazy-rules":"",rules:[e=>(0,l.R1)(o)(e)||(0,l.R1)(u)("modules.user.form.user.email.validation.required_field"),e=>(0,l.R1)(c)(e)||(0,l.R1)(u)("modules.user.form.user.email.validation.invalid_email")]},null,8,["modelValue","disable","autofocus","label","rules"])]),d.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(a,{key:0,class:"econumo-btn -small -yellow full-width recovery-modal-button",label:(0,l.R1)(u)("modules.user.form.access_recovery.action.recover.label"),type:"submit",flat:""},null,8,["label"]))])),_:1},512),d.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("div",Zn,(0,v.v_)((0,l.R1)(u)("modules.user.modal.access_recovery.instruction")),1),(0,s.Lk)("div",Jn,[(0,s.bF)((0,l.R1)(Ht.A),{class:"form-input -narrow full-width",outlined:"",modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),type:"text",autofocus:!0,label:(0,l.R1)(u)("modules.user.form.user.code.placeholder"),"lazy-rules":"",rules:[e=>(0,l.R1)(o)(e)||(0,l.R1)(u)("modules.user.form.user.code.validation.required_field"),e=>(0,l.R1)(i)(e)||(0,l.R1)(u)("modules.user.form.user.code.validation.invalid_code")]},null,8,["modelValue","label","rules"])]),(0,s.Lk)("div",eo,[(0,s.bF)((0,l.R1)(Ht.A),{class:"form-input -narrow full-width",outlined:"",modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=e=>g.value=e),type:"password",label:(0,l.R1)(u)("modules.user.form.user.password.placeholder"),"lazy-rules":"",rules:[e=>(0,l.R1)(o)(e)||(0,l.R1)(u)("modules.user.form.user.password.validation.required_field"),e=>(0,l.R1)(r)(e)||(0,l.R1)(u)("modules.user.form.user.password.validation.invalid_password")]},null,8,["modelValue","label","rules"])])],64)):(0,s.Q3)("",!0),(0,s.Lk)("div",null,[d.value?((0,s.uX)(),(0,s.Wv)(a,{key:0,class:"econumo-btn -small -yellow full-width recovery-modal-button",label:(0,l.R1)(u)("modules.user.form.access_recovery.action.change_password.label"),type:"button",onClick:_,flat:""},null,8,["label"])):(0,s.Q3)("",!0)])])])),_:1},8,["model-value"])}}}),ao=to,no=ao;function oo(){const e=(0,l.KR)(!1),t=()=>{e.value=!0},a=()=>{e.value=!1};return{isOpen:e,open:t,close:a}}function lo(){const e=(0,l.KR)(!1),t=()=>{e.value=!0},a=()=>{e.value=!1};return{isOpen:e,open:t,close:a}}z()(to,"components",{QDialog:j.A,QForm:ua.A,QInput:Ht.A,QBtn:W.A});var so=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};const co={class:"form-container full-width column wrap justify-center items-center content-center"},io={key:0},ro={class:"form-checkbox-group"},uo={class:"form-btn-container"},mo={class:"econumo-modal form-fail-modal"},po={class:"form-fail-modal-title"},go={class:"form-fail-modal-description"},vo={class:"form-fail-modal-button"},bo=(0,s.pM)(Object.assign({name:"LoginPage"},{__name:"Login",setup(e){var t;const a=(0,l.Kh)({username:"",password:"",selfHosted:Boolean(null!==(t=x.Ay.selfHosted())&&void 0!==t&&t),host:String(x.Ay.backendHost()||"")}),o=(0,g.rd)(),c=Yt(),i=oo(),r=lo(),{isNotEmpty:u,isValidEmail:d,isValidHttpUrl:m}=He(),{t:p}=(0,U.s9)(),b=(0,l.Kh)({isFailLogin:!1,isRecovery:!1}),f=(0,s.EW)((()=>x.Ay.isCustomApiAllowed())),h=()=>so(this,void 0,void 0,(function*(){i.open();try{const e=yield c.login(a.username,a.password);e.token?window.location.href="/":b.isFailLogin=!0}catch(e){b.isFailLogin=!0}finally{i.close()}})),_=()=>{b.isFailLogin=!1},y=()=>{b.isRecovery=!0},A=()=>{b.isRecovery=!1};return(0,s.wB)((()=>a.host),(e=>{x.Ay.backendHost(e)})),(0,s.wB)((()=>a.selfHosted),(e=>{x.Ay.selfHosted(e)})),(0,s.sV)((()=>{c.isUserAuthenticated&&o.push({name:"home"})})),(e,t)=>{const o=(0,s.g2)("q-input"),c=(0,s.g2)("q-checkbox"),g=(0,s.g2)("q-btn"),k=(0,s.g2)("q-form"),M=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",co,[(0,s.bF)(k,{onSubmit:(0,n.D$)(h,["prevent"]),class:"full-width","aria-label":"Login form"},{default:(0,s.k6)((()=>[(0,s.bF)(o,{outlined:"",class:"form-input full-width",placeholder:(0,l.R1)(p)("modules.user.form.user.email.placeholder"),type:"email",modelValue:a.username,"onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e),label:(0,l.R1)(p)("modules.user.form.user.email.label"),"lazy-rules":"",rules:[e=>(0,l.R1)(u)(e)||(0,l.R1)(p)("modules.user.form.user.email.validation.required_field"),e=>(0,l.R1)(d)(e)||(0,l.R1)(p)("modules.user.form.user.email.validation.invalid_email")],"aria-required":"true"},null,8,["placeholder","modelValue","label","rules"]),(0,s.bF)(o,{outlined:"",class:"form-input full-width",placeholder:(0,l.R1)(p)("modules.user.form.user.password.placeholder"),type:"password",modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),label:(0,l.R1)(p)("modules.user.form.user.password.label"),"lazy-rules":"",rules:[e=>(0,l.R1)(u)(e)||(0,l.R1)(p)("modules.user.form.user.password.validation.required_field")],"aria-required":"true"},null,8,["placeholder","modelValue","label","rules"]),f.value?((0,s.uX)(),(0,s.CE)("div",io,[(0,s.Lk)("div",ro,[(0,s.bF)(c,{class:"form-checkbox full-width",modelValue:a.selfHosted,"onUpdate:modelValue":t[2]||(t[2]=e=>a.selfHosted=e),label:(0,l.R1)(p)("modules.user.form.user.server_host.self_hosted")},null,8,["modelValue","label"]),(0,s.Lk)("div",{onClick:t[3]||(t[3]=(...e)=>(0,l.R1)(r).open&&(0,l.R1)(r).open(...e)),class:"form-checkbox-hint",role:"button",tabindex:"0"})]),(0,s.bo)((0,s.bF)(o,{outlined:"",class:"form-input full-width",placeholder:(0,l.R1)(p)("modules.user.form.user.server_host.placeholder"),type:"url",modelValue:a.host,"onUpdate:modelValue":t[4]||(t[4]=e=>a.host=e),label:(0,l.R1)(p)("modules.user.form.user.server_host.label"),"lazy-rules":"",rules:[e=>(0,l.R1)(u)(e)||(0,l.R1)(p)("modules.user.form.user.server_host.validation.required_field"),e=>(0,l.R1)(m)(e)||(0,l.R1)(p)("modules.user.form.user.server_host.validation.invalid_url")],"aria-required":"true"},null,8,["placeholder","modelValue","label","rules"]),[[n.aG,a.selfHosted]])])):(0,s.Q3)("",!0),(0,s.Lk)("div",uo,[(0,s.bF)(g,{class:"econumo-btn -large -yellow full-width",label:(0,l.R1)(p)("modules.user.form.sign_in.action.sign_in"),type:"submit",flat:""},null,8,["label"])]),(0,s.Lk)("div",null,[(0,s.bF)(g,{class:"econumo-btn -large -grey full-width",label:(0,l.R1)(p)("modules.user.form.sign_in.action.forget_password"),type:"button",onClick:y,flat:""},null,8,["label"])])])),_:1})]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,l.R1)(i).isOpen?((0,s.uX)(),(0,s.Wv)(cn,{key:0,onClose:(0,l.R1)(i).close,"header-label":(0,l.R1)(p)("modules.user.modal.sign_in.label")},null,8,["onClose","header-label"])):(0,s.Q3)("",!0),(0,s.bF)(Vn,{"model-value":(0,l.R1)(r).isOpen.value,"onUpdate:modelValue":t[5]||(t[5]=e=>(0,l.R1)(r).isOpen.value=e),onCancel:(0,l.R1)(r).close},null,8,["model-value","onCancel"]),(0,s.bF)(M,{modelValue:b.isFailLogin,"onUpdate:modelValue":t[6]||(t[6]=e=>b.isFailLogin=e),onHide:_},{default:(0,s.k6)((()=>[(0,s.Lk)("div",mo,[(0,s.Lk)("div",po,(0,v.v_)((0,l.R1)(p)("modules.user.modal.sign_in_failed.header")),1),(0,s.Lk)("div",go,(0,v.v_)((0,l.R1)(p)("modules.user.modal.sign_in_failed.information")),1),(0,s.Lk)("div",vo,[(0,s.bF)(g,{class:"econumo-btn -small -yellow full-width",label:(0,l.R1)(p)("elements.button.ok.label"),type:"button",onClick:_,flat:""},null,8,["label"])])])])),_:1},8,["modelValue"]),(0,s.bF)(no,{modelValue:b.isRecovery,"onUpdate:modelValue":t[7]||(t[7]=e=>b.isRecovery=e),onClose:A},null,8,["modelValue"])]))],64)}}}));var fo=a(460);const ho=bo,_o=ho;z()(bo,"components",{QForm:ua.A,QInput:Ht.A,QCheckbox:fo.A,QBtn:W.A,QDialog:j.A});const yo={class:"fullscreen"};function Ao(e,t,a,n,o,l){return(0,s.uX)(),(0,s.CE)("div",yo,"")}const ko={name:"LogoutPage",mounted(){Yt().logout().finally((()=>{window.location.href="/"}))}},Mo=(0,$.A)(ko,[["render",Ao]]),Co=Mo,Eo={class:"account column"},Io={class:"account-toolbar-mobile"},wo={class:"account-toolbar-mobile-head"},Lo={class:"account-toolbar-mobile-head-title"},To={class:"account-toolbar-mobile-balance"},No={class:"account-toolbar-mobile-balance-container"},Do={class:"account-toolbar-mobile-balance-currency"},Oo={key:0,class:"account-toolbar-mobile-balance-shared"},Fo=["src"],Ro=["src"],So={class:"account-toolbar-mobile-search"},xo={class:"account-toolbar-desktop"},Uo={class:"account-toolbar-desktop-head"},Qo={class:"account-toolbar-desktop-head-title"},$o={class:"account-toolbar-desktop-currency"},jo={class:"account-toolbar-desktop-currency-balance"},Wo={class:"account-toolbar-desktop-currency-balance-check"},qo={key:0,class:"account-toolbar-desktop-currency-shared"},zo=["src","alt","title"],Po=["src","title","alt"],Yo={class:"account-toolbar-desktop-control"},Vo={key:0},Bo={class:"account-transactions-item-container"},Xo={class:"account-transactions-item-info"},Ho={class:"account-transactions-item-info-avatar"},Go=["src","title","alt"],Ko={class:"account-transactions-item-info-description"},Zo={key:0,class:"account-transactions-item-info-description-category"},Jo={key:1,class:"account-transactions-item-info-description-category"},el={class:"account-transactions-item-info-description-note"},tl={class:"account-transactions-item-wrapper"},al={class:"account-transactions-item-tags -desktop"},nl={class:"account-transactions-item-tags-block"},ol={key:0,class:"account-transactions-item-tags-payee"},ll={class:"account-transactions-item-check"},sl={class:"account-transactions-item-check-currency"},cl={class:"account-transactions-item-tags -mobile"},il={class:"account-transactions-item-tags-block"},rl={key:0,class:"account-transactions-item-tags-payee"},ul={key:0,class:"account-transactions-add-mobile"};function dl(e,t,a,o,l,c){const i=(0,s.g2)("q-btn"),r=(0,s.g2)("q-icon"),u=(0,s.g2)("q-avatar"),d=(0,s.g2)("q-input"),m=(0,s.g2)("q-item-label"),p=(0,s.g2)("q-badge"),g=(0,s.g2)("q-item-section"),b=(0,s.g2)("q-item"),f=(0,s.g2)("q-list"),h=(0,s.g2)("q-menu"),_=(0,s.g2)("q-virtual-scroll"),y=(0,s.g2)("loading-modal"),A=(0,s.g2)("account-modal"),k=(0,s.g2)("confirmation-dialog-modal"),M=(0,s.g2)("view-transaction-modal"),C=(0,s.g2)("q-page");return e.account?((0,s.uX)(),(0,s.Wv)(C,{key:0},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Eo,[(0,s.Lk)("div",Io,[(0,s.Lk)("div",wo,[(0,s.Lk)("div",null,[(0,s.bF)(i,{class:"account-toolbar-mobile-head-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("home",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",Lo,(0,v.v_)(e.account.name),1)]),(0,s.Lk)("div",null,[e.canUpdateAccountSettings?((0,s.uX)(),(0,s.Wv)(i,{key:0,class:"account-toolbar-mobile-head-button",flat:"",icon:"settings",onClick:t[1]||(t[1]=t=>e.openAccountSettingsModal())})):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",To,[(0,s.Lk)("div",No,[(0,s.bF)(r,{class:"account-toolbar-mobile-balance-icon",name:e.account.icon},null,8,["name"]),(0,s.Lk)("span",Do,(0,v.v_)(e.moneyFormat(e.account.balance,e.account.currency.id,!0,!1)),1)]),e.account.sharedAccess.length>0?((0,s.uX)(),(0,s.CE)("div",Oo,[(0,s.bF)(u,{class:"account-toolbar-mobile-balance-shared-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.account.owner.avatar+"?s=30"},null,8,Fo)])),_:1}),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.account.sharedAccess,(e=>((0,s.uX)(),(0,s.Wv)(u,{class:"account-toolbar-mobile-balance-shared-avatar",key:e.user.id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.user.avatar+"?s=30"},null,8,Ro)])),_:2},1024)))),128))])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",So,[(0,s.bF)(d,{class:"form-input -narrow full-width",outlined:"",modelValue:e.search,"onUpdate:modelValue":t[2]||(t[2]=t=>e.search=t),label:e.$t("pages.account.toolbar.search")},null,8,["modelValue","label"])])]),(0,s.Lk)("div",xo,[(0,s.Lk)("div",Uo,[(0,s.Lk)("h4",Qo,[(0,s.eW)((0,v.v_)(e.account.name)+" ",1),(0,s.bF)(r,{class:"account-toolbar-desktop-head-icon",name:e.account.icon},null,8,["name"])])]),(0,s.Lk)("div",$o,[(0,s.Lk)("div",jo,[(0,s.Lk)("div",Wo,(0,v.v_)(e.moneyFormat(e.account.balance,e.account.currency.id,!0,!1)),1),e.account.sharedAccess.length>0?((0,s.uX)(),(0,s.CE)("div",qo,[(0,s.bF)(u,{class:"account-toolbar-desktop-currency-shared-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.account.owner.avatar+"?s=30",alt:e.account.owner.name,title:e.account.owner.name},null,8,zo)])),_:1}),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.account.sharedAccess,(e=>((0,s.uX)(),(0,s.Wv)(u,{class:"account-toolbar-desktop-currency-shared-avatar",key:e.user.id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.user.avatar+"?s=30",title:e.user.name,alt:e.user.name},null,8,Po)])),_:2},1024)))),128))])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,[e.canUpdateAccountSettings?((0,s.uX)(),(0,s.CE)("a",{key:0,class:"account-toolbar-desktop-currency-settings",href:"",onClick:t[3]||(t[3]=(0,n.D$)(((...t)=>e.openAccountSettingsModal&&e.openAccountSettingsModal(...t)),["prevent"]))},(0,v.v_)(e.$t("pages.account.toolbar.settings")),1)):(0,s.Q3)("",!0)])])]),(0,s.Lk)("div",Yo,[e.canChangeTransaction?((0,s.uX)(),(0,s.CE)("div",Vo,[(0,s.bF)(i,{class:"econumo-btn -small -magenta account-toolbar-desktop-control-btn",flat:"",label:e.$t("pages.account.transaction_list.action.add_transaction"),onClick:t[4]||(t[4]=t=>e.openCreateTransactionModal())},null,8,["label"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",null,[(0,s.bF)(d,{class:"form-input -narrow account-toolbar-desktop-control-search",outlined:"",modelValue:e.search,"onUpdate:modelValue":t[5]||(t[5]=t=>e.search=t),label:e.$t("pages.account.toolbar.search")},null,8,["modelValue","label"])])]),(0,s.bF)(_,{class:"account-transactions",items:e.accountTransactionsDailyList,ref:"transactionList"},{default:(0,s.k6)((({item:t})=>[t.isSeparator?((0,s.uX)(),(0,s.Wv)(m,{class:"account-transactions-date",header:"",key:"separator-"+t.id},{default:(0,s.k6)((()=>[(0,s.bo)(((0,s.uX)(),(0,s.CE)("span",{class:"account-transactions-date-content",key:"alias-"+t.id},(0,v.v_)(e.$t("pages.account.transaction_list."+t.alias)),1)),[[n.aG,"none"!==t.alias]]),(0,s.bo)(((0,s.uX)(),(0,s.CE)("span",{class:"account-transactions-date-content",key:"date-"+t.id},(0,v.v_)(t.date),1)),[[n.aG,"none"===t.alias]])])),_:2},1024)):((0,s.uX)(),(0,s.Wv)(b,{class:(0,v.C4)("account-transactions-item "+(t.isInFuture?"account-transactions-item-future":"")),key:t.id,clickable:e.$q.screen.lt.lg,onClick:a=>e.openPreviewTransactionModal(t.id)},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"account-transactions-item-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Bo,[(0,s.Lk)("div",Xo,[(0,s.Lk)("div",Ho,[(0,s.bF)(r,{class:"account-transactions-item-info-avatar-icon",name:"transfer"===t.type?"sync_alt":t.category?.icon||"question_mark"},null,8,["name"]),e.account.sharedAccess.length>0?((0,s.uX)(),(0,s.Wv)(u,{key:0,class:"account-transactions-item-info-avatar-shared"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:t.author.avatar+"?s=30",title:t.author.name,alt:t.author.name},null,8,Go)])),_:2},1024)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Ko,["transfer"!==t.type?((0,s.uX)(),(0,s.CE)("div",Zo,(0,v.v_)(t.category?.name||""),1)):(0,s.Q3)("",!0),"transfer"===t.type?((0,s.uX)(),(0,s.CE)("div",Jo,(0,v.v_)(t.accountId!==e.selectedAccountId?e.$t("pages.account.transaction_list.item.transfer_from")+" "+(t.account?.name||e.$t("elements.account.name_hidden")):e.$t("pages.account.transaction_list.item.transfer_to")+" "+(t.accountRecipient?.name||e.$t("elements.account.name_hidden"))),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",el,(0,v.v_)(t.description),1)])]),(0,s.Lk)("div",tl,[(0,s.Lk)("div",al,[(0,s.Lk)("div",nl,[t.payee?((0,s.uX)(),(0,s.CE)("div",ol,(0,v.v_)(t.payee?.name||""),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,[t.tag?((0,s.uX)(),(0,s.Wv)(p,{key:0,class:"account-transactions-item-tags-tag"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(t.tag?.name||""),1)])),_:2},1024)):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",ll,[(0,s.Lk)("span",{class:(0,v.C4)("account-transactions-item-check-income "+(e.isIncome(t)?"income-color":"expense-color"))},(0,v.v_)(e.transactionDisplayAmount(t)),3),(0,s.Lk)("span",sl,(0,v.v_)(e.account.currency.symbol),1),e.canChangeTransaction&&("transfer"!==t.type||"transfer"===t.type&&t.account&&t.accountRecipient)?((0,s.uX)(),(0,s.Wv)(i,{key:0,square:"",flat:"",icon:"more_vert",class:"account-transactions-item-check-button"},{default:(0,s.k6)((()=>[(0,s.bF)(h,{cover:"","auto-close":"",class:"account-transactions-item-check-button-menu"},{default:(0,s.k6)((()=>[(0,s.bF)(f,{class:"account-transactions-item-check-button-list"},{default:(0,s.k6)((()=>[(0,s.bF)(b,{clickable:"",onClick:a=>e.openUpdateTransactionModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:2},1032,["onClick"]),(0,s.bF)(b,{clickable:"",onClick:a=>e.openDeleteTransactionModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,s.Q3)("",!0)])])]),(0,s.Lk)("div",cl,[(0,s.Lk)("div",null,[t.tag?((0,s.uX)(),(0,s.Wv)(p,{key:0,class:"account-transactions-item-tags-tag"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(t.tag?.name||""),1)])),_:2},1024)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",il,[t.payee?((0,s.uX)(),(0,s.CE)("div",rl,(0,v.v_)(t.payee?.name||""),1)):(0,s.Q3)("",!0)])])])),_:2},1024)])),_:2},1032,["class","clickable","onClick"]))])),_:1},8,["items"]),e.canChangeTransaction?((0,s.uX)(),(0,s.CE)("div",ul,[(0,s.bF)(i,{class:"account-transactions-add-mobile-btn econumo-btn -medium -magenta",flat:"",label:e.$t("pages.account.transaction_list.action.add_transaction"),onClick:t[6]||(t[6]=t=>e.openCreateTransactionModal())},null,8,["label"])])):(0,s.Q3)("",!0)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.isTransactionsLoaded?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(y,{key:0,"header-label":e.$t("modules.app.modal.loading.data_loading")},null,8,["header-label"])),(0,s.bF)(A),e.deleteTransactionModal.isOpened?((0,s.uX)(),(0,s.Wv)(k,{key:1,"question-label":e.$t("pages.account.delete_transaction_modal.question"),"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:e.closeModal,onProceed:t[7]||(t[7]=t=>e.deleteTransaction(e.deleteTransactionModal.transaction.id))},null,8,["question-label","action-label","cancel-label","onCancel"])):(0,s.Q3)("",!0),e.previewTransactionModal.isOpened?((0,s.uX)(),(0,s.Wv)(M,{key:2,position:e.$q.screen.gt.md?"standard":"bottom",transaction:e.previewTransactionModal.transaction,account:e.previewTransactionModal.account,"account-recipient":e.previewTransactionModal.accountRecipient,"can-change-transaction":e.canChangeTransaction,onCancel:e.closeModal,onUpdate:e.openUpdateTransactionModal,onDelete:e.openDeleteTransactionModal},null,8,["position","transaction","account","account-recipient","can-change-transaction","onCancel","onUpdate","onDelete"])):(0,s.Q3)("",!0)]))])),_:1})):(0,s.Q3)("",!0)}const ml={methods:{filterByAccount:function(e,t){return B().filter(e,(e=>e.accountId===t||e.accountRecipientId===t))},transactionsDailyList:function(e,t="date"){const a=B().orderBy(e,t,"desc"),n=new Date,o=nt.Ay.subtractFromDate(n,{days:1}),l=nt.Ay.startOfDate(nt.Ay.addToDate(n,{days:1}),"date");let s=[],c="";return B().forEach(a,(function(e){const a=nt.Ay.extractDate(e[t],"YYYY-MM-DD HH:mm:ss"),i=nt.Ay.formatDate(a,"YYYY-MM-DD"),r=nt.Ay.formatDate(a,"Do MMMM YYYY");let u="none";i===nt.Ay.formatDate(n,"YYYY-MM-DD")?u="today":i===nt.Ay.formatDate(o,"YYYY-MM-DD")&&(u="yesterday"),c!==i&&(c=i,s.push({id:i,isSeparator:!0,alias:u,date:r})),e.isInFuture=a>=l,s.push(e)})),s}}},pl={methods:{navigateTo:function(e,t=!1){t?_t().setSidebarActiveArea():_t().setWorkspaceActiveArea(),this.$router.push({name:e})}}},gl={key:1,class:"confirmation-dialog-title"},vl={class:"confirmation-dialog-label"},bl={class:"confirmation-dialog-actions-buttons"},fl={class:"confirmation-dialog-actions-buttons"};function hl(e,t,a,n,o,l){const c=(0,s.g2)("q-avatar"),i=(0,s.g2)("q-card-section"),r=(0,s.g2)("q-btn"),u=(0,s.g2)("q-card-actions"),d=(0,s.g2)("q-card"),m=(0,s.g2)("q-dialog"),p=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(m,{"model-value":!0,persistent:""},{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"confirmation-dialog"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"confirmation-dialog-section"},{default:(0,s.k6)((()=>[e.icon?((0,s.uX)(),(0,s.Wv)(c,{key:0,icon:e.icon,color:"primary","text-color":"white"},null,8,["icon"])):(0,s.Q3)("",!0),e.questionTitle?((0,s.uX)(),(0,s.CE)("span",gl,(0,v.v_)(e.questionTitle),1)):(0,s.Q3)("",!0),(0,s.Lk)("span",vl,(0,v.v_)(e.questionLabel),1)])),_:1}),(0,s.bF)(u,{class:"confirmation-dialog-actions"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",bl,[e.cancelLabel?(0,s.bo)(((0,s.uX)(),(0,s.Wv)(r,{key:0,flat:"",label:e.cancelLabel,class:"econumo-btn -medium -grey full-width",onClick:t[0]||(t[0]=t=>e.$emit("cancel"))},null,8,["label"])),[[p]]):(0,s.Q3)("",!0)]),(0,s.Lk)("div",fl,[(0,s.bF)(r,{flat:"",label:e.actionLabel,class:"econumo-btn -medium -magenta full-width",onClick:t[1]||(t[1]=t=>e.$emit("proceed"))},null,8,["label"])])])),_:1})])),_:1})])),_:1})}const _l=(0,s.pM)({props:["icon","questionTitle","questionLabel","actionLabel","cancelLabel"]}),yl=(0,$.A)(_l,[["render",hl]]),Al=yl;z()(_l,"components",{QDialog:j.A,QCard:Kt.A,QCardSection:da.A,QAvatar:ba.A,QCardActions:fa.A,QBtn:W.A}),z()(_l,"directives",{ClosePopup:ha.A});const kl={data(){return{previewTransactionModal:{isOpened:!1,transaction:null,account:null,accountRecipient:null}}},methods:{openPreviewTransactionModal:function(e){const t=B().cloneDeep(B().find(this.transactions,{id:e}));this.previewTransactionModal.transaction=t,this.previewTransactionModal.isOpened=!0,this.previewTransactionModal.account=B().find(this.accounts,{id:t.accountId}),t.accountRecipientId&&(this.previewTransactionModal.accountRecipient=B().find(this.accounts,{id:t.accountRecipientId}))}}},Ml={class:"account-preview-modal-head"},Cl={class:"account-preview-modal-head-title"},El={class:"account-preview-modal-head-badge"},Il={class:"account-preview-modal-account"},wl={key:0,class:"account-preview-modal-account-title"},Ll={class:"account-preview-modal-account-item-box"},Tl={key:0,class:"account-preview-modal-account -recipient"},Nl={key:0,class:"account-preview-modal-account-title"},Dl={class:"account-preview-modal-account-item-box"},Ol={class:"account-preview-modal-account-info"},Fl={key:0,class:"account-preview-modal-account-info-item"},Rl={class:"account-preview-modal-account-info-item-label"},Sl={class:"account-preview-modal-account-info-item-content"},xl={key:1,class:"account-preview-modal-account-info-item"},Ul={class:"account-preview-modal-account-info-item-label"},Ql={class:"account-preview-modal-account-info-item-content"},$l={key:2},jl={class:"account-preview-modal-account-info-item"},Wl={class:"account-preview-modal-account-info-item-label"},ql={class:"account-preview-modal-account-info-item-content"},zl={key:3},Pl={class:"account-preview-modal-account-info-item"},Yl={class:"account-preview-modal-account-info-item-label"},Vl={class:"account-preview-modal-account-info-item-content -tags"},Bl={key:4,class:"account-preview-modal-account-info-item"},Xl={class:"account-preview-modal-account-info-item-label"},Hl={class:"account-preview-modal-account-info-item-content"},Gl=["src"],Kl={class:"account-preview-modal-account-info-item"},Zl={class:"account-preview-modal-account-info-item-label"},Jl={class:"account-preview-modal-account-info-item-content"},es=(0,s.pM)({__name:"ViewTransactionModal",props:{position:{},transaction:{},account:{},accountRecipient:{},canChangeTransaction:{type:Boolean}},emits:["cancel","update","delete"],setup(e,{emit:t}){const{avatarUrl:a}=Xt(),{moneyFormat:n}=rt(),o=t,c=()=>{o("cancel")},i=e=>{o("update",e)},r=e=>{o("delete",e)},u=e=>"transfer"===e.type;return(e,t)=>{const o=(0,s.g2)("q-badge"),d=(0,s.g2)("q-icon"),m=(0,s.g2)("q-item-section"),p=(0,s.g2)("q-item"),g=(0,s.g2)("q-card-section"),b=(0,s.g2)("q-avatar"),f=(0,s.g2)("q-chip"),h=(0,s.g2)("q-btn"),_=(0,s.g2)("q-card-actions"),y=(0,s.g2)("q-card"),A=(0,s.g2)("q-dialog"),k=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(A,{class:"account-preview-modal","model-value":!0,position:e.position,onHide:c},{default:(0,s.k6)((()=>[(0,s.bF)(y,{class:"account-preview-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"account-preview-modal-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ml,[(0,s.Lk)("div",Cl,(0,v.v_)(e.$t("pages.account.preview_transaction_modal.header")),1),(0,s.Lk)("div",El,[(0,s.bF)(o,{class:(0,v.C4)(["account-preview-modal-head-badge-label",u(e.transaction)?"-transfer":""])},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("pages.account.preview_transaction_modal.type."+e.transaction.type)),1)])),_:1},8,["class"])])]),(0,s.Lk)("div",Il,[u(e.transaction)?((0,s.uX)(),(0,s.CE)("div",wl,(0,v.v_)(e.$t("pages.account.preview_transaction_modal.sender.label")),1)):(0,s.Q3)("",!0),(0,s.bF)(p,{class:"account-preview-modal-account-item"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"account-preview-modal-account-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"account-preview-modal-account-item-avatar-icon",name:e.account.icon},null,8,["name"])])),_:1}),(0,s.Lk)("div",Ll,[(0,s.bF)(m,{class:"account-preview-modal-account-item-box-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.account.name),1)])),_:1}),(0,s.bF)(m,{class:"account-preview-modal-account-item-box-balance",side:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)((0,l.R1)(n)(e.transaction.amount,e.account.currency.id,!0,!1)),1)])),_:1})])])),_:1})])])),_:1}),(0,s.bF)(g,{class:"account-preview-modal-section -info"},{default:(0,s.k6)((()=>{var t,o;return[e.accountRecipient?((0,s.uX)(),(0,s.CE)("div",Tl,[u(e.transaction)?((0,s.uX)(),(0,s.CE)("div",Nl,(0,v.v_)(e.$t("pages.account.preview_transaction_modal.recipient.label")),1)):(0,s.Q3)("",!0),(0,s.bF)(p,{class:"account-preview-modal-account-item"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"account-preview-modal-account-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"account-preview-modal-account-item-avatar-icon",name:e.accountRecipient.icon},null,8,["name"])])),_:1}),(0,s.Lk)("div",Dl,[(0,s.bF)(m,{class:"account-preview-modal-account-item-box-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.accountRecipient.name),1)])),_:1}),e.transaction.amountRecipient?((0,s.uX)(),(0,s.Wv)(m,{key:0,class:"account-preview-modal-account-item-box-balance",side:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)((0,l.R1)(n)(e.transaction.amountRecipient,e.accountRecipient.currency.id,!0,!1)),1)])),_:1})):(0,s.Q3)("",!0)])])),_:1})])):(0,s.Q3)("",!0),(0,s.Lk)("div",Ol,[e.transaction.category?((0,s.uX)(),(0,s.CE)("div",Fl,[(0,s.Lk)("div",Rl,(0,v.v_)(e.$t("pages.account.preview_transaction_modal.category.label")),1),(0,s.Lk)("div",Sl,(0,v.v_)(e.transaction.category.name),1)])):(0,s.Q3)("",!0),e.transaction.description?((0,s.uX)(),(0,s.CE)("div",xl,[(0,s.Lk)("div",Ul,(0,v.v_)(e.$t("pages.account.preview_transaction_modal.description.label")),1),(0,s.Lk)("div",Ql,(0,v.v_)(e.transaction.description||""),1)])):(0,s.Q3)("",!0),!u(e.transaction)&&e.transaction.payee?((0,s.uX)(),(0,s.CE)("div",$l,[(0,s.Lk)("div",jl,[(0,s.Lk)("div",Wl,(0,v.v_)(e.$t("pages.account.preview_transaction_modal.payee.label")),1),(0,s.Lk)("div",ql,(0,v.v_)((null===(t=e.transaction.payee)||void 0===t?void 0:t.name)||""),1)])])):(0,s.Q3)("",!0),!u(e.transaction)&&e.transaction.tag?((0,s.uX)(),(0,s.CE)("div",zl,[(0,s.Lk)("div",Pl,[(0,s.Lk)("div",Yl,(0,v.v_)(e.$t("pages.account.preview_transaction_modal.tags.label")),1),(0,s.Lk)("div",Vl,(0,v.v_)((null===(o=e.transaction.tag)||void 0===o?void 0:o.name)||""),1)])])):(0,s.Q3)("",!0),e.account.sharedAccess.length>0||u(e.transaction)&&e.accountRecipient&&e.accountRecipient.sharedAccess.length>0?((0,s.uX)(),(0,s.CE)("div",Bl,[(0,s.Lk)("div",Xl,(0,v.v_)(e.$t("pages.account.preview_transaction_modal.author.label")),1),(0,s.Lk)("div",Hl,[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(b,null,{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:(0,l.R1)(a)(e.transaction.author.avatar,20),width:"20",height:"20"},null,8,Gl)])),_:1}),(0,s.eW)(" "+(0,v.v_)(e.transaction.author.name),1)])),_:1})])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Kl,[(0,s.Lk)("div",Zl,(0,v.v_)(e.$t("pages.account.preview_transaction_modal.created_at.label")),1),(0,s.Lk)("div",Jl,(0,v.v_)(e.transaction.date||""),1)])])]})),_:1}),(0,s.bF)(_,{class:"preview-modal-account-info-access-actions"},{default:(0,s.k6)((()=>[(0,s.bF)(h,{class:"econumo-btn -large -grey preview-modal-account-info-access-actions-btn",title:e.$t("elements.button.delete.label"),flat:"",icon:"delete",onClick:t[0]||(t[0]=t=>r(e.transaction.id)),disable:!e.canChangeTransaction||"transfer"===e.transaction.type&&(!e.transaction.account||!e.transaction.accountRecipient)},null,8,["title","disable"]),(0,s.bF)(h,{class:"econumo-btn -large -grey preview-modal-account-info-access-actions-btn -wide",label:e.$t("elements.button.edit.label"),flat:"",onClick:t[1]||(t[1]=t=>i(e.transaction.id)),disable:!e.canChangeTransaction||"transfer"===e.transaction.type&&(!e.transaction.account||!e.transaction.accountRecipient)},null,8,["label","disable"]),(0,s.bo)((0,s.bF)(h,{class:"econumo-btn -large -grey preview-modal-account-info-access-actions-btn",title:e.$t("elements.button.cancel.label"),flat:"",icon:"expand_more",onClick:c},null,8,["title"]),[[k]])])),_:1})])),_:1})])),_:1},8,["position"])}}});var ts=a(3954),as=a(6760);const ns=es,os=ns;function ls(){const e=(e,t,a=null)=>{var n;const o=B().find(e,{id:t});return void 0===o?null===a?"":a:null!==(n=o.name)&&void 0!==n?n:a};return{accountName:e}}z()(es,"components",{QDialog:j.A,QCard:Kt.A,QCardSection:da.A,QBadge:ts.A,QItem:Qa.A,QItemSection:$a.A,QIcon:aa.A,QChip:as.A,QAvatar:ba.A,QCardActions:fa.A,QBtn:W.A}),z()(es,"directives",{ClosePopup:ha.A});const ss=(0,s.pM)({name:"AccountPage",components:{AccountModal:en,ConfirmationDialogModal:Al,LoadingModal:cn,ViewTransactionModal:os},mixins:[ml,pl,kl],setup(){const{moneyFormat:e}=rt(),{accountName:t}=ls(),a=(t,a,n)=>{switch(t){case"expense":return"-"+e(a,n,!1,!1);case"income":return"+"+e(a,n,!1,!1);default:return e(a,n,!1,!1)}};return{moneyFormat:e,transactionFormat:a,accountName:t}},data(){return{search:"",deleteTransactionModal:{isOpened:!1,transaction:null}}},created(){this.isTransactionsLoaded||Qt().fetchTransactions(),this.$router.currentRoute.value.params.id&&Vt().selectAccount(this.$router.currentRoute.value.params.id)},mounted(){this.$router.currentRoute.value.params.id&&Vt().selectAccount(this.$router.currentRoute.value.params.id)},watch:{$route(e,t){"account"!==e.name||t.name===e.name&&t.params.id===e.params.id||(Vt().selectAccount(e.params.id),this.search="")},accountTransactionsDailyList(){this.$refs.transactionList&&this.$refs.transactionList.refresh()}},computed:{...(0,d.aH)(Yt,["userId","userName","userAvatar"]),...(0,d.aH)(Vt,["accounts","accountsOrdered","selectedAccountId","selectedAccountUserId"]),...(0,d.aH)(Qt,["isTransactionsLoaded","transactionsOrdered"]),...(0,d.aH)(St,["tags"]),...(0,d.aH)(Ut,["payees"]),account:function(){return B().find(this.accountsOrdered,{id:this.selectedAccountId})},transactions:function(){if(!this.search)return this.transactionsOrdered;let e=this.transactionsOrdered;return this.search.split(" ").forEach((t=>{e=B().filter(e,(e=>-1!==e.search.indexOf(B().toLower(t))))})),e},sharedAccess:function(){let e=this.account.sharedAccess??[];return 1===e.length?e.unshift({role:"admin",user:{id:this.userId,avatar:this.userAvatar,name:this.userName}}):e>3&&(e=B().slice(e,0,3)),e},canUpdateAccountSettings:function(){if(this.account.owner.id===this.userId)return!0;let e=!1;return this.account.sharedAccess.forEach((t=>{t.user?.id===this.userId&&"admin"===t.role&&(e=!0)})),e},canChangeTransaction:function(){if(this.account.owner.id===this.userId)return!0;let e=!1;return this.account.sharedAccess.forEach((t=>{t.user?.id!==this.userId||"admin"!==t.role&&"user"!==t.role||(e=!0)})),e},accountTransactionsDailyList:function(){return this.transactionsDailyList(this.filterByAccount(this.transactions,this.selectedAccountId))}},methods:{openAccountSettingsModal:function(){wa().openAccountModal(this.account)},transactionDisplayAmount:function(e){return"transfer"===e.type?e.accountId===this.selectedAccountId?this.transactionFormat("expense",e.amount,e.account.currency.id):this.transactionFormat("income",e.amountRecipient,e.accountRecipient.currency.id):this.transactionFormat(e.type,e.amount,e.account.currency.id)},isIncome:function(e){return"transfer"===e.type?e.accountId!==this.selectedAccountId:"expense"!==e.type},isTransfer:function(e){return"transfer"===e.type},openDeleteTransactionModal:function(e){this.closeModal(),this.deleteTransactionModal.transaction=B().cloneDeep(B().find(this.transactions,{id:e})),this.deleteTransactionModal.isOpened=!0},openCreateTransactionModal:function(){Bt().openTransactionModal({type:"expense"})},openUpdateTransactionModal:function(e){this.closeModal();const t=B().cloneDeep(B().find(this.transactionsOrdered,{id:e}));Bt().openTransactionModal(t)},deleteTransaction:function(e){Qt().deleteTransaction(e),this.closeModal()},closeModal:function(){this.previewTransactionModal.transaction=null,this.previewTransactionModal.account=null,this.previewTransactionModal.accountRecipient=null,this.previewTransactionModal.isOpened=!1,this.deleteTransactionModal.transaction=null,this.deleteTransactionModal.isOpened=!1}}});var cs=a(7716),is=a(525),rs=a(4436);const us=(0,$.A)(ss,[["render",dl]]),ds=us;z()(ss,"components",{QPage:cs.A,QBtn:W.A,QIcon:aa.A,QAvatar:ba.A,QInput:Ht.A,QVirtualScroll:is.A,QItemLabel:ja.A,QItem:Qa.A,QItemSection:$a.A,QBadge:ts.A,QMenu:rs.A,QList:xn.A});var ms=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};const ps={key:0,class:"form-container full-width column wrap justify-center items-center content-center"},gs=["innerHTML"],vs=["innerHTML"],bs={class:"register-next-steps"},fs={key:1,class:"form-container full-width column wrap justify-center items-center content-center"},hs={key:0},_s={class:"form-checkbox-group"},ys={class:"form-btn-container"},As=["innerHTML"],ks={class:"econumo-modal form-fail-modal"},Ms={class:"form-fail-modal-title"},Cs={class:"form-fail-modal-description"},Es={class:"form-fail-modal-button"},Is=(0,s.pM)(Object.assign({name:"RegistrationPage"},{__name:"Registration",setup(e){const t=(0,l.KR)(!1),a=(0,l.KR)(x.Ay.selfHosted()),o=(0,l.KR)(String(x.Ay.backendHost()||"")),c=(0,l.KR)(""),i=(0,l.KR)(""),r=(0,l.KR)(""),u=(0,l.KR)(""),d=(0,g.rd)(),m=Yt(),p=He(),b=oo(),f=lo(),h=(0,s.EW)((()=>x.Ay.isCustomApiAllowed())),_=(0,s.EW)((()=>ae.isPaywallEnabled)),y=(0,s.EW)((()=>ae.paywallUrl)),A=()=>{t.value=!0},k=()=>{t.value=!1},M=()=>ms(this,void 0,void 0,(function*(){b.open();try{const e=yield m.register({email:i.value,password:r.value.toString(),name:c.value.toString()});e?d.push({name:"login"}):A()}catch(e){A()}finally{b.close()}}));return(0,s.wB)(o,(e=>{x.Ay.backendHost(e)})),(0,s.wB)(a,(e=>{x.Ay.selfHosted(e)})),(0,s.sV)((()=>{m.isUserAuthenticated&&d.push({name:"home"}),a.value=x.Ay.selfHosted(),o.value=String(x.Ay.backendHost()||"")})),(e,d)=>{const m=(0,s.g2)("q-btn"),g=(0,s.g2)("q-input"),A=(0,s.g2)("q-checkbox"),C=(0,s.g2)("q-dialog"),E=(0,s.g2)("q-form");return _.value?((0,s.uX)(),(0,s.CE)("div",ps,[(0,s.Lk)("div",{class:"register-paywall-header",innerHTML:e.$t("modules.user.page.sign_up.paywall.header")},null,8,gs),(0,s.Lk)("div",{class:"register-paywall-text",innerHTML:e.$t("modules.user.page.sign_up.paywall.text")},null,8,vs),(0,s.bF)(m,{size:"22px",class:"econumo-btn q-px-xl q-py-xs -yellow",label:e.$t("modules.user.page.sign_up.paywall.action"),href:y.value,type:"a",target:"_blank",rel:"noopener noreferrer",flat:""},null,8,["label","href"]),(0,s.Lk)("div",bs,(0,v.v_)(e.$t("modules.user.page.sign_up.paywall.next_steps")),1)])):((0,s.uX)(),(0,s.CE)("div",fs,[(0,s.bF)(E,{novalidate:"",onSubmit:M,class:"full-width"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{outlined:"",class:"form-input full-width",placeholder:e.$t("modules.user.form.user.name.placeholder"),type:"text",modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]=e=>c.value=e),label:e.$t("modules.user.form.user.name.label"),"lazy-rules":"",rules:[t=>(0,l.R1)(p).isNotEmpty(t)||e.$t("modules.user.form.user.name.validation.required_field"),t=>(0,l.R1)(p).isValidName(t)||e.$t("modules.user.form.user.name.validation.invalid_name")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.bF)(g,{outlined:"",class:"form-input full-width",placeholder:e.$t("modules.user.form.user.email.placeholder"),type:"email",modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=e=>i.value=e),label:e.$t("modules.user.form.user.email.label"),"lazy-rules":"",rules:[t=>(0,l.R1)(p).isNotEmpty(t)||e.$t("modules.user.form.user.email.validation.required_field"),t=>(0,l.R1)(p).isValidEmail(t)||e.$t("modules.user.form.user.email.validation.invalid_email")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.bF)(g,{outlined:"",class:"form-input full-width",placeholder:e.$t("modules.user.form.user.password.placeholder"),type:"password",modelValue:r.value,"onUpdate:modelValue":d[2]||(d[2]=e=>r.value=e),label:e.$t("modules.user.form.user.password.label"),"lazy-rules":"",rules:[t=>(0,l.R1)(p).isNotEmpty(t)||e.$t("modules.user.form.user.password.validation.required_field"),t=>(0,l.R1)(p).isValidPassword(t)||e.$t("modules.user.form.user.password.validation.invalid_password")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.bF)(g,{outlined:"",class:"form-input full-width",placeholder:e.$t("modules.user.form.user.password_retry.placeholder"),type:"password",modelValue:u.value,"onUpdate:modelValue":d[3]||(d[3]=e=>u.value=e),label:e.$t("modules.user.form.user.password_retry.label"),"lazy-rules":"",rules:[t=>(0,l.R1)(p).isNotEmpty(t)||e.$t("modules.user.form.user.password_retry.validation.invalid_password"),t=>t===r.value||e.$t("modules.user.form.user.password_retry.validation.not_equals")]},null,8,["placeholder","modelValue","label","rules"]),h.value?((0,s.uX)(),(0,s.CE)("div",hs,[(0,s.Lk)("div",_s,[(0,s.bF)(A,{class:"form-checkbox full-width",modelValue:a.value,"onUpdate:modelValue":d[4]||(d[4]=e=>a.value=e),label:e.$t("modules.user.form.user.server_host.self_hosted")},null,8,["modelValue","label"]),(0,s.Lk)("div",{onClick:d[5]||(d[5]=(...e)=>(0,l.R1)(f).open&&(0,l.R1)(f).open(...e)),class:"form-checkbox-hint",role:"button",tabindex:"0"})]),(0,s.bo)((0,s.bF)(g,{outlined:"",class:"form-input full-width",placeholder:e.$t("modules.user.form.user.server_host.placeholder"),type:"url",modelValue:o.value,"onUpdate:modelValue":d[6]||(d[6]=e=>o.value=e),label:e.$t("modules.user.form.user.server_host.label"),"lazy-rules":"",rules:[t=>(0,l.R1)(p).isNotEmpty(t)||e.$t("modules.user.form.user.server_host.validation.required_field"),t=>(0,l.R1)(p).isValidHttpUrl(t)||e.$t("modules.user.form.user.server_host.validation.invalid_url")]},null,8,["placeholder","modelValue","label","rules"]),[[n.aG,a.value]])])):(0,s.Q3)("",!0),(0,s.Lk)("div",ys,[(0,s.bF)(m,{class:"econumo-btn -large -yellow full-width",label:e.$t("modules.user.form.sign_up.action.sign_up"),type:"submit",flat:""},null,8,["label"])]),(0,s.Lk)("div",{class:"register-form-privacy",innerHTML:e.$t("modules.user.page.sign_up.privacy.text")},null,8,As),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,l.R1)(b).isOpen?((0,s.uX)(),(0,s.Wv)(cn,{key:0,onClose:(0,l.R1)(b).close,"header-label":e.$t("modules.user.modal.sign_up.label")},null,8,["onClose","header-label"])):(0,s.Q3)("",!0),(0,s.bF)(Vn,{"model-value":(0,l.R1)(f).isOpen.value,"onUpdate:modelValue":d[7]||(d[7]=e=>(0,l.R1)(f).isOpen.value=e),onCancel:(0,l.R1)(f).close},null,8,["model-value","onCancel"]),(0,s.bF)(C,{modelValue:t.value,"onUpdate:modelValue":d[8]||(d[8]=e=>t.value=e),minimized:"",onHide:k},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ks,[(0,s.Lk)("div",Ms,(0,v.v_)(e.$t("modules.user.modal.sign_up_failed.header")),1),(0,s.Lk)("div",Cs,(0,v.v_)(e.$t("modules.user.modal.sign_up_failed.information")),1),(0,s.Lk)("div",Es,[(0,s.bF)(m,{class:"econumo-btn -small -yellow full-width",label:e.$t("elements.button.ok.label"),type:"button",onClick:k,flat:""},null,8,["label"])])])])),_:1},8,["modelValue"])]))])),_:1})]))}}})),ws=Is,Ls=ws;z()(Is,"components",{QBtn:W.A,QForm:ua.A,QInput:Ht.A,QCheckbox:fo.A,QDialog:j.A});const Ts={class:"settings-toolbar-mobile"},Ns={class:"settings-toolbar-mobile-title"},Ds=(0,s.Lk)("div",{class:"settings-toolbar-mobile-container"},null,-1),Os={class:"settings-main-user-avatar"},Fs=["src"],Rs={class:"settings-main-user-block"},Ss={class:"settings-main-user-name"},xs={class:"settings-main-user-login"},Us={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},Qs={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},$s={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},js={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},Ws={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},qs={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},zs={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},Ps={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},Ys={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},Vs={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"},Bs={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"};function Xs(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-item-label"),r=(0,s.g2)("q-item"),u=(0,s.g2)("q-icon"),d=(0,s.g2)("q-field"),m=(0,s.g2)("q-item-section"),p=(0,s.g2)("currency-select"),g=(0,s.g2)("q-list"),b=(0,s.g2)("change-language-modal"),f=(0,s.g2)("import-csv-modal"),h=(0,s.g2)("export-csv-modal"),_=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(_,{class:"settings"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ts,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("home",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",Ns,(0,v.v_)(e.$t("pages.settings.settings.header")),1)]),Ds]),(0,s.bF)(i,{class:"settings-label-header"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("pages.settings.settings.header_desktop")),1)])),_:1}),(0,s.Lk)("div",null,[(0,s.bF)(g,{class:"settings-main"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"settings-main-user cursor-pointer",clickable:"",to:{name:"settingsProfile"}},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Os,[(0,s.Lk)("img",{class:"settings-main-user-avatar-img",src:e.avatarUrl(e.userAvatar,50),width:"50",height:"50"},null,8,Fs)]),(0,s.Lk)("div",Rs,[(0,s.Lk)("div",Ss,(0,v.v_)(e.userName),1),(0,s.Lk)("div",xs,(0,v.v_)(e.userLogin),1)])])),_:1}),(0,s.bF)(i,{class:"settings-main-label"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("pages.settings.settings.groups.service")),1)])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",onClick:e.sync},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{borderless:"",class:"settings-main-item-field cursor-pointer","bottom-slots":""},{control:(0,s.k6)((()=>[(0,s.Lk)("div",Us,(0,v.v_)(e.$t("pages.settings.sync.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(u,{class:"settings-main-item-field-arrow",name:"sync"})])),hint:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.lastSyncAt),1)])),_:1})])),_:1})])),_:1},8,["onClick"]),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",to:{name:"settingsConnections"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",Qs,(0,v.v_)(e.$t("modules.connections.pages.settings.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(u,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_right"})])),_:1})])),_:1})])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",to:{name:"settingsBudgets"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",$s,(0,v.v_)(e.$t("modules.budget.page.settings.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(u,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_right"})])),_:1})])),_:1})])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",to:{name:"settingsAccounts"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",js,(0,v.v_)(e.$t("pages.settings.accounts.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(u,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_right"})])),_:1})])),_:1})])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",to:{name:"settingsCategories"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",Ws,(0,v.v_)(e.$t("modules.classifications.categories.pages.settings.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(u,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_right"})])),_:1})])),_:1})])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",to:{name:"settingsPayees"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",qs,(0,v.v_)(e.$t("modules.classifications.payees.pages.settings.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(u,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_right"})])),_:1})])),_:1})])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",to:{name:"settingsTags"}},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",zs,(0,v.v_)(e.$t("modules.classifications.tags.pages.settings.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(u,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_right"})])),_:1})])),_:1})])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",onClick:e.openImportCsvModal},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",Ps,(0,v.v_)(e.$t("pages.settings.import_csv.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(u,{class:"settings-main-item-field-arrow",name:"upload_file"})])),_:1})])),_:1})])),_:1},8,["onClick"]),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",onClick:e.exportTransactions},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",Ys,(0,v.v_)(e.$t("pages.settings.export_csv.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(u,{class:"settings-main-item-field-arrow",name:"download"})])),_:1})])),_:1})])),_:1},8,["onClick"]),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:""},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(p,{modelValue:e.currency,"onUpdate:modelValue":t[1]||(t[1]=t=>e.currency=t),label:e.$t("pages.settings.currency.menu_item"),"custom-class":"settings-main-item-field-currency settings-main-item-field cursor-pointer settings-main-item-field-control",borderless:!0,"option-disable":e=>!e,"dropdown-icon":"keyboard_arrow_down","popup-content-class":"modal-popup","options-selected-class":"modal-popup-selected"},{"selected-item":(0,s.k6)((e=>[(0,s.Lk)("div",Vs,(0,v.v_)(e.opt.label),1)])),_:1},8,["modelValue","label","option-disable"])])),_:1})])),_:1}),e.localeOptions.length>1?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.bF)(i,{class:"settings-main-label"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("pages.settings.settings.groups.user_interface")),1)])),_:1}),(0,s.bF)(r,{class:"settings-main-item cursor-pointer",clickable:"",onClick:e.openLanguageModal},{default:(0,s.k6)((()=>[(0,s.bF)(m,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{borderless:"",class:"settings-main-item-field cursor-pointer",label:e.$t("pages.settings.language.menu_item"),"stack-label":""},{control:(0,s.k6)((()=>[(0,s.Lk)("div",Bs,(0,v.v_)(e.fullLanguageLabel()),1)])),append:(0,s.k6)((()=>[(0,s.bF)(u,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_down"})])),_:1},8,["label"])])),_:1})])),_:1},8,["onClick"])],64)):(0,s.Q3)("",!0)])),_:1})]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.isLanguageModalOpened?((0,s.uX)(),(0,s.Wv)(b,{key:0,onCancel:t[2]||(t[2]=t=>e.closeLanguageModal())})):(0,s.Q3)("",!0),e.isImportCsvModalOpened?((0,s.uX)(),(0,s.Wv)(f,{key:1,onCancel:t[3]||(t[3]=t=>e.closeImportCsvModal()),onImport:e.handleImport},null,8,["onImport"])):(0,s.Q3)("",!0),e.isExportCsvModalOpened?((0,s.uX)(),(0,s.Wv)(h,{key:2,"selected-ids":e.selectedAccountIds,onUpdateSelected:t[4]||(t[4]=t=>e.selectedAccountIds=t),onClose:t[5]||(t[5]=t=>e.closeExportCsvModal()),onSubmit:e.handleExport},null,8,["selected-ids","onSubmit"])):(0,s.Q3)("",!0)]))])),_:1})}a(7396),a(923),a(9502);const Hs={class:"econumo-modal import-result-modal"},Gs={class:"import-result-modal-icon"},Ks={class:"import-result-modal-title"},Zs={class:"import-result-modal-summary"},Js={key:0,class:"import-result-stat success"},ec={key:1,class:"import-result-stat error"},tc={key:0,class:"import-result-modal-errors"},ac={class:"import-result-modal-errors-title"},nc={class:"import-result-modal-errors-list"},oc={class:"error-message"},lc={class:"error-rows"},sc={key:0,class:"import-result-more-errors"},cc={class:"import-result-modal-button"},ic=5,rc=(0,s.pM)(Object.assign({name:"ImportResultModal"},{__name:"ImportResultModal",props:{imported:{},failed:{},errors:{}},emits:["close"],setup(e,{emit:t}){const{t:a}=(0,U.s9)(),n=e,o=t,l=(0,s.EW)((()=>n.errors.slice(0,ic)));function c(e){if(0===e.length)return"";if(1===e.length)return`${a("modals.import_result.row")} ${e[0]}`;const t=10;if(e.length<=t)return`${a("modals.import_result.rows")}: ${e.join(", ")}`;const n=e.slice(0,t).join(", "),o=e.length-t;return`${a("modals.import_result.rows")}: ${n}, +${o} ${a("modals.import_result.more")}`}const i=(0,s.EW)((()=>0===n.failed?"check_circle":n.imported>0?"warning":"error")),r=(0,s.EW)((()=>0===n.failed?"positive":n.imported>0?"warning":"negative")),u=(0,s.EW)((()=>0===n.failed?a("modals.import_result.success_title"):n.imported>0?a("modals.import_result.partial_success_title"):a("modals.import_result.error_title")));function d(){o("close")}return(e,t)=>{const a=(0,s.g2)("q-icon"),n=(0,s.g2)("q-btn"),o=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(o,{"model-value":!0,persistent:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Hs,[(0,s.Lk)("div",Gs,[(0,s.bF)(a,{name:i.value,color:r.value,size:"48px"},null,8,["name","color"])]),(0,s.Lk)("div",Ks,(0,v.v_)(u.value),1),(0,s.Lk)("div",Zs,[e.imported>0?((0,s.uX)(),(0,s.CE)("div",Js,[(0,s.bF)(a,{name:"check_circle",size:"20px"}),(0,s.Lk)("span",null,(0,v.v_)(e.$t("modals.import_result.imported",{count:e.imported})),1)])):(0,s.Q3)("",!0),e.failed>0?((0,s.uX)(),(0,s.CE)("div",ec,[(0,s.bF)(a,{name:"error",size:"20px"}),(0,s.Lk)("span",null,(0,v.v_)(e.$t("modals.import_result.failed",{count:e.failed})),1)])):(0,s.Q3)("",!0)]),e.errors.length>0?((0,s.uX)(),(0,s.CE)("div",tc,[(0,s.Lk)("div",ac,(0,v.v_)(e.$t("modals.import_result.errors_detail"))+": ",1),(0,s.Lk)("div",nc,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.value,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,class:"import-result-error-item"},[(0,s.Lk)("span",oc,(0,v.v_)(e.message),1),(0,s.Lk)("span",lc,(0,v.v_)(c(e.rows)),1)])))),128)),e.errors.length>ic?((0,s.uX)(),(0,s.CE)("div",sc,(0,v.v_)(e.$t("modals.import_result.and_more",{count:e.errors.length-ic})),1)):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0),(0,s.Lk)("div",cc,[(0,s.bF)(n,{class:"econumo-btn -small -yellow full-width",label:e.$t("elements.button.ok.label"),type:"button",onClick:d,flat:""},null,8,["label"])])])])),_:1})}}})),uc=(0,$.A)(rc,[["__scopeId","data-v-4d435953"]]),dc=uc;z()(rc,"components",{QDialog:j.A,QIcon:aa.A,QBtn:W.A});var mc=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};const pc=e=>((0,s.Qi)("data-v-174c3448"),e=e(),(0,s.jt)(),e),gc={class:"settings-toolbar-mobile"},vc={class:"settings-toolbar-mobile-title"},bc={class:"responsive-modal-header"},fc={class:"import-csv-upload"},hc={key:0,class:"responsive-modal-control"},_c={key:1,class:"import-csv-file-selected"},yc={class:"import-csv-file-info"},Ac={class:"import-csv-file-name"},kc={key:0,class:"import-csv-mapping"},Mc={class:"import-csv-mapping-description"},Cc={class:"responsive-modal-control"},Ec={class:"responsive-modal-control"},Ic={key:0,class:"import-csv-amount-row"},wc={class:"responsive-modal-control import-csv-amount-field"},Lc={key:1,class:"import-csv-dual-amounts"},Tc={class:"import-csv-amount-row"},Nc={class:"responsive-modal-control import-csv-amount-field"},Dc={class:"responsive-modal-control import-csv-outflow-field"},Oc=pc((()=>(0,s.Lk)("div",{class:"import-csv-section-break"},null,-1))),Fc={class:"responsive-modal-control"},Rc={class:"responsive-modal-control"},Sc={class:"responsive-modal-control"},xc={class:"responsive-modal-control"},Uc={class:"import-csv-progress-percentage"},Qc=500,$c=(0,s.pM)({__name:"ImportCsvModal",emits:["cancel","import"],setup(e,{emit:t}){const{t:a}=(0,U.s9)(),n=zt(),o=t,c=(0,l.KR)(!0),i=(0,l.KR)(null),r=(0,l.KR)([]),u=(0,l.KR)({}),d=(0,l.KR)(),m=(0,l.KR)("single"),p=(0,l.KR)(!1),g=(0,l.KR)(!1),b=(0,l.KR)({imported:0,failed:0,errors:[]}),f=(0,l.KR)(null),h=(0,l.KR)({currentChunk:0,totalChunks:0,percentage:0}),_=(0,l.KR)(!1),y=(0,l.KR)({account:"",date:"",amount:null,amountInflow:null,amountOutflow:null,category:null,description:null,payee:null,tag:null});function A(e){const t=[/^\d{4}-\d{2}-\d{2}/,/^\d{2}\/\d{2}\/\d{4}/,/^\d{2}\.\d{2}\.\d{4}/,/^\d{4}\/\d{2}\/\d{2}/];return t.some((t=>t.test(e)))}function k(e){try{const t=new Date(e);if(!isNaN(t.getTime())){const e=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${e}-${a}-${n}`}}catch(e){}return e}const M=(0,s.EW)((()=>r.value.filter((e=>e&&e.trim())).map((e=>{const t=u.value[e]||[];let a=e;if(t.length>0&&t[0]){const n=t[0];let o=n;A(n)&&(o=k(n)),o.length>25&&(o=o.substring(0,25)+"..."),a=`${e} ("${o}")`}return{label:a,value:e}})))),C=(0,s.EW)((()=>[{label:a("modals.import_csv.none"),value:null},...M.value]));function E(){c.value=!1,o("cancel")}function I(e){return mc(this,void 0,void 0,(function*(){if(!e)return r.value=[],void(u.value={});try{const t=yield e.text(),a=t.split("\n").filter((e=>e.trim()));if(0===a.length)return;const n=w(a[0]);r.value=n;const o={};n.forEach((e=>{o[e]=[]}));const l=Math.min(501,a.length);for(let e=1;e<l;e++){const t=w(a[e]);if(n.forEach(((e,a)=>{if(0===o[e].length){const n=t[a]||"";n.trim()&&o[e].push(n)}})),n.every((e=>o[e].length>0)))break}u.value=o,N(n)}catch(e){console.error("Error parsing CSV:",e)}}))}function w(e){const t=[];let a="",n=!1;for(let o=0;o<e.length;o++){const l=e[o];'"'===l?n&&'"'===e[o+1]?(a+='"',o++):n=!n:","!==l||n?a+=l:(t.push(a.trim()),a="")}return t.push(a.trim()),t}function L(e){return e.map((e=>e.includes(",")||e.includes('"')||e.includes("\n")?`"${e.replace(/"/g,'""')}"`:e)).join(",")}function T(e,t){const a=[L(e),...t.map((e=>L(e)))];return a.join("\n")}function N(e){const t=e.map((e=>e.toLowerCase())),a=t.findIndex((e=>e.includes("account")||e.includes("")||e.includes("")));a>=0&&(y.value.account=e[a]);const n=t.findIndex((e=>e.includes("date")||e.includes("")||e.includes("")));n>=0&&(y.value.date=e[n]);const o=t.findIndex((e=>e.includes("inflow")||e.includes("income")||e.includes("credit")||e.includes("")||e.includes("")||e.includes(""))),l=t.findIndex((e=>e.includes("outflow")||e.includes("expense")||e.includes("debit")||e.includes("")||e.includes("")||e.includes("withdrawal")));if(o>=0&&l>=0)m.value="dual",y.value.amountInflow=e[o],y.value.amountOutflow=e[l],y.value.amount=null;else{m.value="single";const a=t.findIndex((e=>e.includes("amount")||e.includes("")||e.includes("sum")||e.includes("value")));a>=0&&(y.value.amount=e[a]),y.value.amountInflow=null,y.value.amountOutflow=null}const s=t.findIndex((e=>e.includes("category")||e.includes("")));s>=0&&(y.value.category=e[s]);const c=t.findIndex((e=>e.includes("description")||e.includes("")||e.includes("memo")||e.includes("note")));c>=0&&(y.value.description=e[c]);const i=t.findIndex((e=>e.includes("payee")||e.includes("")||e.includes("merchant")));i>=0&&(y.value.payee=e[i]);const r=t.findIndex((e=>e.includes("tag")||e.includes("")||e.includes("label")));r>=0&&(y.value.tag=e[r])}function D(e){"single"===e?(y.value.amountInflow=null,y.value.amountOutflow=null):y.value.amount=null}function O(){g.value=!1,f.value&&(o("import",f.value),f.value=null),o("cancel")}function F(e){return mc(this,void 0,void 0,(function*(){const t=yield e.text(),a=t.split("\n").filter((e=>e.trim()));if(0===a.length)throw new Error("Empty CSV file");const n=w(a[0]),o=[];for(let e=1;e<a.length;e++){const t=w(a[e]);t.some((e=>e.trim()))&&o.push(t)}const l=[];for(let e=0;e<o.length;e+=Qc)l.push(o.slice(e,e+Qc));return{header:n,chunks:l,totalRows:o.length}}))}function R(e){return e&&"object"===typeof e?Object.entries(e).map((([e,t])=>({message:e,rows:Array.isArray(t)?t:[]}))):[]}function S(e,t,a,n){return mc(this,void 0,void 0,(function*(){const o=T(t,e),l=new Blob([o],{type:"text/csv"}),s=new File([l],`chunk_${n}.csv`,{type:"text/csv"}),c=new FormData;return c.append("file",s),c.append("mapping",JSON.stringify(a)),new Promise(((e,t)=>{Ot.importTransactionList(s,a,(t=>{var a;const n=(null===(a=t.data)||void 0===a?void 0:a.data)||t.data||t,o=R(n.errors);e({imported:n.imported||0,skipped:n.skipped||0,errors:o})}),(e=>{t(e)}))}))}))}function x(){var e,t;return mc(this,void 0,void 0,(function*(){const o=yield d.value.validate();if(!o||!i.value)return;p.value=!0;const l={file:i.value,mapping:{account:y.value.account,date:y.value.date,amount:y.value.amount,amountInflow:y.value.amountInflow,amountOutflow:y.value.amountOutflow,category:y.value.category,description:y.value.description,payee:y.value.payee,tag:y.value.tag}};try{const{header:t,chunks:a,totalRows:o}=yield F(i.value),s=a.length>1;_.value=s,s&&(h.value.totalChunks=a.length,h.value.currentChunk=0,h.value.percentage=0);let r=0,u=0;const d=new Map;for(let n=0;n<a.length;n++){const o=a[n],c=n*Qc+1;s&&(h.value.currentChunk=n+1,h.value.percentage=(n+1)/a.length*100);try{const e=yield S(o,t,l.mapping,n);r+=e.imported,u+=e.skipped,e.errors.forEach((e=>{const t=e.rows.map((e=>e+c-1));d.has(e.message)||d.set(e.message,new Set),t.forEach((t=>d.get(e.message).add(t)))}))}catch(t){console.error(`Chunk ${n+1} failed:`,t);const a=`Chunk ${n+1} failed: ${(null===(e=null===t||void 0===t?void 0:t.data)||void 0===e?void 0:e.message)||(null===t||void 0===t?void 0:t.message)||"Unknown error"}`;d.has(a)||d.set(a,new Set([c])),u+=o.length}}const m=Array.from(d.entries()).map((([e,t])=>({message:e,rows:Array.from(t).sort(((e,t)=>e-t))})));b.value={imported:r,failed:u,errors:m},f.value=l,n.fetchAll(),c.value=!1,setTimeout((()=>{g.value=!0}),100)}catch(e){console.error("Import failed:",e);let n=a("modals.import_csv.error");(null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.message)?n=e.data.message:(null===e||void 0===e?void 0:e.message)&&(n=e.message),b.value={imported:0,failed:0,errors:[{message:n,rows:[0]}]},c.value=!1,setTimeout((()=>{g.value=!0}),100)}finally{p.value=!1,_.value=!1,h.value={currentChunk:0,totalChunks:0,percentage:0}}}))}return(e,t)=>{const a=(0,s.g2)("q-icon"),n=(0,s.g2)("q-file"),o=(0,s.g2)("q-btn"),l=(0,s.g2)("q-select"),u=(0,s.g2)("q-tooltip"),f=(0,s.g2)("q-card-section"),A=(0,s.g2)("q-linear-progress"),k=(0,s.g2)("q-card-actions"),w=(0,s.g2)("q-form"),L=(0,s.g2)("q-card"),T=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,s.bF)(T,{class:"responsive-modal",modelValue:c.value,"onUpdate:modelValue":t[13]||(t[13]=e=>c.value=e)},{default:(0,s.k6)((()=>[(0,s.bF)(L,{class:"responsive-modal-card import-csv-modal"},{default:(0,s.k6)((()=>[(0,s.bF)(w,{ref_key:"importForm",ref:d,onSubmit:x,onReset:E,class:"responsive-modal-form"},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",gc,[(0,s.Lk)("div",null,[(0,s.Lk)("h4",vc,(0,v.v_)(e.$t("modals.import_csv.header")),1)])]),(0,s.Lk)("div",bc,(0,v.v_)(e.$t("modals.import_csv.header")),1),(0,s.Lk)("div",fc,[i.value?((0,s.uX)(),(0,s.CE)("div",_c,[(0,s.Lk)("div",yc,[(0,s.bF)(a,{name:"description",size:"20px",color:"primary"}),(0,s.Lk)("span",Ac,(0,v.v_)(i.value.name),1)]),(0,s.bF)(o,{flat:"",dense:"",size:"sm",color:"primary",label:e.$t("elements.button.change.label"),onClick:t[1]||(t[1]=e=>{i.value=null,r.value=[]})},null,8,["label"])])):((0,s.uX)(),(0,s.CE)("div",hc,[(0,s.bF)(n,{modelValue:i.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>i.value=e),I],label:e.$t("modals.import_csv.file.label"),outlined:"",accept:".csv","max-file-size":"10485760",class:"form-input full-width",rules:[t=>!!t||e.$t("elements.validation.required_field")]},{prepend:(0,s.k6)((()=>[(0,s.bF)(a,{name:"attach_file"})])),hint:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modals.import_csv.file.hint")),1)])),_:1},8,["modelValue","label","rules"])]))]),i.value&&r.value.length>0?((0,s.uX)(),(0,s.CE)("div",kc,[(0,s.Lk)("div",Mc,(0,v.v_)(e.$t("modals.import_csv.mapping.description")),1),(0,s.Lk)("div",Cc,[(0,s.bF)(l,{modelValue:y.value.account,"onUpdate:modelValue":t[2]||(t[2]=e=>y.value.account=e),options:M.value,label:e.$t("modals.import_csv.fields.account")+" *",outlined:"","emit-value":"","map-options":"",class:"form-select full-width",rules:[t=>!!t||e.$t("elements.validation.required_field")]},{prepend:(0,s.k6)((()=>[(0,s.bF)(a,{name:"account_balance"})])),_:1},8,["modelValue","options","label","rules"])]),(0,s.Lk)("div",Ec,[(0,s.bF)(l,{modelValue:y.value.date,"onUpdate:modelValue":t[3]||(t[3]=e=>y.value.date=e),options:M.value,label:e.$t("modals.import_csv.fields.date")+" *",outlined:"","emit-value":"","map-options":"",class:"form-select full-width",rules:[t=>!!t||e.$t("elements.validation.required_field")]},{prepend:(0,s.k6)((()=>[(0,s.bF)(a,{name:"event"})])),_:1},8,["modelValue","options","label","rules"])]),"single"===m.value?((0,s.uX)(),(0,s.CE)("div",Ic,[(0,s.Lk)("div",wc,[(0,s.bF)(l,{modelValue:y.value.amount,"onUpdate:modelValue":t[4]||(t[4]=e=>y.value.amount=e),options:C.value,label:e.$t("modals.import_csv.fields.amount")+" *",outlined:"","emit-value":"","map-options":"",class:"form-select full-width",rules:[t=>!!t||e.$t("elements.validation.required_field")]},{prepend:(0,s.k6)((()=>[(0,s.bF)(a,{name:"payments"})])),_:1},8,["modelValue","options","label","rules"])]),(0,s.bF)(o,{flat:"",round:"",dense:"",icon:"call_split",color:"primary",onClick:t[5]||(t[5]=e=>{m.value="dual",D("dual")}),class:"import-csv-amount-switch"},{default:(0,s.k6)((()=>[(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modals.import_csv.amount_mode.switch_to_dual")),1)])),_:1})])),_:1})])):(0,s.Q3)("",!0),"dual"===m.value?((0,s.uX)(),(0,s.CE)("div",Lc,[(0,s.Lk)("div",Tc,[(0,s.Lk)("div",Nc,[(0,s.bF)(l,{modelValue:y.value.amountInflow,"onUpdate:modelValue":t[6]||(t[6]=e=>y.value.amountInflow=e),options:C.value,label:e.$t("modals.import_csv.fields.amount_inflow")+" *",outlined:"","emit-value":"","map-options":"",class:"form-select full-width",rules:[t=>!!t||e.$t("elements.validation.required_field")]},{prepend:(0,s.k6)((()=>[(0,s.bF)(a,{name:"arrow_downward",color:"positive"})])),_:1},8,["modelValue","options","label","rules"])]),(0,s.bF)(o,{flat:"",round:"",dense:"",icon:"call_merge",color:"primary",onClick:t[7]||(t[7]=e=>{m.value="single",D("single")}),class:"import-csv-amount-switch"},{default:(0,s.k6)((()=>[(0,s.bF)(u,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modals.import_csv.amount_mode.switch_to_single")),1)])),_:1})])),_:1})]),(0,s.Lk)("div",Dc,[(0,s.bF)(l,{modelValue:y.value.amountOutflow,"onUpdate:modelValue":t[8]||(t[8]=e=>y.value.amountOutflow=e),options:C.value,label:e.$t("modals.import_csv.fields.amount_outflow")+" *",outlined:"","emit-value":"","map-options":"",class:"form-select full-width",rules:[t=>!!t||e.$t("elements.validation.required_field")]},{prepend:(0,s.k6)((()=>[(0,s.bF)(a,{name:"arrow_upward",color:"negative"})])),_:1},8,["modelValue","options","label","rules"])])])):(0,s.Q3)("",!0),Oc,(0,s.Lk)("div",Fc,[(0,s.bF)(l,{modelValue:y.value.category,"onUpdate:modelValue":t[9]||(t[9]=e=>y.value.category=e),options:C.value,label:e.$t("modals.import_csv.fields.category"),outlined:"","emit-value":"","map-options":"",class:"form-select full-width"},{prepend:(0,s.k6)((()=>[(0,s.bF)(a,{name:"category"})])),_:1},8,["modelValue","options","label"])]),(0,s.Lk)("div",Rc,[(0,s.bF)(l,{modelValue:y.value.description,"onUpdate:modelValue":t[10]||(t[10]=e=>y.value.description=e),options:C.value,label:e.$t("modals.import_csv.fields.description"),outlined:"","emit-value":"","map-options":"",class:"form-select full-width"},{prepend:(0,s.k6)((()=>[(0,s.bF)(a,{name:"description"})])),_:1},8,["modelValue","options","label"])]),(0,s.Lk)("div",Sc,[(0,s.bF)(l,{modelValue:y.value.payee,"onUpdate:modelValue":t[11]||(t[11]=e=>y.value.payee=e),options:C.value,label:e.$t("modals.import_csv.fields.payee"),outlined:"","emit-value":"","map-options":"",class:"form-select full-width"},{prepend:(0,s.k6)((()=>[(0,s.bF)(a,{name:"person"})])),_:1},8,["modelValue","options","label"])]),(0,s.Lk)("div",xc,[(0,s.bF)(l,{modelValue:y.value.tag,"onUpdate:modelValue":t[12]||(t[12]=e=>y.value.tag=e),options:C.value,label:e.$t("modals.import_csv.fields.tag"),outlined:"","emit-value":"","map-options":"",class:"form-select full-width"},{prepend:(0,s.k6)((()=>[(0,s.bF)(a,{name:"label"})])),_:1},8,["modelValue","options","label"])])])):(0,s.Q3)("",!0)])),_:1}),p.value&&_.value?((0,s.uX)(),(0,s.Wv)(f,{key:0,class:"import-csv-progress-section"},{default:(0,s.k6)((()=>[(0,s.bF)(A,{value:h.value.percentage/100,size:"8px",color:"primary",class:"import-csv-progress-bar"},null,8,["value"]),(0,s.Lk)("div",Uc,(0,v.v_)(Math.round(h.value.percentage))+"% ",1)])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(k,{class:"responsive-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"econumo-btn -medium -grey responsive-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClick:E},null,8,["label"]),(0,s.bF)(o,{class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.import.label"),type:"submit",disable:!i.value||p.value,loading:p.value},null,8,["label","disable","loading"])])),_:1})])),_:1},512)])),_:1})])),_:1},8,["modelValue"]),g.value?((0,s.uX)(),(0,s.Wv)(dc,{key:0,imported:b.value.imported,failed:b.value.failed,errors:b.value.errors,onClose:O},null,8,["imported","failed","errors"])):(0,s.Q3)("",!0)])}}});var jc=a(9980),Wc=a(7410),qc=a(8240);const zc=(0,$.A)($c,[["__scopeId","data-v-174c3448"]]),Pc=zc;z()($c,"components",{QDialog:j.A,QCard:Kt.A,QForm:ua.A,QCardSection:da.A,QFile:jc.A,QIcon:aa.A,QBtn:W.A,QSelect:va.A,QTooltip:Wc.A,QLinearProgress:qc.A,QCardActions:fa.A});var Yc=a(2192),Vc=a(2312);const Bc={class:"budget-form-wrapper"},Xc={class:"budget-form-wrapper-accounts-header-container"},Hc={class:"budget-form-wrapper-accounts-header"},Gc={class:"budget-form-wrapper-accounts"},Kc={class:"budget-form-wrapper-accounts-item-info"},Zc={class:"budget-form-wrapper-accounts-item-info-container"},Jc=(0,s.pM)(Object.assign({name:"ExportCsvForm"},{__name:"ExportCsvForm",props:{selectedIds:{default:()=>[]}},emits:["update-selected"],setup(e,{emit:t}){const{moneyFormat:a}=rt(),n=e,o=t,c=Vt(),i=Yt(),r=(0,l.KR)([...n.selectedIds||[]]);(0,s.wB)((()=>n.selectedIds),(e=>{r.value=[...e||[]]}),{deep:!0});const u=(0,s.EW)((()=>!!c.accountsOrdered&&c.accountsOrdered.some((e=>e.owner.id!==i.userId)))),d=(0,s.EW)((()=>!(!c.accountsOrdered||0===c.accountsOrdered.length)&&r.value.length===c.accountsOrdered.length)),m=(0,s.EW)((()=>{const e=[];return c.accountsOrdered?(c.accountsOrdered.forEach((t=>{const{id:a,name:n,icon:o,balance:l,currency:s,owner:c}=t,u=(0,Yc.A)(r.value,a),d=c.id===i.userId?i.userName:c.name,m={id:a,name:n,icon:o,balance:l,currency:s,ownerName:d,selected:u};e.push(m)})),e):e}));function p(e,t){const a=(0,Yc.A)(r.value,e);!a&&t?r.value.push(e):a&&!t&&(0,Vc.A)(r.value,(t=>t===e)),o("update-selected",r.value)}function g(){d.value?r.value=[]:r.value=c.accountsOrdered.map((e=>e.id)),o("update-selected",r.value)}return(e,t)=>{const n=(0,s.g2)("q-icon"),o=(0,s.g2)("q-item-section"),c=(0,s.g2)("q-toggle");return(0,s.uX)(),(0,s.CE)("div",Bc,[(0,s.Lk)("div",Xc,[(0,s.Lk)("h5",Hc,(0,v.v_)(e.$t("modules.export_csv.modal.export_csv_form.accounts")),1),(0,s.Lk)("a",{class:"budget-form-wrapper-accounts-select-all",onClick:g},(0,v.v_)(d.value?e.$t("modules.export_csv.modal.export_csv_form.deselect_all"):e.$t("modules.export_csv.modal.export_csv_form.select_all")),1)]),(0,s.Lk)("div",Gc,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.value,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"budget-form-wrapper-accounts-item-wrapper",key:e.id},[(0,s.bF)(o,{class:"budget-form-wrapper-accounts-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"budget-form-wrapper-accounts-item-avatar-icon",name:e.icon},null,8,["name"])])),_:2},1024),(0,s.Lk)("div",Kc,[(0,s.bF)(o,{class:"budget-form-wrapper-accounts-item-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.name),1)])),_:2},1024),(0,s.Lk)("div",Zc,[(0,s.bF)(o,{class:"budget-form-wrapper-accounts-item-balance"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)((0,l.R1)(a)(e.balance,e.currency.id,!0,!0)),1)])),_:2},1024)]),u.value?((0,s.uX)(),(0,s.Wv)(o,{key:0,class:"budget-form-wrapper-accounts-item-owner"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.ownerName),1)])),_:2},1024)):(0,s.Q3)("",!0)]),(0,s.bF)(o,{class:"budget-form-wrapper-accounts-item-toggle",side:""},{default:(0,s.k6)((()=>[(0,s.bF)(c,{"model-value":e.selected,onClick:t=>p(e.id,!e.selected)},null,8,["model-value","onClick"])])),_:2},1024)])))),128))])])}}}));var ei=a(6908);const ti=(0,$.A)(Jc,[["__scopeId","data-v-ec238ba6"]]),ai=ti;z()(Jc,"components",{QItemSection:$a.A,QIcon:aa.A,QToggle:ei.A});const ni={class:"settings-toolbar-mobile"},oi={class:"settings-toolbar-mobile-title"},li={class:"responsive-modal-header"},si=(0,s.pM)(Object.assign({name:"ExportCsvModal"},{__name:"ExportCsvModal",props:{selectedIds:{}},emits:["update-selected","submit","close"],setup(e,{emit:t}){const a=e,o=t,l=(0,s.EW)({get(){return a.selectedIds},set(e){o("update-selected",e)}});function c(){o("submit",{accountIds:l.value})}function i(){o("close")}return(e,t)=>{const a=(0,s.g2)("q-card-section"),o=(0,s.g2)("q-btn"),r=(0,s.g2)("q-card-actions"),u=(0,s.g2)("q-form"),d=(0,s.g2)("q-card"),m=(0,s.g2)("q-dialog"),p=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(m,{class:"responsive-modal","model-value":!0,onHide:i},{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"responsive-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{ref:"exportForm",onSubmit:(0,n.D$)(c,["prevent"]),onReset:i},{default:(0,s.k6)((()=>[(0,s.bF)(a,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",ni,[(0,s.Lk)("div",null,[(0,s.Lk)("h4",oi,(0,v.v_)(e.$t("modules.export_csv.modal.export_csv_form.header")),1)])]),(0,s.Lk)("div",li,(0,v.v_)(e.$t("modules.export_csv.modal.export_csv_form.header")),1),(0,s.bF)(ai,{"selected-ids":l.value,onUpdateSelected:t[0]||(t[0]=e=>l.value=e)},null,8,["selected-ids"])])),_:1}),(0,s.bF)(r,{class:"responsive-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(o,{class:"econumo-btn -medium -grey responsive-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClick:i},null,8,["label"]),[[p]]),(0,s.bF)(o,{class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.export.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},512)])),_:1})])),_:1})}}})),ci=(0,$.A)(si,[["__scopeId","data-v-4299adac"]]),ii=ci;z()(si,"components",{QDialog:j.A,QCard:Kt.A,QForm:ua.A,QCardSection:da.A,QCardActions:fa.A,QBtn:W.A}),z()(si,"directives",{ClosePopup:ha.A});const ri=(0,s.pM)({name:"SettingsSettingsPage",mixins:[pl,X],components:{ChangeLanguageModal:Y,ImportCsvModal:Pc,ExportCsvModal:ii,CurrencySelect:qa},setup(){const{avatarUrl:e}=Xt();return{avatarUrl:e}},data(){return{isImportCsvModalOpened:!1,isExportCsvModalOpened:!1,selectedAccountIds:[]}},created(){"settings"===this.$router.currentRoute.value.name&&_t().setWorkspaceActiveArea()},computed:{...(0,d.aH)(Yt,["userAvatar","userName","userLogin","userCurrency"]),...(0,d.aH)(Vt,["accountsLoadedAt"]),...(0,d.aH)(Ct,["accountFoldersLoadedAt"]),...(0,d.aH)($t,["categoriesLoadedAt"]),...(0,d.aH)(Ut,["payeesLoadedAt"]),...(0,d.aH)(St,["tagsLoadedAt"]),...(0,d.aH)(Qt,["transactionsLoadedAt"]),...(0,d.aH)(ct,["currenciesLoadedAt","currencies"]),lastSyncAt:function(){let e=null;return[this.accountsLoadedAt,this.accountFoldersLoadedAt,this.categoriesLoadedAt,this.payeesLoadedAt,this.tagsLoadedAt,this.transactionsLoadedAt,this.currenciesLoadedAt].forEach((t=>{null===e&&t&&(e=t),t&&nt.Ay.extractDate(t,"YYYY-MM-DD HH:mm:ss")<nt.Ay.extractDate(e,"YYYY-MM-DD HH:mm:ss")&&(e=t)})),e||"-"},currency:{get(){const e=this.userCurrency;return e?{label:e.code,value:e.id}:null},set(e){if(e){const t=this.currencies.find((t=>t.id===e.value));t&&Yt().userUpdateCurrency({currency:t.code})}}},localeOptions:function(){return x.Ay.getLocaleOptions()},econumoPackage:function(){return ae}},methods:{sync:function(){zt().fetchAll()},fullLanguageLabel:function(){const e=x.Ay.getLocaleOptions().find((e=>e.value===x.Ay.locale()));return e?e.label:""},openImportCsvModal:function(){this.isImportCsvModalOpened=!0},closeImportCsvModal:function(){this.isImportCsvModalOpened=!1},handleImport:function(e){console.log("Import CSV:",e),this.closeImportCsvModal()},openExportCsvModal:function(){const e=Vt(),t=Yt();this.selectedAccountIds=e.accountsOrdered.filter((e=>e.owner.id===t.userId)).map((e=>e.id)),this.isExportCsvModalOpened=!0},closeExportCsvModal:function(){this.isExportCsvModalOpened=!1},handleExport:function(e){Ot.exportTransactionList(e.accountIds,(e=>{const t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t;const n=new Date,o=nt.Ay.formatDate(n,"YYYY-MM-DD");a.setAttribute("download",`transactions-${o}.csv`),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(t),this.closeExportCsvModal()}),(e=>{console.error("Error exporting transactions:",e),this.$q.notify({type:"negative",message:this.$t("pages.settings.export_csv.error")||"Failed to export transactions"})}))},exportTransactions:function(){this.openExportCsvModal()}}});var ui=a(4775);const di=(0,$.A)(ri,[["render",Xs]]),mi=di;z()(ri,"components",{QPage:cs.A,QBtn:W.A,QItemLabel:ja.A,QList:xn.A,QItem:Qa.A,QItemSection:$a.A,QField:ui.A,QIcon:aa.A});const pi={class:"settings-profile-wrapper"},gi={class:"settings-toolbar-mobile"},vi={class:"settings-toolbar-mobile-title"},bi={class:"settings-toolbar-mobile-container"},fi={class:"settings-toolbar-desktop"},hi={class:"settings-breadcrumbs"},_i={class:"settings-label-header"},yi={class:"settings-profile-user"},Ai=["src"],ki={class:"settings-profile-user-group"},Mi={class:"settings-profile-user-group-name"},Ci={class:"settings-profile-user-group-login"},Ei={class:"settings-profile-controls"},Ii={class:"settings-profile-controls-group"},wi={class:"settings-main-item-field-control self-center full-width no-outline",tabindex:"0"};function Li(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-avatar"),r=(0,s.g2)("q-input"),u=(0,s.g2)("q-item-label"),d=(0,s.g2)("q-icon"),m=(0,s.g2)("q-field"),p=(0,s.g2)("q-item-section"),g=(0,s.g2)("q-item"),b=(0,s.g2)("confirmation-dialog-modal"),f=(0,s.g2)("q-page"),h=(0,s.gN)("ripple");return(0,s.uX)(),(0,s.Wv)(f,{class:"settings-profile"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",pi,[(0,s.Lk)("div",gi,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("settings",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",vi,(0,v.v_)(e.$t("modules.user.page.settings.profile.header")),1)]),(0,s.Lk)("div",bi,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"power_settings_new",onClick:e.openLogoutDialogModal},null,8,["onClick"])])]),(0,s.Lk)("div",fi,[(0,s.Lk)("div",hi,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[1]||(t[1]=t=>e.navigateTo("settings",!0))},(0,v.v_)(e.$t("pages.settings.settings.header_desktop")),1)])]),(0,s.Lk)("h4",_i,(0,v.v_)(e.$t("modules.user.page.settings.profile.header")),1),(0,s.Lk)("div",yi,[(0,s.bF)(i,{class:"settings-profile-user-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{class:"settings-profile-user-avatar-img",src:e.avatarUrl(e.userAvatar,100),width:"100",height:"100"},null,8,Ai)])),_:1}),(0,s.Lk)("div",ki,[(0,s.Lk)("div",Mi,(0,v.v_)(e.userName),1),(0,s.Lk)("div",Ci,(0,v.v_)(e.userLogin),1),(0,s.Lk)("div",{class:"settings-profile-user-group-logout",onClick:t[2]||(t[2]=(...t)=>e.openLogoutDialogModal&&e.openLogoutDialogModal(...t))},(0,v.v_)(e.$t("pages.settings.settings.logout")),1)])]),(0,s.Lk)("div",Ei,[(0,s.Lk)("div",Ii,[(0,s.bF)(r,{outlined:"",class:"settings-profile-controls-input -name form-input full-width",placeholder:e.$t("modules.user.form.user.name.placeholder"),type:"text","model-value":e.name,label:e.$t("modules.user.form.user.name.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("modules.user.form.user.name.validation.required_field"),t=>e.isValidName(t)||e.$t("modules.user.form.user.name.validation.invalid_name")],onChange:e.changeName},null,8,["placeholder","model-value","label","rules","onChange"]),(0,s.bF)(r,{outlined:"",disable:"",readonly:"",class:"settings-profile-controls-input form-input full-width",placeholder:e.$t("modules.user.form.user.email.placeholder"),type:"email","model-value":e.email,label:e.$t("modules.user.form.user.email.label"),"lazy-rules":""},null,8,["placeholder","model-value","label"])])]),(0,s.bF)(u,{class:"settings-main-label"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.user.page.settings.profile.groups.security")),1)])),_:1}),(0,s.bo)(((0,s.uX)(),(0,s.Wv)(g,{class:"settings-main-item cursor-pointer",clickable:"",to:{name:"settingsChangePassword"}},{default:(0,s.k6)((()=>[(0,s.bF)(p,null,{default:(0,s.k6)((()=>[(0,s.bF)(m,{borderless:"",class:"settings-main-item-field cursor-pointer"},{control:(0,s.k6)((()=>[(0,s.Lk)("div",wi,(0,v.v_)(e.$t("modules.user.page.settings.profile.change_password.menu_item")),1)])),append:(0,s.k6)((()=>[(0,s.bF)(d,{class:"settings-main-item-field-arrow",name:"keyboard_arrow_right"})])),_:1})])),_:1})])),_:1})),[[h]]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.logoutDialogModal.isOpened?((0,s.uX)(),(0,s.Wv)(b,{key:0,"question-title":e.$t("modules.user.modal.sign_out.title"),"question-label":e.$t("modules.user.modal.sign_out.question"),"action-label":e.$t("modules.user.modal.sign_out.action.logout"),"cancel-label":e.$t("modules.user.modal.sign_out.action.cancel"),onCancel:e.closeModal,onProceed:e.logout},null,8,["question-title","question-label","action-label","cancel-label","onCancel","onProceed"])):(0,s.Q3)("",!0)]))])])),_:1})}const Ti=(0,s.pM)({name:"SettingsProfilePage",mixins:[pl],components:{ConfirmationDialogModal:Al},setup(){const{avatarUrl:e}=Xt(),t=He();return{avatarUrl:e,...t}},data(){return{nameCopy:null,emailCopy:null,logoutDialogModal:{isOpened:!1}}},created(){"settingsProfile"===this.$router.currentRoute.value.name&&_t().setWorkspaceActiveArea()},computed:{...(0,d.aH)(Yt,["userAvatar","userName","userLogin"]),name:{get(){return this.nameCopy||this.userName},set(e){this.nameCopy=e,Yt().userUpdateName(e)}},email:{get(){return this.userLogin},set(e){console.log(e)}}},methods:{changeName:function(e){this.name=e},openLogoutDialogModal:function(){this.logoutDialogModal.isOpened=!0},closeModal:function(){this.logoutDialogModal.isOpened=!1},logout:function(){this.$router.push({name:"logout"})}}});var Ni=a(9626);const Di=(0,$.A)(Ti,[["render",Li]]),Oi=Di;z()(Ti,"components",{QPage:cs.A,QBtn:W.A,QAvatar:ba.A,QInput:Ht.A,QItemLabel:ja.A,QItem:Qa.A,QItemSection:$a.A,QField:ui.A,QIcon:aa.A}),z()(Ti,"directives",{Ripple:Ni.A});var Fi=a(1459),Ri=a.n(Fi);const Si={class:"settings-change-password-wrapper"},xi={class:"settings-toolbar-mobile"},Ui={class:"settings-toolbar-mobile-title"},Qi=(0,s.Lk)("div",{class:"settings-toolbar-mobile-container"},null,-1),$i={class:"settings-toolbar-desktop"},ji={class:"settings-breadcrumbs"},Wi=(0,s.Lk)("div",{class:"settings-breadcrumbs-arrow"},[(0,s.Lk)("img",{src:Ri()})],-1),qi={class:"settings-label-header"},zi={class:"settings-change-password-form"},Pi={class:"econumo-modal form-hint-modal"},Yi={class:"form-hint-modal-text"},Vi={class:"form-hint-modal-button"},Bi={class:"econumo-modal form-fail-modal"},Xi={class:"form-fail-modal-title"},Hi={class:"form-fail-modal-description"},Gi={class:"form-fail-modal-button"};function Ki(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-input"),r=(0,s.g2)("q-form"),u=(0,s.g2)("loading-modal"),d=(0,s.g2)("q-dialog"),m=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(m,{class:"settings-change-password"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Si,[(0,s.Lk)("div",xi,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("settingsProfile",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",Ui,(0,v.v_)(e.$t("modules.user.page.settings.profile.change_password.header")),1)]),Qi]),(0,s.Lk)("div",$i,[(0,s.Lk)("div",ji,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[1]||(t[1]=t=>e.navigateTo("settings",!0))},(0,v.v_)(e.$t("pages.settings.settings.header_desktop")),1),Wi,(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[2]||(t[2]=t=>e.navigateTo("settingsProfile",!0))},(0,v.v_)(e.$t("modules.user.page.settings.profile.menu_item")),1)])]),(0,s.Lk)("h4",qi,(0,v.v_)(e.$t("modules.user.page.settings.profile.change_password.header")),1),(0,s.Lk)("div",zi,[(0,s.bF)(r,{ref:"changePasswordForm",novalidate:"",onSubmit:e.submit},{default:(0,s.k6)((()=>[(0,s.bF)(i,{outlined:"",class:"form-input full-width",placeholder:e.$t("modules.user.form.change_password.password.placeholder"),type:"password",modelValue:e.oldPassword,"onUpdate:modelValue":t[3]||(t[3]=t=>e.oldPassword=t),label:e.$t("modules.user.form.change_password.password.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("modules.user.form.change_password.password.validation.invalid_password")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.bF)(i,{outlined:"",class:"form-input full-width",placeholder:e.$t("modules.user.form.change_password.new_password.placeholder"),type:"password",modelValue:e.newPassword,"onUpdate:modelValue":t[4]||(t[4]=t=>e.newPassword=t),label:e.$t("modules.user.form.change_password.new_password.label"),"lazy-rules":"",rules:[t=>e.isValidPassword(t)||e.$t("modules.user.form.user.password.validation.invalid_password"),t=>t!==e.oldPassword||e.$t("modules.user.form.change_password.new_password.validation.not_equals")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.bF)(i,{outlined:"",class:"form-input full-width",placeholder:e.$t("modules.user.form.change_password.new_password_retry.placeholder"),type:"password",modelValue:e.newPasswordRetry,"onUpdate:modelValue":t[5]||(t[5]=t=>e.newPasswordRetry=t),label:e.$t("modules.user.form.change_password.new_password_retry.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("modules.user.form.user.password_retry.validation.required_field"),t=>e.isValidPassword(t)||e.$t("modules.user.form.user.password_retry.validation.invalid_password"),t=>t===e.newPassword||e.$t("modules.user.form.change_password.new_password_retry.validation.not_equals")]},null,8,["placeholder","modelValue","label","rules"]),(0,s.bF)(c,{class:"econumo-btn -medium -magenta full-width",label:e.$t("modules.user.form.change_password.submit.label"),type:"submit",flat:""},null,8,["label"])])),_:1},8,["onSubmit"])]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.isLoadingModalOpened?((0,s.uX)(),(0,s.Wv)(u,{key:0,onHide:t[6]||(t[6]=t=>e.closeLoadingModal()),"header-label":e.$t("modules.user.modal.change_password_loading.label")},null,8,["header-label"])):(0,s.Q3)("",!0),(0,s.bF)(d,{modelValue:e.isSuccess,"onUpdate:modelValue":t[8]||(t[8]=t=>e.isSuccess=t),minimized:"",onHide:t[9]||(t[9]=t=>e.isSuccess=!1)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Pi,[(0,s.Lk)("div",Yi,(0,v.v_)(e.$t("modules.user.modal.change_password_success.text")),1),(0,s.Lk)("div",Vi,[(0,s.bF)(c,{class:"econumo-btn -small -yellow full-width",label:e.$t("elements.button.close.label"),type:"button",onClick:t[7]||(t[7]=t=>e.isSuccess=!1),flat:""},null,8,["label"])])])])),_:1},8,["modelValue"]),(0,s.bF)(d,{modelValue:e.isError,"onUpdate:modelValue":t[11]||(t[11]=t=>e.isError=t),minimized:"",onHide:t[12]||(t[12]=t=>e.isError=!1)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Bi,[(0,s.Lk)("div",Xi,(0,v.v_)(e.$t("modules.user.modal.change_password_error.header")),1),(0,s.Lk)("div",Hi,(0,v.v_)(e.errorMessage),1),(0,s.Lk)("div",Gi,[(0,s.bF)(c,{class:"econumo-btn -small -yellow full-width",label:e.$t("elements.button.close.label"),type:"button",onClick:t[10]||(t[10]=t=>e.isError=!1),flat:""},null,8,["label"])])])])),_:1},8,["modelValue"])]))])])),_:1})}const Zi={data(){return{isLoadingModalOpened:!1}},methods:{openLoadingModal(){this.isLoadingModalOpened=!0},closeLoadingModal(){this.isLoadingModalOpened=!1}}},Ji=(0,s.pM)({name:"SettingsChangePasswordPage",mixins:[pl,Zi],components:{LoadingModal:cn},setup(){const e=He();return{...e}},data(){return{oldPassword:"",newPassword:"",newPasswordRetry:"",isError:!1,errorMessage:"",isSuccess:!1}},created(){"settingsChangePassword"===this.$router.currentRoute.value.name&&_t().setWorkspaceActiveArea()},computed:{},methods:{submit:function(){return this.openLoadingModal(),Yt().userUpdatePassword({oldPassword:this.oldPassword.toString(),newPassword:this.newPassword.toString()}).then((e=>{e.data?(this.newPassword="",this.oldPassword="",this.newPasswordRetry="",this.$refs.changePasswordForm.reset(),this.isSuccess=!0):(this.isError=!0,this.errorMessage=e.message||this.$t("modules.user.modal.change_password_error.text"))})).catch((e=>{this.isError=!0,this.errorMessage=e.message||this.$t("modules.user.modal.change_password_error.text")})).finally((()=>{this.closeLoadingModal()}))}}}),er=(0,$.A)(Ji,[["render",Ki]]),tr=er;z()(Ji,"components",{QPage:cs.A,QBtn:W.A,QForm:ua.A,QInput:Ht.A,QDialog:j.A});const ar={class:"settings-accounts-wrapper"},nr={class:"settings-toolbar-mobile"},or={class:"settings-toolbar-mobile-title"},lr={class:"settings-toolbar-mobile-container"},sr={class:"settings-toolbar-desktop"},cr={class:"settings-breadcrumbs"},ir={class:"settings-label-header settings-accounts-header"},rr={class:"settings-accounts-create-folder"},ur={class:"settings-accounts-container"},dr={class:"settings-accounts-account-head-controls"},mr={class:"settings-accounts-account-list-item-wrapper"},pr={class:"settings-accounts-account-list-item-info"},gr={class:"settings-accounts-account-list-item-info-container"},vr=["src"],br=["src"],fr={key:0,class:"settings-accounts-empty"},hr={key:0},_r={class:"preview-modal-head"},yr={class:"preview-modal-head-title"},Ar={key:0,class:"preview-modal-head-shared"},kr={class:"preview-modal-head-shared-label"},Mr={class:"preview-modal-account"},Cr={class:"preview-modal-account-item-box"},Er=["src"],Ir=["src"],wr={class:"preview-modal-account-info"},Lr={class:"preview-modal-account-info-item"},Tr={class:"preview-modal-account-info-item-label"},Nr={class:"preview-modal-account-info-item-content"},Dr={class:"preview-modal-account-info-item"},Or={class:"preview-modal-account-info-item-label"},Fr={class:"preview-modal-account-info-item-content"},Rr={class:"preview-modal-account-info-item"},Sr={class:"preview-modal-account-info-item-label"},xr={class:"preview-modal-account-info-item-content"},Ur={key:0,class:"preview-modal-account-info-access"},Qr={class:"preview-modal-account-info-item"},$r={class:"preview-modal-account-info-item-label -access"},jr={key:0},Wr={class:"preview-modal-account-info-access-item"},qr=["src"],zr={class:"preview-modal-account-info-access-item-user"},Pr={class:"preview-modal-account-info-access-item-user-name"},Yr={class:"preview-modal-account-info-access-item-user-role"},Vr={key:1,class:"preview-modal-account-info-access-empty"},Br={class:"preview-modal-account-info-access-item"},Xr=["src"],Hr={class:"preview-modal-account-info-access-item-user"},Gr={class:"preview-modal-account-info-access-item-user-name"},Kr={class:"preview-modal-account-info-access-item-user-role"},Zr={key:1};function Jr(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-icon"),r=(0,s.g2)("q-item-section"),u=(0,s.g2)("q-item"),d=(0,s.g2)("q-list"),m=(0,s.g2)("q-menu"),p=(0,s.g2)("q-avatar"),g=(0,s.g2)("draggable"),b=(0,s.g2)("account-modal"),f=(0,s.g2)("confirmation-dialog-modal"),h=(0,s.g2)("prompt-dialog-modal"),_=(0,s.g2)("q-card-section"),y=(0,s.g2)("q-card-actions"),A=(0,s.g2)("q-card"),k=(0,s.g2)("q-dialog"),M=(0,s.g2)("access-dialog-modal"),C=(0,s.g2)("access-level-dialog-modal"),E=(0,s.g2)("q-page"),I=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(E,{class:"settings-accounts"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ar,[(0,s.Lk)("div",nr,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("settings",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",or,(0,v.v_)(e.$t("pages.settings.accounts.header")),1)]),(0,s.Lk)("div",lr,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"create_new_folder",onClick:t[1]||(t[1]=t=>e.openCreateFolderModal())})])]),(0,s.Lk)("div",sr,[(0,s.Lk)("div",cr,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[2]||(t[2]=t=>e.navigateTo("settings",!0))},(0,v.v_)(e.$t("pages.settings.settings.header_desktop")),1)])]),(0,s.Lk)("h4",ir,(0,v.v_)(e.$t("pages.settings.accounts.header")),1),(0,s.Lk)("div",rr,[(0,s.bF)(c,{class:"settings-accounts-create-folder-btn econumo-btn -small -magenta",flat:"",label:e.$t("pages.settings.accounts.create_folder"),onClick:t[3]||(t[3]=t=>e.openCreateFolderModal())},null,8,["label"])]),(0,s.Lk)("div",ur,[(0,s.Lk)("div",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.accountsTree,((t,a)=>((0,s.uX)(),(0,s.CE)("div",{class:"settings-accounts-account",key:t.id},[(0,s.bF)(u,{class:"settings-accounts-account-head cursor-pointer"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"settings-accounts-account-head-title"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",null,[t.folder.isVisible?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(i,{key:0,name:"visibility_off",left:"",onClick:a=>e.showFolder(t.folder.id)},null,8,["onClick"])),(0,s.eW)(" "+(0,v.v_)(t.folder.name),1)])])),_:2},1024),(0,s.Lk)("div",dr,[(0,s.bF)(r,{class:"settings-accounts-account-head-control"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"settings-accounts-account-head-control-btn",icon:"control_point",onClick:a=>e.openCreateAccountModal(t.folder.id)},null,8,["onClick"])])),_:2},1024),(0,s.bF)(r,{class:"settings-accounts-account-head-control"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{flat:"",icon:"more_vert",class:"settings-accounts-account-head-control-btn"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{cover:"","auto-close":"",class:"account-transactions-item-check-button-menu"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"account-transactions-item-check-button-list"},{default:(0,s.k6)((()=>[a>0?((0,s.uX)(),(0,s.Wv)(u,{key:0,clickable:"",onClick:a=>e.orderFolder(t.folder.id,-1),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.up.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),a<e.accountsTree.length-1?((0,s.uX)(),(0,s.Wv)(u,{key:1,clickable:"",onClick:a=>e.orderFolder(t.folder.id,1),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.down.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),(0,s.bF)(u,{clickable:"",onClick:a=>e.openUpdateFolderModal(t.folder.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:2},1032,["onClick"]),t.folder.isVisible?((0,s.uX)(),(0,s.Wv)(u,{key:2,clickable:"",onClick:a=>e.hideFolder(t.folder.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.hide.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),t.folder.isVisible?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(u,{key:3,clickable:"",onClick:a=>e.showFolder(t.folder.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.show.label")),1)])),_:1})])),_:2},1032,["onClick"])),a>0?((0,s.uX)(),(0,s.Wv)(u,{key:4,clickable:"",onClick:a=>e.openDeleteFolderModal(t.folder.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])])),_:2},1024),e.accounts.length>0?((0,s.uX)(),(0,s.Wv)(d,{key:0,class:"settings-accounts-account-list"},{default:(0,s.k6)((()=>[(0,s.bF)(g,(0,s.v6)({list:t.accounts},e.draggableAccountOptions,{"item-key":"id","component-data":{id:t.id},onEnd:e.orderAccounts}),{item:(0,s.k6)((({element:t})=>[(0,s.bF)(u,{class:"settings-accounts-account-list-item",clickable:e.$q.screen.lt.lg,id:t.id,onClick:a=>e.openPreviewAccountModal(t.id)},{default:(0,s.k6)((()=>[(0,s.bF)(r,{side:"",class:"settings-accounts-account-list-item-draggable sortable-control"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"settings-accounts-account-list-item-draggable-icon",name:"drag_indicator"})])),_:1}),(0,s.Lk)("div",mr,[(0,s.bF)(r,{class:"settings-accounts-account-list-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"settings-accounts-account-list-item-avatar-icon",name:t.icon},null,8,["name"])])),_:2},1024),(0,s.Lk)("div",pr,[(0,s.bF)(r,{class:"settings-accounts-account-list-item-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(t.name)+" ",1),t.sharedAccess.length>0&&e.econumoPackage.includesSharedAccess?((0,s.uX)(),(0,s.Wv)(i,{key:0,class:"settings-accounts-account-list-item-shared-icon",name:"link"})):(0,s.Q3)("",!0)])),_:2},1024),(0,s.Lk)("div",gr,[(0,s.bF)(r,{class:"settings-accounts-account-list-item-balance"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.moneyFormat(t.balance,t.currency.id,!0,!1)),1)])),_:2},1024)])]),t.sharedAccess.length>0&&e.econumoPackage.includesSharedAccess?((0,s.uX)(),(0,s.Wv)(r,{key:0,class:"settings-accounts-account-list-item-shared"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"settings-accounts-account-list-item-shared-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.avatarUrl(t.owner.avatar,30),width:"30",height:"30"},null,8,vr)])),_:2},1024),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.sharedAccess,(t=>((0,s.uX)(),(0,s.Wv)(p,{class:"settings-accounts-account-list-item-shared-avatar",key:t.user.id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.avatarUrl(t.user.avatar,30),width:"30",height:"30"},null,8,br)])),_:2},1024)))),128))])),_:2},1024)):(0,s.Q3)("",!0),e.$q.screen.gt.md?((0,s.uX)(),(0,s.Wv)(r,{key:1,class:"settings-accounts-account-list-item-more",side:""},{default:(0,s.k6)((()=>[(0,s.bF)(c,{color:"grey-7",round:"",flat:"",icon:"more_vert",class:"gt-md settings-accounts-account-list-item-more-btn"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{cover:"","auto-close":""},{default:(0,s.k6)((()=>[(0,s.bF)(d,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{clickable:"",onClick:a=>e.openPreviewAccountModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.view.label")),1)])),_:1})])),_:2},1032,["onClick"]),e.hasAdminAccess(t)?((0,s.uX)(),(0,s.Wv)(u,{key:0,clickable:"",onClick:a=>e.openUpdateAccountModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),e.hasAdminAccess(t)&&e.econumoPackage.includesSharedAccess?((0,s.uX)(),(0,s.Wv)(u,{key:1,clickable:"",onClick:a=>e.openAccountAccessModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("pages.settings.accounts.list_actions.access")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),(0,s.bF)(u,{clickable:"",onClick:a=>e.openDeleteAccountModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,s.Q3)("",!0)])])),_:2},1032,["clickable","id","onClick"])])),_:2},1040,["list","component-data","onEnd"])])),_:2},1024)):(0,s.Q3)("",!0)])))),128))]),e.accounts.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",fr,[(0,s.eW)((0,v.v_)(e.$t("blocks.list.list_empty"))+" ",1),e.folders.length?((0,s.uX)(),(0,s.CE)("span",hr,[(0,s.Lk)("a",{class:"text-decoration-underline text-purple cursor-pointer",onClick:t[4]||(t[4]=t=>e.openCreateAccountModal(e.accountsTree[0].folder.id))},(0,v.v_)(e.$t("pages.settings.accounts.list_empty_create")),1),(0,s.eW)(" "+(0,v.v_)(e.$t("pages.settings.accounts.list_empty_new_account")),1)])):(0,s.Q3)("",!0)]))]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,s.bF)(b),e.deleteFolderModal.isOpened?((0,s.uX)(),(0,s.Wv)(f,{key:0,"question-title":e.$t("pages.settings.accounts.delete_folder_modal.title"),"question-label":e.deleteFolderModal.folder.name,"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:e.closeModals,onProceed:t[5]||(t[5]=t=>e.deleteFolder(e.deleteFolderModal.folder.id))},null,8,["question-title","question-label","action-label","cancel-label","onCancel"])):(0,s.Q3)("",!0),e.deleteAccountModal.isOpened?((0,s.uX)(),(0,s.Wv)(f,{key:1,"question-label":e.$t("pages.settings.accounts.delete_account_modal.question",{account:e.deleteAccountModal.account.name}),"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:e.closeModals,onProceed:t[6]||(t[6]=t=>e.deleteAccount(e.deleteAccountModal.account.id))},null,8,["question-label","action-label","cancel-label","onCancel"])):(0,s.Q3)("",!0),e.createFolderModal.isOpened?((0,s.uX)(),(0,s.Wv)(h,{key:2,"header-label":e.$t("pages.settings.accounts.create_folder_modal.header"),"input-value":"","input-label":e.$t("elements.form.account.folder.label"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.create.label"),validation:[t=>e.isNotEmpty(t)||e.$t("elements.form.account.folder.validation.empty_name"),t=>e.isValidFolderName(t)||e.$t("elements.form.account.folder.validation.error_name_length")],onCancel:e.closeModals,onSubmit:e.createFolder},null,8,["header-label","input-label","cancel-label","submit-label","validation","onCancel","onSubmit"])):(0,s.Q3)("",!0),e.updateFolderModal.isOpened?((0,s.uX)(),(0,s.Wv)(h,{key:3,"header-label":e.$t("pages.settings.accounts.update_folder_modal.header"),"input-value":e.updateFolderModal.folderName,"input-label":e.$t("elements.form.account.folder.label"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.update.label"),validation:[t=>e.isNotEmpty(t)||e.$t("elements.form.account.folder.validation.empty_name"),t=>e.isValidFolderName(t)||e.$t("elements.form.account.folder.validation.error_name_length")],onClose:e.closeModals,onSubmit:e.renameFolder},null,8,["header-label","input-value","input-label","cancel-label","submit-label","validation","onClose","onSubmit"])):(0,s.Q3)("",!0),(0,s.bF)(k,{class:"preview-modal",modelValue:e.previewAccountModal.isOpened,"onUpdate:modelValue":t[10]||(t[10]=t=>e.previewAccountModal.isOpened=t),position:e.$q.screen.gt.md?"standard":"bottom"},{default:(0,s.k6)((()=>[(0,s.bF)(A,{class:"preview-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(_,{class:"preview-modal-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",_r,[(0,s.Lk)("div",yr,(0,v.v_)(e.$t("pages.settings.accounts.preview_account_modal.header")),1),e.previewAccountModal.account.sharedAccess.length>0&&e.econumoPackage.includesSharedAccess?((0,s.uX)(),(0,s.CE)("div",Ar,[(0,s.bF)(i,{class:"preview-modal-head-shared-icon",name:"link"}),(0,s.Lk)("div",kr,(0,v.v_)(e.$t("pages.settings.accounts.preview_account_modal.shared_access")),1)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Mr,[(0,s.bF)(u,{class:"preview-modal-account-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"preview-modal-account-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"preview-modal-account-item-avatar-icon",name:e.previewAccountModal.account.icon},null,8,["name"])])),_:1}),(0,s.Lk)("div",Cr,[(0,s.bF)(r,{class:"preview-modal-account-item-box-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.previewAccountModal.account.name),1)])),_:1}),(0,s.bF)(r,{class:"preview-modal-account-item-box-balance",side:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.moneyFormat(e.previewAccountModal.account.balance,e.previewAccountModal.account.currency.id,!0,!1)),1)])),_:1})]),e.previewAccountModal.account.sharedAccess.length>0&&e.econumoPackage.includesSharedAccess?((0,s.uX)(),(0,s.Wv)(r,{key:0,side:"",class:"settings-accounts-account-list-item-shared"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"settings-accounts-account-list-item-shared-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.avatarUrl(e.previewAccountModal.account.owner.avatar,30),width:"30",height:"30"},null,8,Er)])),_:1}),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.previewAccountModal.account.sharedAccess,(t=>((0,s.uX)(),(0,s.Wv)(p,{class:"settings-accounts-account-list-item-shared-avatar",key:t.user.id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.avatarUrl(t.user.avatar,30),width:"30",height:"30"},null,8,Ir)])),_:2},1024)))),128))])),_:1})):(0,s.Q3)("",!0)])),_:1})])])),_:1}),(0,s.bF)(_,{class:"preview-modal-section -info"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",wr,[(0,s.Lk)("div",Lr,[(0,s.Lk)("div",Tr,(0,v.v_)(e.$t("elements.form.account.name.label")),1),(0,s.Lk)("div",Nr,(0,v.v_)(e.previewAccountModal.account.name),1)]),(0,s.Lk)("div",Dr,[(0,s.Lk)("div",Or,(0,v.v_)(e.$t("elements.form.account.balance.label")),1),(0,s.Lk)("div",Fr,(0,v.v_)(e.previewAccountModal.account.balance),1)]),(0,s.Lk)("div",Rr,[(0,s.Lk)("div",Sr,(0,v.v_)(e.$t("elements.form.account.currency.label")),1),(0,s.Lk)("div",xr,(0,v.v_)(e.previewAccountModal.account.currency.name),1)]),e.econumoPackage.includesSharedAccess?((0,s.uX)(),(0,s.CE)("div",Ur,[(0,s.Lk)("div",Qr,[(0,s.Lk)("div",$r,(0,v.v_)(e.$t("pages.settings.accounts.preview_account_modal.access.label")),1)]),e.previewAccountModal.account.owner.id!==e.userId?((0,s.uX)(),(0,s.CE)("div",jr,[(0,s.Lk)("div",Wr,[(0,s.bF)(p,{class:"preview-modal-account-info-access-item-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.avatarUrl(e.previewAccountModal.account.owner.avatar,100),width:"100",height:"100"},null,8,qr)])),_:1}),(0,s.Lk)("div",zr,[(0,s.Lk)("div",Pr,(0,v.v_)(e.previewAccountModal.account.owner.name),1),(0,s.Lk)("div",Yr,(0,v.v_)(e.$t("modules.connections.elements.roles.owner")),1)])])])):(0,s.Q3)("",!0),e.previewAccountModal.account.sharedAccess.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:2},(0,s.pI)(e.previewAccountModal.account.sharedAccess,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.user.id},[(0,s.Lk)("div",Br,[(0,s.bF)(p,{class:"preview-modal-account-info-access-item-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.avatarUrl(t.user.avatar,100),class:"preview-modal-account-info-access-item-avatar-img",width:"100",height:"100"},null,8,Xr)])),_:2},1024),(0,s.Lk)("div",Hr,[(0,s.Lk)("div",Gr,(0,v.v_)(t.user.name),1),(0,s.Lk)("div",Kr,(0,v.v_)(e.$t("modules.connections.elements.roles."+t.role)),1)])])])))),128)):((0,s.uX)(),(0,s.CE)("div",Vr,(0,v.v_)(e.$t("pages.settings.accounts.preview_account_modal.access.no_shared_access")),1))])):(0,s.Q3)("",!0),e.hasAdminAccess(e.previewAccountModal.account)&&e.econumoPackage.includesSharedAccess?((0,s.uX)(),(0,s.CE)("div",Zr,[(0,s.Lk)("div",{class:"preview-modal-account-info-access-btn",onClick:t[7]||(t[7]=t=>e.openAccountAccessModal(e.previewAccountModal.account.id))},(0,v.v_)(e.$t("pages.settings.accounts.preview_account_modal.action.shared_access")),1)])):(0,s.Q3)("",!0)])])),_:1}),(0,s.bF)(y,{class:"preview-modal-account-info-access-actions"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"econumo-btn -large -grey preview-modal-account-info-access-actions-btn",flat:"",icon:"delete",title:e.$t("elements.button.delete.label"),onClick:t[8]||(t[8]=t=>e.openDeleteAccountModal(e.previewAccountModal.account.id))},null,8,["title"]),e.hasAdminAccess(e.previewAccountModal.account)?((0,s.uX)(),(0,s.Wv)(c,{key:0,class:"econumo-btn -large -grey preview-modal-account-info-access-actions-btn -wide",flat:"",label:e.$t("elements.button.edit.label"),onClick:t[9]||(t[9]=t=>e.openUpdateAccountModal(e.previewAccountModal.account.id))},null,8,["label"])):(0,s.Q3)("",!0),(0,s.bo)((0,s.bF)(c,{class:"econumo-btn -large -grey preview-modal-account-info-access-actions-btn",flat:"",icon:"expand_more",title:e.$t("elements.button.cancel.label")},null,8,["title"]),[[I]])])),_:1})])),_:1})])),_:1},8,["modelValue","position"]),e.accountAccessModal.isOpened?((0,s.uX)(),(0,s.Wv)(M,{key:4,item:e.accountAccessModal.account,"user-id":e.userId,connections:e.connections,"item-owner-user-id":e.accountAccessModal.account.owner.id,onCancel:e.closeModals,onOpenAccessLevelDialog:e.openAccountAccessLevelModal},null,8,["item","user-id","connections","item-owner-user-id","onCancel","onOpenAccessLevelDialog"])):(0,s.Q3)("",!0),e.accountAccessLevelModal.isOpened?((0,s.uX)(),(0,s.Wv)(C,{key:5,user:e.accountAccessLevelModal.user,"item-id":e.accountAccessLevelModal.accountId,role:e.accountAccessLevelModal.role,onCancel:e.closeModals,onAllow:e.updateAccountAccess,onRevoke:e.revokeAccountAccess},null,8,["user","item-id","role","onCancel","onAllow","onRevoke"])):(0,s.Q3)("",!0)]))])])),_:1})}var eu=a(57),tu=a.n(eu);const au={class:"prompt-modal-card-section-label"},nu={class:"prompt-modal-card-section-input"};function ou(e,t,a,n,o,l){const c=(0,s.g2)("q-input"),i=(0,s.g2)("q-card-section"),r=(0,s.g2)("q-btn"),u=(0,s.g2)("q-card-actions"),d=(0,s.g2)("q-form"),m=(0,s.g2)("q-card"),p=(0,s.g2)("q-dialog"),g=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(p,{"model-value":!0,persistent:"",class:"prompt-modal"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"prompt-modal-card econumo-modal"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{ref:"folderForm",onSubmit:e.submit,onReset:e.cancel,class:"prompt-modal-card-form"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"prompt-modal-card-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",au,(0,v.v_)(e.headerLabel),1),(0,s.Lk)("div",nu,[(0,s.bF)(c,{class:"form-input -narrow full-width",autofocus:"",outlined:"",modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),label:e.inputLabel,rules:e.validation??[]},null,8,["modelValue","label","rules"])])])),_:1}),(0,s.bF)(u,{class:"prompt-modal-card-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(r,{flat:"",class:"econumo-btn -medium -grey prompt-modal-card-actions-button",label:e.cancelLabel,onClick:e.cancel},null,8,["label","onClick"]),[[g]]),(0,s.bF)(r,{flat:"",class:"econumo-btn -medium -magenta prompt-modal-card-actions-button",label:e.submitLabel,type:"submit"},null,8,["label"])])),_:1})])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})}const lu=(0,s.pM)({props:["headerLabel","inputValue","inputLabel","cancelLabel","submitLabel","validation","id"],data(){return{inputValueCopy:null}},computed:{value:{get(){return this.inputValueCopy??this.inputValue},set(e){this.inputValueCopy=e}}},methods:{submit:function(){this.$emit("submit",this.value,this.inputValue,this.id)},cancel:function(){this.$refs.folderForm&&this.$refs.folderForm.resetValidation(),this.$emit("close")}}}),su=(0,$.A)(lu,[["render",ou]]),cu=su;z()(lu,"components",{QDialog:j.A,QCard:Kt.A,QForm:ua.A,QCardSection:da.A,QInput:Ht.A,QCardActions:fa.A,QBtn:W.A}),z()(lu,"directives",{ClosePopup:ha.A});const iu={class:"settings-toolbar-mobile access-modal-toolbar"},ru={class:"settings-toolbar-mobile-title"},uu=(0,s.Lk)("div",{class:"settings-toolbar-mobile-container"},null,-1),du={class:"access-modal-list"},mu={class:"access-modal-title"},pu={key:0,class:"access-modal-note"},gu=["onClick"],vu=["src","alt","title"],bu={class:"preview-modal-account-info-access-item-user"},fu={class:"preview-modal-account-info-access-item-user-name"},hu={key:0,class:"preview-modal-account-info-access-item-user-role"},_u={key:1,class:"preview-modal-account-info-access-item-user-role"};function yu(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-card-section"),r=(0,s.g2)("q-avatar"),u=(0,s.g2)("q-card"),d=(0,s.g2)("q-dialog"),m=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(d,{class:"access-modal","model-value":!0,onHide:t[0]||(t[0]=t=>e.$emit("cancel"))},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"access-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"access-modal-section -toolbar"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",iu,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back"},null,512),[[m]])]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",ru,(0,v.v_)(e.item.name),1)]),uu])])),_:1}),(0,s.bF)(i,{class:"access-modal-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",du,[(0,s.Lk)("div",mu,(0,v.v_)(e.item.name),1),e.access.length?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:1},(0,s.pI)(e.access,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.user.id},[t.user.id!==e.userId?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"preview-modal-account-info-access-item",onClick:a=>e.$emit("open-access-level-dialog",e.item.id,t.user.id,t.role)},[(0,s.bF)(r,{class:"preview-modal-account-info-access-item-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.avatarUrl(t.user.avatar,100),class:"preview-modal-account-info-access-item-avatar-img",width:"100",height:"100",alt:t.user.name,title:t.user.name},null,8,vu)])),_:2},1024),(0,s.Lk)("div",bu,[(0,s.Lk)("div",fu,(0,v.v_)(t.user.name),1),t.role?((0,s.uX)(),(0,s.CE)("div",_u,(0,v.v_)(e.$t("modules.connections.modals.share_access.level."+t.role)),1)):((0,s.uX)(),(0,s.CE)("div",hu,(0,v.v_)(e.$t("modules.connections.elements.roles.no_access")),1))])],8,gu)):(0,s.Q3)("",!0)])))),128)):((0,s.uX)(),(0,s.CE)("div",pu,(0,v.v_)(e.$t("modules.connections.modals.share_access.list_empty")),1))])])),_:1})])),_:1})])),_:1})}const Au=(0,s.pM)({props:["userId","item","itemOwnerUserId","connections"],setup(){const{avatarUrl:e}=Xt();return{avatarUrl:e}},computed:{access:function(){let e={};B().forEach(this.connections,(t=>{e[t.user.id]={user:t.user,role:t.user.id===this.itemOwnerUserId?"owner":null}})),B().forEach(this.item.sharedAccess,(t=>{t.user.id!==this.userId&&(e[t.user.id]||(e[t.user.id]={user:t.user,role:null}),e[t.user.id].role=t.user.id===this.itemOwnerUserId?"owner":t.role)}));let t=[];return B().forEach(e,(e=>{t.push(e)})),t}}}),ku=(0,$.A)(Au,[["render",yu]]),Mu=ku;z()(Au,"components",{QDialog:j.A,QCard:Kt.A,QCardSection:da.A,QBtn:W.A,QAvatar:ba.A}),z()(Au,"directives",{ClosePopup:ha.A});const Cu={class:"account-access-dialog-modal-user"},Eu=["src"],Iu={class:"account-access-dialog-modal-user-name"},wu={class:"account-access-dialog-modal-user-name-title"};function Lu(e,t,a,n,o,l){const c=(0,s.g2)("q-avatar"),i=(0,s.g2)("q-card-section"),r=(0,s.g2)("q-item-section"),u=(0,s.g2)("q-item"),d=(0,s.g2)("q-list"),m=(0,s.g2)("q-card"),p=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(p,{class:"account-access-dialog-modal","model-value":!0,onHide:t[4]||(t[4]=t=>e.$emit("cancel"))},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"account-access-dialog-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"account-access-dialog-modal-section -padding"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Cu,[(0,s.bF)(c,{class:"account-access-dialog-modal-user-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:e.avatarUrl(e.user.avatar,100),class:"account-access-dialog-modal-user-avatar-img",width:"100",height:"100"},null,8,Eu)])),_:1}),(0,s.Lk)("div",Iu,[(0,s.Lk)("div",wu,(0,v.v_)(e.user.name),1)])])])),_:1}),(0,s.bF)(i,{class:"account-access-dialog-modal-section"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"account-access-dialog-modal-list"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:(0,v.C4)(["account-access-dialog-modal-item","control_point "+("guest"===e.role?"active":"")]),clickable:"",onClick:t[0]||(t[0]=t=>e.$emit("allow",e.user.id,e.itemId,"guest"))},{default:(0,s.k6)((()=>[(0,s.bF)(r,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.connections.elements.roles.guest")),1)])),_:1})])),_:1},8,["class"]),(0,s.bF)(u,{class:(0,v.C4)(["account-access-dialog-modal-item","control_point "+("user"===e.role?"active":"")]),clickable:"",onClick:t[1]||(t[1]=t=>e.$emit("allow",e.user.id,e.itemId,"user"))},{default:(0,s.k6)((()=>[(0,s.bF)(r,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.connections.elements.roles.user")),1)])),_:1})])),_:1},8,["class"]),(0,s.bF)(u,{class:(0,v.C4)(["account-access-dialog-modal-item","control_point "+("admin"===e.role?"active":"")]),clickable:"",onClick:t[2]||(t[2]=t=>e.$emit("allow",e.user.id,e.itemId,"admin"))},{default:(0,s.k6)((()=>[(0,s.bF)(r,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.connections.elements.roles.admin")),1)])),_:1})])),_:1},8,["class"]),e.role?((0,s.uX)(),(0,s.Wv)(u,{key:0,class:"account-access-dialog-modal-item -delete",clickable:"",onClick:t[3]||(t[3]=t=>e.$emit("revoke",e.user.id,e.itemId))},{default:(0,s.k6)((()=>[(0,s.bF)(r,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.connections.modals.share_access.revoke_access")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1})])),_:1})])),_:1})])),_:1})}const Tu=(0,s.pM)({props:["user","itemId","role"],setup(){const{avatarUrl:e}=Xt();return{avatarUrl:e}}}),Nu=(0,$.A)(Tu,[["render",Lu]]),Du=Nu;z()(Tu,"components",{QDialog:j.A,QCard:Kt.A,QCardSection:da.A,QAvatar:ba.A,QList:xn.A,QItem:Qa.A,QItemSection:$a.A});const Ou=(0,s.pM)({name:"SettingsAccountsPage",mixins:[pl],components:{AccessDialogModal:Mu,AccessLevelDialogModal:Du,PromptDialogModal:cu,draggable:tu(),AccountModal:en,ConfirmationDialogModal:Al},setup(){const{avatarUrl:e}=Xt(),t=He(),{moneyFormat:a}=rt(),{accountName:n}=ls();return{avatarUrl:e,...t,moneyFormat:a,accountName:n}},data(){return{accountsCopy:null,accountFoldersCopy:null,deleteFolderModal:{isOpened:!1,folder:null},createFolderModal:{isOpened:!1},updateFolderModal:{isOpened:!1,folderId:null,folderName:null},previewAccountModal:{isOpened:!1,account:null},deleteAccountModal:{isOpened:!1,account:null},accountAccessModal:{isOpened:!1,account:null},accountAccessLevelModal:{isOpened:!1,user:null,accountId:null,role:null}}},created(){"settingsAccounts"===this.$router.currentRoute.value.name&&_t().setWorkspaceActiveArea()},computed:{...(0,d.aH)(Yt,["userId"]),...(0,d.aH)(qt,["connections"]),...(0,d.aH)(Ct,["accountFoldersOrdered"]),...(0,d.aH)(Vt,["accountsOrdered"]),...(0,d.aH)(Vt,{accountAll:"accounts"}),accounts:{get(){return this.accountsCopy||this.accountsOrdered},set(e){this.accountsCopy=e,Vt().orderAccountList(e).finally((()=>{this.accountsCopy=null}))}},folders:function(){return this.accountFoldersCopy||this.accountFoldersOrdered},draggableAccountOptions(){return{animation:200,group:"accounts",disabled:!1,ghostClass:"ghost",handle:".sortable-control"}},accountsTree:function(){let e=[];return this.folders.forEach((t=>{e.push({id:t.id,folder:t,accounts:B().orderBy(B().filter(this.accounts,{folderId:t.id}),["position"],["asc"])})})),e},econumoPackage:function(){return ae}},methods:{hasAdminAccess:function(e){if(e.owner.id===this.userId)return!0;let t=!1;return e.sharedAccess.forEach((e=>{e.user?.id===this.userId&&"admin"===e.role&&(t=!0)})),t},createFolder:function(e){this.closeModals(),Ct().createAccountFolder({name:e.toString()})},renameFolder:function(e,t){this.closeModals();const a=B().find(this.accountFoldersOrdered,{name:t});Ct().updateAccountFolder({id:a.id,name:e})},orderAccounts:function(e){const t=e.to.id||null,a=e.item.id||null,n=e.newIndex;let o=[],l=[];this.accountsTree.forEach((e=>{e.accounts.forEach(((l,s)=>{e.folder.id===t&&s===n&&o.push(a),-1===B().indexOf(o,l.id)&&o.push(l.id)}))}));let s=0,c=0;o.forEach((e=>{const n=B().find(this.accounts,{id:e});e===a&&(n.folderId=t,c=s),n&&(n.position=s++,l.push(n))})),this.accounts=l},orderFolder:function(e,t){let a=B().cloneDeep(this.accountFoldersOrdered),n=B().find(a,{id:e});const o=n.position+t;a.forEach(((e,a)=>{a===o?e.position=t<0?e.position+1:e.position-1:e.id===n.id&&(e.position=o)})),this.accountFoldersCopy=B().orderBy(a,["position"],["asc"]);let l=[];B().orderBy(a,["position"],["asc"]).forEach((e=>{l.push(e.id)})),Ct().orderAccountFolderList(l).finally((()=>{this.accountFoldersCopy=null}))},openCreateFolderModal:function(){this.createFolderModal.isOpened=!0},openUpdateFolderModal:function(e){this.updateFolderModal.folderId=e,this.updateFolderModal.folderName=B().find(this.folders,{id:e}).name,this.updateFolderModal.isOpened=!0},hideFolder:function(e){Ct().hideAccountFolder({id:e})},showFolder:function(e){Ct().showAccountFolder({id:e})},openDeleteFolderModal:function(e){this.deleteFolderModal.folder=B().cloneDeep(B().find(this.accountFoldersOrdered,{id:e})),this.deleteFolderModal.isOpened=!0},deleteFolder:function(e){const t=B().last(B().filter(this.accountFoldersOrdered,(t=>t.id!==e)));Ct().replaceAccountFolder({id:e,replaceId:t.id}).finally((()=>{this.closeModals()}))},openPreviewAccountModal:function(e){this.previewAccountModal.account=B().cloneDeep(B().find(this.accountAll,{id:e})),this.previewAccountModal.isOpened=!0},openAccountAccessModal:function(e){this.accountAccessModal.account=B().cloneDeep(B().find(this.accountAll,{id:e})),this.accountAccessModal.isOpened=!0},openAccountAccessLevelModal:function(e,t,a){if("owner"===a)return;const n=B().cloneDeep(B().find(this.accountAll,{id:e})),o=B().find(n.sharedAccess,{user:{id:t}});this.accountAccessLevelModal.accountId=n.id;let l=B().find(this.connections,{user:{id:t}});this.accountAccessLevelModal.user=l?l.user:o?.user||null,this.accountAccessLevelModal.role=o?.role||null,this.accountAccessLevelModal.isOpened=!0,console.log(this.accountAccessLevelModal,e,t)},updateAccountAccess:function(e,t,a){this.closeModals(),qt().setAccountAccess({userId:e,accountId:t,role:a}).finally((()=>{this.accountsCopy=null}))},revokeAccountAccess:function(e,t){this.closeModals(),qt().revokeAccountAccess({userId:e,accountId:t}).finally((()=>{this.accountsCopy=null}))},openCreateAccountModal:function(e){wa().openAccountModal({folderId:e})},openUpdateAccountModal:function(e){this.previewAccountModal.account=null,this.previewAccountModal.isOpened=!1,wa().openAccountModal(B().cloneDeep(B().find(this.accountAll,{id:e})))},openDeleteAccountModal:function(e){this.deleteAccountModal.account=B().cloneDeep(B().find(this.accountAll,{id:e})),this.deleteAccountModal.isOpened=!0},deleteAccount:function(e){Vt().deleteAccount(e).finally((()=>{this.closeModals()}))},closeModals:function(){this.previewAccountModal.isOpened=!1,this.previewAccountModal.account=null,this.deleteAccountModal.isOpened=!1,this.deleteAccountModal.account=null,this.deleteFolderModal.isOpened=!1,this.deleteFolderModal.folder=null,this.updateFolderModal.isOpened=!1,this.updateFolderModal.folderId=null,this.updateFolderModal.folderName=null,this.createFolderModal.isOpened=!1,this.accountAccessModal.isOpened=!1,this.accountAccessModal.account=null,this.accountAccessLevelModal.isOpened=!1,this.accountAccessLevelModal.accountId=null,this.accountAccessLevelModal.user=null,this.accountAccessLevelModal.level=null,wa().closeAccountModal()},availableConnections:function(e){return B().filter(this.connections,(t=>t.user.id!==e.owner.id&&(!B().find(t.sharedAccounts,{id:e.id})||!B().find(e.sharedAccess,{user:{id:t.user.id}}))))}}}),Fu=(0,$.A)(Ou,[["render",Jr]]),Ru=Fu;z()(Ou,"components",{QPage:cs.A,QBtn:W.A,QItem:Qa.A,QItemSection:$a.A,QIcon:aa.A,QMenu:rs.A,QList:xn.A,QAvatar:ba.A,QDialog:j.A,QCard:Kt.A,QCardSection:da.A,QCardActions:fa.A}),z()(Ou,"directives",{ClosePopup:ha.A});const Su={class:"settings-classification-wrapper"},xu={class:"settings-toolbar-mobile settings-classification-toolbar-mobile"},Uu={class:"settings-toolbar-mobile-title"},Qu={class:"settings-toolbar-mobile-container"},$u={class:"settings-toolbar-desktop"},ju={class:"settings-breadcrumbs"},Wu={class:"settings-label-header settings-classification-header"},qu={class:"settings-classification-create-class"},zu={key:0,class:"settings-classification-sort"},Pu={class:"settings-classification-container"},Yu={key:0,class:"settings-classification-empty"},Vu={key:1},Bu={key:0,class:"settings-classification-list-item-description-archived"};function Xu(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-icon"),r=(0,s.g2)("q-item-section"),u=(0,s.g2)("q-toggle"),d=(0,s.g2)("q-item"),m=(0,s.g2)("q-list"),p=(0,s.g2)("q-menu"),g=(0,s.g2)("draggable"),b=(0,s.g2)("context-menu-modal"),f=(0,s.g2)("sort-dialog-modal"),h=(0,s.g2)("categories-edit-modal"),_=(0,s.g2)("categories-replace-modal"),y=(0,s.g2)("confirmation-dialog-modal"),A=(0,s.g2)("categories-create-modal"),k=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(k,{class:"settings-classification"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Su,[(0,s.Lk)("div",xu,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("settings",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",Uu,(0,v.v_)(e.$t("modules.classifications.categories.pages.settings.header")),1)]),(0,s.Lk)("div",Qu,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"add_circle_outline",onClick:t[1]||(t[1]=t=>e.openCreateModal())})])]),(0,s.Lk)("div",$u,[(0,s.Lk)("div",ju,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[2]||(t[2]=t=>e.navigateTo("settings",!0))},(0,v.v_)(e.$t("pages.settings.settings.header_desktop")),1)])]),(0,s.Lk)("h4",Wu,(0,v.v_)(e.$t("modules.classifications.categories.pages.settings.header")),1),(0,s.Lk)("div",qu,[(0,s.bF)(c,{class:"settings-classification-create-class-btn econumo-btn -small -magenta",flat:"",label:e.$t("modules.classifications.categories.pages.settings.create_category"),onClick:t[3]||(t[3]=t=>e.openCreateModal())},null,8,["label"])]),e.categories.length>1?((0,s.uX)(),(0,s.CE)("div",zu,[(0,s.bF)(c,{class:"settings-classification-sort-btn",icon:"sort",label:e.$t("blocks.list.order_list"),"no-caps":!0,flat:!0,ripple:!1,onClick:e.openSortDialog},null,8,["label","onClick"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Pu,[e.categories.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Yu,(0,v.v_)(e.$t("blocks.list.list_empty")),1)),e.categories.length>0?((0,s.uX)(),(0,s.CE)("div",Vu,[(0,s.bF)(m,{class:"settings-classification-list"},{default:(0,s.k6)((()=>[(0,s.bF)(g,(0,s.v6)({modelValue:e.categories,"onUpdate:modelValue":t[4]||(t[4]=t=>e.categories=t),onStart:t[5]||(t[5]=t=>e.drag=!0),onEnd:t[6]||(t[6]=t=>e.drag=!1)},e.options,{"item-key":"id"}),{item:(0,s.k6)((({element:t})=>[(0,s.bF)(d,{class:"settings-classification-list-item",clickable:e.$q.screen.lt.lg,onClick:a=>e.openContextMenu(t)},{default:(0,s.k6)((()=>[(0,s.bF)(r,{side:"",class:"settings-classification-list-item-sortable sortable-control cursor-pointer"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{name:"drag_indicator"})])),_:1}),(0,s.bF)(r,{avatar:"",class:"settings-classification-list-item-avatar"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{name:t.icon},null,8,["name"])])),_:2},1024),(0,s.bF)(r,{class:(0,v.C4)(t.isArchived?"settings-classification-list-item-text -archived":"settings-classification-list-item-text")},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(t.name)+" ",1),t.isArchived?((0,s.uX)(),(0,s.CE)("div",Bu,(0,v.v_)(e.$t("modules.classifications.categories.pages.settings.archived_item")),1)):(0,s.Q3)("",!0)])),_:2},1032,["class"]),(0,s.bF)(r,{side:""},{default:(0,s.k6)((()=>[(0,s.bF)(u,{"model-value":!t.isArchived,onClick:a=>e.updateArchiveCategory(t.id,!!t.isArchived)},null,8,["model-value","onClick"])])),_:2},1024),e.$q.screen.gt.md?((0,s.uX)(),(0,s.Wv)(r,{key:0,side:"",class:"cursor-pointer settings-classification-list-item-check-section"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{square:"",flat:"",icon:"more_vert",class:"account-transactions-item-check-button"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{cover:"","auto-close":"",class:"account-transactions-item-check-button-menu"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"account-transactions-item-check-button-list"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{clickable:"",onClick:a=>e.openEditModal(t),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:2},1032,["onClick"]),(0,s.bF)(d,{clickable:"",onClick:a=>e.openDeleteModal(t),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1032,["clickable","onClick"])])),_:1},16,["modelValue"])])),_:1})])):(0,s.Q3)("",!0)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.isContextMenuOpened?((0,s.uX)(),(0,s.Wv)(b,{key:0,"header-label":e.contextMenuCategory.name,actions:e.contextMenuActions,onCancel:e.closeContextMenu,onProceed:e.openNextModal},null,8,["header-label","actions","onCancel","onProceed"])):(0,s.Q3)("",!0),(0,s.bF)(f,{modelValue:e.isSortDialogOpened,"onUpdate:modelValue":t[7]||(t[7]=t=>e.isSortDialogOpened=t),onCancel:e.closeSortDialog,onProceed:t[8]||(t[8]=(t,a)=>e.submitSortDialog(t,a).finally((()=>{e.categoriesCopy=null})))},null,8,["modelValue","onCancel"]),(0,s.bF)(h),(0,s.bF)(_,{categories:e.categories,"onUpdate:categoriesCopy":t[9]||(t[9]=t=>e.categoriesCopy=t)},null,8,["categories"]),e.isDeleteModalOpened?((0,s.uX)(),(0,s.Wv)(y,{key:1,"question-title":e.$t("modules.classifications.categories.modals.delete.title"),"question-label":e.deleteCategory.name,"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:e.closeDeleteModal,onProceed:t[10]||(t[10]=t=>{e.submitDeleteCategory().finally((()=>{e.categoriesCopy=null}))})},null,8,["question-title","question-label","action-label","cancel-label","onCancel"])):(0,s.Q3)("",!0),(0,s.bF)(A)]))])])),_:1})}var Hu=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};const Gu=(0,l.KR)(!1),Ku=(0,l.KR)({type:"expense",name:"",icon:""});function Zu(){const e=()=>{Ku.value.type="expense",Ku.value.name="",Ku.value.icon=Ea,Gu.value=!0},t=()=>{Ku.value.type="expense",Ku.value.name="",Ku.value.icon="",Gu.value=!1},a=e=>Hu(this,void 0,void 0,(function*(){const a={id:null,name:Ku.value.name,type:Ku.value.type,icon:Ku.value.icon};return yield $t().createCategory(a),e&&e.resetValidation(),t(),null}));return{isCreateModalOpened:Gu,createCategory:Ku,openCreateModal:e,closeCreateModal:t,submitCategory:a}}var Ju=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};const ed=(0,l.KR)(!1),td=(0,l.KR)({id:"",name:"",type:"",icon:""});function ad(){const e=e=>{td.value=B().cloneDeep(e),ed.value=!0},t=()=>{td.value={id:"",name:"",type:"",icon:""},ed.value=!1},a=e=>Ju(this,void 0,void 0,(function*(){const a={id:td.value.id,name:td.value.name,icon:td.value.icon};return yield $t().updateCategory(a),e&&e.resetValidation(),t(),null}));return{isEditModalOpened:ed,editCategory:td,openEditModal:e,closeEditModal:t,submitEditForm:a}}var nd=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};function od(){const e=(0,l.KR)(!1),t=(0,l.KR)({id:"",name:""}),a=a=>{t.value=B().cloneDeep(a),e.value=!0},n=()=>{t.value={id:"",name:""},e.value=!1},o=()=>nd(this,void 0,void 0,(function*(){return yield $t().deleteCategory(t.value.id),n(),null}));return{isDeleteModalOpened:e,deleteCategory:t,openDeleteModal:a,closeDeleteModal:n,submitDeleteCategory:o}}var ld=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};const sd=(0,l.KR)(!1),cd=(0,l.KR)({categoryId:"",selectedCategoryId:null});function id(){const e=e=>{cd.value.categoryId=e,cd.value.selectedCategoryId=null,sd.value=!0},t=()=>{cd.value.categoryId="",cd.value.selectedCategoryId=null,sd.value=!1},a=()=>ld(this,void 0,void 0,(function*(){if(cd.value.selectedCategoryId)return yield $t().replaceCategory({oldId:cd.value.categoryId,newId:cd.value.selectedCategoryId}),t(),null})),n=(e,t)=>{const a=B().find(e,{id:t});return a?B().filter(e,(e=>e.id!==a.id&&e.type===a.type)):[]};return{isReplaceModalOpened:sd,replaceCategory:cd,openReplaceModal:e,closeReplaceModal:t,submitReplaceCategory:a,categoriesExcept:n}}function rd(){const e=(0,l.KR)(!1),t=(0,l.KR)({id:"",name:""}),a=a=>{t.value=B().cloneDeep(a),e.value=!0},n=()=>{t.value={id:"",name:""},e.value=!1};return{isContextMenuOpened:e,contextMenuCategory:t,openContextMenu:a,closeContextMenu:n}}var ud=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};function dd(){const e=(0,l.KR)(!1),t=()=>{e.value=!0},a=()=>{e.value=!1},n=(e,t)=>ud(this,void 0,void 0,(function*(){try{yield $t().changeCategoriesSortMode({type:e,direction:t}),a()}catch(e){throw e}}));return{isSortDialogOpened:e,openSortDialog:t,closeSortDialog:a,submitSortDialog:n}}const md={class:"context-menu-modal-card-label"},pd={class:"context-menu-modal-card-list"},gd=(0,s.pM)(Object.assign({name:"ContextMenuModal"},{__name:"ContextMenuModal",props:{headerLabel:{},actions:{}},emits:["proceed","cancel"],setup(e,{emit:t}){const a=t;function o(e,t){a("proceed",e,t)}return(e,t)=>{const a=(0,s.g2)("q-btn"),l=(0,s.g2)("q-card"),c=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(c,{"model-value":!0,onHide:t[0]||(t[0]=t=>e.$emit("cancel")),class:"context-menu-modal"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{class:"context-menu-modal-card"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",md,(0,v.v_)(e.headerLabel),1),(0,s.Lk)("ul",pd,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.actions,(e=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("li",{key:e.value,class:"context-menu-modal-card-list-item"},[(0,s.bF)(a,{class:(0,v.C4)("delete"===e.value?"context-menu-modal-card-list-item-btn -delete":"context-menu-modal-card-list-item-btn"),flat:"",label:e.label,onClick:t=>o(e.value,e.context)},null,8,["class","label","onClick"])])),[[n.aG,!0!==e.isHidden]]))),128))])])),_:1})])),_:1})}}})),vd=gd,bd=vd;z()(gd,"components",{QDialog:j.A,QCard:Kt.A,QBtn:W.A});const fd={class:"sort-modal-card-title"},hd={class:"sort-modal-card-list"},_d={class:"sort-modal-card-list-item"},yd={class:"sort-modal-card-list-item"};function Ad(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-card"),r=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(r,{"model-value":!0,onClose:t[2]||(t[2]=t=>e.$emit("cancel")),class:"sort-modal"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"econumo-modal sort-modal-card"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",fd,(0,v.v_)(e.$t("modals.sort.header")),1),(0,s.Lk)("ul",hd,[(0,s.Lk)("li",_d,[(0,s.bF)(c,{class:"sort-modal-card-list-item-btn",flat:"",label:e.$t("modals.sort.mode.alphabet.asc"),onClick:t[0]||(t[0]=t=>e.$emit("proceed","name","asc"))},null,8,["label"])]),(0,s.Lk)("li",yd,[(0,s.bF)(c,{class:"sort-modal-card-list-item-btn",flat:"",label:e.$t("modals.sort.mode.alphabet.desc"),onClick:t[1]||(t[1]=t=>e.$emit("proceed","name","desc"))},null,8,["label"])])])])),_:1})])),_:1})}const kd=(0,s.pM)({props:[]}),Md=(0,$.A)(kd,[["render",Ad]]),Cd=Md;z()(kd,"components",{QDialog:j.A,QCard:Kt.A,QBtn:W.A});const Ed={class:"settings-toolbar-mobile"},Id={class:"settings-toolbar-mobile-title"},wd=(0,s.Lk)("div",{class:"settings-toolbar-mobile-container"},null,-1),Ld={class:"settings-classification-modal-header"},Td={class:"settings-classification-modal-toggle"},Nd={class:"settings-classification-modal-control"},Dd={class:"settings-classification-modal-control-icon"};function Od(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-btn-toggle"),r=(0,s.g2)("q-icon"),u=(0,s.g2)("q-input"),d=(0,s.g2)("q-card-section"),m=(0,s.g2)("responsive-modal-icons"),p=(0,s.g2)("q-card-actions"),g=(0,s.g2)("q-form"),b=(0,s.g2)("q-card"),f=(0,s.g2)("q-dialog"),h=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(f,{class:"settings-classification-modal",modelValue:e.isEditModalOpened,"onUpdate:modelValue":t[4]||(t[4]=t=>e.isEditModalOpened=t),onHide:e.closeEditModal,persistent:""},{default:(0,s.k6)((()=>[(0,s.bF)(b,{class:"settings-classification-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{ref:"categoryEditForm",onSubmit:t[3]||(t[3]=t=>e.submitEditForm(e.$refs.categoryEditForm)),class:"settings-classification-modal-form"},{default:(0,s.k6)((()=>[(0,s.bF)(d,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ed,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back"},null,512),[[h]])]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",Id,(0,v.v_)(e.$t("modules.classifications.categories.modals.edit.header")),1)]),wd]),(0,s.Lk)("div",Ld,(0,v.v_)(e.$t("modules.classifications.categories.modals.edit.header")),1),(0,s.Lk)("div",Td,[(0,s.bF)(i,{class:"settings-classification-modal-toggle-btn",modelValue:e.editCategory.type,"onUpdate:modelValue":t[0]||(t[0]=t=>e.editCategory.type=t),disable:"",readonly:"","toggle-color":"primary",options:[{label:e.$t("modules.classifications.categories.forms.category.type.income"),value:"income"},{label:e.$t("modules.classifications.categories.forms.category.type.expense"),value:"expense"}]},null,8,["modelValue","options"])]),(0,s.Lk)("div",Nd,[(0,s.bF)(u,{outlined:"",class:"form-input full-width",modelValue:e.editCategory.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.editCategory.name=t),label:e.$t("modules.classifications.categories.forms.category.name.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("modules.classifications.categories.forms.category.name.validation.required_field"),t=>e.isValidCategoryName(t)||e.$t("modules.classifications.categories.forms.category.name.validation.invalid_name")],maxlength:"18"},{before:(0,s.k6)((()=>[(0,s.Lk)("div",Dd,[(0,s.bF)(r,{class:"settings-classification-modal-control-icon-img",name:e.editCategory.icon},null,8,["name"])])])),_:1},8,["modelValue","label","rules"])])])),_:1}),(0,s.bF)(d,{class:"responsive-modal-section-icon"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"responsive-modal-icons-container",header:e.$t("modules.classifications.categories.forms.category.icon.label"),icon:e.editCategory.icon,onUpdateIcon:t[2]||(t[2]=t=>e.editCategory.icon=t)},null,8,["header","icon"])])),_:1}),(0,s.bF)(p,{class:"settings-classification-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"econumo-btn -medium -grey settings-classification-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClick:e.closeEditModal},null,8,["label","onClick"]),(0,s.bF)(c,{class:"econumo-btn -medium -magenta settings-classification-modal-actions-button",flat:"",label:e.$t("elements.button.update.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},512)])),_:1})])),_:1},8,["modelValue","onHide"])}const Fd=(0,s.pM)({name:"CategoriesEditModal",components:{ResponsiveModalIcons:Sa},setup(){const{isNotEmpty:e,isValidCategoryName:t}=He(),{isEditModalOpened:a,editCategory:n,closeEditModal:o,submitEditForm:l}=ad();return{isNotEmpty:e,isValidCategoryName:t,isEditModalOpened:a,editCategory:n,closeEditModal:o,submitEditForm:l}}}),Rd=(0,$.A)(Fd,[["render",Od]]),Sd=Rd;z()(Fd,"components",{QDialog:j.A,QCard:Kt.A,QForm:ua.A,QCardSection:da.A,QBtn:W.A,QBtnToggle:ga.A,QInput:Ht.A,QIcon:aa.A,QCardActions:fa.A}),z()(Fd,"directives",{ClosePopup:ha.A});var xd=a(1359),Ud=a.n(xd);const Qd={class:"settings-classification-replace-modal-card-header"},$d={class:"settings-classification-replace-modal-note"},jd=(0,s.Lk)("div",{class:"settings-classification-replace-modal-note-icon"},[(0,s.Lk)("img",{src:Ud()})],-1);function Wd(e,t,a,n,o,l){const c=(0,s.g2)("q-icon"),i=(0,s.g2)("q-item-section"),r=(0,s.g2)("q-item"),u=(0,s.g2)("q-list"),d=(0,s.g2)("q-card-section"),m=(0,s.g2)("q-btn"),p=(0,s.g2)("q-card-actions"),g=(0,s.g2)("q-card"),b=(0,s.g2)("q-dialog"),f=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(b,{class:"settings-classification-replace-modal",modelValue:e.isReplaceModalOpened,"onUpdate:modelValue":t[1]||(t[1]=t=>e.isReplaceModalOpened=t),onHide:e.closeReplaceModal,position:e.$q.screen.gt.md?"standard":"bottom"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"settings-classification-replace-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(d,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Qd,(0,v.v_)(e.$t("modules.classifications.categories.modals.replace.header")),1),(0,s.Lk)("div",null,[(0,s.bF)(u,{class:"settings-classification-replace-modal-card-list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.categoriesExcept(e.categories,e.replaceCategory.categoryId),(t=>((0,s.uX)(),(0,s.Wv)(r,{key:t.id,class:"settings-classification-replace-modal-card-list-item",clickable:"",onClick:a=>e.replaceCategory.selectedCategoryId=t.id,active:e.replaceCategory.selectedCategoryId===t.id,"active-class":"active"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{avatar:"",class:"settings-classification-replace-modal-card-list-item-avatar"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{class:"settings-classification-replace-modal-card-list-item-avatar-icon",name:t.icon},null,8,["name"])])),_:2},1024),(0,s.bF)(i,{class:"settings-classification-replace-modal-card-list-item-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(t.name),1)])),_:2},1024)])),_:2},1032,["onClick","active"])))),128))])),_:1})])])),_:1}),(0,s.Lk)("div",$d,[jd,(0,s.eW)(" "+(0,v.v_)(e.$t("modules.classifications.categories.modals.replace.note")),1)]),(0,s.bF)(p,{class:"settings-classification-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(m,{class:"econumo-btn -medium -grey settings-classification-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label")},null,8,["label"]),[[f]]),(0,s.bF)(m,{class:"econumo-btn -medium -magenta settings-classification-modal-actions-button",flat:"",label:e.$t("elements.button.replace.label"),disable:!e.replaceCategory.selectedCategoryId,onClick:t[0]||(t[0]=t=>{e.submitReplaceCategory().finally((()=>{e.$emit("update:categoriesCopy",null)}))})},null,8,["label","disable"])])),_:1})])),_:1})])),_:1},8,["modelValue","onHide","position"])}const qd=(0,s.pM)({name:"CategoriesReplaceModal",props:{categories:{type:Array,required:!0}},emits:["update:categoriesCopy"],setup(){const e=(0,Gt.A)(),{isReplaceModalOpened:t,replaceCategory:a,closeReplaceModal:n,submitReplaceCategory:o,categoriesExcept:l}=id();return{$q:e,isReplaceModalOpened:t,replaceCategory:a,closeReplaceModal:n,submitReplaceCategory:o,categoriesExcept:l}}}),zd=(0,$.A)(qd,[["render",Wd]]),Pd=zd;z()(qd,"components",{QDialog:j.A,QCard:Kt.A,QCardSection:da.A,QList:xn.A,QItem:Qa.A,QItemSection:$a.A,QIcon:aa.A,QCardActions:fa.A,QBtn:W.A}),z()(qd,"directives",{ClosePopup:ha.A});const Yd={class:"settings-toolbar-mobile"},Vd={class:"settings-toolbar-mobile-title"},Bd=(0,s.Lk)("div",{class:"settings-toolbar-mobile-container"},null,-1),Xd={class:"settings-classification-modal-header"},Hd={class:"settings-classification-modal-toggle"},Gd={class:"settings-classification-modal-control"},Kd={class:"settings-classification-modal-control-icon"};function Zd(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-btn-toggle"),r=(0,s.g2)("q-icon"),u=(0,s.g2)("q-input"),d=(0,s.g2)("q-card-section"),m=(0,s.g2)("responsive-modal-icons"),p=(0,s.g2)("q-card-actions"),g=(0,s.g2)("q-form"),b=(0,s.g2)("q-card"),f=(0,s.g2)("q-dialog"),h=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(f,{class:"settings-classification-modal",modelValue:e.isCreateModalOpened,"onUpdate:modelValue":t[4]||(t[4]=t=>e.isCreateModalOpened=t),onHide:e.closeCreateModal},{default:(0,s.k6)((()=>[(0,s.bF)(b,{class:"settings-classification-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(g,{ref:"createCategoryForm",onSubmit:t[3]||(t[3]=t=>e.submitCategory(e.$refs.createCategoryForm)),class:"settings-classification-modal-form"},{default:(0,s.k6)((()=>[(0,s.bF)(d,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Yd,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back"},null,512),[[h]])]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",Vd,(0,v.v_)(e.$t("modules.classifications.categories.modals.create.header")),1)]),Bd]),(0,s.Lk)("div",Xd,(0,v.v_)(e.$t("modules.classifications.categories.modals.create.header")),1),(0,s.Lk)("div",Hd,[(0,s.bF)(i,{class:"settings-classification-modal-toggle-btn",modelValue:e.createCategory.type,"onUpdate:modelValue":t[0]||(t[0]=t=>e.createCategory.type=t),options:[{label:e.$t("modules.classifications.categories.forms.category.type.income"),value:"income"},{label:e.$t("modules.classifications.categories.forms.category.type.expense"),value:"expense"}]},null,8,["modelValue","options"])]),(0,s.Lk)("div",Gd,[(0,s.bF)(u,{class:"form-input full-width",outlined:"",placeholder:e.$t("modules.classifications.categories.forms.category.name.placeholder"),modelValue:e.createCategory.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.createCategory.name=t),label:e.$t("modules.classifications.categories.forms.category.name.label"),"lazy-rules":"",rules:[t=>e.isNotEmpty(t)||e.$t("modules.classifications.categories.forms.category.name.validation.required_field"),t=>e.isValidCategoryName(t)||e.$t("modules.classifications.categories.forms.category.name.validation.invalid_name")],maxlength:"18"},{before:(0,s.k6)((()=>[(0,s.Lk)("div",Kd,[(0,s.bF)(r,{class:"settings-classification-modal-control-icon-img",name:e.createCategory.icon},null,8,["name"])])])),_:1},8,["placeholder","modelValue","label","rules"])])])),_:1}),(0,s.bF)(d,{class:"responsive-modal-section-icon"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"responsive-modal-icons-container",header:e.$t("modules.classifications.categories.forms.category.icon.label"),icon:e.createCategory.icon,onUpdateIcon:t[2]||(t[2]=t=>e.createCategory.icon=t)},null,8,["header","icon"])])),_:1}),(0,s.bF)(p,{class:"settings-classification-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(c,{class:"econumo-btn -medium -grey settings-classification-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label")},null,8,["label"]),[[h]]),(0,s.bF)(c,{class:"econumo-btn -medium -magenta settings-classification-modal-actions-button",flat:"",label:e.$t("elements.button.create.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},512)])),_:1})])),_:1},8,["modelValue","onHide"])}const Jd=(0,s.pM)({name:"CategoriesCreateModal",components:{ResponsiveModalIcons:Sa},setup(){const{isNotEmpty:e,isValidCategoryName:t}=He(),{isCreateModalOpened:a,createCategory:n,closeCreateModal:o,submitCategory:l}=Zu();return{isNotEmpty:e,isValidCategoryName:t,isCreateModalOpened:a,createCategory:n,closeCreateModal:o,submitCategory:l}}}),em=(0,$.A)(Jd,[["render",Zd]]),tm=em;z()(Jd,"components",{QDialog:j.A,QCard:Kt.A,QForm:ua.A,QCardSection:da.A,QBtn:W.A,QBtnToggle:ga.A,QInput:Ht.A,QIcon:aa.A,QCardActions:fa.A}),z()(Jd,"directives",{ClosePopup:ha.A});const am=(0,s.pM)({name:"SettingsCategoriesPage",mixins:[pl],components:{draggable:tu(),ContextMenuModal:bd,ConfirmationDialogModal:Al,SortDialogModal:Cd,CategoriesEditModal:Sd,CategoriesReplaceModal:Pd,CategoriesCreateModal:tm},setup(){const e=(0,Gt.A)(),t=He(),{openCreateModal:a}=Zu(),{openEditModal:n}=ad(),o=od(),{openReplaceModal:l}=id(),s=rd(),c=dd();return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$q:e},t),{openCreateModal:a,openEditModal:n}),o),{openReplaceModal:l}),s),c)},data(){return{categoriesCopy:null,selectedCategoryId:null,drag:!1}},created(){"settingsCategories"===this.$router.currentRoute.value.name&&_t().setWorkspaceActiveArea()},computed:Object.assign(Object.assign(Object.assign({},(0,d.aH)(Yt,["userId"])),(0,d.aH)($t,["ownCategories"])),{categories:{get(){return this.categoriesCopy||B().filter(this.ownCategories,{ownerUserId:this.userId})},set(e){this.categoriesCopy=e;const t=[];e.forEach((e=>{t.push(e.id)})),$t().orderCategoryList(t).finally((()=>{this.categoriesCopy=null}))}},selectedCategory(){return B().find(this.ownCategories,{id:this.selectedCategoryId})},options(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost",handle:".sortable-control"}},categoriesOptions(){const e=[];return this.selectedCategory&&this.categories.forEach((t=>{var a;(null===(a=this.selectedCategory)||void 0===a?void 0:a.type)===t.type&&e.push({label:t.name,value:t.id,icon:t.icon})})),e},contextMenuActions(){return[{label:this.$t("elements.button.edit.label"),value:"edit",context:this.contextMenuCategory.id,isHidden:!1},{label:this.$t("elements.button.delete.label"),value:"delete",context:this.contextMenuCategory.id,isHidden:!1}]}}),methods:{openNextModal(e,t){if(this.closeContextMenu(),"edit"===e){const e=B().find(this.categories,{id:t});e&&this.openEditModal(e)}else if("replace"===e)this.openReplaceModal(t);else if("delete"===e){const e=B().find(this.categories,{id:t});e&&this.openDeleteModal(e)}},updateArchiveCategory(e,t=!1){t?$t().unarchiveCategory(e).finally((()=>{this.categoriesCopy=null})):$t().archiveCategory(e).finally((()=>{this.categoriesCopy=null}))}}}),nm=(0,$.A)(am,[["render",Xu]]),om=nm;z()(am,"components",{QPage:cs.A,QBtn:W.A,QList:xn.A,QItem:Qa.A,QItemSection:$a.A,QIcon:aa.A,QToggle:ei.A,QMenu:rs.A});const lm={class:"settings-classification-wrapper"},sm={class:"settings-toolbar-mobile settings-classification-toolbar-mobile"},cm={class:"settings-toolbar-mobile-title"},im={class:"settings-toolbar-mobile-container"},rm={class:"settings-toolbar-desktop"},um={class:"settings-breadcrumbs"},dm={class:"settings-label-header settings-classification-header"},mm={class:"settings-classification-create-class"},pm={key:0,class:"settings-classification-sort"},gm={class:"settings-classification-container"},vm={key:0,class:"settings-classification-empty"},bm={key:1},fm={key:0,class:"settings-classification-list-item-description-archived"};function hm(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-icon"),r=(0,s.g2)("q-item-section"),u=(0,s.g2)("q-toggle"),d=(0,s.g2)("q-item"),m=(0,s.g2)("q-list"),p=(0,s.g2)("q-menu"),g=(0,s.g2)("draggable"),b=(0,s.g2)("context-menu-modal"),f=(0,s.g2)("sort-dialog-modal"),h=(0,s.g2)("prompt-dialog-modal"),_=(0,s.g2)("confirmation-dialog-modal"),y=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(y,{class:"settings-classification"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",lm,[(0,s.Lk)("div",sm,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("settings",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",cm,(0,v.v_)(e.$t("modules.classifications.payees.pages.settings.header")),1)]),(0,s.Lk)("div",im,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"add_circle_outline",onClick:t[1]||(t[1]=t=>e.openCreateModal())})])]),(0,s.Lk)("div",rm,[(0,s.Lk)("div",um,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[2]||(t[2]=t=>e.navigateTo("settings",!0))},(0,v.v_)(e.$t("pages.settings.settings.header_desktop")),1)])]),(0,s.Lk)("h4",dm,(0,v.v_)(e.$t("modules.classifications.payees.pages.settings.menu_item")),1),(0,s.Lk)("div",mm,[(0,s.bF)(c,{class:"settings-classification-create-class-btn econumo-btn -small -magenta",flat:"",label:e.$t("modules.classifications.payees.pages.settings.create_payee"),onClick:t[3]||(t[3]=t=>e.openCreateModal())},null,8,["label"])]),e.payees.length>1?((0,s.uX)(),(0,s.CE)("div",pm,[(0,s.bF)(c,{class:"settings-classification-sort-btn",icon:"sort",label:e.$t("blocks.list.order_list"),"no-caps":!0,flat:!0,ripple:!1,onClick:e.openSortModal},null,8,["label","onClick"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",gm,[e.payees.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",vm,(0,v.v_)(e.$t("blocks.list.list_empty")),1)),e.payees.length>0?((0,s.uX)(),(0,s.CE)("div",bm,[(0,s.bF)(m,{class:"settings-classification-list"},{default:(0,s.k6)((()=>[(0,s.bF)(g,(0,s.v6)({modelValue:e.payees,"onUpdate:modelValue":t[4]||(t[4]=t=>e.payees=t),onStart:t[5]||(t[5]=t=>e.drag=!0),onEnd:t[6]||(t[6]=t=>e.drag=!1)},e.options,{"item-key":"id"}),{item:(0,s.k6)((({element:t})=>[(0,s.bF)(d,{class:"settings-classification-list-item",clickable:e.$q.screen.lt.lg,onClick:a=>e.openContextMenuModal(t.id)},{default:(0,s.k6)((()=>[(0,s.bF)(r,{side:"",class:"settings-classification-list-item-sortable sortable-control cursor-pointer"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{name:"drag_indicator"})])),_:1}),(0,s.bF)(r,{class:(0,v.C4)(t.isArchived?"settings-classification-list-item-text -archived":"settings-classification-list-item-text")},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(t.name)+" ",1),t.isArchived?((0,s.uX)(),(0,s.CE)("div",fm,(0,v.v_)(e.$t("modules.classifications.payees.pages.settings.archived_item")),1)):(0,s.Q3)("",!0)])),_:2},1032,["class"]),(0,s.bF)(r,{side:""},{default:(0,s.k6)((()=>[(0,s.bF)(u,{"model-value":!t.isArchived,onClick:a=>e.updateArchivePayee(t.id,!!t.isArchived)},null,8,["model-value","onClick"])])),_:2},1024),e.$q.screen.gt.md?((0,s.uX)(),(0,s.Wv)(r,{key:0,side:"",class:"cursor-pointer settings-classification-list-item-check-section"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{square:"",flat:"",icon:"more_vert",class:"account-transactions-item-check-button"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{cover:"","auto-close":"",class:"account-transactions-item-check-button-menu"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"account-transactions-item-check-button-list"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{clickable:"",onClick:a=>e.openEditModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:2},1032,["onClick"]),(0,s.bF)(d,{clickable:"",onClick:a=>e.openDeleteModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1032,["clickable","onClick"])])),_:1},16,["modelValue"])])),_:1})])):(0,s.Q3)("",!0)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.contextMenuModal.isOpened?((0,s.uX)(),(0,s.Wv)(b,{key:0,"header-label":e.contextMenuModal.payee.name,actions:[{label:e.$t("elements.button.edit.label"),value:"edit",context:e.contextMenuModal.payee.id},{label:e.$t("elements.button.delete.label"),value:"delete",context:e.contextMenuModal.payee.id}],onCancel:t[7]||(t[7]=t=>e.closeContextMenuModal()),onProceed:e.openNextModal},null,8,["header-label","actions","onProceed"])):(0,s.Q3)("",!0),(0,s.bF)(f,{modelValue:e.sortModal.isOpened,"onUpdate:modelValue":t[8]||(t[8]=t=>e.sortModal.isOpened=t),onCancel:e.closeSortModal,onProceed:e.updateOrder},null,8,["modelValue","onCancel","onProceed"]),e.editModal.isOpened?((0,s.uX)(),(0,s.Wv)(h,{key:1,"header-label":e.$t("modules.classifications.payees.modals.edit.header"),"input-value":e.editModal.payeeName,"input-label":e.$t("modules.classifications.payees.forms.payee.name.label"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.update.label"),validation:[t=>e.isNotEmpty(t)||e.$t("modules.classifications.payees.forms.payee.name.validation.required_field"),t=>e.isValidPayeeName(t)||e.$t("modules.classifications.payees.forms.payee.name.validation.invalid_name")],onClose:e.closeEditModal,onSubmit:e.updatePayee},null,8,["header-label","input-value","input-label","cancel-label","submit-label","validation","onClose","onSubmit"])):(0,s.Q3)("",!0),e.deleteModal.isOpened?((0,s.uX)(),(0,s.Wv)(_,{key:2,"question-title":e.$t("modules.classifications.payees.modals.delete.title"),"question-label":e.deleteModal.payee?.name,"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:e.closeDeleteModal,onProceed:t[9]||(t[9]=t=>e.deletePayee(e.deleteModal.payee.id))},null,8,["question-title","question-label","action-label","cancel-label","onCancel"])):(0,s.Q3)("",!0),e.createModal.isOpened?((0,s.uX)(),(0,s.Wv)(h,{key:3,"header-label":e.$t("modules.classifications.payees.modals.create.header"),"input-value":"","input-label":e.$t("modules.classifications.payees.forms.payee.name.label"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.create.label"),validation:[t=>e.isNotEmpty(t)||e.$t("modules.classifications.payees.forms.payee.name.validation.required_field"),t=>e.isValidPayeeName(t)||e.$t("modules.classifications.payees.forms.payee.name.validation.invalid_name")],onClose:e.closeCreateModal,onSubmit:e.createPayee},null,8,["header-label","input-label","cancel-label","submit-label","validation","onClose","onSubmit"])):(0,s.Q3)("",!0)]))])])),_:1})}const _m=(0,s.pM)({name:"SettingsPayeesPage",mixins:[pl],components:{draggable:tu(),SortDialogModal:Cd,ContextMenuModal:bd,PromptDialogModal:cu,ConfirmationDialogModal:Al},setup(){const e=He();return{...e}},data(){return{payeesCopy:null,contextMenuModal:{isOpened:!1,payee:null},editModal:{isOpened:!1,payeeId:null,payeeName:null},createModal:{isOpened:!1},sortModal:{isOpened:!1},deleteModal:{isOpened:!1,payee:null},modal:{isOpened:!1,payeeId:null,payeeName:null,payeeIsArchived:null}}},created(){"settingsPayees"===this.$router.currentRoute.value.name&&_t().setWorkspaceActiveArea()},computed:{...(0,d.aH)(Yt,["userId"]),...(0,d.aH)(Ut,["ownPayees"]),payees:{get(){return this.payeesCopy||this.ownPayees},set(e){this.payeesCopy=e;let t=[];e.forEach((e=>{t.push(e.id)})),Ut().orderPayeeList(t).finally((()=>{this.payeesCopy=null}))}},options(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost",handle:".sortable-control"}}},methods:{openContextMenuModal:function(e){this.contextMenuModal.payee=B().find(this.ownPayees,{id:e}),this.contextMenuModal.isOpened=!0},closeContextMenuModal:function(){this.contextMenuModal.payee=null,this.contextMenuModal.isOpened=!1},openNextModal:function(e,t){this.closeContextMenuModal(),"edit"===e?this.openEditModal(t):"delete"===e&&this.openDeleteModal(t)},openSortModal:function(){this.sortModal.isOpened=!0},closeSortModal:function(){this.sortModal.isOpened=!1},updateOrder:function(e,t){Ut().changePayeesSortMode({type:e,direction:t}).finally((()=>{this.payeesCopy=null,this.closeSortModal()}))},openEditModal:function(e){const t=B().cloneDeep(B().find(this.ownPayees,{id:e}));this.editModal.payeeId=t.id,this.editModal.payeeName=t.name,this.editModal.isOpened=!0},closeEditModal:function(){this.editModal.isOpened=!1,this.editModal.payeeId=null,this.editModal.payeeName=null},updatePayee:function(e,t){const a=B().find(this.ownPayees,{name:t});Ut().updatePayee({id:a.id,name:e}).finally((()=>{this.closeEditModal(),this.payeesCopy=null}))},openDeleteModal:function(e){this.deleteModal.payee=B().cloneDeep(B().find(this.ownPayees,{id:e})),this.deleteModal.isOpened=!0},closeDeleteModal:function(){this.deleteModal.isOpened=!1,this.deleteModal.payee=null},deletePayee:function(e){Ut().deletePayee(e).finally((()=>{this.closeDeleteModal(),this.payeesCopy=null}))},openCreateModal:function(){this.createModal.isOpened=!0},closeCreateModal:function(){this.createModal.isOpened=!1},createPayee:function(e){Ut().createPayee({name:e}).finally((()=>{this.closeCreateModal(),this.payeesCopy=null}))},updateArchivePayee:function(e,t=!1){t?Ut().unarchivePayee(e).finally((()=>{this.payeesCopy=null})):Ut().archivePayee(e).finally((()=>{this.payeesCopy=null}))}}}),ym=(0,$.A)(_m,[["render",hm]]),Am=ym;z()(_m,"components",{QPage:cs.A,QBtn:W.A,QList:xn.A,QItem:Qa.A,QItemSection:$a.A,QIcon:aa.A,QToggle:ei.A,QMenu:rs.A});const km={class:"budget-form-wrapper"},Mm={class:"budget-form-wrapper-control"},Cm={class:"budget-form-wrapper-control"},Em={class:"budget-form-wrapper-accounts-header"},Im={class:"budget-form-wrapper-accounts"},wm={class:"budget-form-wrapper-accounts-item-info"},Lm={class:"budget-form-wrapper-accounts-item-info-container"},Tm=(0,s.pM)(Object.assign({name:"BudgetForm"},{__name:"BudgetForm",props:{name:{},excluded:{default:()=>[]},canUpdateName:{type:Boolean},currencyId:{default:void 0}},emits:["update-name","update-excluded","update-currency"],setup(e,{emit:t}){const{isNotEmpty:a,isValidBudgetName:n}=He(),{moneyFormat:o}=rt(),c=ct(),i=e,r=t,u=(0,s.EW)({get(){if(!i.currencyId)return null;const e=c.currenciesHash[i.currencyId];return e?{label:e.code,value:e.id}:null},set(e){var t;r("update-currency",null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:"")}}),d=Vt(),m=(0,s.EW)({get(){return i.name},set(e){r("update-name",e)}}),p=(0,l.KR)([...i.excluded||[]]);(0,s.wB)((()=>i.excluded),(e=>{p.value=[...e||[]]}),{deep:!0});const g=(0,s.EW)((()=>{const e=[];return d.ownAccounts?(d.ownAccounts.forEach((t=>{const{id:a,name:n,icon:o,balance:l,currency:s}=t,c=!(0,Yc.A)(p.value,a),i={id:a,name:n,icon:o,balance:l,currency:s,included:c};e.push(i)})),e):e}));function b(e,t){const a=(0,Yc.A)(p.value,e);a&&t?(0,Vc.A)(p.value,(t=>t===e)):a||t||p.value.push(e),r("update-excluded",p.value)}return(e,t)=>{const c=(0,s.g2)("q-input"),i=(0,s.g2)("q-icon"),r=(0,s.g2)("q-item-section"),d=(0,s.g2)("q-toggle");return(0,s.uX)(),(0,s.CE)("div",km,[(0,s.Lk)("div",Mm,[(0,s.bF)(c,{class:"form-input full-width",outlined:"",autofocus:"",placeholder:e.$t("modules.budget.form.budget.name.placeholder"),modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),disable:!e.canUpdateName,label:e.$t("modules.budget.form.budget.name.label"),"lazy-rules":"",rules:[t=>(0,l.R1)(a)(t.toString())||e.$t("modules.budget.form.budget.name.validation.required_field"),t=>(0,l.R1)(n)(t.toString())||e.$t("modules.budget.form.budget.name.validation.invalid_name")],maxlength:"18"},null,8,["placeholder","modelValue","disable","label","rules"])]),(0,s.Lk)("div",Cm,[(0,s.bF)(qa,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e),outlined:"","custom-class":"form-select",label:e.$t("modules.budget.form.budget_envelope.currency.label"),rules:[t=>(0,l.R1)(a)(t.toString())||e.$t("modules.budget.form.budget_envelope.currency.validation.required_field")]},null,8,["modelValue","label","rules"])]),(0,s.Lk)("h5",Em,(0,v.v_)(e.$t("modules.budget.modal.budget_form.accounts")),1),(0,s.Lk)("div",Im,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(g.value,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"budget-form-wrapper-accounts-item-wrapper",key:e.id},[(0,s.bF)(r,{class:"budget-form-wrapper-accounts-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:"budget-form-wrapper-accounts-item-avatar-icon",name:e.icon},null,8,["name"])])),_:2},1024),(0,s.Lk)("div",wm,[(0,s.bF)(r,{class:"budget-form-wrapper-accounts-item-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.name),1)])),_:2},1024),(0,s.Lk)("div",Lm,[(0,s.bF)(r,{class:"budget-form-wrapper-accounts-item-balance"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)((0,l.R1)(o)(e.balance,e.currency.id,!0,!0)),1)])),_:2},1024)])]),(0,s.bF)(r,{class:"budget-form-wrapper-accounts-item-toggle",side:""},{default:(0,s.k6)((()=>[(0,s.bF)(d,{"model-value":e.included,onClick:t=>b(e.id,!e.included)},null,8,["model-value","onClick"])])),_:2},1024)])))),128))])])}}})),Nm=Tm,Dm=Nm;z()(Tm,"components",{QInput:Ht.A,QItemSection:$a.A,QIcon:aa.A,QToggle:ei.A});const Om={class:"settings-toolbar-mobile"},Fm={class:"settings-toolbar-mobile-title"},Rm={class:"responsive-modal-header"},Sm=(0,s.pM)(Object.assign({name:"BudgetCreateFormModal"},{__name:"BudgetCreateFormModal",props:{id:{},name:{},excluded:{},currencyId:{}},emits:["update-name","update-excluded","submit","close"],setup(e,{emit:t}){const a=e,o=t,c=(0,l.KR)(a.name),i=(0,l.KR)(a.excluded),r=(0,l.KR)(""),u=(0,l.KR)(a.currencyId),d=e=>{c.value=e,o("update-name",e)},m=e=>{i.value=e,o("update-excluded",e)},p=e=>{r.value=e},g=e=>{u.value=e};function b(){o("submit",{id:a.id,name:c.value,excludedAccounts:i.value,startDate:r.value,currencyId:u.value})}function f(){o("close")}return(e,t)=>{const a=(0,s.g2)("q-card-section"),o=(0,s.g2)("q-btn"),l=(0,s.g2)("q-card-actions"),h=(0,s.g2)("q-form"),_=(0,s.g2)("q-card"),y=(0,s.g2)("q-dialog"),A=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(y,{class:"responsive-modal","model-value":!0,onHide:f},{default:(0,s.k6)((()=>[(0,s.bF)(_,{class:"responsive-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(h,{ref:"budgetForm",onSubmit:(0,n.D$)(b,["prevent"]),onReset:f},{default:(0,s.k6)((()=>[(0,s.bF)(a,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Om,[(0,s.Lk)("div",null,[(0,s.Lk)("h4",Fm,(0,v.v_)(e.$t("modules.budget.modal.create_budget_form.header")),1)])]),(0,s.Lk)("div",Rm,(0,v.v_)(e.$t("modules.budget.modal.create_budget_form.header")),1),(0,s.bF)(Dm,{name:c.value,excluded:i.value,"can-update-name":!0,"start-date":r.value,"currency-id":u.value,onUpdateName:d,onUpdateExcluded:m,onUpdateStartDate:p,onUpdateCurrency:g},null,8,["name","excluded","start-date","currency-id"])])),_:1}),(0,s.bF)(l,{class:"responsive-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(o,{class:"econumo-btn -medium -grey responsive-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClick:f},null,8,["label"]),[[A]]),(0,s.bF)(o,{class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.create.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},512)])),_:1})])),_:1})}}})),xm=Sm,Um=xm;z()(Sm,"components",{QDialog:j.A,QCard:Kt.A,QForm:ua.A,QCardSection:da.A,QCardActions:fa.A,QBtn:W.A}),z()(Sm,"directives",{ClosePopup:ha.A});const Qm={class:"account-access-dialog-modal-user"},$m=["src"],jm={class:"account-access-dialog-modal-user-name"},Wm={class:"account-access-dialog-modal-user-name-title"},qm=(0,s.pM)(Object.assign({name:"BudgetAccessLevelModal"},{__name:"BudgetAccessLevelModal",props:{budgetId:{},user:{},role:{}},emits:["share","revoke","cancel"],setup(e,{emit:t}){const{avatarUrl:a}=Xt();return(e,t)=>{const n=(0,s.g2)("q-avatar"),o=(0,s.g2)("q-card-section"),c=(0,s.g2)("q-item-section"),i=(0,s.g2)("q-item"),r=(0,s.g2)("q-list"),u=(0,s.g2)("q-card"),d=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(d,{class:"account-access-dialog-modal","model-value":!0,onHide:t[5]||(t[5]=t=>e.$emit("cancel"))},{default:(0,s.k6)((()=>[e.user?((0,s.uX)(),(0,s.Wv)(u,{key:0,class:"account-access-dialog-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"account-access-dialog-modal-section -padding"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Qm,[(0,s.bF)(n,{class:"account-access-dialog-modal-user-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:(0,l.R1)(a)(e.user.avatar,100),class:"account-access-dialog-modal-user-avatar-img",width:"100",height:"100"},null,8,$m)])),_:1}),(0,s.Lk)("div",jm,[(0,s.Lk)("div",Wm,(0,v.v_)(e.user.name),1)])])])),_:1}),(0,s.bF)(o,{class:"account-access-dialog-modal-section"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-access-dialog-modal-list"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{class:(0,v.C4)(["account-access-dialog-modal-item","control_point "+("guest"===e.role?"active":"")]),clickable:"",onClick:t[0]||(t[0]=t=>e.$emit("share",e.budgetId,e.user.id,(0,l.R1)(Tt).READ_ONLY))},{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.connections.elements.roles.guest")),1)])),_:1})])),_:1},8,["class"]),(0,s.bF)(i,{class:(0,v.C4)(["account-access-dialog-modal-item","control_point "+("user"===e.role?"active":"")]),clickable:"",onClick:t[1]||(t[1]=t=>e.$emit("share",e.budgetId,e.user.id,(0,l.R1)(Tt).USER))},{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.connections.elements.roles.user")),1)])),_:1})])),_:1},8,["class"]),(0,s.bF)(i,{class:(0,v.C4)(["account-access-dialog-modal-item","control_point "+("admin"===e.role?"active":"")]),clickable:"",onClick:t[2]||(t[2]=t=>e.$emit("share",e.budgetId,e.user.id,(0,l.R1)(Tt).ADMIN))},{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.connections.elements.roles.admin")),1)])),_:1})])),_:1},8,["class"]),e.role&&e.role!==(0,l.R1)(Tt).OWNER?((0,s.uX)(),(0,s.Wv)(i,{key:0,class:"account-access-dialog-modal-item -delete",clickable:"",onClick:t[3]||(t[3]=t=>e.$emit("revoke",e.budgetId,e.user.id))},{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.connections.modals.share_access.revoke_access")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0),(0,s.bF)(i,{class:"account-access-dialog-modal-item control_point -cancel",clickable:"",onClick:t[4]||(t[4]=t=>e.$emit("cancel"))},{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.cancel.label")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1})}}})),zm=qm,Pm=zm;z()(qm,"components",{QDialog:j.A,QCard:Kt.A,QCardSection:da.A,QAvatar:ba.A,QList:xn.A,QItem:Qa.A,QItemSection:$a.A});const Ym=e=>((0,s.Qi)("data-v-fb12bcee"),e=e(),(0,s.jt)(),e),Vm={class:"settings-toolbar-mobile access-modal-toolbar"},Bm={id:"budget-access-title",class:"settings-toolbar-mobile-title"},Xm=Ym((()=>(0,s.Lk)("div",{class:"settings-toolbar-mobile-container"},null,-1))),Hm={class:"access-modal-list"},Gm={class:"access-modal-title"},Km={key:0,class:"access-modal-note",role:"status"},Zm={key:1,class:"access-modal-users-list",role:"list"},Jm=["onClick","aria-label"],ep=["src","alt"],tp={class:"preview-modal-account-info-access-item-user"},ap={class:"preview-modal-account-info-access-item-user-name"},np={class:"preview-modal-account-info-access-item-user-role"},op=(0,s.pM)(Object.assign({name:"BudgetAccessModal"},{__name:"BudgetAccessModal",props:{budgetId:{},budgetName:{},access:{},connections:{}},emits:["cancel","user-selected"],setup(e,{emit:t}){const a=e,n=t,{t:o}=(0,U.s9)(),l=(0,s.EW)((()=>Yt().userId)),{avatarUrl:c}=Xt(),i=(0,s.EW)((()=>{const e=[],t={};return a.connections.forEach(((a,n)=>{a.user.id!==l.value&&(e.push({userId:a.user.id,userName:a.user.name,userAvatar:a.user.avatar,role:null,isAccepted:!1}),t[a.user.id]=n)})),a.access.forEach((a=>{if(a.user.id!==l.value)if(a.user.id in t){const n=t[a.user.id];e[n].role=a.role,e[n].isAccepted=a.isAccepted===Nt.ACCEPTED}else e.push({userId:a.user.id,userName:a.user.name,userAvatar:a.user.avatar,role:a.role,isAccepted:a.isAccepted===Nt.ACCEPTED})})),e})),r=e=>c(e,100),u=e=>{if(!e.role)return o("modules.connections.elements.roles.no_access");const t=o(`modules.connections.modals.share_access.level.${e.role}`);return e.isAccepted?t:`${t}  ${o("modules.connections.modals.share_access.not_accepted")}`},d=e=>{n("user-selected",a.budgetId,e.userId,e.role)};return(e,t)=>{const a=(0,s.g2)("q-btn"),n=(0,s.g2)("q-card-section"),o=(0,s.g2)("q-avatar"),l=(0,s.g2)("q-card"),c=(0,s.g2)("q-dialog"),m=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(c,{class:"access-modal","model-value":!0,onHide:t[0]||(t[0]=t=>e.$emit("cancel")),role:"dialog","aria-labelledby":"budget-access-title"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{class:"access-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"access-modal-section -toolbar"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Vm,[(0,s.Lk)("div",null,[(0,s.bo)((0,s.bF)(a,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back","aria-label":e.$t("elements.button.back.label")},null,8,["aria-label"]),[[m]])]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",Bm,(0,v.v_)(e.budgetName),1)]),Xm])])),_:1}),(0,s.bF)(n,{class:"access-modal-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Hm,[(0,s.Lk)("div",Gm,(0,v.v_)(e.budgetName),1),i.value.length?((0,s.uX)(),(0,s.CE)("ul",Zm,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.value,(t=>((0,s.uX)(),(0,s.CE)("li",{key:t.userId,class:"preview-modal-account-info-access-item",role:"listitem"},[(0,s.Lk)("button",{class:"preview-modal-account-info-access-button",onClick:e=>d(t),"aria-label":e.$t("modules.connections.modals.share_access.select_user",{name:t.userName})},[(0,s.bF)(o,{class:"preview-modal-account-info-access-item-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:r(t.userAvatar),class:"preview-modal-account-info-access-item-avatar-img",alt:t.userName,"aria-hidden":!0},null,8,ep)])),_:2},1024),(0,s.Lk)("div",tp,[(0,s.Lk)("div",ap,(0,v.v_)(t.userName),1),(0,s.Lk)("div",np,(0,v.v_)(u(t)),1)])],8,Jm)])))),128))])):((0,s.uX)(),(0,s.CE)("div",Km,(0,v.v_)(e.$t("modules.connections.modals.share_access.list_empty")),1))])])),_:1})])),_:1})])),_:1})}}})),lp=(0,$.A)(op,[["__scopeId","data-v-fb12bcee"]]),sp=lp;z()(op,"components",{QDialog:j.A,QCard:Kt.A,QCardSection:da.A,QBtn:W.A,QAvatar:ba.A}),z()(op,"directives",{ClosePopup:ha.A});const cp={class:"econumo-modal form-fail-modal"},ip={class:"form-fail-modal-title"},rp={class:"form-fail-modal-description"},up={class:"form-fail-modal-button"},dp=(0,s.pM)(Object.assign({name:"ErrorModal"},{__name:"ErrorModal",props:{header:{},description:{}},emits:["close"],setup(e,{emit:t}){const a=t;function n(){a("close")}return(e,t)=>{const a=(0,s.g2)("q-btn"),o=(0,s.g2)("q-dialog");return(0,s.uX)(),(0,s.Wv)(o,{"model-value":!0,persistent:"",minimized:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",cp,[(0,s.Lk)("div",ip,(0,v.v_)(e.header),1),(0,s.Lk)("div",rp,(0,v.v_)(e.description),1),(0,s.Lk)("div",up,[(0,s.bF)(a,{class:"econumo-btn -small -yellow full-width",label:e.$t("elements.button.ok.label"),type:"button",onClick:n,flat:""},null,8,["label"])])])])),_:1})}}})),mp=dp,pp=mp;z()(dp,"components",{QDialog:j.A,QBtn:W.A});const gp={class:"settings-classification-wrapper"},vp={class:"settings-toolbar-mobile settings-classification-toolbar-mobile"},bp={class:"settings-toolbar-mobile-title"},fp={class:"settings-toolbar-mobile-container"},hp={class:"settings-toolbar-desktop"},_p={class:"settings-breadcrumbs"},yp={class:"settings-label-header settings-classification-header"},Ap={class:"settings-classification-create-class"},kp={class:"settings-classification-container"},Mp={key:0,class:"settings-classification-empty"},Cp={key:1},Ep={key:0,class:"settings-classification-list-item-description-archived"},Ip=["src","alt","title"],wp=(0,s.pM)(Object.assign({name:"SettingsBudgetsPage"},{__name:"Budgets",setup(e){const t=(0,g.rd)(),a=(0,g.lq)(),n=Dt(),o=Yt(),{t:c}=(0,U.s9)(),i=(0,Gt.A)(),{avatarUrl:r}=Xt();(0,s.sV)((()=>{const e=t.currentRoute.value.name;e===p.SETTINGS_BUDGETS?_t().setWorkspaceActiveArea():e===p.HOME&&_t().setSidebarActiveArea()})),(0,s.wB)((()=>a),(e=>{e.name===p.SETTINGS_BUDGETS?_t().setWorkspaceActiveArea():e.name===p.HOME&&_t().setSidebarActiveArea()}),{immediate:!0,deep:!0});const u=(0,s.EW)((()=>n.isBudgetsLoaded));u.value||n.fetchBudgets();const d=(0,s.EW)((()=>qt().connections)),m=(0,s.EW)((()=>B().orderBy(n.budgets,"name"))),b=(0,s.EW)((()=>o.userId)),f=(0,s.EW)((()=>o.userDefaultBudgetId)),h=(0,s.EW)((()=>o.userCurrencyId));function _(e=!1){e?_t().setSidebarActiveArea():_t().setWorkspaceActiveArea(),t.push({name:p.SETTINGS})}const y=(0,l.Kh)({isOpened:!1,header:"",description:""});function A(e,t){y.header=e,y.description=t,y.isOpened=!0}function k(){y.isOpened=!1,y.header="",y.description=""}const M=(0,l.Kh)({isOpened:!1,budget:null});function C(e){M.budget=B().cloneDeep(B().find(m.value,{id:e})),M.isOpened=!0}function E(){M.budget=null,M.isOpened=!1}function I(e,t){E(),"access"===e?G(t):"go_to"===e?oe(t):"set_as_default"===e?W(t):"delete"===e?L(t):"accept"===e&&ne(t)}const w=(0,l.Kh)({isOpened:!1,budget:null});function L(e){w.budget=B().cloneDeep(B().find(m.value,{id:e})),w.isOpened=!0}function T(){w.isOpened=!1,w.budget=null}function N(e){n.deleteBudget(e).then((e=>{e.success||A(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{A(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))})).finally((()=>{T()}))}const D=(0,l.Kh)({isOpened:!1,budget:null});function O(e){D.budget=B().cloneDeep(B().find(m.value,{id:e})),D.isOpened=!0}function F(){D.isOpened=!1,D.budget=null}function R(e){F(),Dt().declineAccess({budgetId:e})}function S(e){if(e.ownerUserId===b.value)return!0;let t=!1;return e.access.forEach((e=>{var a;(null===(a=e.user)||void 0===a?void 0:a.id)===b.value&&e.isAccepted&&(t=!0)})),t}function x(e){if(e.ownerUserId===b.value)return!0;let t=!1;return e.access.forEach((e=>{var a;(null===(a=e.user)||void 0===a?void 0:a.id)===b.value&&(t=e.isAccepted===Nt.ACCEPTED)})),t}function Q(e){if(e.ownerUserId===b.value)return Tt.OWNER;let t=null;return e.access.forEach((e=>{var a;(null===(a=e.user)||void 0===a?void 0:a.id)===b.value&&(t=e.role)})),t}function $(e){if(e.ownerUserId===b.value)return!0;let t=!1;return e.access.forEach((e=>{var a;(null===(a=e.user)||void 0===a?void 0:a.id)===b.value&&"admin"===e.role&&e.isAccepted&&(t=!0)})),t}function j(e){return e.ownerUserId===b.value}function W(e){Yt().userUpdateDefaultBudget(e)}const q=(0,l.Kh)({isOpened:!1,budgetId:null,budgetName:"",accountsExcluded:[],currencyId:h.value});function z(){q.budgetId=n.generateId(),q.currencyId=h.value,q.isOpened=!0}function P(){q.isOpened=!1}function Y(){q.budgetId=null,q.budgetName="",q.accountsExcluded=[],q.currencyId=h.value}function V(e){n.createBudget(e).then((e=>{e.success?Y():A(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{A(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))})).finally((()=>{P()}))}const X=(0,l.Kh)({isOpened:!1,budget:null}),H=(0,l.Kh)({isOpened:!1,user:null,budgetId:null,role:null});function G(e){X.budget=B().cloneDeep(B().find(m.value,{id:e})),X.isOpened=!0}function K(){X.isOpened=!1,X.budget=null,H.isOpened=!1,H.user=null,H.budgetId=null,H.role=null}function Z(e,t,a){if(a===Tt.OWNER)return;const n=B().cloneDeep(B().find(m.value,{id:e}));if(!n)return;const o=B().find(n.access,{user:{id:t}});H.budgetId=n.id;let l=B().find(d.value,{user:{id:t}});H.user=l?l.user:(null===o||void 0===o?void 0:o.user)||null,H.role=(null===o||void 0===o?void 0:o.role)||null,H.isOpened=!0}function J(){H.isOpened=!1,H.user=null,H.budgetId=null,H.role=null}function ee(e,t,a){K(),n.grantAccess({budgetId:e,userId:t,role:a}).then((e=>{e.success||A(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{A(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))}))}function te(e,t){K(),n.revokeAccess({budgetId:e,userId:t}).then((e=>{e.success||A(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{A(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))}))}function ne(e){n.acceptAccess({budgetId:e}).then((e=>{e.success||A(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{A(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))}))}function oe(e){const a=B().find(m.value,{id:e});a?S(a)&&x(a)?Yt().userUpdateDefaultBudget(e).then((()=>{_t().setWorkspaceActiveArea(),t.push({name:p.BUDGET}),Dt().fetchUserBudget()})):A(c("modules.budget.modal.access_error.header"),c("modules.budget.modal.access_error.description")):A(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))}return(e,t)=>{const a=(0,s.g2)("q-btn"),n=(0,s.g2)("q-item-section"),o=(0,s.g2)("q-avatar"),c=(0,s.g2)("q-item"),u=(0,s.g2)("q-list"),p=(0,s.g2)("q-menu"),g=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(g,{class:"settings-classification"},{default:(0,s.k6)((()=>{var g,b,h,A,U,Y,B,le;return[(0,s.Lk)("div",gp,[(0,s.Lk)("div",vp,[(0,s.Lk)("div",null,[(0,s.bF)(a,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=e=>_(!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",bp,(0,v.v_)(e.$t("modules.budget.page.settings.header")),1)]),(0,s.Lk)("div",fp,[(0,s.bF)(a,{class:"settings-toolbar-mobile-button",flat:"",icon:"add_circle_outline",onClick:z})])]),(0,s.Lk)("div",hp,[(0,s.Lk)("div",_p,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[1]||(t[1]=e=>_(!0))},(0,v.v_)(e.$t("pages.settings.settings.header_desktop")),1)])]),(0,s.Lk)("h4",yp,(0,v.v_)(e.$t("modules.budget.page.settings.menu_item")),1),(0,s.Lk)("div",Ap,[(0,s.bF)(a,{class:"settings-classification-create-class-btn econumo-btn -small -magenta",flat:"",label:e.$t("modules.budget.page.settings.create_budget"),onClick:z},null,8,["label"])]),(0,s.Lk)("div",kp,[m.value.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Mp,(0,v.v_)(e.$t("blocks.list.list_empty")),1)),m.value.length>0?((0,s.uX)(),(0,s.CE)("div",Cp,[(0,s.bF)(u,{class:"settings-classification-list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(m.value,(t=>((0,s.uX)(),(0,s.Wv)(c,{key:t.id,class:"settings-classification-list-item",clickable:(0,l.R1)(i).screen.lt.lg,onClick:e=>C(t.id)},{default:(0,s.k6)((()=>[(0,s.bF)(n,{side:"",class:"settings-classification-list-item-avatar",avatar:""},{default:(0,s.k6)((()=>[f.value===t.id?((0,s.uX)(),(0,s.Wv)(a,{key:0,square:"",flat:"",disable:"",icon:"turned_in"})):x(t)?((0,s.uX)(),(0,s.Wv)(a,{key:1,square:"",flat:"",icon:"turned_in_not",onClick:e=>W(t.id)},null,8,["onClick"])):((0,s.uX)(),(0,s.Wv)(a,{key:2,square:"",flat:"",disable:"",icon:"turned_in_not"}))])),_:2},1024),(0,s.bF)(n,{class:(0,v.C4)("settings-classification-list-item-text "+(S(t)?"":"-archived"))},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(t.name)+" ",1),x(t)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ep,(0,v.v_)(e.$t("modules.budget.page.settings.level."+Q(t)))+" - "+(0,v.v_)(e.$t("modules.budget.page.settings.not_accepted")),1))])),_:2},1032,["class"]),t.access.length>1&&(0,l.R1)(ae).includesSharedAccess?((0,s.uX)(),(0,s.Wv)(n,{key:0,class:"settings-classification-list-item-shared",side:""},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.access,(e=>((0,s.uX)(),(0,s.Wv)(o,{class:"settings-classification-list-item-shared-avatar",key:e.user.id},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:(0,l.R1)(r)(e.user.avatar,30),alt:e.user.name,title:e.user.name,width:"30",height:"30"},null,8,Ip)])),_:2},1024)))),128))])),_:2},1024)):(0,s.Q3)("",!0),(0,l.R1)(i).screen.gt.md?((0,s.uX)(),(0,s.Wv)(n,{key:1,side:"",class:"cursor-pointer settings-classification-list-item-check-section"},{default:(0,s.k6)((()=>[(0,s.bF)(a,{square:"",flat:"",icon:"more_vert",class:"account-transactions-item-check-button"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{cover:"","auto-close":"",class:"account-transactions-item-check-button-menu"},{default:(0,s.k6)((()=>[(0,s.bF)(u,{class:"account-transactions-item-check-button-list"},{default:(0,s.k6)((()=>[!x(t)&&(0,l.R1)(ae).includesSharedAccess?((0,s.uX)(),(0,s.Wv)(c,{key:0,clickable:"",onClick:e=>ne(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.accept.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),x(t)?((0,s.uX)(),(0,s.Wv)(c,{key:1,clickable:"",onClick:e=>oe(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.budget.page.settings.list_actions.go_to")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),$(t)&&(0,l.R1)(ae).includesSharedAccess?((0,s.uX)(),(0,s.Wv)(c,{key:2,clickable:"",onClick:e=>G(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.budget.page.settings.list_actions.access")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),!j(t)&&(0,l.R1)(ae).includesSharedAccess?((0,s.uX)(),(0,s.Wv)(c,{key:3,clickable:"",onClick:e=>O(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.decline.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0),$(t)?((0,s.uX)(),(0,s.Wv)(c,{key:4,clickable:"",onClick:e=>L(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1032,["clickable","onClick"])))),128))])),_:1})])):(0,s.Q3)("",!0)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[M.isOpened?((0,s.uX)(),(0,s.Wv)(bd,{key:0,"header-label":null===(g=M.budget)||void 0===g?void 0:g.name,actions:[{label:e.$t("elements.button.accept.label"),value:"accept",context:null===(b=M.budget)||void 0===b?void 0:b.id,isHidden:x(M.budget)},{label:e.$t("modules.budget.page.settings.list_actions.go_to"),value:"go_to",context:null===(h=M.budget)||void 0===h?void 0:h.id,isHidden:!S(M.budget)||!x(M.budget)},{label:e.$t("elements.button.set_as_default.label"),value:"set_as_default",context:null===(A=M.budget)||void 0===A?void 0:A.id,isHidden:!S(M.budget)||f.value===M.budget.id},{label:e.$t("pages.settings.accounts.list_actions.access"),value:"access",context:null===(U=M.budget)||void 0===U?void 0:U.id,isHidden:!$(M.budget)},{label:e.$t("elements.button.delete.label"),value:"delete",context:null===(Y=M.budget)||void 0===Y?void 0:Y.id}],onCancel:E,onProceed:I},null,8,["header-label","actions"])):(0,s.Q3)("",!0),w.isOpened?((0,s.uX)(),(0,s.Wv)(Al,{key:1,"question-title":e.$t("modules.budget.page.settings.delete_modal.title"),"question-label":e.$t("modules.budget.page.settings.delete_modal.question",{name:null===(B=w.budget)||void 0===B?void 0:B.name}),"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:T,onProceed:t[2]||(t[2]=e=>N(w.budget.id))},null,8,["question-title","question-label","action-label","cancel-label"])):(0,s.Q3)("",!0),D.isOpened?((0,s.uX)(),(0,s.Wv)(Al,{key:2,"question-title":e.$t("modules.budget.page.settings.decline_access_modal.title"),"question-label":e.$t("modules.budget.page.settings.decline_access_modal.question",{name:null===(le=D.budget)||void 0===le?void 0:le.name}),"action-label":e.$t("elements.button.decline.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:F,onProceed:t[3]||(t[3]=e=>R(D.budget.id))},null,8,["question-title","question-label","action-label","cancel-label"])):(0,s.Q3)("",!0),q.isOpened?((0,s.uX)(),(0,s.Wv)(Um,{key:3,id:q.budgetId,name:q.budgetName,excluded:q.accountsExcluded,"currency-id":q.currencyId,onUpdateName:t[4]||(t[4]=e=>q.budgetName=e),onUpdateExcluded:t[5]||(t[5]=e=>q.accountsExcluded=e),onUpdateCurrency:t[6]||(t[6]=e=>q.currencyId=e),onSubmit:V,onClose:P},null,8,["id","name","excluded","currency-id"])):(0,s.Q3)("",!0),X.isOpened?((0,s.uX)(),(0,s.Wv)(sp,{key:4,"budget-id":X.budget.id,"budget-name":X.budget.name,access:X.budget.access,connections:d.value,onCancel:K,onUserSelected:Z},null,8,["budget-id","budget-name","access","connections"])):(0,s.Q3)("",!0),H.isOpened?((0,s.uX)(),(0,s.Wv)(Pm,{key:5,user:H.user,"budget-id":H.budgetId,role:H.role,onCancel:J,onShare:ee,onRevoke:te},null,8,["user","budget-id","role"])):(0,s.Q3)("",!0),y.isOpened?((0,s.uX)(),(0,s.Wv)(pp,{key:6,header:y.header,description:y.description,onClose:k},null,8,["header","description"])):(0,s.Q3)("",!0)]))])]})),_:1})}}})),Lp=wp,Tp=Lp;z()(wp,"components",{QPage:cs.A,QBtn:W.A,QList:xn.A,QItem:Qa.A,QItemSection:$a.A,QAvatar:ba.A,QMenu:rs.A});const Np={class:"settings-classification-wrapper"},Dp={class:"settings-toolbar-mobile settings-classification-toolbar-mobile"},Op={class:"settings-toolbar-mobile-title"},Fp={class:"settings-toolbar-mobile-container"},Rp={class:"settings-toolbar-desktop"},Sp={class:"settings-breadcrumbs"},xp={class:"settings-label-header settings-classification-header"},Up={class:"settings-classification-create-class"},Qp={key:0,class:"settings-classification-sort"},$p={class:"settings-classification-container"},jp={key:0,class:"settings-classification-empty"},Wp={key:1},qp={key:0,class:"settings-classification-list-item-description-archived"};function zp(e,t,a,n,o,l){const c=(0,s.g2)("q-btn"),i=(0,s.g2)("q-icon"),r=(0,s.g2)("q-item-section"),u=(0,s.g2)("q-toggle"),d=(0,s.g2)("q-item"),m=(0,s.g2)("q-list"),p=(0,s.g2)("q-menu"),g=(0,s.g2)("draggable"),b=(0,s.g2)("context-menu-modal"),f=(0,s.g2)("sort-dialog-modal"),h=(0,s.g2)("prompt-dialog-modal"),_=(0,s.g2)("confirmation-dialog-modal"),y=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(y,{class:"settings-classification"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Np,[(0,s.Lk)("div",Dp,[(0,s.Lk)("div",null,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=t=>e.navigateTo("settings",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",Op,(0,v.v_)(e.$t("modules.classifications.tags.pages.settings.header")),1)]),(0,s.Lk)("div",Fp,[(0,s.bF)(c,{class:"settings-toolbar-mobile-button",flat:"",icon:"add_circle_outline",onClick:t[1]||(t[1]=t=>e.openCreateTagModal())})])]),(0,s.Lk)("div",Rp,[(0,s.Lk)("div",Sp,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[2]||(t[2]=t=>e.navigateTo("settings",!0))},(0,v.v_)(e.$t("pages.settings.settings.header_desktop")),1)])]),(0,s.Lk)("h4",xp,(0,v.v_)(e.$t("modules.classifications.tags.pages.settings.header")),1),(0,s.Lk)("div",Up,[(0,s.bF)(c,{class:"settings-classification-create-class-btn econumo-btn -small -magenta",flat:"",label:e.$t("modules.classifications.tags.pages.settings.create_tag"),onClick:t[3]||(t[3]=t=>e.openCreateTagModal())},null,8,["label"])]),e.tags.length>1?((0,s.uX)(),(0,s.CE)("div",Qp,[(0,s.bF)(c,{class:"settings-classification-sort-btn",icon:"sort",label:e.$t("blocks.list.order_list"),"no-caps":!0,flat:!0,ripple:!1,onClick:e.openSortModal},null,8,["label","onClick"])])):(0,s.Q3)("",!0),(0,s.Lk)("div",$p,[e.tags.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",jp,(0,v.v_)(e.$t("blocks.list.list_empty")),1)),e.tags.length>0?((0,s.uX)(),(0,s.CE)("div",Wp,[(0,s.bF)(m,{class:"settings-classification-list"},{default:(0,s.k6)((()=>[(0,s.bF)(g,(0,s.v6)({modelValue:e.tags,"onUpdate:modelValue":t[4]||(t[4]=t=>e.tags=t),onStart:t[5]||(t[5]=t=>e.drag=!0),onEnd:t[6]||(t[6]=t=>e.drag=!1)},e.options,{"item-key":"id"}),{item:(0,s.k6)((({element:t})=>[(0,s.bF)(d,{class:"settings-classification-list-item",clickable:e.$q.screen.lt.lg,onClick:a=>e.openContextMenuModal(t.id)},{default:(0,s.k6)((()=>[(0,s.bF)(r,{side:"",class:"settings-classification-list-item-sortable sortable-control cursor-pointer"},{default:(0,s.k6)((()=>[(0,s.bF)(i,{name:"drag_indicator"})])),_:1}),(0,s.bF)(r,{class:(0,v.C4)(t.isArchived?"settings-classification-list-item-text -archived":"settings-classification-list-item-text")},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(t.name)+" ",1),t.isArchived?((0,s.uX)(),(0,s.CE)("div",qp,(0,v.v_)(e.$t("modules.classifications.tags.pages.settings.archived_item")),1)):(0,s.Q3)("",!0)])),_:2},1032,["class"]),(0,s.bF)(r,{side:""},{default:(0,s.k6)((()=>[(0,s.bF)(u,{"model-value":!t.isArchived,onClick:a=>e.updateArchiveTag(t.id,!!t.isArchived)},null,8,["model-value","onClick"])])),_:2},1024),e.$q.screen.gt.md?((0,s.uX)(),(0,s.Wv)(r,{key:0,side:"",class:"cursor-pointer settings-classification-list-item-check-section"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{square:"",flat:"",icon:"more_vert",class:"account-transactions-item-check-button"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{cover:"","auto-close":"",class:"account-transactions-item-check-button-menu"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{class:"account-transactions-item-check-button-list"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{clickable:"",onClick:a=>e.openEditTagModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:2},1032,["onClick"]),(0,s.bF)(d,{clickable:"",onClick:a=>e.openDeleteTagModal(t.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,s.Q3)("",!0)])),_:2},1032,["clickable","onClick"])])),_:1},16,["modelValue"])])),_:1})])):(0,s.Q3)("",!0)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[e.contextMenuModal.isOpened?((0,s.uX)(),(0,s.Wv)(b,{key:0,"header-label":e.contextMenuModal.tag.name,actions:[{label:e.$t("elements.button.edit.label"),value:"edit",context:e.contextMenuModal.tag.id},{label:e.$t("elements.button.delete.label"),value:"delete",context:e.contextMenuModal.tag.id}],onCancel:t[7]||(t[7]=t=>e.closeContextMenuModal()),onProceed:e.openNextModal},null,8,["header-label","actions","onProceed"])):(0,s.Q3)("",!0),(0,s.bF)(f,{modelValue:e.sortModal.isOpened,"onUpdate:modelValue":t[8]||(t[8]=t=>e.sortModal.isOpened=t),onCancel:e.closeSortModal,onProceed:e.updateOrder},null,8,["modelValue","onCancel","onProceed"]),e.editTagModal.isOpened?((0,s.uX)(),(0,s.Wv)(h,{key:1,"header-label":e.$t("modules.classifications.tags.modals.edit.header"),"input-value":e.editTagModal.tagName,"input-label":e.$t("modules.classifications.tags.forms.tag.name.label"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.update.label"),validation:[t=>e.isNotEmpty(t)||e.$t("modules.classifications.tags.forms.tag.name.validation.required_field"),t=>e.isValidTagName(t)||e.$t("modules.classifications.tags.forms.tag.name.validation.invalid_name")],onClose:e.closeEditTagModal,onSubmit:e.updateTag},null,8,["header-label","input-value","input-label","cancel-label","submit-label","validation","onClose","onSubmit"])):(0,s.Q3)("",!0),e.deleteModal.isOpened?((0,s.uX)(),(0,s.Wv)(_,{key:2,"question-title":e.$t("modules.classifications.tags.modals.delete.title"),"question-label":e.deleteModal.tag?.name,"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:e.closeDeleteTagModal,onProceed:t[9]||(t[9]=t=>e.deleteTag(e.deleteModal.tag.id))},null,8,["question-title","question-label","action-label","cancel-label","onCancel"])):(0,s.Q3)("",!0),e.createTagModal.isOpened?((0,s.uX)(),(0,s.Wv)(h,{key:3,"header-label":e.$t("modules.classifications.tags.modals.create.header"),"input-value":"","input-label":e.$t("modules.classifications.tags.forms.tag.name.label"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.create.label"),validation:[t=>e.isNotEmpty(t)||e.$t("modules.classifications.tags.forms.tag.name.validation.required_field"),t=>e.isValidTagName(t)||e.$t("modules.classifications.tags.forms.tag.name.validation.invalid_name")],onClose:e.closeCreateTagModal,onSubmit:e.createTag},null,8,["header-label","input-label","cancel-label","submit-label","validation","onClose","onSubmit"])):(0,s.Q3)("",!0)]))])])),_:1})}const Pp=(0,s.pM)({name:"SettingsTagsPage",mixins:[pl],components:{SortDialogModal:Cd,ConfirmationDialogModal:Al,PromptDialogModal:cu,draggable:tu(),ContextMenuModal:bd},setup(){const e=He();return{...e}},data(){return{tagsCopy:null,contextMenuModal:{isOpened:!1,tag:null},editTagModal:{isOpened:!1,tagId:null,tagName:null},createTagModal:{isOpened:!1},sortModal:{isOpened:!1},deleteModal:{isOpened:!1,tag:null}}},created(){"settingsTags"===this.$router.currentRoute.value.name&&_t().setWorkspaceActiveArea()},computed:{...(0,d.aH)(Yt,["userId"]),...(0,d.aH)(St,["ownTags"]),tags:{get(){return this.tagsCopy||this.ownTags},set(e){this.tagsCopy=e;let t=[];e.forEach((e=>{t.push(e.id)})),St().orderTagList(t).finally((()=>{this.tagsCopy=null}))}},options(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost",handle:".sortable-control"}}},methods:{openContextMenuModal:function(e){this.contextMenuModal.tag=B().find(this.ownTags,{id:e}),this.contextMenuModal.isOpened=!0},closeContextMenuModal:function(){this.contextMenuModal.tag=null,this.contextMenuModal.isOpened=!1},openNextModal:function(e,t){this.closeContextMenuModal(),"edit"===e?this.openEditTagModal(t):"delete"===e&&this.openDeleteTagModal(t)},openSortModal:function(){this.sortModal.isOpened=!0},closeSortModal:function(){this.sortModal.isOpened=!1},updateOrder:function(e,t){St().changeTagsSortMode({type:e,direction:t}).finally((()=>{this.tagsCopy=null,this.closeSortModal()}))},openEditTagModal:function(e){const t=B().find(this.ownTags,{id:e});this.editTagModal.tagId=t.id,this.editTagModal.tagName=t.name,this.editTagModal.isOpened=!0},closeEditTagModal:function(){this.editTagModal.isOpened=!1,this.editTagModal.tagId=null,this.editTagModal.tagName=null},updateTag:function(e,t){const a=B().find(this.tags,{name:t});St().updateTag({id:a.id,name:e}).finally((()=>{this.closeEditTagModal(),this.tagsCopy=null}))},openDeleteTagModal:function(e){this.deleteModal.tag=B().cloneDeep(B().find(this.tags,{id:e})),this.deleteModal.isOpened=!0},closeDeleteTagModal:function(){this.deleteModal.isOpened=!1,this.deleteModal.tag=null},deleteTag:function(e){St().deleteTag(e).finally((()=>{this.closeDeleteTagModal(),this.tagsCopy=null}))},openCreateTagModal:function(){this.createTagModal.isOpened=!0},closeCreateTagModal:function(){this.createTagModal.isOpened=!1},createTag:function(e){St().createTag({name:e}).finally((()=>{this.closeCreateTagModal(),this.tagsCopy=null}))},updateArchiveTag:function(e,t=!1){t?St().unarchiveTag(e).finally((()=>{this.tagsCopy=null})):St().archiveTag(e).finally((()=>{this.tagsCopy=null}))}}}),Yp=(0,$.A)(Pp,[["render",zp]]),Vp=Yp;z()(Pp,"components",{QPage:cs.A,QBtn:W.A,QList:xn.A,QItem:Qa.A,QItemSection:$a.A,QIcon:aa.A,QToggle:ei.A,QMenu:rs.A});const Bp={class:"econumo-modal"},Xp={class:"settings-connections-generate-modal-label"},Hp={class:"settings-connections-generate-modal-instruction"},Gp={class:"settings-connections-generate-modal-code"},Kp={class:"settings-connections-generate-modal-action"},Zp=(0,s.pM)(Object.assign({name:"GenerateInviteModal"},{__name:"GenerateInviteModal",props:{isOpened:{type:Boolean},code:{}},emits:["update:isOpened","hide"],setup(e,{emit:t}){const a=t,n=()=>{a("hide"),a("update:isOpened",!1)};return(e,t)=>{const a=(0,s.g2)("q-btn"),o=(0,s.g2)("q-dialog"),l=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(o,{class:"settings-connections-generate-modal","model-value":e.isOpened,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:isOpened",t)),onHide:n},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Bp,[(0,s.Lk)("div",null,[(0,s.Lk)("div",Xp,(0,v.v_)(e.$t("modules.connections.modals.generate_invite.code.label",{code:e.code})),1),(0,s.Lk)("div",Hp,(0,v.v_)(e.$t("modules.connections.modals.generate_invite.instruction")),1),(0,s.Lk)("div",Gp,(0,v.v_)(e.code),1)]),(0,s.Lk)("div",Kp,[(0,s.bo)((0,s.bF)(a,{class:"econumo-btn -small -transperent-magenta settings-connections-generate-modal-action-btn",flat:"",label:e.$t("elements.button.ok.label")},null,8,["label"]),[[l]])])])])),_:1},8,["model-value"])}}})),Jp=Zp,eg=Jp;z()(Zp,"components",{QDialog:j.A,QBtn:W.A}),z()(Zp,"directives",{ClosePopup:ha.A});var tg=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};const ag={class:"econumo-modal"},ng={class:"settings-connections-accept-modal-label"},og={class:"settings-connections-accept-modal-instruction"},lg={class:"settings-connections-accept-modal-control"},sg={class:"settings-connections-accept-modal-actions"},cg=(0,s.pM)(Object.assign({name:"AcceptInviteModal"},{__name:"AcceptInviteModal",props:{isOpened:{type:Boolean}},emits:["update:isOpened","hide","accept"],setup(e,{emit:t}){const a=t,o=(0,l.KR)(""),c=(0,l.KR)(null),{isNotEmpty:i}=He(),r=()=>{o.value="",a("hide"),a("update:isOpened",!1)},u=()=>tg(this,void 0,void 0,(function*(){var e;const t=yield null===(e=c.value)||void 0===e?void 0:e.validate();t&&(a("accept",o.value),r())}));return(e,t)=>{const a=(0,s.g2)("q-input"),d=(0,s.g2)("q-btn"),m=(0,s.g2)("q-dialog"),p=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(m,{class:"settings-connections-accept-modal","model-value":e.isOpened,"onUpdate:modelValue":t[1]||(t[1]=t=>e.$emit("update:isOpened",t)),onHide:r,persistent:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ag,[(0,s.bF)((0,l.R1)(ua.A),{ref_key:"inviteForm",ref:c,onSubmit:(0,n.D$)(u,["prevent"])},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ng,(0,v.v_)(e.$t("modules.connections.modals.accept_invite.label")),1),(0,s.Lk)("div",og,(0,v.v_)(e.$t("modules.connections.modals.accept_invite.instruction")),1),(0,s.Lk)("div",lg,[(0,s.bF)(a,{class:"form-input -narrow full-width",outlined:"",modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),"lazy-rules":"",label:e.$t("modules.connections.modals.accept_invite.code.label"),rules:[t=>(0,l.R1)(i)(t)||e.$t("modules.connections.forms.invitation_code.validation.required_field")]},null,8,["modelValue","label","rules"])]),(0,s.Lk)("div",sg,[(0,s.bo)((0,s.bF)(d,{class:"econumo-btn -medium -grey settings-connections-accept-modal-actions-btn",flat:"",label:e.$t("elements.button.cancel.label")},null,8,["label"]),[[p]]),(0,s.bF)(d,{class:"econumo-btn -medium -magenta settings-connections-accept-modal-actions-btn",flat:"",label:e.$t("elements.button.accept.label"),type:"submit"},null,8,["label"])])])),_:1},512)])])),_:1},8,["model-value"])}}})),ig=cg,rg=ig;z()(cg,"components",{QDialog:j.A,QForm:ua.A,QInput:Ht.A,QBtn:W.A}),z()(cg,"directives",{ClosePopup:ha.A});const ug={class:"settings-connections-modal-card-container"},dg={class:"settings-connections-modal-card-label"},mg={class:"settings-connections-modal-card-user"},pg=["src"],gg={class:"settings-connections-modal-card-user-name"},vg={key:0,class:"settings-connections-modal-card-item"},bg={class:"settings-connections-modal-card-item-label"},fg={key:1,class:"settings-connections-modal-card-item"},hg={class:"settings-connections-modal-card-item-label"},_g={class:"settings-connections-modal-card-item-item-role"},yg=["src","title"],Ag={class:"settings-connections-modal-card-container"},kg={class:"settings-connections-modal-card-label"},Mg={key:0,class:"settings-connections-modal-card-item settings-connections-modal-card-item-last"},Cg={class:"settings-connections-modal-card-item-label"},Eg={key:1,class:"settings-connections-modal-card-item settings-connections-modal-card-item-last"},Ig={class:"settings-connections-modal-card-item-label"},wg={class:"settings-connections-modal-card-item-item-role"},Lg=["src","title"],Tg=(0,s.pM)(Object.assign({name:"PreviewConnectionModal"},{__name:"PreviewConnectionModal",props:{isOpened:{type:Boolean},connection:{},allowChanges:{type:Boolean}},emits:["update:isOpened","hide","delete"],setup(e,{emit:t}){const a=e,n=t,o=(0,Gt.A)(),{avatarUrl:c}=Xt(),i=()=>{n("hide"),n("update:isOpened",!1)},r=()=>{n("delete",a.connection.user.id)};return(e,t)=>{const a=(0,s.g2)("q-avatar"),n=(0,s.g2)("q-item-section"),u=(0,s.g2)("q-item"),d=(0,s.g2)("q-list"),m=(0,s.g2)("q-icon"),p=(0,s.g2)("q-card-section"),g=(0,s.g2)("q-btn"),b=(0,s.g2)("q-card-actions"),f=(0,s.g2)("q-card"),h=(0,s.g2)("q-dialog"),_=(0,s.gN)("ripple"),y=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(h,{class:"settings-connections-modal","model-value":e.isOpened,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:isOpened",t)),onHide:i,position:(0,l.R1)(o).screen.gt.md?"standard":"bottom"},{default:(0,s.k6)((()=>[e.connection?((0,s.uX)(),(0,s.Wv)(f,{key:0,class:"settings-connections-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"settings-connections-modal-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ug,[(0,s.Lk)("div",dg,(0,v.v_)(e.$t("modules.connections.modals.preview_connection.budgets")),1),(0,s.Lk)("div",mg,[(0,s.bF)(a,{class:"settings-connections-modal-card-user-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{class:"settings-connections-modal-card-user-avatar-img",src:e.connection.user.avatar},null,8,pg)])),_:1}),(0,s.Lk)("div",gg,(0,v.v_)(e.connection.user.name),1)])]),0===e.connection.sharedBudgets.length?((0,s.uX)(),(0,s.CE)("div",vg,[(0,s.Lk)("div",bg,(0,v.v_)(e.$t("modules.connections.modals.preview_connection.budgets_empty")),1),(0,s.bF)(d,{class:"settings-connections-modal-card-item-list"},{default:(0,s.k6)((()=>[(0,s.bo)(((0,s.uX)(),(0,s.Wv)(u,{class:"settings-connections-modal-card-item-item"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"settings-connections-modal-card-item-item-name-block"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.connections.modals.preview_connection.budgets_empty")),1)])),_:1})])),_:1})),[[_]])])),_:1})])):((0,s.uX)(),(0,s.CE)("div",fg,[(0,s.Lk)("div",hg,(0,v.v_)(e.$t("modules.connections.modals.preview_connection.budgets")),1),(0,s.bF)(d,{class:"settings-connections-modal-card-item-list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.connection.sharedBudgets,(t=>(0,s.bo)(((0,s.uX)(),(0,s.Wv)(u,{key:t.id,clickable:"",class:"settings-connections-modal-card-item-item"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"settings-connections-modal-card-item-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(m,{name:"menu_book"})])),_:1}),(0,s.bF)(n,{class:"settings-connections-modal-card-item-item-name-block"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(t.name)+" ",1),(0,s.Lk)("span",_g,(0,v.v_)(e.$t("modules.connections.elements.roles."+t.role)),1)])),_:2},1024),(0,s.bF)(n,{side:"",class:"settings-connections-modal-card-item-item-shared"},{default:(0,s.k6)((()=>[(0,s.bF)(a,{class:"settings-connections-modal-card-item-item-shared-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{class:"settings-connections-modal-card-user-avatar-img",src:t.user.avatar,title:t.user.name},null,8,yg)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[_]]))),128))])),_:1})]))])),_:1}),(0,s.bF)(p,{class:"settings-connections-modal-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Ag,[(0,s.Lk)("div",kg,(0,v.v_)(e.$t("modules.connections.modals.preview_connection.accounts")),1)]),0===e.connection.sharedAccounts.length?((0,s.uX)(),(0,s.CE)("div",Mg,[(0,s.Lk)("div",Cg,(0,v.v_)(e.$t("modules.connections.modals.preview_connection.accounts_empty")),1),(0,s.bF)(d,{class:"settings-connections-modal-card-item-list"},{default:(0,s.k6)((()=>[(0,s.bo)(((0,s.uX)(),(0,s.Wv)(u,{class:"settings-connections-modal-card-item-item"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"settings-connections-modal-card-item-item-name-block"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.connections.modals.preview_connection.accounts_empty")),1)])),_:1})])),_:1})),[[_]])])),_:1})])):((0,s.uX)(),(0,s.CE)("div",Eg,[(0,s.Lk)("div",Ig,(0,v.v_)(e.$t("modules.connections.modals.preview_connection.accounts")),1),(0,s.bF)(d,{class:"settings-connections-modal-card-item-list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.connection.sharedAccounts,(t=>(0,s.bo)(((0,s.uX)(),(0,s.Wv)(u,{key:t.id,clickable:"",class:"settings-connections-modal-card-item-item"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"settings-connections-modal-card-item-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.bF)(m,{name:t.icon},null,8,["name"])])),_:2},1024),(0,s.bF)(n,{class:"settings-connections-modal-card-item-item-name-block"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(t.name)+" ",1),(0,s.Lk)("span",wg,(0,v.v_)(e.$t("modules.connections.elements.roles."+t.role)),1)])),_:2},1024),(0,s.bF)(n,{side:"",class:"settings-connections-modal-card-item-item-shared"},{default:(0,s.k6)((()=>[(0,s.bF)(a,{class:"settings-connections-modal-card-item-item-shared-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:(0,l.R1)(c)(t.user.avatar,30),title:t.user.name,width:"30",height:"30"},null,8,Lg)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[_]]))),128))])),_:1})]))])),_:1}),(0,s.bF)(b,{class:"settings-connections-modal-action"},{default:(0,s.k6)((()=>[e.allowChanges?((0,s.uX)(),(0,s.Wv)(g,{key:0,class:"econumo-btn -large -grey settings-connections-modal-action-btn",flat:"",title:e.$t("elements.button.delete.label"),icon:"delete",onClick:r},null,8,["title"])):(0,s.Q3)("",!0),(0,s.bo)((0,s.bF)(g,{class:"econumo-btn -large -grey settings-connections-modal-action-btn -wide",title:e.$t("elements.button.cancel.label"),flat:"",icon:"expand_more",onClick:i},null,8,["title"]),[[y]])])),_:1})])),_:1})):(0,s.Q3)("",!0)])),_:1},8,["model-value","position"])}}})),Ng=Tg,Dg=Ng;function Og(){const e=(0,l.Kh)({isOpened:!1,data:null}),t=t=>{e.isOpened=!0,e.data=t},a=()=>{e.isOpened=!1,e.data=null};return Object.assign(Object.assign({},(0,l.QW)(e)),{open:t,close:a})}function Fg(){const e=(0,l.Kh)({isOpened:!1,data:null}),t=()=>{e.isOpened=!0},a=()=>{e.isOpened=!1,e.data=null};return Object.assign(Object.assign({},(0,l.QW)(e)),{open:t,close:a})}function Rg(){const e=(0,l.Kh)({isOpened:!1,data:null}),t=t=>{e.isOpened=!0,e.data=t},a=()=>{e.isOpened=!1,e.data=null};return Object.assign(Object.assign({},(0,l.QW)(e)),{open:t,close:a})}function Sg(){const e=(0,l.Kh)({isOpened:!1,data:null}),t=t=>{e.isOpened=!0,e.data=t},a=()=>{e.isOpened=!1,e.data=null};return Object.assign(Object.assign({},(0,l.QW)(e)),{open:t,close:a})}z()(Tg,"components",{QDialog:j.A,QCard:Kt.A,QCardSection:da.A,QAvatar:ba.A,QList:xn.A,QItem:Qa.A,QItemSection:$a.A,QIcon:aa.A,QCardActions:fa.A,QBtn:W.A}),z()(Tg,"directives",{Ripple:Ni.A,ClosePopup:ha.A});var xg=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,l){function s(e){try{i(n.next(e))}catch(e){l(e)}}function c(e){try{i(n["throw"](e))}catch(e){l(e)}}function i(e){e.done?a(e.value):o(e.value).then(s,c)}i((n=n.apply(e,t||[])).next())}))};const Ug={class:"settings-connections-wrapper"},Qg={class:"settings-toolbar-mobile"},$g={class:"settings-toolbar-mobile-title"},jg={class:"settings-toolbar-mobile-container"},Wg={class:"settings-toolbar-desktop"},qg={class:"settings-breadcrumbs"},zg={class:"settings-label-header settings-connections-header"},Pg={key:0,class:"settings-connections-controls"},Yg={key:1,class:"settings-connections-empty"},Vg={key:2},Bg={class:"settings-connections-list-item-section"},Xg=["src"],Hg={class:"settings-connections-list-item-content"},Gg={key:3,class:"settings-connections-generate"},Kg={key:4},Zg={class:"settings-connections-info"},Jg=["innerHTML"],ev=["href"],tv=(0,s.pM)(Object.assign({name:"SettingsConnectionsPage"},{__name:"Connections",setup(e){const t=(0,g.rd)(),a=(0,Gt.A)(),n=qt(),o=_t(),{isConnectionsLoaded:c,connections:i}=(0,d.bP)(n),r=Og(),u=Fg(),m=Rg(),b=Sg(),f=(0,l.KR)(null),h=()=>{f.value=window.setInterval((()=>{n.fetchConnections()}),5e3)},_=()=>{f.value&&(clearInterval(f.value),f.value=null)},y=(e,a=!1)=>{a?t.replace({name:e}):t.push({name:e})},A=()=>{u.open()},k=e=>{r.open(e)},M=e=>{const t=i.value.find((t=>t.user.id===e));if(t){const a={user:{id:t.user.id,name:t.user.name,avatar:t.user.avatar},sharedAccounts:n.getSharedAccounts(e),sharedBudgets:n.getSharedBudgets(e)};m.open(a)}},C=e=>{const t=i.value.find((t=>t.user.id===e));if(t){const a={user:{id:t.user.id,name:t.user.name,avatar:t.user.avatar},sharedAccounts:n.getSharedAccounts(e),sharedBudgets:n.getSharedBudgets(e)};console.log(a),b.open(a)}},E=()=>{r.close(),u.close(),m.close(),b.close()},I=()=>xg(this,void 0,void 0,(function*(){const e=yield n.generateConnectionInvite();k(e)})),w=()=>{E()},L=e=>{n.acceptConnectionInvite(e)},T=e=>{E(),e&&n.deleteConnection(e)};return(0,s.sV)((()=>{t.currentRoute.value.name===p.SETTINGS_CONNECTIONS&&o.setWorkspaceActiveArea(),c.value||n.fetchConnections(),h()})),(0,s.hi)((()=>{_()})),(e,t)=>{const n=(0,s.g2)("q-btn"),o=(0,s.g2)("q-item-section"),c=(0,s.g2)("q-item"),d=(0,s.g2)("q-list"),p=(0,s.g2)("q-menu"),g=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(g,{class:"settings-connections"},{default:(0,s.k6)((()=>{var g,f;return[(0,s.Lk)("div",Ug,[(0,s.Lk)("div",Qg,[(0,s.Lk)("div",null,[(0,s.bF)(n,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=e=>y("settings",!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",$g,(0,v.v_)(e.$t("modules.connections.pages.settings.header")),1)]),(0,s.Lk)("div",jg,[(0,l.R1)(ae).includesConnections?((0,s.uX)(),(0,s.Wv)(n,{key:0,class:"settings-toolbar-mobile-button",flat:"",icon:"add_circle_outline",onClick:t[1]||(t[1]=e=>A())})):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)("  ")],64))])]),(0,s.Lk)("div",Wg,[(0,s.Lk)("div",qg,[(0,s.Lk)("div",{class:"settings-breadcrumbs-item",onClick:t[2]||(t[2]=e=>y("settings",!0))},(0,v.v_)(e.$t("pages.settings.settings.header_desktop")),1)])]),(0,s.Lk)("h4",zg,(0,v.v_)(e.$t("modules.connections.pages.settings.header")),1),(0,l.R1)(ae).includesConnections?((0,s.uX)(),(0,s.CE)("div",Pg,[(0,s.bF)(n,{class:"econumo-btn -small -magenta settings-connections-controls-btn",flat:"",label:e.$t("modules.connections.pages.settings.generate_invite"),onClick:t[3]||(t[3]=e=>I())},null,8,["label"]),(0,s.bF)(n,{class:"econumo-btn -small -grey settings-connections-controls-btn",flat:"",label:e.$t("modules.connections.pages.settings.accept_invite"),onClick:t[4]||(t[4]=e=>A())},null,8,["label"])])):(0,s.Q3)("",!0),(0,l.R1)(i).length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Yg,(0,v.v_)(e.$t("blocks.list.list_empty")),1)),(0,l.R1)(i).length>0?((0,s.uX)(),(0,s.CE)("div",Vg,[(0,s.bF)(d,{class:"settings-connections-list"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,l.R1)(i),(t=>((0,s.uX)(),(0,s.Wv)(c,{class:"settings-connections-list-item",clickable:(0,l.R1)(a).screen.lt.lg,key:t.user.id,onClick:e=>M(t.user.id)},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Bg,[(0,s.bF)(o,{class:"settings-connections-list-item-avatar",avatar:""},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{class:"settings-connections-list-item-avatar-img",src:t.user.avatar},null,8,Xg)])),_:2},1024),(0,s.Lk)("div",Hg,[(0,s.bF)(o,{class:"settings-connections-list-item-name"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(t.user.name),1)])),_:2},1024)])]),(0,s.bF)(o,{class:"settings-connections-list-item-more",side:""},{default:(0,s.k6)((()=>[(0,s.bF)(n,{square:"",flat:"",icon:"more_vert",class:"account-transactions-item-check-button settings-connections-list-item-more-btn"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{cover:"","auto-close":"",class:"account-transactions-item-check-button-menu"},{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"account-transactions-item-check-button-list"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{clickable:"",onClick:e=>M(t.user.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"account-transactions-item-check-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.view.label")),1)])),_:1})])),_:2},1032,["onClick"]),(0,l.R1)(ae).includesConnections?((0,s.uX)(),(0,s.Wv)(c,{key:0,clickable:"",onClick:e=>C(t.user.id),class:"account-transactions-item-check-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"account-transactions-item-check-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["onClick"])):(0,s.Q3)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["clickable","onClick"])))),128))])),_:1})])):(0,s.Q3)("",!0),(0,l.R1)(ae).includesConnections?((0,s.uX)(),(0,s.CE)("div",Gg,[(0,s.bF)(n,{class:"econumo-btn -medium -magenta settings-connections-generate-btn",flat:"",label:e.$t("modules.connections.pages.settings.generate_invite"),onClick:t[5]||(t[5]=e=>I())},null,8,["label"])])):(0,s.Q3)("",!0),(0,l.R1)(ae).includesConnections?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Kg,[(0,s.Lk)("div",Zg,[(0,s.Lk)("div",{innerHTML:e.$t("modules.connections.pages.settings.info.header")},null,8,Jg),(0,s.Lk)("ol",null,[(0,s.Lk)("li",null,[(0,s.Lk)("b",null,(0,v.v_)(e.$t("modules.connections.pages.settings.info.list.all_users_connected")),1),(0,s.eW)(": "+(0,v.v_)(e.$t("modules.connections.pages.settings.info.list.all_users_connected_description")),1)]),(0,s.Lk)("li",null,[(0,s.Lk)("b",null,(0,v.v_)(e.$t("modules.connections.pages.settings.info.list.no_connections")),1),(0,s.eW)(": "+(0,v.v_)(e.$t("modules.connections.pages.settings.info.list.no_connections_description")),1)])]),(0,s.Lk)("a",{href:e.$t("modules.connections.pages.settings.info.link_url"),target:"_blank"},(0,v.v_)(e.$t("modules.connections.pages.settings.info.link")),9,ev),(0,s.eW)(". ")])])),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,l.R1)(b).isOpened.value?((0,s.uX)(),(0,s.Wv)(Al,{key:0,icon:!1,"question-label":e.$t("modules.connections.modals.delete_connection.question",{name:null===(g=(0,l.R1)(b).data.value)||void 0===g?void 0:g.user.name}),"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:E,onProceed:t[6]||(t[6]=e=>{var t;return T(null===(t=(0,l.R1)(b).data.value)||void 0===t?void 0:t.user.id)})},null,8,["question-label","action-label","cancel-label"])):(0,s.Q3)("",!0),(0,s.bF)(eg,{isOpened:(0,l.R1)(r).isOpened.value,"onUpdate:isOpened":t[7]||(t[7]=e=>(0,l.R1)(r).isOpened.value=e),code:(null===(f=(0,l.R1)(r).data.value)||void 0===f?void 0:f.code)||"",onHide:w},null,8,["isOpened","code"]),(0,s.bF)(rg,{isOpened:(0,l.R1)(u).isOpened.value,"onUpdate:isOpened":t[8]||(t[8]=e=>(0,l.R1)(u).isOpened.value=e),onHide:E,onAccept:L},null,8,["isOpened"]),(0,l.R1)(m).data.value?((0,s.uX)(),(0,s.Wv)(Dg,{key:1,isOpened:(0,l.R1)(m).isOpened.value,"onUpdate:isOpened":t[9]||(t[9]=e=>(0,l.R1)(m).isOpened.value=e),connection:(0,l.R1)(m).data.value,"allow-changes":(0,l.R1)(ae).includesConnections,onHide:E,onDelete:C},null,8,["isOpened","connection","allow-changes"])):(0,s.Q3)("",!0)]))])]})),_:1})}}})),av=tv,nv=av;z()(tv,"components",{QPage:cs.A,QBtn:W.A,QList:xn.A,QItem:Qa.A,QItemSection:$a.A,QMenu:rs.A});const ov={class:"row"},lv={class:"budget-empty"},sv=(0,s.pM)(Object.assign({name:"BudgetOnboarding"},{__name:"BudgetOnboarding",emits:["createBudget","createAccount"],setup(e,{emit:t}){const a=Vt(),n=$t(),o=(0,s.EW)((()=>a.accountsOrdered.length>0&&n.categoriesOrdered.length>0)),l=(0,s.EW)((()=>a.accountsOrdered.length>0)),c=t;return(e,t)=>{const a=(0,s.g2)("q-btn");return(0,s.uX)(),(0,s.CE)("div",ov,[(0,s.Lk)("div",lv,[o.value?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("div",null,(0,v.v_)(e.$t("modules.budget.page.budget.empty.no_budget")),1),(0,s.Lk)("div",null,(0,v.v_)(e.$t("modules.budget.page.budget.empty.description")),1),(0,s.bF)(a,{class:"econumo-btn -small -magenta budget-toolbar-control-btn",flat:"",label:e.$t("modules.budget.page.budget.empty.create_budget"),onClick:t[1]||(t[1]=e=>c("createBudget"))},null,8,["label"])],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("div",null,(0,v.v_)(e.$t("modules.budget.page.budget.empty.initial_setup")),1),l.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(a,{key:0,class:"econumo-btn -small -magenta budget-toolbar-control-btn",flat:"",label:e.$t("modules.budget.page.budget.empty.create_account"),onClick:t[0]||(t[0]=e=>c("createAccount"))},null,8,["label"]))],64))])])}}})),cv=sv,iv=cv;function rv(e,t=500,a=10){const n=(0,l.KR)(null),o=(0,l.KR)({x:0,y:0}),s=(0,l.KR)(null);function c(){n.value=window.setTimeout((()=>{s.value&&e(s.value)}),t)}function i(){n.value&&(clearTimeout(n.value),n.value=null),s.value=null}function r(e){s.value=e.target,o.value={x:e.touches[0].clientX,y:e.touches[0].clientY},c()}function u(e){if(!n.value)return;const t=Math.abs(e.touches[0].clientX-o.value.x),l=Math.abs(e.touches[0].clientY-o.value.y);(t>a||l>a)&&i()}function d(){i()}return{startTouch:r,handleTouchMove:u,handleTouchEnd:d}}z()(sv,"components",{QBtn:W.A});const uv=["data-folder-id"],dv={class:"row budget-table-row budget-table-row-folder"},mv={class:"budget-table-column-name"},pv={key:0,class:"budget-table-column-subheader"},gv={class:"budget-table-column-stat-title"},vv={key:0,class:"budget-table-column-stat-values"},bv=["title","innerHTML"],fv=["title","innerHTML"],hv=["title","innerHTML"],_v={key:1,class:"budget-table-column-folder-actions"},yv={class:"budget-table-row-folder-actions"},Av=["data-element-id"],kv=["onClick"],Mv={key:0,class:"budget-table-row-element-icon -draggable draggable sortable-control"},Cv={key:1,class:"budget-table-row-element-icon"},Ev=["src","title","alt"],Iv={key:2,class:"budget-table-row-item-name-wrapper"},wv={class:"budget-table-row-item-name-wrapper-name"},Lv=["innerHTML"],Tv={key:3,class:"budget-table-row-item-name-single"},Nv=["innerHTML"],Dv=["onSubmit"],Ov=["onClick"],Fv=["innerHTML"],Rv=["onClick"],Sv=["innerHTML"],xv=["id"],Uv=["onClick"],Qv={class:"budget-table-column-actions-menu"},$v={key:0,class:"budget-table-row-element-items"},jv=["onClick"],Wv={class:"budget-table-column-name budget-table-row-item-name"},qv={class:"budget-table-row-item-name-single"},zv={class:"budget-table-row-item-name-single"},Pv=["innerHTML"],Yv={key:1,class:"budget-table-row-element-items"},Vv=["onClick"],Bv=["draggable","onDragstart"],Xv={class:"budget-table-row-item-name-single"},Hv={class:"budget-table-row-item-name-single"},Gv={key:0,class:"budget-table-column-owner"},Kv={key:1,class:"budget-table-column-available"},Zv={key:2,class:"budget-table-column-actions"},Jv=["innerHTML"],eb={key:0,class:"row budget-table-row-folder-empty"},tb={class:"col"},ab={class:"row"},nb={class:"budget-table-row-folder-empty-text"},ob={key:0,class:"row budget-table-row-folder-empty-delete"},lb=(0,s.pM)(Object.assign({name:"BudgetTableFolder",mixins:[pl],components:{draggable:tu()}},{__name:"BudgetTableFolder",props:{editMode:{type:Boolean},canUpdateLimits:{type:Boolean},access:{},budgetCurrencyId:{},folderId:{},folderName:{},elements:{},stats:{},isFirst:{type:[Boolean,null]},isLast:{type:[Boolean,null]}},emits:["update-budget","show-transaction-list","delete-folder","order-elements","order-folders","open-update-folder-modal","open-create-envelope-modal","open-update-element-modal","open-delete-element-modal","open-change-currency-modal","open-set-limit-modal"],setup(e,{emit:t}){const{avatarUrl:a}=Xt(),{moneyFormat:o,moneyHTML:c}=rt(),{normalizeNumber:i}=it(),r=e,u=t,d=(0,Gt.A)(),m=(0,l.KR)();(0,s.sV)((()=>{if(m.value){const e=m.value.$el.querySelector("input");e&&(e.setAttribute("enterkeyhint","done"),e.setAttribute("type","search"))}}));const p=(0,s.EW)((()=>ct().currenciesHash[r.budgetCurrencyId])),g=(0,l.KR)(r.canUpdateLimits),b=(0,s.EW)((()=>r.editMode)),f=(0,l.KR)(null),h=(0,l.KR)(null),_=(0,s.EW)((()=>r.elements)),y=Dt(),A=ct(),k=(0,s.EW)((()=>A.currenciesHash));function M(e){return k.value[e]?k.value[e].symbol:"-"}const C=(0,s.EW)((()=>y.budgetUnfoldedElements)),E=(0,s.EW)((()=>{const e={length:0};let t=0;return r.access.forEach((a=>{a.isAccepted&&a.role!==Tt.READ_ONLY&&(e[a.user.id]=a,t++)})),e.length=t,e}));function I(e){C.value[e.id]?y.foldElement(e.id):y.unfoldElement(e.id)}function w(e){f.value=e.id;let t=o(e.budgeted,e.currencyId,!1,!1,!1);h.value={id:e.id,value:t}}function L(){f.value=null,h.value=null}function T(e){const t=e.toString(),a=(0,Ne.o2)(t);let n=a;(0,Ne.NF)(a)&&(n=(0,Ne.w9)(a).toString()),f.value&&(h.value={id:f.value,value:n})}function N(e){h.value&&Re(h.value.value.toString())&&(u("update-budget",h.value.id,i(h.value.value)),f.value=null,h.value=null,e())}function D(e,t){e&&u("delete-folder",e,t)}function O(e,t){let a=null,n=null,o=null,l=null;const s=e.currencyId;null!==t?(a=t,e.type===Lt.TAG&&t.type===Lt.CATEGORY?(n=e.id,o=t.id):e.type===Lt.ENVELOPE&&t.type===Lt.CATEGORY&&(o=t.id)):(a=e,e.type===Lt.TAG?n=e.id:e.type===Lt.CATEGORY?o=e.id:e.type===Lt.ENVELOPE&&(l=e.id)),a&&u("show-transaction-list",a,n,o,l,s)}function F(e){u("order-elements",e)}function R(e){r.folderId&&u("order-folders",r.folderId,e)}function S(){r.folderId&&u("open-update-folder-modal",r.folderId)}function x(){var e;u("open-create-envelope-modal",null!==(e=r.folderId)&&void 0!==e?e:null)}function U(e){u("open-update-element-modal",e)}function Q(e){u("open-delete-element-modal",e)}function $(e){u("open-change-currency-modal",e)}const j=(0,l.KR)(null);function W(e,t){e.dataTransfer&&(j.value=t.id,e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("elementId",t.id))}function q(e){j.value=null,e.dataTransfer&&e.dataTransfer.clearData("elementId")}function z(e){b.value||u("open-set-limit-modal",e)}const{startTouch:P,handleTouchMove:Y,handleTouchEnd:V}=rv((e=>{const t=e.closest("[data-element-id]");if(t){const e=t.getAttribute("data-element-id");if(e){const t=_.value.find((t=>t.id===e));t&&z(t)}}}));return(e,t)=>{const i=(0,s.g2)("q-btn"),r=(0,s.g2)("q-item-section"),u=(0,s.g2)("q-item"),y=(0,s.g2)("q-list"),A=(0,s.g2)("q-menu"),k=(0,s.g2)("q-avatar"),j=(0,s.g2)("q-input"),z=(0,s.g2)("q-popup-edit"),B=(0,s.g2)("q-icon");return(0,s.uX)(),(0,s.CE)("div",{"data-folder-id":e.folderId},[(0,s.Lk)("div",dv,[(0,s.Lk)("div",mv,(0,v.v_)(e.folderName),1),!b.value&&_.value.length?((0,s.uX)(),(0,s.CE)("div",pv,[(0,s.Lk)("div",gv,(0,v.v_)(e.$t("modules.budget.page.budget.structure.tab.budgeted"))+" / "+(0,v.v_)(e.$t("modules.budget.page.budget.structure.tab.spent"))+" / "+(0,v.v_)(e.$t("modules.budget.page.budget.structure.tab.available")),1),p.value?((0,s.uX)(),(0,s.CE)("div",vv,[(0,s.Lk)("span",{title:e.$t("modules.budget.page.budget.structure.tab.budgeted"),innerHTML:(0,l.R1)(c)(e.stats.budgeted,e.budgetCurrencyId,!0,!0)},null,8,bv),(0,s.eW)(" / "),(0,s.Lk)("span",{title:e.$t("modules.budget.page.budget.structure.tab.spent"),innerHTML:(0,l.R1)(c)(e.stats.spent,e.budgetCurrencyId,!0,!0)},null,8,fv),(0,s.eW)(" / "),(0,s.Lk)("span",{title:e.$t("modules.budget.page.budget.structure.tab.available"),innerHTML:(0,l.R1)(c)(e.stats.available,e.budgetCurrencyId,!0,!0)},null,8,hv)])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),b.value?((0,s.uX)(),(0,s.CE)("div",_v,[(0,s.Lk)("div",yv,[(0,s.bF)(i,{flat:"",icon:"control_point",class:"budget-table-row-folder-actions-create",onClick:t[0]||(t[0]=e=>x())}),(0,s.bF)(i,{flat:"",icon:"more_vert",class:"budget-table-row-folder-actions-context context-menu-button-control"},{default:(0,s.k6)((()=>[(0,s.bF)(A,{cover:"","auto-close":""},{default:(0,s.k6)((()=>[(0,s.bF)(y,null,{default:(0,s.k6)((()=>[(0,s.bF)(u,{clickable:null!==e.folderId,disable:null===e.folderId,class:"context-menu-button-item",onClick:t[1]||(t[1]=e=>S())},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:1},8,["clickable","disable"]),e.folderId?((0,s.uX)(),(0,s.Wv)(u,{key:0,clickable:!e.isFirst&&null!==e.folderId,disable:e.isFirst||!e.folderId,class:"context-menu-button-item",onClick:t[2]||(t[2]=e=>R(-1))},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.up.label")),1)])),_:1})])),_:1},8,["clickable","disable"])):(0,s.Q3)("",!0),e.folderId?((0,s.uX)(),(0,s.Wv)(u,{key:1,clickable:!e.isLast&&null!==e.folderId,disable:e.isLast||!e.folderId,class:"context-menu-button-item",onClick:t[3]||(t[3]=e=>R(1))},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.down.label")),1)])),_:1})])),_:1},8,["clickable","disable"])):(0,s.Q3)("",!0),(0,s.bF)(u,{clickable:!_.value.length&&!!e.folderId,disable:!!_.value.length||!e.folderId,class:"context-menu-button-item"},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"context-menu-button-section -delete",onClick:t[4]||(t[4]=t=>D(e.folderId,!!_.value.length))},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:1},8,["clickable","disable"])])),_:1})])),_:1})])),_:1})])])):(0,s.Q3)("",!0)]),(0,s.bF)((0,l.R1)(tu()),{list:_.value,group:"elements",disabled:!b.value,"item-key":"id",onEnd:F,"component-data":{id:e.folderId},handle:".sortable-control"},{item:(0,s.k6)((({element:p})=>[(0,s.Lk)("div",{class:(0,v.C4)("budget-table-row-element"+((p.children.length||1===p.type&&(0,l.R1)(d).screen.lt.md)&&C.value[p.id]?"":" budget-table-row-element-folded")+(p.children.length||1===p.type&&(0,l.R1)(d).screen.lt.md?" budget-table-row-element-with-children":"")+(f.value===p.id?" budget-table-row-element-active":""))},[(0,s.Lk)("div",{class:"row budget-table-row","data-element-id":p.id,onTouchstart:t[5]||(t[5]=e=>(0,l.R1)(P)(e)),onTouchmove:t[6]||(t[6]=(...e)=>(0,l.R1)(Y)&&(0,l.R1)(Y)(...e)),onTouchend:t[7]||(t[7]=(...e)=>(0,l.R1)(V)&&(0,l.R1)(V)(...e))},[(0,s.Lk)("div",{class:(0,v.C4)("budget-table-column-name budget-table-row-element-name"+(p.children.length||1===p.type&&(0,l.R1)(d).screen.lt.md?" budget-table-row-element-name-with-children":"")),onClick:e=>I(p)},[b.value?((0,s.uX)(),(0,s.CE)("div",Mv,[(0,s.bF)(k,{icon:"drag_indicator",class:"budget-table-row-element-icon-avatar"})])):((0,s.uX)(),(0,s.CE)("div",Cv,[(0,s.bF)(k,{icon:p.icon,class:"budget-table-row-element-icon-avatar"},null,8,["icon"]),(0,l.R1)(d).screen.gt.sm&&p.ownerUserId&&E.value.length>1?((0,s.uX)(),(0,s.Wv)(k,{key:0,class:"budget-table-row-element-icon-shared"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:(0,l.R1)(a)(E.value[p.ownerUserId].user.avatar,30),width:"30",height:"30",title:E.value[p.ownerUserId].user.name,alt:E.value[p.ownerUserId].user.name},null,8,Ev)])),_:2},1024)):(0,s.Q3)("",!0)])),(0,l.R1)(d).screen.lt.md?((0,s.uX)(),(0,s.CE)("div",Iv,[(0,s.Lk)("div",wv,(0,v.v_)(p.name),1),(0,s.Lk)("div",{class:"budget-table-row-item-name-wrapper-budgeted",innerHTML:(0,l.R1)(c)(p.budgeted,p.currencyId,!1,!0)},null,8,Lv)])):((0,s.uX)(),(0,s.CE)("span",Tv,(0,v.v_)(p.name),1))],10,kv),(0,s.Lk)("div",{class:(0,v.C4)("budget-table-column-budget"+(f.value===p.id?" budget-table-column-budget-active":"")+(g.value?" cursor-pointer":" -no-edit"))},[(0,s.Lk)("div",{class:"budget-table-column-budget-row",innerHTML:(0,l.R1)(c)(p.budgeted,p.currencyId,!1,!0)},null,8,Nv),(0,s.bF)(z,{"model-value":p,class:"budget-table-column-budget-edit","auto-save":"",disable:!g.value||(0,l.R1)(d).screen.lt.md,onBeforeShow:e=>w(p),onBeforeHide:L},{default:(0,s.k6)((t=>[(0,s.Lk)("form",{onSubmit:(0,n.D$)((e=>N(t.cancel)),["prevent"])},[(0,s.bF)(j,{ref_key:"budgetActiveElementInput",ref:m,"model-value":h.value.value,"onUpdate:modelValue":T,dense:"",autofocus:"",inputmode:"decimal",pattern:"[0-9+\\-\\*\\.=,]*",onKeyup:[(0,n.jR)((0,n.D$)((e=>N(t.cancel)),["stop","prevent"]),["enter"]),(0,n.jR)((0,n.D$)((e=>{t.cancel()}),["stop","prevent"]),["esc"])],rules:[t=>(0,l.R1)(Fe)(t.toString())||e.$t("elements.validation.invalid_number"),t=>(0,l.R1)(Re)(t.toString())||e.$t("elements.validation.invalid_decimal_number"),t=>(0,l.R1)(Be)(t.toString())||e.$t("elements.validation.invalid_formula")]},null,8,["model-value","onKeyup","rules"])],40,Dv)])),_:2},1032,["model-value","disable","onBeforeShow"])],2),(0,s.Lk)("div",{class:"budget-table-column-spent -cursor-help -inactive",onClick:e=>O(p,null)},[(0,s.Lk)("div",{class:"budget-table-column-spent-row",innerHTML:(0,l.R1)(c)(-1*p.spent,p.currencyId,!1,!0)},null,8,Fv)],8,Ov),(0,s.Lk)("div",{class:"budget-table-column-available -inactive",onClick:e=>I(p)},[(0,s.Lk)("div",{class:(0,v.C4)("budget-table-column-available-row "+(p.available+p.budgeted>=0?"income-color":"expense-color")),innerHTML:(0,l.R1)(c)(p.available+p.budgeted,p.currencyId,!1,!0)},null,10,Sv)],8,Rv),(0,s.Lk)("div",{class:(0,v.C4)("budget-table-column-actions"+(b.value?" budget-table-column-actions-edit":"")),id:"menu-"+p.id},[(0,s.Lk)("div",{class:"budget-table-column-actions-currency",onClick:e=>I(p)},(0,v.v_)(M(p.currencyId)),9,Uv),(0,s.Lk)("div",Qv,[(0,s.bF)(i,{flat:"",icon:"more_vert",class:"context-menu-button-control"},{default:(0,s.k6)((()=>[(0,s.bF)(A,{cover:"","auto-close":"",target:"#menu-"+p.id},{default:(0,s.k6)((()=>[(0,s.bF)(y,null,{default:(0,s.k6)((()=>[0!==p.type?((0,s.uX)(),(0,s.Wv)(u,{key:0,clickable:0!==p.type,disable:0===p.type,class:"context-menu-button-item",onClick:e=>$(p)},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.budget.page.budget.structure.element.action.change_currency")),1)])),_:1})])),_:2},1032,["clickable","disable","onClick"])):(0,s.Q3)("",!0),(0,s.bF)(u,{clickable:0===p.type,disable:0!==p.type,class:"context-menu-button-item",onClick:e=>U(p)},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.edit.label")),1)])),_:1})])),_:2},1032,["clickable","disable","onClick"]),0===p.type?((0,s.uX)(),(0,s.Wv)(u,{key:1,clickable:0===p.type,disable:0!==p.type,class:"context-menu-button-item",onClick:e=>Q(p)},{default:(0,s.k6)((()=>[(0,s.bF)(r,{class:"context-menu-button-section -delete"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("elements.button.delete.label")),1)])),_:1})])),_:2},1032,["clickable","disable","onClick"])):(0,s.Q3)("",!0)])),_:2},1024)])),_:2},1032,["target"])])),_:2},1024)])],10,xv)],40,Av),1===p.type&&(0,l.R1)(d).screen.lt.md?((0,s.uX)(),(0,s.CE)("div",$v,[(0,s.Lk)("div",{class:"row budget-table-row budget-table-row-item",onClick:e=>O(p,null)},[(0,s.Lk)("div",Wv,[(0,s.Lk)("div",qv,[(0,s.bF)(k,{icon:p.icon,class:"budget-table-row-item-icon"},null,8,["icon"]),(0,s.eW)(""),(0,s.Lk)("span",zv,(0,v.v_)(p.name),1)])]),(0,s.Lk)("div",{class:"budget-table-column-spent -cursor-help -inactive",innerHTML:(0,l.R1)(o)(-1*p.spent,p.currencyId,!1,!0)},null,8,Pv)],8,jv)])):1!==p.type?((0,s.uX)(),(0,s.CE)("div",Yv,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(p.children,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"row budget-table-row budget-table-row-item draggable",key:e.id,onClick:t=>O(p,e)},[(0,s.Lk)("div",{class:"budget-table-column-name budget-table-row-item-name",draggable:2!==p.type,onDragstart:t=>W(t,e),onDragend:t[8]||(t[8]=e=>q(e))},[(0,s.Lk)("div",Xv,[(0,s.bF)(k,{icon:e.icon,class:"budget-table-row-item-icon"},null,8,["icon"]),(0,s.eW)(""),(0,s.Lk)("span",Hv,(0,v.v_)(e.name),1)])],40,Bv),e.ownerUserId&&E.value.length>1&&(0,l.R1)(d).screen.gt.sm?((0,s.uX)(),(0,s.CE)("div",Gv,(0,v.v_)(E.value[e.ownerUserId].user.name),1)):(0,s.Q3)("",!0),e.ownerUserId&&E.value.length>1&&(0,l.R1)(d).screen.gt.sm?((0,s.uX)(),(0,s.CE)("div",Kv,"")):(0,s.Q3)("",!0),e.ownerUserId&&E.value.length>1&&(0,l.R1)(d).screen.gt.sm?((0,s.uX)(),(0,s.CE)("div",Zv,"")):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:"budget-table-column-spent -cursor-help -inactive",innerHTML:(0,l.R1)(o)(-1*e.spent,p.currencyId,!1,!0)},null,8,Jv)],8,Vv)))),128))])):(0,s.Q3)("",!0)],2)])),_:1},8,["list","disabled","component-data"]),_.value.length?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",eb,[(0,s.Lk)("div",tb,[(0,s.Lk)("div",ab,[(0,s.bF)(B,{class:"budget-table-row-folder-empty-icon",name:"error_outline"}),(0,s.Lk)("span",nb,(0,v.v_)(e.$t("modules.budget.page.budget.structure.empty_folder.note")),1)]),b.value?((0,s.uX)(),(0,s.CE)("div",ob,[(0,s.bF)(i,{class:"econumo-btn -small -grey",flat:"",label:e.$t("modules.budget.page.budget.structure.action.delete_folder"),onClick:t[9]||(t[9]=t=>D(e.folderId,!!_.value.length))},null,8,["label"])])):(0,s.Q3)("",!0)])]))],8,uv)}}}));var sb=a(3486);const cb=lb,ib=cb;z()(lb,"components",{QBtn:W.A,QMenu:rs.A,QList:xn.A,QItem:Qa.A,QItemSection:$a.A,QAvatar:ba.A,QPopupEdit:sb.A,QInput:Ht.A,QIcon:aa.A});const rb={class:"budget-transaction-list-header-name"},ub=["innerHTML"],db={class:"budget-transaction-list-header-icon"},mb=(0,s.Lk)("div",{class:"budget-transaction-list-body-loading"},"Loading...",-1),pb={key:0,class:"budget-transaction-list-body-empty"},gb={key:1,class:"budget-transaction-list-body-transactions"},vb={key:0,class:"budget-transaction-list-body-transactions-date-content"},bb={key:1,class:"budget-transaction-list-body-transactions-date-content"},fb={class:"budget-transaction-list-body-transactions-item-category"},hb={class:"budget-transaction-list-body-transactions-item-category-name"},_b={class:"budget-transaction-list-body-transactions-item-category-description"},yb={key:0,class:"budget-transaction-list-body-transactions-item-category-author"},Ab=["src","title","alt"],kb={class:"budget-transaction-list-body-transactions-item-payee"},Mb={key:0,class:"budget-transaction-list-body-transactions-item-payee-name"},Cb={class:"budget-transaction-list-body-transactions-item-amount"},Eb=["innerHTML"],Ib=(0,s.pM)(Object.assign({name:"BudgetTransactionListModal"},{__name:"BudgetTransactionListModal",props:{budgetId:{},periodStart:{},categoryId:{},tagId:{},envelopeId:{},selectedElement:{},currencyId:{},currentUserId:{},access:{}},emits:["close"],setup(e,{emit:t}){const a=e,n=t,{moneyHTML:o}=rt(),c=(0,Gt.A)();function i(){n("close")}const r=Dt(),u=(0,s.EW)((()=>r.isBudgetTransactionListLoading)),d=(0,s.EW)((()=>r.budgetTransactionList));r.fetchTransactionList({budgetId:a.budgetId,periodStart:a.periodStart,categoryId:a.categoryId?a.categoryId:"",envelopeId:a.envelopeId?a.envelopeId:"",tagId:a.tagId?a.tagId:""});const{avatarUrl:m}=Xt();return(e,t)=>{const a=(0,s.g2)("q-avatar"),n=(0,s.g2)("q-card-section"),r=(0,s.g2)("q-item-label"),p=(0,s.g2)("q-item"),g=(0,s.g2)("q-btn"),b=(0,s.g2)("q-card-actions"),f=(0,s.g2)("q-card"),h=(0,s.g2)("q-dialog"),_=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(h,{class:"responsive-modal","model-value":!0,onHide:i,position:(0,l.R1)(c).screen.gt.sm?"standard":"bottom"},{default:(0,s.k6)((()=>[(0,s.bF)(f,{class:"budget-transaction-list"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{class:"budget-transaction-list-header"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",rb,(0,v.v_)(e.selectedElement.name),1),(0,s.Lk)("div",{class:"budget-transaction-list-header-amount",innerHTML:(0,l.R1)(o)(e.selectedElement.spent,e.currencyId,!0,!0)},null,8,ub),(0,s.Lk)("div",db,[(0,s.bF)(a,{icon:e.selectedElement.icon,class:"budget-transaction-list-header-icon-avatar"},null,8,["icon"])])])),_:1}),u.value?((0,s.uX)(),(0,s.Wv)(n,{key:0,class:"budget-transaction-list-body"},{default:(0,s.k6)((()=>[mb])),_:1})):(0,s.Q3)("",!0),u.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(n,{key:1,class:"budget-transaction-list-body"},{default:(0,s.k6)((()=>[0===d.value.length?((0,s.uX)(),(0,s.CE)("div",pb,"No transactions")):(0,s.Q3)("",!0),d.value.length>0?((0,s.uX)(),(0,s.CE)("div",gb,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,l.R1)(ml).methods.transactionsDailyList(d.value,"spentAt"),(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.id},[t.isSeparator?((0,s.uX)(),(0,s.Wv)(r,{class:"budget-transaction-list-body-transactions-date",header:"",key:t.id},{default:(0,s.k6)((()=>["none"!==t.alias?((0,s.uX)(),(0,s.CE)("span",vb,(0,v.v_)(e.$t("pages.account.transaction_list."+t.alias)),1)):((0,s.uX)(),(0,s.CE)("span",bb,(0,v.v_)(t.date),1))])),_:2},1024)):(0,s.Q3)("",!0),t.isSeparator?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(p,{class:"budget-transaction-list-body-transactions-item",key:t.id,clickable:(0,l.R1)(c).screen.lt.lg},{default:(0,s.k6)((()=>{var n,c;return[(0,s.Lk)("div",fb,[(0,s.Lk)("div",hb,(0,v.v_)((null===(n=t.category)||void 0===n?void 0:n.name)||""),1),(0,s.Lk)("div",_b,(0,v.v_)(t.description),1),(null===(c=t.author)||void 0===c?void 0:c.id)&&e.access.length>1?((0,s.uX)(),(0,s.CE)("div",yb,[(0,s.bF)(a,{class:"budget-transaction-list-body-transactions-item-category-author-avatar"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:(0,l.R1)(m)(t.author.avatar,30),title:t.author.name,alt:t.author.name,width:"30",height:"30"},null,8,Ab)])),_:2},1024),(0,s.eW)(" "+(0,v.v_)(t.author.name),1)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",kb,[t.payee?((0,s.uX)(),(0,s.CE)("div",Mb,(0,v.v_)(t.payee.name||""),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Cb,[(0,s.Lk)("div",{class:"budget-transaction-list-body-transactions-item-amount-value",innerHTML:(0,l.R1)(o)(-1*t.amount,t.currencyId,!0,!0)},null,8,Eb)])]})),_:2},1032,["clickable"]))])))),128))])):(0,s.Q3)("",!0)])),_:1})),(0,s.bF)(b,{class:"budget-transaction-list-footer"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(g,{class:"econumo-btn -wide -large -grey preview-modal-account-info-access-actions-btn",title:e.$t("elements.button.cancel.label"),flat:"",icon:"expand_more",onClick:i},null,8,["title"]),[[_]])])),_:1})])),_:1})])),_:1},8,["position"])}}})),wb=Ib,Lb=wb;z()(Ib,"components",{QDialog:j.A,QCard:Kt.A,QCardSection:da.A,QAvatar:ba.A,QItemLabel:ja.A,QItem:Qa.A,QCardActions:fa.A,QBtn:W.A}),z()(Ib,"directives",{ClosePopup:ha.A});const Tb={class:"settings-toolbar-mobile"},Nb={class:"settings-toolbar-mobile-title"},Db={class:"responsive-modal-header"},Ob=(0,s.pM)(Object.assign({name:"BudgetUpdateFormModal"},{__name:"BudgetUpdateFormModal",props:{id:{},name:{},excluded:{},canUpdateName:{type:Boolean},currencyId:{}},emits:["update-name","update-excluded","update-currency","submit","close"],setup(e,{emit:t}){const a=e,o=t,l=(0,s.EW)({get(){return a.name},set(e){o("update-name",e)}}),c=(0,s.EW)({get(){return a.excluded},set(e){o("update-excluded",e)}}),i=(0,s.EW)({get(){return a.currencyId},set(e){o("update-currency",e)}});function r(){o("submit",{id:a.id,name:l.value,excludedAccounts:c.value,currencyId:i.value})}function u(){o("close")}return(e,t)=>{const a=(0,s.g2)("q-card-section"),o=(0,s.g2)("q-btn"),d=(0,s.g2)("q-card-actions"),m=(0,s.g2)("q-form"),p=(0,s.g2)("q-card"),g=(0,s.g2)("q-dialog"),b=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(g,{class:"responsive-modal","model-value":!0,onHide:u},{default:(0,s.k6)((()=>[(0,s.bF)(p,{class:"responsive-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(m,{ref:"budgetForm",onSubmit:(0,n.D$)(r,["prevent"]),onReset:u},{default:(0,s.k6)((()=>[(0,s.bF)(a,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Tb,[(0,s.Lk)("div",null,[(0,s.Lk)("h4",Nb,(0,v.v_)(e.$t("modules.budget.modal.update_budget_form.header")),1)])]),(0,s.Lk)("div",Db,(0,v.v_)(e.$t("modules.budget.modal.update_budget_form.header")),1),(0,s.bF)(Dm,{name:l.value,excluded:c.value,"can-update-name":e.canUpdateName,"currency-id":i.value,onUpdateName:t[0]||(t[0]=e=>l.value=e),onUpdateExcluded:t[1]||(t[1]=e=>c.value=e),onUpdateCurrency:t[2]||(t[2]=e=>i.value=e)},null,8,["name","excluded","can-update-name","currency-id"])])),_:1}),(0,s.bF)(d,{class:"responsive-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(o,{class:"econumo-btn -medium -grey responsive-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClick:u},null,8,["label"]),[[b]]),(0,s.bF)(o,{class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.update.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},512)])),_:1})])),_:1})}}})),Fb=Ob,Rb=Fb;var Sb;z()(Ob,"components",{QDialog:j.A,QCard:Kt.A,QForm:ua.A,QCardSection:da.A,QCardActions:fa.A,QBtn:W.A}),z()(Ob,"directives",{ClosePopup:ha.A}),function(e){e["INCOME"]="income",e["EXPENSE"]="expense"}(Sb||(Sb={}));const xb={class:"budget-form-wrapper"},Ub={class:"responsive-modal-control"},Qb={class:"responsive-modal-control-icon"},$b={class:"responsive-modal-control"},jb={class:"responsive-modal-control"},Wb=["src","alt","title"],qb=(0,s.pM)(Object.assign({name:"EnvelopeForm",mixins:[pl]},{__name:"EnvelopeForm",props:{id:{},name:{},icon:{},currencyId:{},categoriesIds:{},elements:{},access:{}},emits:["update-name","update-currency","update-categories"],setup(e,{emit:t}){const{isNotEmpty:a,isValidBudgetEnvelopeName:o}=He(),{avatarUrl:c}=Xt(),i=e,r=t,u=(0,s.EW)({get(){return i.name},set(e){r("update-name",e)}}),d=(0,s.EW)((()=>i.icon)),m=(0,s.EW)((()=>{const e={};return i.access.forEach((t=>{e[t.user.id]=t})),e})),p=ct(),g=(0,s.EW)({get(){if(!i.currencyId)return null;const e=p.currenciesHash[i.currencyId];return{value:e.id,label:e.code}},set(e){var t;r("update-currency",null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:null)}}),b=$t(),f=(0,l.KR)("");function h(e,t){t((()=>{f.value=e.toLowerCase()}))}function _(){f.value=""}const y=(0,s.EW)((()=>b.categories.filter((e=>!e.isArchived&&(e.type!==Sb.INCOME&&(!f.value||e.name.toLowerCase().includes(f.value))))).map((e=>({value:e.id,label:e.name,description:e.name,icon:e.icon,ownerUserId:e.ownerUserId}))))),A=(0,s.EW)({get(){return b.categories.filter((e=>i.categoriesIds.includes(e.id))).map((e=>({value:e.id,label:e.name,description:e.name,icon:e.icon,ownerUserId:e.ownerUserId})))},set(e){r("update-categories",e.map((e=>e.value)))}});function k(e,t){const a=A.value.map((e=>Object.assign({},e)));if(e)a.some((e=>e.value===t.value))||a.push({value:t.value,label:t.label,description:t.description,icon:t.icon,ownerUserId:t.ownerUserId});else{const e=a.findIndex((e=>e.value===t.value));-1!==e&&a.splice(e,1)}r("update-categories",a.map((e=>e.value)))}return(e,t)=>{const r=(0,s.g2)("q-icon"),p=(0,s.g2)("q-input"),b=(0,s.g2)("q-avatar"),f=(0,s.g2)("q-item-section"),M=(0,s.g2)("q-item-label"),C=(0,s.g2)("q-toggle"),E=(0,s.g2)("q-item"),I=(0,s.g2)("q-select");return(0,s.uX)(),(0,s.CE)("div",xb,[(0,s.Lk)("div",Ub,[(0,s.bF)(p,{class:"form-input full-width",outlined:"",placeholder:e.$t("modules.budget.form.budget_envelope.name.placeholder"),modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),label:e.$t("modules.budget.form.budget_envelope.name.label"),"lazy-rules":"",autofocus:"",rules:[t=>(0,l.R1)(a)(t)||e.$t("modules.budget.form.budget_envelope.name.validation.required_field"),t=>(0,l.R1)(o)(t)||e.$t("modules.budget.form.budget_envelope.name.validation.invalid_name")],maxlength:"18"},{before:(0,s.k6)((()=>[(0,s.Lk)("div",Qb,[(0,s.bF)(r,{class:"responsive-modal-control-icon-img",name:d.value},null,8,["name"])])])),_:1},8,["placeholder","modelValue","label","rules"])]),(0,s.Lk)("div",$b,[(0,s.bF)(qa,{modelValue:g.value,"onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),outlined:!0,borderless:!0,"custom-class":"form-select",label:e.$t("modules.budget.form.budget_envelope.currency.label"),rules:[t=>!!t||e.$t("modules.budget.form.budget_envelope.currency.validation.required_field")]},null,8,["modelValue","label","rules"])]),(0,s.Lk)("div",jb,[(0,s.bF)(I,{class:"form-select budget-envelope-categories",outlined:"",modelValue:A.value,"onUpdate:modelValue":t[3]||(t[3]=e=>A.value=e),"use-input":"",multiple:"","emit-value":"","map-options":"",options:y.value,label:e.$t("modules.budget.form.budget_envelope.categories.label"),onFilter:h,onFilterAbort:_},{option:(0,s.k6)((e=>[(0,s.bF)(E,(0,s.v6)(e.itemProps,{clickable:"",onClick:t=>k(!e.selected,e.opt)}),{default:(0,s.k6)((()=>[(0,s.bF)(f,{avatar:"",class:"budget-envelope-modal-control-avatar"},{default:(0,s.k6)((()=>[i.access.length>1?((0,s.uX)(),(0,s.Wv)(b,{key:0,size:"30px"},{default:(0,s.k6)((()=>[(0,s.Lk)("img",{src:(0,l.R1)(c)(m.value[e.opt.ownerUserId].user.avatar,30),alt:m.value[e.opt.ownerUserId].user.name,title:m.value[e.opt.ownerUserId].user.name,width:"30",height:"30"},null,8,Wb)])),_:2},1024)):((0,s.uX)(),(0,s.Wv)(b,{key:1,size:"30px",icon:e.opt.icon},null,8,["icon"]))])),_:2},1024),(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.bF)(M,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.opt.label),1)])),_:2},1024)])),_:2},1024),(0,s.bF)(f,{side:""},{default:(0,s.k6)((()=>[(0,s.bF)(C,{class:"budget-envelope-categories-toggle","model-value":e.selected,onClick:t[2]||(t[2]=(0,n.D$)((()=>{}),["stop"])),"onUpdate:modelValue":t=>k(t,e.opt)},null,8,["model-value","onUpdate:modelValue"])])),_:2},1024)])),_:2},1040,["onClick"])])),_:1},8,["modelValue","options","label"])])])}}})),zb=qb,Pb=zb;z()(qb,"components",{QInput:Ht.A,QIcon:aa.A,QSelect:va.A,QItem:Qa.A,QItemSection:$a.A,QAvatar:ba.A,QItemLabel:ja.A,QToggle:ei.A});const Yb={class:"settings-toolbar-mobile"},Vb={class:"settings-toolbar-mobile-title"},Bb={class:"responsive-modal-header"},Xb=(0,s.pM)(Object.assign({name:"BudgetCreateEnvelopeModal"},{__name:"BudgetCreateEnvelopeModal",props:{budgetId:{},id:{},budgetCurrencyId:{},folderId:{},elements:{},access:{}},emits:["create","close"],setup(e,{emit:t}){const a=e,o=t,c=(0,l.KR)(""),i=(0,l.KR)(Ia),r=(0,l.KR)(a.budgetCurrencyId),u=(0,l.KR)([]);function d(){o("create",{budgetId:a.budgetId,id:a.id,icon:i.value,name:c.value,currencyId:r.value,folderId:a.folderId,categories:u.value})}function m(){o("close")}return(e,t)=>{const a=(0,s.g2)("q-card-section"),o=(0,s.g2)("q-btn"),l=(0,s.g2)("q-card-actions"),p=(0,s.g2)("q-form"),g=(0,s.g2)("q-card"),b=(0,s.g2)("q-dialog"),f=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(b,{class:"responsive-modal","model-value":!0,onHide:m},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"responsive-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{ref:"budgetCreateEnvelopeForm",onSubmit:(0,n.D$)(d,["prevent"]),onReset:m},{default:(0,s.k6)((()=>[(0,s.bF)(a,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",Yb,[(0,s.Lk)("div",null,[(0,s.Lk)("h4",Vb,(0,v.v_)(e.$t("modules.budget.modal.create_envelope_form.header")),1)])]),(0,s.Lk)("div",Bb,(0,v.v_)(e.$t("modules.budget.modal.create_envelope_form.header")),1),(0,s.bF)(Pb,{id:e.id,name:c.value,icon:i.value,"currency-id":r.value,"categories-ids":u.value,elements:e.elements,access:e.access,onUpdateName:t[0]||(t[0]=e=>c.value=e),onUpdateIcon:t[1]||(t[1]=e=>i.value=e),onUpdateCurrency:t[2]||(t[2]=e=>r.value=e),onUpdateCategories:t[3]||(t[3]=e=>u.value=e)},null,8,["id","name","icon","currency-id","categories-ids","elements","access"])])),_:1}),(0,s.bF)(a,{class:"responsive-modal-section-icon"},{default:(0,s.k6)((()=>[(0,s.bF)(Sa,{header:e.$t("modules.budget.form.budget_envelope.icon.label"),icon:i.value,onUpdateIcon:t[4]||(t[4]=e=>i.value=e)},null,8,["header","icon"])])),_:1}),(0,s.bF)(l,{class:"responsive-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(o,{class:"econumo-btn -medium -grey responsive-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClick:m},null,8,["label"]),[[f]]),(0,s.bF)(o,{class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.add.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},512)])),_:1})])),_:1})}}})),Hb=Xb,Gb=Hb;z()(Xb,"components",{QDialog:j.A,QCard:Kt.A,QForm:ua.A,QCardSection:da.A,QCardActions:fa.A,QBtn:W.A}),z()(Xb,"directives",{ClosePopup:ha.A});const Kb={class:"settings-toolbar-mobile"},Zb={class:"settings-toolbar-mobile-title"},Jb={class:"responsive-modal-header"},ef={class:"responsive-modal-section"},tf=(0,s.pM)(Object.assign({name:"BudgetUpdateEnvelopeModal"},{__name:"BudgetUpdateEnvelopeModal",props:{budgetId:{},id:{},name:{},icon:{},currencyId:{},isArchived:{},categories:{},elements:{},access:{}},emits:["save","close"],setup(e,{emit:t}){const a=e,o=t,{t:c}=(0,U.s9)(),i=(0,l.KR)(a.name),r=(0,l.KR)(a.icon),u=(0,l.KR)(a.currencyId),d=(0,l.KR)(a.categories),m=(0,l.KR)([{label:c("modules.budget.form.budget_envelope.status.option.active"),value:0},{label:c("modules.budget.form.budget_envelope.status.option.archive"),value:1}]),p=(0,l.KR)(null),g=(0,s.EW)({get(){return p.value||m.value[a.isArchived]},set(e){p.value=e}});function b(){o("save",{budgetId:a.budgetId,id:a.id,name:i.value,icon:r.value,currencyId:u.value,isArchived:g.value.value,categories:d.value})}function f(){o("close")}return(e,t)=>{const a=(0,s.g2)("q-card-section"),o=(0,s.g2)("q-select"),l=(0,s.g2)("q-btn"),c=(0,s.g2)("q-card-actions"),p=(0,s.g2)("q-form"),h=(0,s.g2)("q-card"),_=(0,s.g2)("q-dialog"),y=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(_,{class:"responsive-modal","model-value":!0,onHide:f},{default:(0,s.k6)((()=>[(0,s.bF)(h,{class:"responsive-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{ref:"budgetUpdateEnvelopeForm",onSubmit:(0,n.D$)(b,["prevent"]),onReset:f},{default:(0,s.k6)((()=>[(0,s.bF)(a,{class:"q-pb-none"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Kb,[(0,s.Lk)("div",null,[(0,s.Lk)("h4",Zb,(0,v.v_)(e.$t("modules.budget.modal.update_envelope_form.header")),1)])]),(0,s.Lk)("div",Jb,(0,v.v_)(e.$t("modules.budget.modal.update_envelope_form.header")),1),(0,s.bF)(Pb,{id:e.id,name:i.value,icon:r.value,"currency-id":u.value,"categories-ids":d.value,elements:e.elements,access:e.access,onUpdateName:t[0]||(t[0]=e=>i.value=e),onUpdateIcon:t[1]||(t[1]=e=>r.value=e),onUpdateCurrency:t[2]||(t[2]=e=>u.value=e),onUpdateCategories:t[3]||(t[3]=e=>d.value=e)},null,8,["id","name","icon","currency-id","categories-ids","elements","access"])])),_:1}),(0,s.bF)(a,{class:"responsive-modal-section-status"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",ef,[(0,s.bF)(o,{class:"form-select",outlined:"",modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=e=>g.value=e),"use-input":"",options:m.value,label:e.$t("modules.budget.form.budget_envelope.status.label")},null,8,["modelValue","options","label"])])])),_:1}),(0,s.bF)(a,{class:"responsive-modal-section-icon"},{default:(0,s.k6)((()=>[(0,s.bF)(Sa,{header:e.$t("modules.budget.form.budget_envelope.icon.label"),icon:r.value,onUpdateIcon:t[5]||(t[5]=e=>r.value=e)},null,8,["header","icon"])])),_:1}),(0,s.bF)(c,{class:"responsive-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(l,{class:"econumo-btn -medium -grey responsive-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClick:f},null,8,["label"]),[[y]]),(0,s.bF)(l,{class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.update.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},512)])),_:1})])),_:1})}}})),af=tf,nf=af;z()(tf,"components",{QDialog:j.A,QCard:Kt.A,QForm:ua.A,QCardSection:da.A,QSelect:va.A,QCardActions:fa.A,QBtn:W.A}),z()(tf,"directives",{ClosePopup:ha.A});const of={class:"settings-toolbar-mobile"},lf={class:"settings-toolbar-mobile-title"},sf={class:"responsive-modal-header"},cf={class:"budget-form-wrapper"},rf={class:"responsive-modal-control"},uf=(0,s.pM)(Object.assign({name:"BudgetChangeCurrencyModal"},{__name:"BudgetChangeCurrencyModal",props:{id:{},currencyId:{},budgetId:{}},emits:["change-currency","close"],setup(e,{emit:t}){const a=e,o=t,c=ct(),i=(0,l.KR)(a.currencyId?{value:c.currenciesHash[a.currencyId].id,label:c.currenciesHash[a.currencyId].code}:null);function r(){i.value&&o("change-currency",{budgetId:a.budgetId,elementId:a.id,currencyId:i.value.value})}function u(){o("close")}return(e,t)=>{const a=(0,s.g2)("q-card-section"),o=(0,s.g2)("q-btn"),l=(0,s.g2)("q-card-actions"),c=(0,s.g2)("q-form"),d=(0,s.g2)("q-card"),m=(0,s.g2)("q-dialog"),p=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(m,{class:"responsive-modal","model-value":!0,onHide:u},{default:(0,s.k6)((()=>[(0,s.bF)(d,{class:"responsive-modal-card"},{default:(0,s.k6)((()=>[(0,s.bF)(c,{ref:"budgetForm",onSubmit:(0,n.D$)(r,["prevent"]),onReset:u},{default:(0,s.k6)((()=>[(0,s.bF)(a,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",of,[(0,s.Lk)("div",null,[(0,s.Lk)("h4",lf,(0,v.v_)(e.$t("modules.budget.modal.change_element_currency_form.header")),1)])]),(0,s.Lk)("div",sf,(0,v.v_)(e.$t("modules.budget.modal.change_element_currency_form.header")),1),(0,s.Lk)("div",cf,[(0,s.Lk)("div",rf,[(0,s.bF)(qa,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),outlined:!0,"custom-class":"form-select",label:e.$t("modules.budget.form.budget_envelope.currency.label"),rules:[t=>!!t||e.$t("modules.budget.form.budget_envelope.currency.validation.required_field")],"option-disable":e=>!e},null,8,["modelValue","label","rules","option-disable"])])])])),_:1}),(0,s.bF)(l,{class:"responsive-modal-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(o,{class:"econumo-btn -medium -grey responsive-modal-actions-button",flat:"",label:e.$t("elements.button.cancel.label"),onClick:u},null,8,["label"]),[[p]]),(0,s.bF)(o,{class:"econumo-btn -medium -magenta responsive-modal-actions-button",flat:"",label:e.$t("elements.button.save.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},512)])),_:1})])),_:1})}}})),df=uf,mf=df;z()(uf,"components",{QDialog:j.A,QCard:Kt.A,QForm:ua.A,QCardSection:da.A,QCardActions:fa.A,QBtn:W.A}),z()(uf,"directives",{ClosePopup:ha.A});const pf={class:"prompt-modal-card-section-label"},gf={class:"prompt-modal-card-section-input"},vf=(0,s.pM)(Object.assign({name:"BudgetSetLimitModal"},{__name:"BudgetSetLimitModal",props:{id:{},budgetId:{},elementId:{},period:{},amount:{}},emits:["set-limit","close"],setup(e,{emit:t}){var a;const o=e,c=t,{isValidNumber:i,isValidDecimalNumber:r}=He(),u=(0,l.KR)(null===(a=o.amount)||void 0===a?void 0:a.toString());function d(){var e;let t=Number(null!==(e=u.value)&&void 0!==e?e:0);c("set-limit",{budgetId:o.budgetId,elementId:o.elementId,amount:t,period:o.period})}function m(){c("close")}return(e,t)=>{const a=(0,s.g2)("q-card-section"),o=(0,s.g2)("q-btn"),c=(0,s.g2)("q-card-actions"),p=(0,s.g2)("q-form"),g=(0,s.g2)("q-card"),b=(0,s.g2)("q-dialog"),f=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.Wv)(b,{class:"prompt-modal","model-value":!0,onHide:m},{default:(0,s.k6)((()=>[(0,s.bF)(g,{class:"prompt-modal-card econumo-modal"},{default:(0,s.k6)((()=>[(0,s.bF)(p,{ref:"budgetForm",onSubmit:(0,n.D$)(d,["prevent"]),onReset:m,class:"prompt-modal-card-form"},{default:(0,s.k6)((()=>[(0,s.bF)(a,{class:"prompt-modal-card-section"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",pf,(0,v.v_)(e.$t("modules.budget.modal.set_limit_form.header")),1),(0,s.Lk)("div",gf,[(0,s.bF)(ia,{class:"form-input -narrow full-width",autofocus:"",outlined:"",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),label:e.$t("modules.budget.form.budget_limit.limit.label"),rules:[t=>(0,l.R1)(i)(t)||e.$t("elements.validation.invalid_number"),t=>(0,l.R1)(r)(t)||e.$t("elements.validation.invalid_decimal_number")]},null,8,["modelValue","label","rules"])])])),_:1}),(0,s.bF)(c,{class:"prompt-modal-card-actions"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(o,{flat:"",class:"econumo-btn -medium -grey prompt-modal-card-actions-button",label:e.$t("elements.button.cancel.label"),onClick:m},null,8,["label"]),[[f]]),(0,s.bF)(o,{flat:"",class:"econumo-btn -medium -magenta prompt-modal-card-actions-button",label:e.$t("elements.button.save.label"),type:"submit"},null,8,["label"])])),_:1})])),_:1},512)])),_:1})])),_:1})}}})),bf=vf,ff=bf;z()(vf,"components",{QDialog:j.A,QCard:Kt.A,QForm:ua.A,QCardSection:da.A,QCardActions:fa.A,QBtn:W.A}),z()(vf,"directives",{ClosePopup:ha.A});const hf={class:"budget-total"},_f=(0,s.Lk)("hr",{class:"budget-total-separator"},null,-1),yf={class:"row budget-table-row"},Af={key:0,class:"budget-table-row-item-name-wrapper"},kf={class:"budget-table-row-item-name-wrapper-name"},Mf=["innerHTML"],Cf={key:1,class:"budget-table-row-item-name-single"},Ef={class:"budget-table-column-budget"},If=["innerHTML"],wf={class:"budget-table-column-spent"},Lf=["innerHTML"],Tf={class:"budget-table-column-available"},Nf=["innerHTML"],Df={class:"budget-table-column-actions"},Of={class:"budget-table-column-actions-currency"},Ff={key:0,class:"budget-table-row-element-items"},Rf={class:"row budget-table-row budget-table-row-item"},Sf={class:"budget-table-column-name budget-table-row-item-name"},xf={class:"budget-table-row-item-name-single"},Uf={class:"budget-table-row-item-name-single"},Qf=["innerHTML"],$f=(0,s.pM)(Object.assign({name:"BudgetTotal"},{__name:"BudgetTotal",props:{budgetStats:{},budgetCurrencyId:{}},setup(e){const t=e,a=(0,Gt.A)(),{moneyFormat:n,moneyHTML:o}=rt(),c=ct(),i=(0,s.EW)((()=>c.currenciesHash[t.budgetCurrencyId]));return(e,t)=>((0,s.uX)(),(0,s.CE)("div",hf,[_f,(0,s.Lk)("div",{class:(0,v.C4)("budget-table-row-element"+((0,l.R1)(a).screen.lt.md?" budget-table-row-element-with-children":""))},[(0,s.Lk)("div",yf,[(0,s.Lk)("div",{class:(0,v.C4)("budget-table-column-name budget-table-row-element-name"+((0,l.R1)(a).screen.lt.md?" budget-table-row-element-name-with-children":""))},[(0,l.R1)(a).screen.lt.md?((0,s.uX)(),(0,s.CE)("div",Af,[(0,s.Lk)("div",kf,(0,v.v_)(e.$t("modules.budget.page.budget.structure.total.name")),1),(0,s.Lk)("div",{class:"budget-table-row-item-name-wrapper-budgeted",innerHTML:(0,l.R1)(o)(e.budgetStats.budgeted,e.budgetCurrencyId,!1,!0)},null,8,Mf)])):((0,s.uX)(),(0,s.CE)("span",Cf,(0,v.v_)(e.$t("modules.budget.page.budget.structure.total.name")),1))],2),(0,s.Lk)("div",Ef,[(0,s.Lk)("div",{class:"budget-table-column-budget-row",innerHTML:(0,l.R1)(o)(e.budgetStats.budgeted,e.budgetCurrencyId,!1,!0)},null,8,If)]),(0,s.Lk)("div",wf,[(0,s.Lk)("div",{class:"budget-table-column-spent-row",innerHTML:(0,l.R1)(o)(-1*e.budgetStats.spent,e.budgetCurrencyId,!1,!0)},null,8,Lf)]),(0,s.Lk)("div",Tf,[(0,s.Lk)("div",{class:(0,v.C4)("budget-table-column-available-row "+(e.budgetStats.available>=0?"income-color":"expense-color")),innerHTML:(0,l.R1)(o)(e.budgetStats.available,e.budgetCurrencyId,!1,!0)},null,10,Nf)]),(0,s.Lk)("div",Df,[(0,s.Lk)("div",Of,(0,v.v_)(i.value.symbol),1)])]),(0,l.R1)(a).screen.lt.md?((0,s.uX)(),(0,s.CE)("div",Ff,[(0,s.Lk)("div",Rf,[(0,s.Lk)("div",Sf,[(0,s.Lk)("div",xf,[(0,s.Lk)("span",Uf,(0,v.v_)(e.$t("modules.budget.page.budget.structure.total.expenses")),1)])]),(0,s.Lk)("div",{class:"budget-table-column-spent -cursor-help -inactive",innerHTML:(0,l.R1)(n)(-1*e.budgetStats.spent,e.budgetCurrencyId,!1,!0)},null,8,Qf)])])):(0,s.Q3)("",!0)],2)]))}})),jf=$f,Wf=jf,qf={key:0,class:"budget-expense-widget"},zf={class:"row budget-expense-widget-header"},Pf={class:"row budget-expense-widget-numbers"},Yf=["innerHTML"],Vf=["innerHTML"],Bf={class:"row budget-expense-widget-progress"},Xf={key:0,class:"row budget-expense-widget-hint"},Hf=(0,s.pM)(Object.assign({name:"BudgetExpenseWidget"},{__name:"BudgetExpenseWidget",props:{currencyId:{default:null}},setup(e){const t=e,{moneyFormat:a,moneyHTML:n}=rt(),{exchange:o}=dt(),c=Dt(),i=ct(),{t:r}=(0,U.s9)(),u=e=>i.currenciesHash[e],d=(0,s.EW)((()=>c.budget)),m=(0,s.EW)((()=>{var e;return null===(e=d.value)||void 0===e?void 0:e.meta.currencyId})),p=(0,s.EW)((()=>d.value?u(d.value.meta.currencyId):null)),g=(0,s.EW)((()=>{const e=c.budgetDate;return e?b(e):""}));function b(e){const[t,a]=e.split("-"),n=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],o=r(`elements.date.month_short.${n[parseInt(a)-1]}`);return`${o} ${t}`}const f=(0,s.EW)((()=>{if(!d.value)return 0;let e=null;if(d.value.balances.forEach((a=>{a.currencyId===t.currencyId&&(e=a)})),!e)return 0;let a=Math.abs(Number(e.startBalance)+Number(e.income));return Number(e.exchanges)>0&&(a+=Number(e.exchanges)),Number(e.holdings)>0&&(a+=Number(e.holdings)),a})),h=(0,s.EW)((()=>{if(!d.value)return 0;let e=null;if(d.value.balances.forEach((a=>{a.currencyId===t.currencyId&&(e=a)})),!e)return 0;let a=Math.abs(Number(e.expenses));return Number(e.exchanges)<0&&(a+=Math.abs(Number(e.exchanges))),Number(e.holdings)<0&&(a+=Math.abs(Number(e.holdings))),a})),_=(0,s.EW)((()=>{var e;if(!d.value)return[null,0];let a=null;return d.value.currencyRates.forEach((e=>{e.currencyId===t.currencyId&&(a=e)})),a?[b(a.periodStart),(null===(e=d.value)||void 0===e?void 0:e.meta.currencyId)&&t.currencyId?o(d.value.meta.currencyId,t.currencyId,1,d.value.currencyRates):0]:[null,0]})),y=(0,s.EW)((()=>f.value<=0?0:Math.max(0,Math.min(h.value/f.value,1)))),A=(0,s.EW)((()=>h.value>f.value));return(e,o)=>{var c;const i=(0,s.g2)("q-linear-progress");return t.currencyId&&d.value?((0,s.uX)(),(0,s.CE)("div",qf,[(0,s.Lk)("div",zf,(0,v.v_)(e.$t("modules.budget.modal.expense_widget.header",{period:g.value})),1),(0,s.Lk)("div",Pf,[(0,s.Lk)("div",{class:"col budget-expense-widget-numbers-progress expense-color",innerHTML:(0,l.R1)(n)(h.value,t.currencyId)},null,8,Yf),(0,s.Lk)("div",{class:"col budget-expense-widget-numbers-total",innerHTML:(0,l.R1)(n)(f.value,t.currencyId)},null,8,Vf)]),(0,s.Lk)("div",Bf,[(0,s.bF)(i,{value:y.value,class:(0,v.C4)("budget-expense-widget-progress-bar "+(A.value?"budget-expense-widget-progress-bar-overbudget":""))},null,8,["value","class"])]),t.currencyId!==m.value?((0,s.uX)(),(0,s.CE)("div",Xf,(0,v.v_)(e.$t("modules.budget.modal.expense_widget.conversion_rate",{period:_.value[0],defaultCurrency:(null===(c=p.value)||void 0===c?void 0:c.symbol)||"",rate:(0,l.R1)(a)(_.value[1],t.currencyId)})),1)):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)}}})),Gf=Hf,Kf=Gf;z()(Hf,"components",{QLinearProgress:qc.A});const Zf={class:"budget"},Jf={class:"budget-toolbar-mobile"},eh={class:"budget-toolbar-mobile-head"},th={key:0,class:"budget-toolbar-mobile-head-title"},ah={key:1,class:"budget-toolbar-mobile-head-title"},nh={class:"budget-toolbar-desktop"},oh={class:"budget-toolbar-desktop-head"},lh={key:0,class:"budget-toolbar-desktop-head-title"},sh={key:1,class:"budget-toolbar-desktop-head-title"},ch={class:"budget-toolbar-desktop-settings"},ih={key:1,class:"row"},rh=["onClick"],uh={key:2,class:"row"},dh={key:3,class:"row"},mh={class:"col"},ph={class:"budget-table"},gh={class:"row"},vh=(0,s.pM)(Object.assign({name:"BudgetPage",mixins:[]},{__name:"Budget",setup(e){const t=(0,g.rd)(),a=(0,g.lq)(),n=Dt(),o=Yt(),{t:c}=(0,U.s9)(),{exchange:i}=dt(),r=He(),u=it(),d=(0,l.KR)(null),m=(0,l.KR)(o.userCurrencyId),b=(0,s.EW)((()=>n.budgetDate)),f={left:23,right:23},h=(0,s.EW)((()=>{let e=[];const t=nt.Ay.formatDate(new Date,"YYYY");let a=b.value;a="string"===typeof a&&/^\d{4}-\d{2}-\d{2}$/.test(a)?nt.Ay.extractDate(b.value,"YYYY-MM-DD"):nt.Ay.extractDate(b.value,"YYYY-MM-DD HH:mm:ss");const n=nt.Ay.adjustDate(a,{date:1,millisecond:0,second:0,minute:0,hour:0}),o=f.left,l=f.right;let s=null,c=0;for(let a=o;a>=0;a--){s=nt.Ay.subtractFromDate(n,{months:a});let o=nt.Ay.formatDate(s,"YYYY");e.push({label:nt.Ay.formatDate(s,t===o?"MMMM":"MMM YYYY"),value:nt.Ay.formatDate(s,"YYYY-MM-01"),number:c++,isActive:n.getTime()===s.getTime(),outsideBudget:s<Le.value})}for(let a=1;a<=l;a++){let o=nt.Ay.addToDate(n,{months:a}),l=nt.Ay.formatDate(o,"YYYY");e.push({label:nt.Ay.formatDate(o,t===l?"MMMM":"MMM YYYY"),value:nt.Ay.formatDate(o,"YYYY-MM-01"),number:c++,isActive:n.getTime()===o.getTime(),outsideBudget:o<Le.value})}return e})),_=(0,l.KR)(null),y=()=>{if(!_.value)return;const e=_.value,t=e.children[f.left-1];if(t){const a=e.offsetWidth,n=t.offsetWidth,o=t.offsetLeft,l=o-a/2+1.5*n;e.scrollTo({left:l,behavior:"smooth"})}};function A(e=!1){e?_t().setSidebarActiveArea():_t().setWorkspaceActiveArea(),t.push({name:p.SETTINGS_BUDGETS})}function k(e=!1){e?_t().setSidebarActiveArea():_t().setWorkspaceActiveArea(),t.push({name:p.HOME})}(0,s.sV)((()=>{const e=t.currentRoute.value.name;e===p.BUDGET?_t().setWorkspaceActiveArea():e===p.HOME&&_t().setSidebarActiveArea(),setTimeout((()=>{y()}),100)})),(0,s.wB)((()=>a),(e=>{e.name===p.BUDGET?_t().setWorkspaceActiveArea():e.name===p.HOME&&_t().setSidebarActiveArea(),setTimeout((()=>{y()}),100)}),{immediate:!0,deep:!0});const M=(0,l.KR)(!1),C=(0,s.EW)((()=>n.isBudgetLoaded)),E=(0,s.EW)((()=>n.canUserConfigureBudget)),I=(0,s.EW)((()=>n.budget)),w=(0,s.EW)((()=>{if(n.canUserUpdateLimits){const e=nt.Ay.extractDate(n.budgetDate,lt);if(I.value&&new Date(I.value.meta.startedAt)<=e)return!0}return!1}));(0,s.wB)(I,(e=>{e&&setTimeout((()=>{y()}),100)})),C.value||n.fetchUserBudget().finally((()=>{setTimeout((()=>{y()}),100)}));const L=ct(),T=(0,s.EW)((()=>L.currenciesHash)),N=(0,s.EW)((()=>L.isCurrenciesLoaded)),D=((0,s.EW)((()=>n.isBudgetLoading)),(0,s.EW)((()=>{const e=n.budget;if(!e)return[];const t={budgeted:0,spent:0,available:0};return O.value.forEach((e=>{t.budgeted+=e.stats.budgeted,t.spent+=e.stats.spent,t.available+=e.stats.available})),t.budgeted+=F.value.stats.budgeted+R.value.stats.budgeted,t.spent+=F.value.stats.spent+R.value.stats.spent,t.available+=F.value.stats.available+R.value.stats.available,t}))),O=(0,s.EW)((()=>{const e=n.budget;if(!e)return[];const t={};let a=0;return B().orderBy(e.structure.folders,"position").forEach((e=>{t[e.id]={id:e.id,name:e.name,position:e.position,elements:[],stats:{budgeted:0,spent:0,available:0}},a++})),B().orderBy(e.structure.elements,"position").forEach((a=>{var n,o;null===a.folderId||a.isArchived||(t[a.folderId]||(t[a.folderId]={id:a.folderId,elements:[],stats:{budgeted:0,spent:0,available:0}}),t[a.folderId].elements.push(B().cloneDeep(a)),t[a.folderId].stats.budgeted+=i(null!==(n=a.currencyId)&&void 0!==n?n:e.meta.currencyId,e.meta.currencyId,a.budgeted,e.currencyRates),t[a.folderId].stats.spent+=a.budgetSpent,t[a.folderId].stats.available+=i(null!==(o=a.currencyId)&&void 0!==o?o:e.meta.currencyId,e.meta.currencyId,a.available+a.budgeted,e.currencyRates))})),0===a?[]:Object.values(t)})),F=(0,s.EW)((()=>{const e=n.budget;if(!e)return[];const t={elements:[],stats:{budgeted:0,spent:0,available:0}};return B().orderBy(e.structure.elements,"position").forEach((a=>{var n,o;null!==a.folderId||a.isArchived||(t.elements.push(B().cloneDeep(a)),t.stats.budgeted+=i(null!==(n=a.currencyId)&&void 0!==n?n:e.meta.currencyId,e.meta.currencyId,a.budgeted,e.currencyRates),t.stats.spent+=a.budgetSpent,t.stats.available+=i(null!==(o=a.currencyId)&&void 0!==o?o:e.meta.currencyId,e.meta.currencyId,a.available+a.budgeted,e.currencyRates))})),t})),R=(0,s.EW)((()=>{const e=n.budget;if(!e)return[];const t={elements:[],stats:{budgeted:0,spent:0,available:0}};return B().orderBy(e.structure.elements,"name").forEach((a=>{var n,o;a.isArchived&&(t.elements.push(B().cloneDeep(a)),t.stats.budgeted+=i(null!==(n=a.currencyId)&&void 0!==n?n:e.meta.currencyId,e.meta.currencyId,a.budgeted,e.currencyRates),t.stats.spent+=a.budgetSpent,t.stats.available+=i(null!==(o=a.currencyId)&&void 0!==o?o:e.meta.currencyId,e.meta.currencyId,a.available+a.budgeted,e.currencyRates))})),t})),S=(0,l.Kh)({isOpened:!1,header:"",description:""});function x(e,t){S.header=e,S.description=t,S.isOpened=!0}function Q(){S.isOpened=!1,S.header="",S.description=""}const $=(0,l.Kh)({isOpened:!1,budgetId:null,budgetName:"",accountsluded:[],currencyId:null});function j(){$.budgetId=n.generateId(),$.currencyId=m.value,$.isOpened=!0}function W(){$.isOpened=!1}function q(){$.budgetId=null,$.budgetName="",$.accountsExcluded=[],$.currencyId=null}function z(e){n.createBudget(e).then((e=>{e.success?q():x(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{x(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))})).finally((()=>{W(),y()}))}const P=(0,l.Kh)({isOpened:!1,budgetId:null,budgetName:"",accountsExcluded:[],currencyId:null});function Y(){P.budgetId=I.value.meta.id,P.budgetName=I.value.meta.name,P.accountsExcluded=I.value.filters.excludedAccountsIds,P.currencyId=I.value.meta.currencyId,P.isOpened=!0}function V(){P.isOpened=!1,X()}function X(){P.budgetId=null,P.budgetName="",P.accountsExcluded=[],P.currencyId=null}function H(e){n.updateBudget(e).then((e=>{e.success?(X(),n.fetchUserBudget().finally((()=>{y()}))):x(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{x(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))})).finally((()=>{V()}))}const G=(0,l.Kh)({isOpened:!1,folderId:null,folderName:""});function K(){G.folderId=n.generateId(),G.isOpened=!0}function Z(){G.isOpened=!1}function J(){G.folderId=null,G.folderName=""}function ee(e,t,a){n.createFolder({budgetId:Ie.value.id,id:a,name:e}).then((e=>{e.success?(J(),n.fetchUserBudget().finally((()=>{y()}))):x(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{x(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))})).finally((()=>{Z()}))}const te=(0,l.Kh)({isOpened:!1,folderId:null,folderName:null});function ae(e,t){te.folderId=e,te.folderName=t,te.isOpened=!0}function ne(){te.isOpened=!1,oe()}function oe(){te.folderId=null,te.folderName=null}function le(e,t,a){n.updateFolder({budgetId:Ie.value.id,id:a,name:e}).then((e=>{e.success||(ne(),x(c("modules.budget.modal.generic_error.header"),e.message))})).catch((()=>{x(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))})).finally((()=>{ne()}))}function se(e,t){t||ce(e)}function ce(e){var t;n.deleteFolder(null===(t=I.value)||void 0===t?void 0:t.meta.id,e).then((e=>{e.success?(J(),n.fetchUserBudget().finally((()=>{y()}))):x(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{x(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))})).finally((()=>{Z()}))}const ie=(0,l.Kh)({isOpened:!1,envelopeId:null,budgetId:null,folderId:null});function re(e){ie.folderId=e,ie.envelopeId=n.generateId(),ie.budgetId=Ie.value.id,ie.isOpened=!0}function ue(){ie.isOpened=!1,de()}function de(){ie.folderId=null,ie.envelopeId=null,ie.budgetId=null}function me(e){n.createEnvelope(e).then((t=>{t.success?(de(),e.categories.length>0&&n.fetchUserBudget().finally((()=>{y()}))):x(c("modules.budget.modal.generic_error.header"),t.message)})).catch((()=>{x(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))})).finally((()=>{ue()}))}function pe(e){e.type===Lt.ENVELOPE&&ve(e)}const ge=(0,l.Kh)({isOpened:!1,budgetId:null,envelopeId:null,name:"",icon:"",currencyId:null,isArchived:null,categories:[]});function ve(e){ge.budgetId=Ie.value.id,ge.envelopeId=e.id,ge.name=e.name,ge.icon=e.icon,ge.currencyId=e.currencyId,ge.isArchived=e.isArchived,ge.categories=[],e.children.forEach((e=>{ge.categories.push(e.id)})),ge.isOpened=!0}function be(){ge.isOpened=!1,fe()}function fe(){ge.folderId=null,ge.budgetId=null,ge.envelopeId=null,ge.name="",ge.icon="",ge.currencyId=null,ge.isArchived=null,ge.categories=[]}function he(e){n.updateEnvelope(e).then((e=>{e.success?(fe(),n.fetchUserBudget().finally((()=>{y()}))):x(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{x(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))})).finally((()=>{be()}))}const _e=(0,l.Kh)({isOpened:!1,budgetId:null,envelopeId:null});function ye(e){_e.budgetId=Ie.value.id,_e.envelopeId=e.id,_e.isOpened=!0}function Ae(){_e.isOpened=!1,ke()}function ke(){_e.budgetId=null,_e.envelopeId=null}function Me(e){n.deleteEnvelope(e).then((e=>{e.success?(ke(),n.fetchUserBudget().finally((()=>{y()}))):x(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{x(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))})).finally((()=>{Ae()}))}function Ce(e){e.type===Lt.ENVELOPE&&ye(e)}function Ee(e){n.changeBudgetPeriod(e),n.fetchUserBudget().then((()=>{y()}))}const Ie=(0,s.EW)((()=>n.budgetMeta)),we=(0,s.EW)((()=>n.budgetCurrencies)),Le=(0,s.EW)((()=>new Date(Ie.value.startedAt))),Te=(0,l.Kh)({isOpened:!1,budgetId:null,periodStart:"",categoryId:null,tagId:null,envelopeId:null,selectedElement:null,currencyId:null,currentUserId:null,access:[]});function Ne(e,t,a,n,l){Te.budgetId=Ie.value.id,Te.periodStart=b.value,Te.selectedElement=e,Te.categoryId=a,Te.tagId=t,Te.envelopeId=n,Te.currencyId=l,Te.currentUserId=o.userId,Te.access=Ie.value.access,Te.isOpened=!0}function De(){Te.isOpened=!1,Te.budgetId=null,Te.periodStart="",Te.selectedElement=null,Te.categoryId=null,Te.tagId=null,Te.envelopeId=null,Te.currencyId=null,Te.currentUserId=null,Te.access=[]}function Oe(e,t){const a=e.to.id||null,o=e.item.__draggable_context.element.id||null,l=e.newIndex;n.moveElement(o,l,a).then((e=>{e.success||x(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{x(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))}))}function Fe(e,t){const a=I.value.structure.folders.find((t=>t.id===e));n.orderFolders(e,a.position+t).then((e=>{e.success||x(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{x(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))}))}function Re(e,t){t=0==t||isNaN(t)?null:u.normalizeNumber(t);const a=nt.Ay.extractDate(n.budgetDate,lt);n.setLimit({budgetId:Ie.value.id,elementId:e,amount:t,period:nt.Ay.formatDate(a,lt)}).then((e=>{e.success||x(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{x(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))}))}const Se=(0,l.Kh)({isOpened:!1,elementId:null,currencyId:null});function xe(e){Se.currencyId=e.currencyId||Ie.value.currencyId,Se.elementId=e.id,Se.isOpened=!0}function Ue(){Se.isOpened=!1,Qe()}function Qe(){Se.currencyId=null,Se.elementId=null}function $e(e){n.changeElementCurrency(e).then((e=>{e.success?(Qe(),n.fetchUserBudget()):x(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{x(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))})).finally((()=>{Ue()}))}const je=(0,l.Kh)({isOpened:!1});function We(){je.isOpened=!0}function qe(){je.isOpened=!1}function ze(e){qe(),"edit"===e?Y():"edit_structure"===e?M.value=!0:"open_settings"===e&&A(!0)}const Pe=(0,l.Kh)({isOpened:!1,budgetId:null,elementId:null,period:null,amount:null});function Ye(e){var t;(null===(t=Ie.value)||void 0===t?void 0:t.id)&&(null===e||void 0===e?void 0:e.id)&&(Pe.budgetId=Ie.value.id,Pe.elementId=e.id,Pe.period=b.value,Pe.amount=u.normalizeNumber(e.budgeted),Pe.isOpened=!0)}function Ve(){Pe.isOpened=!1,Pe.elementId=null,Pe.period="",Pe.amount=0}function Be(e){n.setLimit(e).then((e=>{e.success||x(c("modules.budget.modal.generic_error.header"),e.message)})).catch((()=>{x(c("modules.budget.modal.generic_error.header"),c("modules.budget.modal.generic_error.description"))})).finally((()=>{Ve()}))}function Xe(){var e;const t=wa(),a=Ct(),n=a.accountFoldersOrdered[0];t.openAccountModal({folderId:null!==(e=null===n||void 0===n?void 0:n.id)&&void 0!==e?e:null})}return y(),(e,t)=>{const a=(0,s.g2)("q-btn"),n=(0,s.g2)("q-avatar"),o=(0,s.g2)("q-item-section"),c=(0,s.g2)("q-item"),i=(0,s.g2)("q-list"),u=(0,s.g2)("q-menu"),m=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.Wv)(m,null,{default:(0,s.k6)((()=>{var m,p,g,b,f,y;return[(0,s.Lk)("div",Zf,[(0,s.Lk)("div",Jf,[(0,s.Lk)("div",eh,[(0,s.Lk)("div",null,[(0,s.bF)(a,{class:"budget-toolbar-mobile-head-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=e=>k(!0))})]),(0,s.Lk)("div",null,[Ie.value?((0,s.uX)(),(0,s.CE)("h4",th,(0,v.v_)(Ie.value.name),1)):((0,s.uX)(),(0,s.CE)("h4",ah,(0,v.v_)(e.$t("modules.budget.page.budget.empty.header")),1))]),(0,s.Lk)("div",null,[M.value?((0,s.uX)(),(0,s.Wv)(a,{key:1,class:"budget-toolbar-mobile-head-button",flat:"",icon:"check",onClick:t[1]||(t[1]=e=>M.value=!1)})):((0,s.uX)(),(0,s.Wv)(a,{key:0,class:"budget-toolbar-mobile-head-button",flat:"",icon:"settings",onClick:We}))])])]),(0,s.Lk)("div",nh,[(0,s.Lk)("div",oh,[Ie.value?((0,s.uX)(),(0,s.CE)("h4",lh,[(0,s.eW)((0,v.v_)(Ie.value.name)+" ",1),N.value?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(we.value,(e=>((0,s.uX)(),(0,s.Wv)(n,{size:"24px",class:(0,v.C4)("budget-toolbar-desktop-head-icon "+(d.value===e?"budget-toolbar-desktop-head-icon-active":"")),key:e,title:T.value[e].name,onClick:t=>d.value=e===d.value?null:e},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(T.value[e].symbol),1)])),_:2},1032,["class","title","onClick"])))),128)):(0,s.Q3)("",!0)])):((0,s.uX)(),(0,s.CE)("h4",sh,(0,v.v_)(e.$t("modules.budget.page.budget.empty.header")),1))]),(0,s.Lk)("div",ch,[M.value?((0,s.uX)(),(0,s.Wv)(a,{key:0,flat:"",class:"budget-toolbar-desktop-settings-btn econumo-btn -small -yellow",label:e.$t("modules.budget.page.budget.settings.menu.edit_structure_done"),onClick:t[2]||(t[2]=e=>M.value=!1)},null,8,["label"])):(0,s.Q3)("",!0),M.value?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(a,{key:1,flat:"",class:"budget-toolbar-desktop-settings-btn",label:e.$t("modules.budget.page.budget.settings.button")},{default:(0,s.k6)((()=>[(0,s.bF)(u,{cover:"","auto-close":""},{default:(0,s.k6)((()=>[(0,s.bF)(i,null,{default:(0,s.k6)((()=>[Ie.value?((0,s.uX)(),(0,s.Wv)(c,{key:0,clickable:"",class:"context-menu-button-item",onClick:t[3]||(t[3]=e=>Y())},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.budget.page.budget.settings.menu.edit")),1)])),_:1})])),_:1})):(0,s.Q3)("",!0),Ie.value?((0,s.uX)(),(0,s.Wv)(c,{key:1,clickable:E.value,disable:!E.value,class:"context-menu-button-item",onClick:t[4]||(t[4]=e=>M.value=!0)},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.budget.page.budget.settings.menu.edit_structure")),1)])),_:1})])),_:1},8,["clickable","disable"])):(0,s.Q3)("",!0),(0,s.bF)(c,{clickable:"",class:"context-menu-button-item",onClick:t[5]||(t[5]=e=>A(!0))},{default:(0,s.k6)((()=>[(0,s.bF)(o,{class:"context-menu-button-section"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.budget.page.budget.settings.menu.budget_list")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["label"]))])]),C.value&&!I.value?((0,s.uX)(),(0,s.Wv)(iv,{key:0,onCreateBudget:j,onCreateAccount:Xe})):(0,s.Q3)("",!0),Ie.value?((0,s.uX)(),(0,s.CE)("div",ih,[(0,s.Lk)("div",{class:"budget-toolbar-period",ref_key:"periodScroll",ref:_},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(h.value,(e=>((0,s.uX)(),(0,s.CE)("div",{class:(0,v.C4)("budget-toolbar-period-item"+(e.isActive?" budget-toolbar-period-item-active":"")+(e.outsideBudget?" budget-toolbar-period-item-outside":"")),key:e.value,onClick:t=>Ee(e.value)},(0,v.v_)(e.label),11,rh)))),128))],512)])):(0,s.Q3)("",!0),M.value&&C.value&&I.value?((0,s.uX)(),(0,s.CE)("div",uh,[(0,s.bF)(a,{class:"econumo-btn -small -magenta",flat:"",label:e.$t("modules.budget.page.budget.structure.action.create_folder"),onClick:t[6]||(t[6]=e=>K())},null,8,["label"])])):(0,s.Q3)("",!0),C.value&&I.value&&N.value?((0,s.uX)(),(0,s.CE)("div",dh,[(0,s.Lk)("div",mh,[(0,s.Lk)("div",ph,[(0,s.Lk)("div",gh,[(0,s.bF)(Kf,{"currency-id":null!==(m=d.value)&&void 0!==m?m:null},null,8,["currency-id"])]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(O.value,((e,t)=>((0,s.uX)(),(0,s.Wv)(ib,{key:e.id,"edit-mode":M.value,"can-update-limits":w.value,"budget-currency-id":Ie.value.currencyId,"folder-id":e.id,"folder-name":e.name,elements:e.elements,stats:e.stats,access:Ie.value.access,"is-first":0===t,"is-last":t===O.value.length-1,onUpdateBudget:Re,onShowTransactionList:Ne,onDeleteFolder:se,onOrderElements:t=>Oe(t,e.id),onOrderFolders:Fe,onOpenUpdateFolderModal:t=>ae(e.id,e.name),onOpenCreateEnvelopeModal:re,onOpenUpdateElementModal:pe,onOpenDeleteElementModal:Ce,onOpenChangeCurrencyModal:xe,onOpenSetLimitModal:Ye},null,8,["edit-mode","can-update-limits","budget-currency-id","folder-id","folder-name","elements","stats","access","is-first","is-last","onOrderElements","onOpenUpdateFolderModal"])))),128)),F.value.elements.length?((0,s.uX)(),(0,s.Wv)(ib,{key:0,"edit-mode":M.value,"can-update-limits":w.value,"budget-currency-id":Ie.value.currencyId,"folder-id":null,"folder-name":e.$t("modules.budget.page.budget.structure.no_folder"),elements:F.value.elements,stats:F.value.stats,access:Ie.value.access,"is-first":null,"is-last":null,onUpdateBudget:Re,onShowTransactionList:Ne,onDeleteFolder:()=>{},onOrderElements:t[7]||(t[7]=e=>Oe(e,null)),onOpenCreateEnvelopeModal:re,onOpenUpdateElementModal:pe,onOpenDeleteElementModal:Ce,onOpenChangeCurrencyModal:xe,onOpenSetLimitModal:Ye},null,8,["edit-mode","can-update-limits","budget-currency-id","folder-name","elements","stats","access"])):(0,s.Q3)("",!0),R.value.elements.length?((0,s.uX)(),(0,s.Wv)(ib,{key:1,"edit-mode":!1,"can-update-limits":w.value,"budget-currency-id":Ie.value.currencyId,"folder-id":null,"folder-name":e.$t("modules.budget.page.budget.structure.in_archive"),elements:R.value.elements,stats:R.value.stats,access:Ie.value.access,"is-first":null,"is-last":null,onUpdateBudget:Re,onShowTransactionList:Ne,onDeleteFolder:()=>{},onOrderElements:()=>{},onOpenCreateEnvelopeModal:()=>{},onOpenUpdateElementModal:pe,onOpenDeleteElementModal:Ce,onOpenChangeCurrencyModal:xe,onOpenSetLimitModal:Ye},null,8,["can-update-limits","budget-currency-id","folder-name","elements","stats","access"])):(0,s.Q3)("",!0),(0,s.bF)(Wf,{"budget-stats":D.value,"budget-currency-id":Ie.value.currencyId},null,8,["budget-stats","budget-currency-id"])])])])):(0,s.Q3)("",!0)]),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[$.isOpened?((0,s.uX)(),(0,s.Wv)(Um,{key:0,id:$.budgetId,name:$.budgetName,"currency-id":$.currencyId,excluded:$.accountsExcluded,onUpdateName:t[8]||(t[8]=e=>$.budgetName=e),onUpdateExcluded:t[9]||(t[9]=e=>$.accountsExcluded=e),onUpdateCurrency:t[10]||(t[10]=e=>$.currencyId=e),onSubmit:z,onClose:W},null,8,["id","name","currency-id","excluded"])):(0,s.Q3)("",!0),P.isOpened?((0,s.uX)(),(0,s.Wv)(Rb,{key:1,id:P.budgetId,name:P.budgetName,excluded:P.accountsExcluded,"currency-id":P.currencyId,"can-update-name":E.value,onUpdateName:t[11]||(t[11]=e=>P.budgetName=e),onUpdateExcluded:t[12]||(t[12]=e=>P.accountsExcluded=e),onUpdateCurrency:t[13]||(t[13]=e=>P.currencyId=e),onSubmit:H,onClose:V},null,8,["id","name","excluded","currency-id","can-update-name"])):(0,s.Q3)("",!0),G.isOpened?((0,s.uX)(),(0,s.Wv)(cu,{key:2,"header-label":e.$t("modules.budget.modal.create_folder_form.header"),"input-value":G.folderName,"input-label":e.$t("modules.budget.form.budget.folder_name.placeholder"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.create.label"),validation:[t=>(0,l.R1)(r).isNotEmpty(t)||e.$t("modules.budget.form.budget.folder_name.validation.required_field"),t=>(0,l.R1)(r).isValidBudgetFolderName(t)||e.$t("modules.budget.form.budget.folder_name.validation.invalid_name")],id:G.folderId,onClose:Z,onSubmit:ee},null,8,["header-label","input-value","input-label","cancel-label","submit-label","validation","id"])):(0,s.Q3)("",!0),te.isOpened?((0,s.uX)(),(0,s.Wv)(cu,{key:3,"header-label":e.$t("modules.budget.modal.update_folder_form.header"),"input-value":te.folderName,"input-label":e.$t("modules.budget.form.budget.folder_name.placeholder"),"cancel-label":e.$t("elements.button.cancel.label"),"submit-label":e.$t("elements.button.save.label"),validation:[t=>(0,l.R1)(r).isNotEmpty(t)||e.$t("modules.budget.form.budget.folder_name.validation.required_field"),t=>(0,l.R1)(r).isValidBudgetFolderName(t)||e.$t("modules.budget.form.budget.folder_name.validation.invalid_name")],id:te.folderId,onClose:ne,onSubmit:le},null,8,["header-label","input-value","input-label","cancel-label","submit-label","validation","id"])):(0,s.Q3)("",!0),Te.isOpened?((0,s.uX)(),(0,s.Wv)(Lb,{key:4,"budget-id":Te.budgetId,"period-start":Te.periodStart,"category-id":Te.categoryId,"tag-id":Te.tagId,"envelope-id":Te.envelopeId,"selected-element":Te.selectedElement,"currency-id":Te.currencyId,"current-user-id":Te.currentUserId,access:Te.access,onClose:De},null,8,["budget-id","period-start","category-id","tag-id","envelope-id","selected-element","currency-id","current-user-id","access"])):(0,s.Q3)("",!0),ie.isOpened?((0,s.uX)(),(0,s.Wv)(Gb,{key:5,id:ie.envelopeId,"folder-id":ie.folderId,"budget-id":ie.budgetId,"budget-currency-id":I.value.meta.currencyId,elements:null===(p=I.value)||void 0===p?void 0:p.structure.elements,access:null===(g=I.value)||void 0===g?void 0:g.meta.access,onClose:ue,onCreate:me},null,8,["id","folder-id","budget-id","budget-currency-id","elements","access"])):(0,s.Q3)("",!0),ge.isOpened?((0,s.uX)(),(0,s.Wv)(nf,{key:6,"budget-id":ge.budgetId,id:ge.envelopeId,name:ge.name,icon:ge.icon,"currency-id":ge.currencyId,"is-archived":ge.isArchived,categories:ge.categories,elements:null===(b=I.value)||void 0===b?void 0:b.structure.elements,access:null===(f=I.value)||void 0===f?void 0:f.meta.access,onClose:be,onSave:he},null,8,["budget-id","id","name","icon","currency-id","is-archived","categories","elements","access"])):(0,s.Q3)("",!0),_e.isOpened?((0,s.uX)(),(0,s.Wv)(Al,{key:7,icon:"","question-title":e.$t("modules.budget.modal.delete_envelope.header"),"question-label":e.$t("modules.budget.modal.delete_envelope.question"),"action-label":e.$t("elements.button.delete.label"),"cancel-label":e.$t("elements.button.cancel.label"),onCancel:Ae,onProceed:t[14]||(t[14]=e=>Me({budgetId:_e.budgetId,id:_e.envelopeId}))},null,8,["question-title","question-label","action-label","cancel-label"])):(0,s.Q3)("",!0),S.isOpened?((0,s.uX)(),(0,s.Wv)(pp,{key:8,header:S.header,description:S.description,onClose:Q},null,8,["header","description"])):(0,s.Q3)("",!0),Se.isOpened?((0,s.uX)(),(0,s.Wv)(mf,{key:9,id:Se.elementId,"currency-id":Se.currencyId,"budget-id":Ie.value.id,onClose:Ue,onChangeCurrency:$e},null,8,["id","currency-id","budget-id"])):(0,s.Q3)("",!0),Pe.isOpened?((0,s.uX)(),(0,s.Wv)(ff,{key:10,"element-id":Pe.elementId,"budget-id":Pe.budgetId,amount:Pe.amount,period:Pe.period,onClose:Ve,onSetLimit:Be},null,8,["element-id","budget-id","amount","period"])):(0,s.Q3)("",!0),je.isOpened?((0,s.uX)(),(0,s.Wv)(bd,{key:11,"header-label":null===(y=Ie.value)||void 0===y?void 0:y.name,actions:[{label:e.$t("modules.budget.page.budget.settings.menu.edit"),value:"edit",context:null,isHidden:!E.value},{label:e.$t("modules.budget.page.budget.settings.menu.edit_structure"),value:"edit_structure",context:null,isHidden:!E.value},{label:e.$t("modules.budget.page.budget.settings.menu.budget_list"),value:"open_settings",context:null,isHidden:!1}],onCancel:qe,onProceed:ze},null,8,["header-label","actions"])):(0,s.Q3)("",!0)]))]})),_:1})}}})),bh=vh,fh=bh;z()(vh,"components",{QPage:cs.A,QBtn:W.A,QAvatar:ba.A,QMenu:rs.A,QList:xn.A,QItem:Qa.A,QItemSection:$a.A});const hh={class:"settings-classification budget"},_h={class:"settings-toolbar-mobile settings-classification-toolbar-mobile"},yh={class:"settings-toolbar-mobile-title"},Ah=(0,s.Lk)("div",{class:"settings-toolbar-mobile-container"},"  ",-1),kh={class:"budget-toolbar-desktop"},Mh={class:"budget-toolbar-desktop-head"},Ch={class:"budget-toolbar-desktop-head-title"},Eh=(0,s.Lk)("div",{class:"budget-toolbar-desktop-settings"},"  ",-1),Ih={href:"https://econumo.com/docs/user-guide/accounts",target:"_blank"},wh={href:"https://econumo.com/docs/user-guide/transactions",target:"_blank"},Lh=(0,s.Lk)("div",null,[(0,s.eW)(" You can enter transactions by selecting any account in the left sidebar and clicking the "),(0,s.Lk)("span",{class:"text-weight-medium"},"Add Transaction"),(0,s.eW)(" button."),(0,s.Lk)("br"),(0,s.eW)(" You can create categories, tags, and payees directly from the transaction modal by entering their names and pressing Enter. ")],-1),Th={href:"https://econumo.com/docs/user-guide/classifications",target:"_blank"},Nh={href:"https://econumo.com/docs/user-guide/user-profile",target:"_blank"},Dh=(0,s.Lk)("div",null,[(0,s.eW)(" Econumo pulls your avatar from "),(0,s.Lk)("a",{href:"https://gravatar.com",target:"_blank",rel:"nofollow"},"Gravatar"),(0,s.eW)(", linked to your email address. To change your avatar, please visit "),(0,s.Lk)("a",{href:"https://gravatar.com",target:"_blank",rel:"nofollow"},"Gravatar"),(0,s.eW)(". ")],-1),Oh={href:"https://econumo.com/docs/user-guide/shared-access",target:"_blank"},Fh={href:"https://econumo.com/docs/user-guide/budgets",target:"_blank"},Rh=(0,s.Lk)("br",null,null,-1),Sh=(0,s.pM)(Object.assign({name:"OnboardingPage"},{__name:"Onboarding",setup(e){const t=(0,g.rd)(),a=(0,g.lq)(),n=Vt(),o=$t(),c=St(),i=Ut(),r=Yt(),u=Qt(),d=qt(),m=Dt(),b=((0,s.EW)((()=>n.accountsOrdered.length>0&&o.categoriesOrdered.length>0)),(0,s.EW)((()=>n.accountsOrdered.length>0))),f=(0,s.EW)((()=>n.accountsOrdered.length>0&&o.categoriesOrdered.length>0&&u.transactionsOrdered.length>0)),h=(0,s.EW)((()=>r.userAvatar)),_=(0,s.EW)((()=>d.connections.length>0)),y=(0,s.EW)((()=>m.budgets.length>0)),A=(0,s.EW)((()=>o.categoriesOrdered.length>0&&(c.tagsOrdered.length>0||i.payeesOrdered.length>0))),k=(0,l.KR)(!1);function M(){k.value=!0}function C(){k.value=!1}function E(){r.userCompleteOnboarding().then((()=>{t.push({name:p.BUDGET})}))}const{avatarUrl:I}=Xt();function w(e=!1){e?_t().setSidebarActiveArea():_t().setWorkspaceActiveArea(),t.push({name:p.HOME})}function L(){var e;const t=wa(),a=Ct(),n=a.accountFoldersOrdered[0];t.openAccountModal({folderId:null!==(e=null===n||void 0===n?void 0:n.id)&&void 0!==e?e:null})}return(0,s.sV)((()=>{const e=t.currentRoute.value.name;_t().setWorkspaceActiveArea(),e===p.ONBOARDING?_t().setWorkspaceActiveArea():e===p.HOME&&_t().setSidebarActiveArea()})),(0,s.wB)((()=>a),(e=>{e.name===p.ONBOARDING?_t().setWorkspaceActiveArea():e.name===p.HOME&&_t().setSidebarActiveArea()}),{immediate:!0,deep:!0}),(e,t)=>{const a=(0,s.g2)("q-btn"),n=(0,s.g2)("q-timeline-entry"),o=(0,s.g2)("router-link"),c=(0,s.g2)("q-timeline"),i=(0,s.g2)("q-page");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(i,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",hh,[(0,s.Lk)("div",_h,[(0,s.Lk)("div",null,[(0,s.bF)(a,{class:"settings-toolbar-mobile-button",flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=e=>w(!0))})]),(0,s.Lk)("div",null,[(0,s.Lk)("h4",yh,(0,v.v_)(e.$t("modules.user.pages.onboarding.header")),1)]),Ah]),(0,s.Lk)("div",kh,[(0,s.Lk)("div",Mh,[(0,s.Lk)("h4",Ch,(0,v.v_)(e.$t("modules.user.pages.onboarding.header")),1)]),Eh]),(0,s.bF)(c,{color:"secondary",class:"onboarding"},{default:(0,s.k6)((()=>[(0,s.bF)(n,{heading:""},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.user.pages.onboarding.title")),1)])),_:1}),(0,s.bF)(n,{color:b.value?"econumo-purple":"econumo-grey",icon:b.value?"check":"arrow_forward_ios"},{title:(0,s.k6)((()=>[(0,s.eW)(" Add your accounts ")])),subtitle:(0,s.k6)((()=>[(0,s.Lk)("a",Ih,(0,v.v_)(e.$t("modules.user.pages.onboarding.user_guide.accounts")),1)])),default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.Lk)("div",null,[(0,s.eW)(" To start, you can add an account by clicking the button below. Alternatively, you can always navigate to the "),(0,s.bF)(o,{to:{name:"settings"},class:"text-weight-medium"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("pages.settings.settings.menu_item")),1)])),_:1}),(0,s.eW)(" -> "),(0,s.bF)(o,{to:{name:"settingsAccounts"},class:"text-weight-medium"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("pages.settings.accounts.menu_item")),1)])),_:1}),(0,s.eW)(" page to manage your accounts and arrange them into folders. ")]),(0,s.bF)(a,{class:"econumo-btn -small -yellow settings-classification-toolbar-control-btn q-mt-sm",flat:"",label:e.$t("modules.user.pages.onboarding.add_account"),onClick:t[1]||(t[1]=e=>L())},null,8,["label"])])])),_:1},8,["color","icon"]),(0,s.bF)(n,{color:f.value?"econumo-purple":"econumo-grey",icon:f.value?"check":"arrow_forward_ios"},{title:(0,s.k6)((()=>[(0,s.eW)(" Enter your first transaction ")])),subtitle:(0,s.k6)((()=>[(0,s.Lk)("a",wh,(0,v.v_)(e.$t("modules.user.pages.onboarding.user_guide.transactions")),1)])),default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[Lh,(0,s.bF)(a,{class:"econumo-btn -small -yellow settings-classification-toolbar-control-btn q-mt-sm",flat:"",label:e.$t("modules.user.pages.onboarding.import_transactions"),onClick:t[2]||(t[2]=e=>M())},null,8,["label"])])])),_:1},8,["color","icon"]),(0,s.bF)(n,{color:A.value?"econumo-purple":"econumo-grey",icon:A.value?"check":"lightbulb"},{title:(0,s.k6)((()=>[(0,s.eW)(" Manage categories, tags, and payees ")])),subtitle:(0,s.k6)((()=>[(0,s.Lk)("a",Th,(0,v.v_)(e.$t("modules.user.pages.onboarding.user_guide.classifications")),1)])),default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.eW)(" To manage categories, tags, and payees, navigate to "),(0,s.bF)(o,{to:{name:"settings"},class:"text-weight-medium"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("pages.settings.settings.menu_item")),1)])),_:1}),(0,s.eW)(" -> "),(0,s.bF)(o,{to:{name:"settingsCategories"},class:"text-weight-medium"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.classifications.categories.pages.settings.menu_item")),1)])),_:1}),(0,s.eW)(", "),(0,s.bF)(o,{to:{name:"settingsTags"},class:"text-weight-medium"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.classifications.tags.pages.settings.menu_item")),1)])),_:1}),(0,s.eW)(", or "),(0,s.bF)(o,{to:{name:"settingsPayees"},class:"text-weight-medium"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.classifications.payees.pages.settings.menu_item")),1)])),_:1}),(0,s.eW)(". You can also sort or archive them as necessary. ")])])),_:1},8,["color","icon"]),(0,s.bF)(n,{color:"econumo-grey",avatar:h.value?(0,l.R1)(I)(h.value,30):""},{title:(0,s.k6)((()=>[(0,s.eW)(" Update your avatar ")])),subtitle:(0,s.k6)((()=>[(0,s.Lk)("a",Nh,(0,v.v_)(e.$t("modules.user.pages.onboarding.user_guide.user_profile")),1)])),default:(0,s.k6)((()=>[Dh])),_:1},8,["avatar"]),(0,s.bF)(n,{color:_.value?"econumo-purple":"econumo-grey",icon:_.value?"check":"arrow_forward_ios"},{title:(0,s.k6)((()=>[(0,s.eW)(" Connect with your partner ")])),subtitle:(0,s.k6)((()=>[(0,s.Lk)("a",Oh,(0,v.v_)(e.$t("modules.user.pages.onboarding.user_guide.shared_access")),1)])),default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.eW)(" To connect with your partner and manage shared access to your budget or accounts, please visit "),(0,s.bF)(o,{to:{name:"settings"},class:"text-weight-medium"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("pages.settings.settings.menu_item")),1)])),_:1}),(0,s.eW)(" -> "),(0,s.bF)(o,{to:{name:"settingsConnections"},class:"text-weight-medium"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.connections.pages.settings.menu_item")),1)])),_:1}),(0,s.eW)(". ")])])),_:1},8,["color","icon"]),(0,s.bF)(n,{color:y.value?"econumo-purple":"econumo-grey",icon:y.value?"check":"arrow_forward_ios"},{title:(0,s.k6)((()=>[(0,s.eW)(" Create your budget ")])),subtitle:(0,s.k6)((()=>[(0,s.Lk)("a",Fh,(0,v.v_)(e.$t("modules.user.pages.onboarding.user_guide.budgets")),1)])),default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.eW)(" You can create your first budget on the "),(0,s.bF)(o,{to:{name:"budget"},class:"text-weight-medium"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("blocks.main.budget")),1)])),_:1}),(0,s.eW)(" page."),Rh,(0,s.eW)(" Additionally, you can access the "),(0,s.bF)(o,{to:{name:"settings"},class:"text-weight-medium"},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("pages.settings.settings.menu_item")),1)])),_:1}),(0,s.eW)(" -> "),(0,s.bF)(o,{class:"text-weight-medium",to:{name:"settingsBudgets"}},{default:(0,s.k6)((()=>[(0,s.eW)((0,v.v_)(e.$t("modules.budget.page.settings.menu_item")),1)])),_:1}),(0,s.eW)(" page to manage your budgets, shared access, and more. ")]),(0,s.bF)(a,{class:"econumo-btn -small -magenta budget-toolbar-control-btn q-mt-sm",flat:"",label:e.$t("modules.user.pages.onboarding.complete"),onClick:E},null,8,["label"])])),_:1},8,["color","icon"])])),_:1})])])),_:1}),((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body"},[(0,s.bF)(en),k.value?((0,s.uX)(),(0,s.Wv)(Pc,{key:0,onCancel:t[3]||(t[3]=e=>k.value=!1),onImport:C})):(0,s.Q3)("",!0)]))],64)}}}));var xh=a(6364),Uh=a(8354);const Qh=Sh,$h=Qh;z()(Sh,"components",{QPage:cs.A,QBtn:W.A,QTimeline:xh.A,QTimelineEntry:Uh.A});const jh=(0,s.pM)(Object.assign({name:"HomePage"},{__name:"Home",setup(e){const t=Yt(),a=(0,s.EW)((()=>t.userOnboardingCompleted?fh:$h));return(e,t)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(a.value)))}})),Wh=jh,qh=Wh,zh=[];zh.push({path:"/login",component:ce,children:[{path:"",name:p.LOGIN,component:_o,meta:{requireAuth:!1}}]}),zh.push({path:"/register",component:ce,children:[{path:"",name:p.REGISTER,component:Ls,meta:{requireAuth:!1}}]}),zh.push({path:"/logout",name:p.LOGOUT,component:Co,meta:{requireAuth:!1}}),zh.push({path:"/",component:jn,children:[{path:"",name:p.HOME,component:qh,meta:{requireAuth:!0}},{path:"/account/:id",name:p.ACCOUNT,component:ds,meta:{requireAuth:!0}}]}),zh.push({path:"/budget",component:jn,children:[{path:"",name:p.BUDGET,component:fh,meta:{requireAuth:!0}}]}),zh.push({path:"/onboarding",component:jn,children:[{path:"",name:p.ONBOARDING,component:$h,meta:{requireAuth:!0}}]});const Ph=[];Ph.push({path:"",name:p.SETTINGS,component:mi,meta:{requireAuth:!0}}),Ph.push({path:"/settings/profile",name:p.SETTINGS_PROFILE,component:Oi,meta:{requireAuth:!0}}),Ph.push({path:"/settings/profile/change-password",name:p.SETTINGS_CHANGE_PASSWORD,component:tr,meta:{requireAuth:!0}}),Ph.push({path:"/settings/accounts",name:p.SETTINGS_ACCOUNTS,component:Ru,meta:{requireAuth:!0}}),Ph.push({path:"/settings/categories",name:p.SETTINGS_CATEGORIES,component:om,meta:{requireAuth:!0}}),Ph.push({path:"/settings/payees",name:p.SETTINGS_PAYEES,component:Am,meta:{requireAuth:!0}}),Ph.push({path:"/settings/tags",name:p.SETTINGS_TAGS,component:Vp,meta:{requireAuth:!0}}),Ph.push({path:"/settings/connections",name:p.SETTINGS_CONNECTIONS,component:nv,meta:{requireAuth:!0}}),Ph.push({path:"/settings/budgets",name:p.SETTINGS_BUDGETS,component:Tp,meta:{requireAuth:!0}}),zh.push({path:"/settings",name:p.SETTINGS_SETTINGS,component:jn,children:Ph,meta:{requireAuth:!0}}),zh.push({path:"/:catchAll(.*)*",component:()=>a.e(511).then(a.bind(a,9511))});const Yh=zh,Vh=(0,u.wE)((function({store:e}){const t=g.Bt,a=(0,g.aE)({scrollBehavior:()=>({left:0,top:0}),routes:Yh,history:t("")});return a.beforeEach(((e,t,a)=>{var n;ht(bt.PAGE_VIEW,{from:null!==(n=null===t||void 0===t?void 0:t.name)&&void 0!==n?n:null,to:null===e||void 0===e?void 0:e.name}),e.matched.some((e=>e.meta.requireAuth))&&!Yt().isUserAuthenticated?a({name:"login",query:{next:e.fullPath}}):a()})),a}));async function Bh(e,t){const a=e(r);a.use(o.A,t);const n="function"===typeof m?await m({}):m;a.use(n);const s=(0,l.IG)("function"===typeof Vh?await Vh({store:n}):Vh);return n.use((({store:e})=>{e.router=s})),{app:a,store:n,router:s}}var Xh=a(989);const Hh={config:{screen:{bodyClasses:!0},dark:!1},plugins:{Notify:Xh.A}},Gh="";async function Kh({app:e,router:t,store:a},n){let o=!1;const l=e=>{try{return t.resolve(e).href}catch(e){}return Object(e)===e?null:e},s=e=>{if(o=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const t=l(e);null!==t&&(window.location.href=t,window.location.reload())},c=window.location.href.replace(window.location.origin,"");for(let l=0;!1===o&&l<n.length;l++)try{await n[l]({app:e,router:t,store:a,ssrContext:null,redirect:s,urlPath:c,publicPath:Gh})}catch(e){return e&&e.url?void s(e.url):void console.error("[Quasar] boot error:",e)}!0!==o&&(e.use(t),e.mount("#q-app"))}Bh(n.Ef,Hh).then((e=>{const[t,n]=void 0!==Promise.allSettled?["allSettled",e=>e.map((e=>{if("rejected"!==e.status)return e.value.default;console.error("[Quasar] boot error:",e.reason)}))]:["all",e=>e.map((e=>e.default))];return Promise[t]([Promise.resolve().then(a.bind(a,5405)),Promise.resolve().then(a.bind(a,8123)),Promise.resolve().then(a.bind(a,7854))]).then((t=>{const a=n(t).filter((e=>"function"===typeof e));Kh(e,a)}))}))},7854:(e,t,a)=>{"use strict";a.r(t),a.d(t,{api:()=>l,default:()=>s});var n=a(1573),o=a(2303);const l=o.A.create({baseURL:"https://api.econumo.com"}),s=(0,n.zj)((({app:e})=>{e.config.globalProperties.$axios=o.A,e.config.globalProperties.$api=l}))},8123:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(1573),o=a(3537),l=a(1515);const s={blocks:{help:{label:" econumo.com",url:"https://econumo.com/"},website:{label:"Econumo"},list:{list_empty:"List is empty",order_list:"Reorder list"},main:{budget:"Budget",onboarding:"Onboarding",create_account:"Add an account"}},elements:{econumo:{label:"Econumo"},folders:{default_folder:"All accounts"},account:{name_hidden:"[hidden]"},switch_to_account:"Switch to",form:{account:{folder:{label:"Name",validation:{empty_name:"Enter folder name",error_name_length:"The folder name must be between 3 and 18 characters"}},name:{label:"Name",placeholder:"Enter name",validation:{required_field:"Required field",invalid_name:"The account name must be between 3 and 18 characters"}},balance:{label:"Balance",placeholder:"Enter balance",validation:{required_field:"Required field",invalid_number:"Enter a valid number"}},currency:{label:"Currency"}}},button:{ok:{label:"Ok"},close:{label:"Close"},cancel:{label:"Cancel"},create:{label:"Create"},add:{label:"Add"},edit:{label:"Edit"},set_as_default:{label:"Set as default"},update:{label:"Update"},save:{label:"Save"},replace:{label:"Replace"},delete:{label:"Delete"},reset:{label:"Reset"},copy:{label:"Copy"},view:{label:"View"},up:{label:"Move up"},down:{label:"Move down"},hide:{label:"Hide"},show:{label:"Show"},accept:{label:"Accept"},transfer:{label:"Transfer"},expand:{label:"Expand"},collapse:{label:"Collapse"},decline:{label:"Decline"},back:{label:"Back"},next:{label:"Next"},import:{label:"Import"},export:{label:"Export"},change:{label:"Change"}},date:{month_short:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},validation:{required_field:"Required field",invalid_number:"Enter a valid number",invalid_decimal_number:"Enter a valid decimal number (max 8 decimal places)",invalid_formula:"Only numbers and operators (+, -, *, /, . and =) are allowed"}},pages:{account:{toolbar:{settings:"Configure account",search:"Search",shared_with:"Shared account"},transaction_list:{none:"No transactions found",today:"Today",yesterday:"Yesterday",item:{transfer_from:"Transfer from account",transfer_to:"Transfer to account"},action:{add_transaction:"Add transaction"}},preview_transaction_modal:{header:"Details",type:{expense:"Expense",income:"Income",transfer:"Transfer"},recipient:{label:"Recipient"},sender:{label:"Sender"},category:{label:"Category"},description:{label:"Notes"},payee:{label:"Payee"},tags:{label:"Tags"},author:{label:"Author"},created_at:{label:"Date"}},delete_transaction_modal:{question:"Are you sure you want to delete this transaction?"}},settings:{settings:{header:"Settings",header_desktop:"Service settings",menu_item:"Settings",logout:"Logout",groups:{service:"Service",user_interface:"User Interface"}},sync:{menu_item:"Full sync"},accounts:{menu_item:"Accounts and Folders",header:"Accounts and Folders",list_empty_create:"Add",list_empty_new_account:"new account",list_actions:{access:"Access control"},create_folder:"Create folder",create_folder_modal:{header:"Create new folder"},update_folder_modal:{header:"Change name"},delete_folder_modal:{title:"Delete folder?",question:"Do you want to delete the folder {folder}?"},delete_account_modal:{question:"Are you sure you want to remove the account {account}?"},preview_account_modal:{header:"Account details",shared_access:"Share",access:{label:"Access",no_shared_access:"No access to this account"},action:{shared_access:"Access control"}}},currency:{menu_item:"Default currency"},themes:{menu_item:"Color scheme"},language:{menu_item:"Language"},import_csv:{menu_item:"Import CSV"},export_csv:{menu_item:"Export CSV",error:"Failed to export transactions"}}},modals:{transaction:{transaction_type:{expense:"Expense",transfer:"Transfer",income:"Income"},create_form:{header:"Add transaction"},update_form:{header:"Update transaction"},form:{amount:{label:"Enter amount",validation:{required_field:"Amount is required"}},amount_recipient:{label:"Will be exchanged",validation:{required_field:"Recipient amount is required"}},category:{label:"Category",validation:{required_field:"Category is required"}},payee:{expense:"Recipient",income:"Sender"},options:{header:"Advanced"},description:{label:"Notes",placeholder:"Enter notes"},from:{label:"From"},to:{label:"To"}},dialog:{new_tag:{header:"Tag name is required",name:{label:"Tag",validation:{required_field:"Required field"}}}}},account:{create_form:{header:"New account"},update_form:{header:"Update account"},form:{icon:{label:"Icon"}}},export_csv:{header:"Export CSV"},import_csv:{header:"Import CSV",none:"None",file:{label:"CSV File",hint:"Maximum file size: 10 MB"},mapping:{description:"Map the columns from your CSV file to the transaction fields. Required fields are marked with an asterisk (*)."},amount_mode:{label:"Amount Format",single:"Single amount column",dual:"Separate inflow/outflow columns",switch_to_single:"Switch to single amount",switch_to_dual:"Split into inflow/outflow"},fields:{account:"Account",date:"Date",amount:"Amount",amount_hint:"Use if your CSV has one column with positive/negative values",amount_inflow:"Amount (Inflow)",amount_inflow_hint:"Income, deposits, credits",amount_outflow:"Amount (Outflow)",amount_outflow_hint:"Expenses, withdrawals, debits",category:"Category",description:"Description",payee:"Payee",tag:"Tag"},success:"Transactions imported successfully",success_count:"{count} transaction(s) imported successfully | {count} transactions imported successfully",partial_success:"Imported {imported} transaction(s), {failed} failed",error:"Failed to import transactions. Please check your file and try again.",errors_detail:"Errors",row:"Row",and_more:"and {count} more error(s)"},import_result:{success_title:"Import Successful",partial_success_title:"Import Partially Successful",error_title:"Import Failed",imported:"{count} transaction(s) imported | {count} transactions imported",failed:"{count} transaction(s) failed | {count} transactions failed",errors_detail:"Error Details",row:"Row",rows:"Rows",more:"more",and_more:"and {count} more error(s)"},sort:{header:"Sorting",mode:{alphabet:{asc:"Alphabetically (A-Z)",desc:"Alphabetically (Z-A)"},count:{desc:"By usage frequency (1..0)",asc:"By usage frequency (0..1)"}}}},modules:{app:{modal:{change_language:{header:"Language"},self_hosted:{information:"You can use the service on your hosting. Just enter the server address."},loading:{data_loading:"Loading details"}}},user:{modal:{sign_in:{label:"Authentication..."},sign_in_failed:{header:"Login failed",information:"Check that the email and password are entered correctly. If errors persist, contact support."},access_recovery:{header:"Restore access",information:"To restore access to your account, enter the email address used during registration.",instruction:"A security code has been sent to the email address. Enter the code in the field below and provide a new password."},sign_up:{label:"Registration..."},sign_up_failed:{header:"Registration error",information:"Ensure that the information is entered correctly. If errors persist, contact support."},sign_out:{title:"Logout",question:"Are you sure you want to log out?",action:{logout:"Logout",cancel:"Stay"}},change_password_success:{text:"You have successfully changed your password."},change_password_error:{header:"Change password error",text:"An error occurred while changing the password; please check the information or try again later."},change_password_loading:{label:"Please wait"}},form:{user:{name:{label:"Name",placeholder:"Your name",validation:{required_field:"Required field",invalid_name:"Enter your name"}},email:{label:"E-mail",placeholder:"Your email",validation:{required_field:"Required field",invalid_email:"Enter a valid email"}},code:{label:"Code",placeholder:"Confirmation code",validation:{required_field:"Required field",invalid_code:"Enter a valid code"}},password:{label:"Password",placeholder:"Password",validation:{required_field:"Required field",invalid_password:"Password must be at least 4 characters"}},password_retry:{label:"Confirm password",placeholder:"Re-enter password",validation:{required_field:"Required field",invalid_password:"Re-enter password",not_equals:"Passwords do not match"}},server_host:{self_hosted:"Custom server",label:"Server address",placeholder:"https://",validation:{required_field:"Required field",invalid_url:"Enter a valid server address"}}},sign_in:{action:{sign_in:"Sign in",forget_password:"Forgot password?"}},sign_up:{action:{sign_up:"Sign Up"}},access_recovery:{action:{recover:{label:"Restore"},change_password:{label:"Change password"}}},change_password:{password:{label:"Current password",placeholder:"Enter password",validation:{invalid_password:"Enter current password"}},new_password:{label:"New password",placeholder:"Enter a new password",validation:{not_equals:"New password must differ from the old password"}},new_password_retry:{label:"Confirm new password",placeholder:"Re-enter new password",validation:{not_equals:"Passwords do not match"}},submit:{label:"Change password"}}},page:{sign_in:{header:"Login"},sign_up:{header:"Sign up",privacy:{text:'By registering, you agree to our <a href="https://econumo.com/docs/legal/privacy-policy/" target="_blank" class=\'register-form-privacy-link\'>Privacy Policy</a> and <a href="https://econumo.com/docs/legal/terms-of-service/" target="_blank" class=\'register-form-privacy-link\'>Terms of Service</a>'},paywall:{header:"Ready to start using Econumo?",text:"Make a one-time payment by clicking the button below to get started.",next_steps:"As soon as we receive your payment, we will send your login credentials to the provided email address.",action:"Sign Up"}},settings:{profile:{menu_item:"Profile",header:"User profile",groups:{security:"Security"},change_password:{menu_item:"Change password",header:"Change password"}}}},pages:{onboarding:{header:"Onboarding",title:"Welcome to Econumo!",complete:"Complete onboarding",add_account:"Add an account",import_transactions:"Import Transactions",user_guide:{accounts:"User guide: accounts",transactions:"User guide: transactions",classifications:"User guide: classifications",user_profile:"User guide: user profile",shared_access:"User guide: shared access",budgets:"User guide: budgets"}}}},export_csv:{modal:{export_csv_form:{header:"Export CSV",accounts:"Select Accounts",select_all:"Select All",deselect_all:"Deselect All"}}},budget:{modal:{budget_form:{accounts:"Accounts"},create_budget_form:{header:"Create a budget"},update_budget_form:{header:"Update the budget"},create_folder_form:{header:"Create a folder"},update_folder_form:{header:"Rename the folder"},create_envelope_form:{header:"Create an envelope"},update_envelope_form:{header:"Update the envelope"},change_element_currency_form:{header:"Change currency"},delete_envelope:{header:"Delete the envelope?",question:"Are you sure you want to delete this envelope?"},set_limit_form:{header:"Set limit"},generic_error:{header:"Error Occurred",description:"Please try again. If the error persists, report the issue."},access_error:{header:"Access Denied",description:"You need to accept the invitation before accessing this budget."},expense_widget:{header:"Outflow vs. Total",conversion_rate:"The average rate for {period} is 1 {defaultCurrency} = {rate}"}},form:{budget:{name:{label:"Name",placeholder:"My budget",validation:{required_field:"Required field",invalid_name:"Budget name must be between 3 and 18 characters"}},folder_name:{label:"Folder name",placeholder:"Provide a folder name",validation:{required_field:"Required field",invalid_name:"Folder name must be between 3 and 18 characters"}}},budget_envelope:{name:{label:"Name",placeholder:"",validation:{required_field:"Required field",invalid_name:"Envelope name must be between 3 and 18 characters"}},currency:{label:"Currency",validation:{required_field:"Required field"}},categories:{label:"Categories"},icon:{label:"Icon"},status:{label:"Status",option:{active:"Active",archive:"Archived"}}},budget_limit:{limit:{label:"Limit",validation:{invalid_number:"Invalid number",required_field:"Required field",invalid_formula:"Invalid formula"}}}},page:{budget:{empty:{header:"Budget",no_budget:"You havent created a budget yet.",description:"Create or accept an invitation to a budget to start managing your finances.",create_budget:"Create a budget",initial_setup:"To create a budget, you need to create an account and add at least one category.",create_account:"Create an account"},settings:{button:"Configure",menu:{edit:"Budget details",edit_structure:"Edit structure",edit_structure_done:"Done Editing",budget_list:"Open budget list"}},structure:{no_folder:"Default folder",in_archive:"Archived",tab:{budgeted:"Budget",spent:"Spent",available:"Available"},action:{create_folder:"Create a folder",delete_folder:"Delete a folder"},empty_folder:{note:"Folder is empty. Move a category/tag/envelope or create a new envelope."},element:{action:{change_currency:"Change currency"}},total:{name:"Total",expenses:"Total expenses"}}},settings:{menu_item:"Budgets",header:"Budgets",create_budget:"Create a new budget",edit_modal:{header:"Update the budget"},create_modal:{header:"Create a new budget"},delete_modal:{title:"Delete the budget?",question:"Are you sure you want to delete {name}?"},decline_access_modal:{title:"Decline access to the budget?",question:"Are you sure you want to decline access to the budget {name}?"},not_accepted:"not accepted",level:{guest:"View only",user:"Regular access",admin:"Full control"},list_actions:{access:"Access control",go_to:"Go to the budget",select:"Select the budget"}}}},classifications:{categories:{pages:{settings:{menu_item:"Categories",header:"Categories",archived_item:"Archived (inactive)",create_category:"Create category"}},elements:{},modals:{replace:{header:"Replace with",note:"The original category will be deleted and replaced with the selected one"},delete:{title:"Delete category?",question:"Delete category {name}?"},edit:{header:"Edit"},create:{header:"New category"}},forms:{category:{type:{income:"Income",expense:"Expense"},name:{label:"Name",placeholder:"Enter name",validation:{required_field:"Required field",invalid_name:"The category name must be between 3 and 18 characters"}},icon:{label:"Icon"}}}},tags:{pages:{settings:{menu_item:"Tags",header:"Tags",create_tag:"Create a new tag",archived_item:"Archived (inactive)"}},elements:{},modals:{edit:{header:"Edit tag"},create:{header:"Create a new tag"},delete:{title:"Delete tag?",question:"Are you sure you want to delete the tag {name}?"}},forms:{tag:{name:{label:"Name",validation:{required_field:"Required field",invalid_name:"The tag name must be between 3 and 18 characters"}}}}},payees:{pages:{settings:{menu_item:"Payees (senders, recipients)",header:"Payees",create_payee:"Create a new payee",archived_item:"Archived (inactive)"}},elements:{},modals:{edit:{header:"Update payee"},create:{header:"Create a new payee"},delete:{title:"Delete payee?",question:"Are you sure you want to delete {name}?"}},forms:{payee:{name:{label:"Name",validation:{required_field:"Required field",invalid_name:"Payee name must be between 3 and 18 characters"}}}}}},connections:{pages:{settings:{menu_item:"Shared access",header:"Shared access",generate_invite:"Create an invitation",accept_invite:"Accept an invitation",info:{header:"<b>Econumo CE</b> does not support user connection management and offers two modes suitable for families and individuals:",list:{all_users_connected:"All users connected automatically",all_users_connected_description:"Ideal for families, allowing easy sharing of accounts or budgets.",no_connections:"No connections between users",no_connections_description:"No shared accounts or budgets."},link:"Read more",link_url:"https://econumo.com/docs/edition/"}}},elements:{roles:{owner:"Owner",admin:"Full control",user:"Add transactions",guest:"View only",no_access:"No access"}},modals:{delete_connection:{question:"Are you sure you want to delete shared access from {name}?"},generate_invite:{instruction:"To connect with another user, share this code with your partner. The code is valid for 5 minutes.",code:{label:"Invitation code"}},accept_invite:{label:"Accept an invitation",instruction:"Ask your partner for the invitation code and enter it below. The code is valid for 5 minutes.",code:{label:"Enter the code"}},preview_connection:{accounts:"Shared accounts",budgets:"Shared budgets",budgets_empty:"No shared budgets",accounts_empty:"No shared accounts"},share_access:{level:{guest:"View only",user:"Regular access",admin:"Full control",owner:"Owner",no_access:"No access"},not_accepted:"not accepted",revoke_access:"Revoke access",list_empty:"No connections found",select_user:"Select user {name}"}},forms:{invitation_code:{validation:{required_field:"Required field"}}}}}},c={en:s},i=(0,n.zj)((({app:e})=>{const t=(0,o.hU)({locale:l.Ay.locale(),legacy:!1,messages:c});e.use(t)}))},5405:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var n=a(587),o=a(1573);const l=(0,o.zj)((({app:e})=>{e.use((0,n.Ey)())}))},1515:(e,t,a)=>{"use strict";a.d(t,{$x:()=>u,Ay:()=>g,Mu:()=>p,Wm:()=>m});var n=a(7156),o=a(6501);function l(e){return d()?void 0===e?!!(0,n.Gq)("selfHosted"):((0,n.SO)("selfHosted",e?"1":"0"),e?"1":"0"):"0"}function s(e){var t;if(window.econumoConfig.API_URL)return window.econumoConfig.API_URL;if(!d()){const e=new URL(window.location.href);return`${e.protocol}//${e.host}`}if(void 0===e){const e=window.econumoConfig.API_URL?window.econumoConfig.API_URL:window.location.origin;return l()&&null!==(t=(0,n.Gq)("backendHost"))&&void 0!==t?t:e}return(0,n.SO)("backendHost",e),e}function c(){return"https:"===window.location.protocol}function i(e){var t;return void 0===e?(0,n.Gq)("locale")?(0,n.Gq)("locale"):o.A.lang.isoName?null===(t=o.A.lang.isoName)||void 0===t?void 0:t.split("-")[0]:"en":((0,n.SO)("locale",e),e)}function r(){return[{value:"en",label:"English",short:"Eng"}]}function u(){var e;return null!==(e="https://econumo.com")&&void 0!==e?e:"https://econumo.com"}function d(){return!1}function m(){var e;const t=null===(e=window.econumoConfig)||void 0===e?void 0:e.ALLOW_REGISTRATION;return void 0===t||("boolean"===typeof t?t:"true"===t)}function p(){var e;const t=null===(e=window.econumoConfig)||void 0===e?void 0:e.PAYWALL_ENABLED;return void 0!==t&&("boolean"===typeof t?t:"true"===t)}const g={selfHosted:l,backendHost:s,isHttps:c,locale:i,getLocaleOptions:r,getWebsiteUrl:u,isCustomApiAllowed:d,isRegistrationAllowed:m,isPaywallEnabled:p}},6671:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function sanitizeInput(e){e=e.toString(),e=e.replace(/[^0-9+\-*/=.,]/g,""),e=e.replace(/,/g,"."),e=e.replace(/(?<!\d)[\+\*\/\.]{2,}/g,"");const t=e.split(/([+\-*/])/),a=t.map((e=>e.includes(".")?e:e.replace(/\b0+(\d+)/g,"$1")));return a.join("")}function validateFormula(formula){if(formula=formula.toString(),""===formula)return!0;try{if(formula&&"="!==formula){const result=eval(formula.replace("=",""));if(isNaN(result))return!1}return!0}catch(e){return!1}}function evaluateFormula(value){if(value=value.toString(),value.includes("="))try{const valueWithoutEqual=value.replace("=",""),result=eval(valueWithoutEqual);return isNaN(result)?value.replace("=",""):roundToPrecision(result,10).toString()}catch(e){return value.replace("=","")}return value}function roundToPrecision(e,t){const a=Math.pow(10,t);return Math.round(e*a)/a}__webpack_require__.d(__webpack_exports__,{NF:()=>validateFormula,o2:()=>sanitizeInput,w9:()=>evaluateFormula})},7156:(e,t,a)=>{"use strict";a.d(t,{Ai:()=>p,Gq:()=>d,SO:()=>m,WG:()=>r,cY:()=>n,eF:()=>u,gf:()=>i,y0:()=>c});var n,o=a(4885),l=a(354),s=a(1515);(function(e){e["ACCOUNTS"]="store/accounts/accounts",e["ACCOUNTS_LOADED_AT"]="store/accounts/accounts_loaded_at",e["ACCOUNT_FOLDERS"]="store/account_folders/account_folders",e["ACCOUNT_FOLDERS_LOADED_AT"]="store/account_folders/account_folders_loaded_at",e["ACCOUNT_FOLDERS_OPENED"]="store/account_folders/account_folders_opened",e["BUDGET"]="store/budgets/budget",e["BUDGET_META"]="store/budgets/budget_meta",e["BUDGET_CURRENCIES"]="store/budgets/budget_currencies",e["BUDGET_LOADED_AT"]="store/budgets/budget_loaded_at",e["BUDGET_SELECTED_DATE"]="store/budgets/budget_selected_date",e["BUDGET_FOLDED_FOLDERS"]="store/budgets/budget_folded_folders",e["BUDGET_UNFOLDED_ELEMENTS"]="store/budgets/budget_unfolded_elements",e["BUDGETS"]="store/budgets/budgets",e["BUDGETS_LOADED_AT"]="store/budgets/budgets_loaded_at",e["CATEGORIES"]="store/categories/categories",e["CATEGORIES_LOADED_AT"]="store/categories/categories_loaded_at",e["CONNECTIONS"]="store/connections/connections",e["CONNECTIONS_LOADED_AT"]="store/connections/connections_loaded_at",e["CURRENCIES"]="store/currencies/currencies",e["CURRENCIES_LOADED_AT"]="store/currencies/currencies_loaded_at",e["CURRENCY_RATES"]="store/currency_rates/currency_rates",e["CURRENCY_RATES_LOADED_AT"]="store/currency_rates/currency_rates_loaded_at",e["PAYEES"]="store/payees/payees",e["PAYEES_LOADED_AT"]="store/payees/payees_loaded_at",e["TAGS"]="store/tags/tags",e["TAGS_LOADED_AT"]="store/tags/tags_loaded_at",e["TRANSACTIONS"]="store/transactions/transactions",e["TRANSACTIONS_LOADED_AT"]="store/transactions/transactions_loaded_at",e["USER_DATA"]="store/users/user_data",e["USER_DATA_LOADED_AT"]="store/users/user_data_loaded_at"})(n||(n={}));const c=function(){return!!o.A.get("token")},i=function(){return o.A.get("token")||null},r=function(e){const t=(0,l.A)(e);let a=30;t.exp&&(a=(t.exp-Math.floor(Date.now()/1e3))/60/60/24),o.A.set("token",e,{expires:a,secure:s.Ay.isHttps()})},u=function(){o.A.remove("token")};function d(e){const t=localStorage.getItem(e);if(void 0!==t&&null!==t)try{return JSON.parse(t)}catch(e){return null}return t}function m(e,t){localStorage.setItem(e,JSON.stringify(t))}function p(e){localStorage.removeItem(e)}},8099:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTExIDVIOVY5SDVWMTFIOVYxNUgxMVYxMUgxNVY5SDExVjVaTTEwIDBDNC40OCAwIDAgNC40OCAwIDEwQzAgMTUuNTIgNC40OCAyMCAxMCAyMEMxNS41MiAyMCAyMCAxNS41MiAyMCAxMEMyMCA0LjQ4IDE1LjUyIDAgMTAgMFpNMTAgMThDNS41OSAxOCAyIDE0LjQxIDIgMTBDMiA1LjU5IDUuNTkgMiAxMCAyQzE0LjQxIDIgMTggNS41OSAxOCAxMEMxOCAxNC40MSAxNC40MSAxOCAxMCAxOFoiIGZpbGw9IiM2NjY2NjYiLz4KPC9zdmc+Cg=="},1459:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTYgMTEuMDY2N0w5LjA2NjY3IDhMNiA0LjkzMzMzTDYuOTMzMzMgNEwxMC45MzMzIDhMNi45MzMzMyAxMkw2IDExLjA2NjdaIiBmaWxsPSIjNjY2NjY2Ii8+Cjwvc3ZnPgo="},6843:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI1IiBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgMTI1IDIwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNjAxXzExNzg4KSI+CjxwYXRoIGQ9Ik04My41MTkgMy45MDIyNkM4MC4xNTU2IDMuOTAyMjYgNzkuNzk5MSA1LjA4OTM1IDc5LjQxIDUuNjExMDFDNzguNjM5OCA0LjUzNDgzIDc3LjQyMyAzLjkwMjI2IDc1Ljk4NTEgMy45MDIyNkM3NC41MTAyIDMuOTAyMjYgNzMuNTYzOSAzLjk4MDMgNzIuNzIgNC45NzAyM1Y0LjE3MzM2SDY5Ljk1MDZWMTUuOTMzNEg3Mi43MlY4LjcyNDU2QzcyLjcyIDcuMjkxMDEgNzMuNzg1MSA2LjI2ODIyIDc1LjI4NDUgNi4yNjgyMkM3Ni42NDQ3IDYuMjY4MjIgNzcuNTc0NiA3LjM2MDg0IDc3LjU3NDYgOC45MDUyOVYxNS45MzM0SDgwLjI3NDRWOC43MjQ1NkM4MC4yNzQ0IDcuMjkxMDEgODEuMzE5IDYuMjY4MjIgODIuODM4OSA2LjI2ODIyQzg0LjE3ODYgNi4yNjgyMiA4NS4xMDg1IDcuMzYwODQgODUuMTA4NSA4LjkwNTI5VjE1LjkzMzRIODcuODA4M1Y4LjQ0OTM1Qzg3LjgwODMgNS43ODc2NCA4NS45NzI5IDMuODk4MTUgODMuNTIzMSAzLjg5ODE1TDgzLjUxOSAzLjkwMjI2Wk03Ljk3OTE1IDEzLjc1MjJDNi43NDE5MyAxMy43NTIyIDUuODQwNjUgMTMuMTg5NSA1LjI3NTMgMTIuMzc2MkwxMS40NDA5IDkuOTY5MTZMMTMuNDU2NSA5LjIwMTA0QzEzLjEzNjkgNS45MDI2NSAxMC42NzQ4IDMuOTAyMjYgNy44Mzk4NiAzLjkwMjI2QzQuNTA1MTEgMy45MDIyNiAxLjg3NSA2LjQ5NDE0IDEuODc1IDEwLjAyMjZDMS44NzUgMTMuNjM3MiA0LjY0NDQgMTYuMjA4NiA3Ljk5OTYzIDE2LjIwODZDOS42OTk3OCAxNi4yMDg2IDExLjc0NDEgMTUuNDgxNSAxMi43NjQxIDE0LjM4ODlMMTEuMDE4OSAxMi41NjkzQzEwLjM1OTQgMTMuMjUxMSA5LjA2ODg4IDEzLjc1MjIgNy45NzkxNSAxMy43NTIyVjEzLjc1MjJaTTQuNTc4ODUgMTAuMjUyNkM0LjQ3NjQzIDguMzQyNTUgNS41OTA3NSA2LjM1ODU5IDcuOTU0NTcgNi4zNTg1OUM5LjE3NTQgNi4zNTg1OSAxMC4wNTYyIDYuOTM3NzYgMTAuNjMzOCA3Ljc5MjE0TDQuNTc4ODUgMTAuMjQ4NVYxMC4yNTI2Wk0yMS42MzM2IDE2LjIwODZDMjMuNDkzNSAxNi4yMDg2IDI1LjA1ODUgMTUuNDM2MyAyNi4xOTMzIDE0LjIyODdMMjQuMzMzMyAxMi42MTQ0QzIzLjY3MzggMTMuMzY2MSAyMi42NzgzIDEzLjg0MjYgMjEuNjU4MiAxMy44NDI2QzE5LjcyODYgMTMuODQyNiAxOC4xMTg2IDEyLjExMzMgMTguMTE4NiAxMC4wNDMxQzE4LjExODYgNy45OTc1MiAxOS43Mjg2IDYuMjY4MjIgMjEuNjU4MiA2LjI2ODIyQzIyLjY1NzggNi4yNjgyMiAyMy42MzI4IDYuNzQ0NyAyNC4yNjc4IDcuNDUxMjFMMjYuMTI3NyA1LjgxMjI4QzI1LjAxNzUgNC42NTM5NSAyMy40NTI1IDMuOTAyMjYgMjEuNjgyOCAzLjkwMjI2QzE4LjI1NzkgMy45MDIyNiAxNS4zNzc5IDYuNjk5NTIgMTUuMzc3OSAxMC4wNDMxQzE1LjM3NzkgMTMuMzg2NyAxOC4yNTc5IDE2LjIwODYgMjEuNjM3NyAxNi4yMDg2SDIxLjYzMzZaTTMzLjc5MjcgMTYuMjA4NkMzNy4xOTcxIDE2LjIwODYgNDAuMDc3MSAxMy4zODY3IDQwLjA3NzEgMTAuMDQzMUM0MC4wNzcxIDYuNjk5NTIgMzcuMTk3MSAzLjkwMjI2IDMzLjc5MjcgMy45MDIyNkMzMC4zODgzIDMuOTAyMjYgMjcuNTA4MyA2LjY5OTUyIDI3LjUwODMgMTAuMDQzMUMyNy41MDgzIDEzLjM4NjcgMzAuMzg4MyAxNi4yMDg2IDMzLjc5MjcgMTYuMjA4NlpNMzMuNzkyNyAxMy44NDI2QzMxLjg0MjcgMTMuODQyNiAzMC4yMDgxIDEyLjExMzMgMzAuMjA4MSAxMC4wNDMxQzMwLjIwODEgNy45OTc1MiAzMS44NDI3IDYuMjY4MjIgMzMuNzkyNyA2LjI2ODIyQzM1LjcyMjMgNi4yNjgyMiAzNy4zNTI4IDcuOTk3NTIgMzcuMzUyOCAxMC4wNDMxQzM3LjM1MjggMTIuMTEzMyAzNS43MTgyIDEzLjg0MjYgMzMuNzkyNyAxMy44NDI2Wk00OC44NzY5IDMuOTAyMjZDNDcuMzMyNSAzLjkwMjI2IDQ2LjE5MzYgNC4wOTUzMSA0NS4yNDcyIDUuMDQwMDZWNC4xNzMzNkg0Mi40Nzc4VjE1LjkzMzRINDUuMjQ3MlY4LjQ5NDUzQzQ1LjQyNzUgNy4yNDE3MiA0Ni42MzE5IDYuMjY0MTIgNDguMDgyMiA2LjI2NDEyQzQ5LjUzMjQgNi4yNjQxMiA1MC41NTY2IDcuNDAxOTIgNTAuNTU2NiA4Ljk5MTU1VjE1LjkyOTNINTMuMjMxOFY4LjQ0NTI0QzUzLjIzMTggNS43ODM1MyA1MS40NDE1IDMuODk0MDQgNDguODc2OSAzLjg5NDA0VjMuOTAyMjZaTTY0LjE2NiA0LjE3NzQ3VjExLjYxNjNDNjMuOTg1NyAxMi44NjUgNjIuNzgxMyAxMy44NDY3IDYxLjMzMSAxMy44NDY3QzU5Ljg4MDggMTMuODQ2NyA1OC44NTY2IDEyLjcwODkgNTguODU2NiAxMS4xMTkzVjQuMTgxNTdINTYuMTgxNFYxMS42NjU2QzU2LjE4MTQgMTQuMzI3MyA1Ny45NzE3IDE2LjIxNjggNjAuNTM2MyAxNi4yMTY4QzYyLjA4MDcgMTYuMjE2OCA2My4zNTA3IDE1LjkyMSA2NC4xNjYgMTUuMDQyVjE1Ljk0MTZINjYuOTM1NFY0LjE4MTU3SDY0LjE2NlY0LjE3NzQ3WiIgZmlsbD0iIzY2NjY2NiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExNi44MTMgMy43NTA0QzExNS4xMzQgMy43NTA0IDExMy42MTQgNC40MTU4MyAxMTIuNDkxIDUuNDk2MTJDMTEyLjk4MyA2LjEzNjkxIDExMy4zNzIgNi44NjM5NSAxMTMuNjM0IDcuNjQ0MzlDMTE0LjM1NSA2LjY2Njc5IDExNS41MTEgNi4wMzQyMiAxMTYuODEzIDYuMDM0MjJDMTE4Ljk5NyA2LjAzNDIyIDEyMC43NjcgNy44MDg2OSAxMjAuNzY3IDkuOTk4MDNDMTIwLjc2NyAxMi4xODc0IDExOC45OTcgMTMuOTYxOSAxMTYuODEzIDEzLjk2MTlDMTE1LjUxMSAxMy45NjE5IDExNC4zNTEgMTMuMzI5MyAxMTMuNjM0IDEyLjM1MTdDMTEzLjM3MiAxMy4xMzYyIDExMi45ODMgMTMuODU5MiAxMTIuNDkxIDE0LjQ5OTlDMTEzLjYxNCAxNS41ODAyIDExNS4xMzQgMTYuMjQ1NyAxMTYuODEzIDE2LjI0NTdDMTIwLjI1NSAxNi4yNDU3IDEyMy4wNDkgMTMuNDQ4NCAxMjMuMDQ5IDkuOTkzOTNDMTIzLjA0OSA2LjU0MzU2IDEyMC4yNTkgMy43NDIxOSAxMTYuODEzIDMuNzQyMTlWMy43NTA0Wk05Ni40NDAzIDMuNzUwNEM5Mi45OTkxIDMuNzUwNCA5MC4yMDUxIDYuNTQ3NjcgOTAuMjA1MSAxMC4wMDIxQzkwLjIwNTEgMTMuNDUyNSA5Mi45OTUgMTYuMjUzOSA5Ni40NDAzIDE2LjI1MzlDOTkuODgxNiAxNi4yNTM5IDEwMi42NzYgMTMuNDU2NiAxMDIuNjc2IDEwLjAwMjFDMTAyLjY3NiA2LjU1MTc3IDk5Ljg4NTcgMy43NTA0IDk2LjQ0MDMgMy43NTA0Wk05Ni40NDAzIDYuMDM4MzNDOTQuMjU2OCA2LjAzODMzIDkyLjQ4NyA3LjgxMjggOTIuNDg3IDEwLjAwMjFDOTIuNDg3IDEyLjE5MTUgOTQuMjU2OCAxMy45NjYgOTYuNDQwMyAxMy45NjZDOTguNjIzOSAxMy45NjYgMTAwLjM5NCAxMi4xOTE1IDEwMC4zOTQgMTAuMDAyMUMxMDAuMzk0IDcuODEyOCA5OC42MjM5IDYuMDM4MzMgOTYuNDQwMyA2LjAzODMzWk0xMDYuNjI1IDMuNzUwNEMxMDQuOTQ1IDMuNzUwNCAxMDMuNDI1IDQuNDE1ODMgMTAyLjMwMyA1LjQ5NjEyQzEwMi43OTQgNi4xMzY5MSAxMDMuMTg0IDYuODYzOTUgMTAzLjQ0NiA3LjY0NDM5QzEwNC4xNjcgNi42NjY3OSAxMDUuMzIyIDYuMDM0MjIgMTA2LjYyNSA2LjAzNDIyQzEwOC44MDggNi4wMzQyMiAxMTAuNTc4IDcuODA4NjkgMTEwLjU3OCA5Ljk5ODAzQzExMC41NzggMTIuMTg3NCAxMDguODA4IDEzLjk2MTkgMTA2LjYyNSAxMy45NjE5QzEwNS4zMjIgMTMuOTYxOSAxMDQuMTYzIDEzLjMyOTMgMTAzLjQ0NiAxMi4zNTE3QzEwMy4xODQgMTMuMTM2MiAxMDIuNzk0IDEzLjg1OTIgMTAyLjMwMyAxNC40OTk5QzEwMy40MjUgMTUuNTgwMiAxMDQuOTQ1IDE2LjI0NTcgMTA2LjYyNSAxNi4yNDU3QzExMC4wNjYgMTYuMjQ1NyAxMTIuODYgMTMuNDQ4NCAxMTIuODYgOS45OTM5M0MxMTIuODYgNi41NDM1NiAxMTAuMDcgMy43NDIxOSAxMDYuNjI1IDMuNzQyMTlWMy43NTA0WiIgZmlsbD0iI0IxQjFCMSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzYwMV8xMTc4OCI+CjxyZWN0IHdpZHRoPSIxMjEuMTczIiBoZWlnaHQ9IjEyLjUiIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg3NSAzLjc1KSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="},2713:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTk0IiBoZWlnaHQ9IjIwIiB2aWV3Qm94PSIwIDAgMTk0IDIwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxwYXRoCiAgICBkPSJNMTMwLjYzIDAuMjQzODU3QzEyNS4yNDkgMC4yNDM4NTcgMTI0LjY3OSAyLjE0MzIgMTI0LjA1NiAyLjk3Nzg2QzEyMi44MjQgMS4yNTU5NyAxMjAuODc3IDAuMjQzODU3IDExOC41NzYgMC4yNDM4NTdDMTE2LjIxNiAwLjI0Mzg1NyAxMTQuNzAyIDAuMzY4NzI4IDExMy4zNTIgMS45NTI2MVYwLjY3NzYxOEgxMDguOTIxVjE5LjQ5MzZIMTEzLjM1MlY3Ljk1OTU0QzExMy4zNTIgNS42NjU4NiAxMTUuMDU2IDQuMDI5NCAxMTcuNDU1IDQuMDI5NEMxMTkuNjMxIDQuMDI5NCAxMjEuMTE5IDUuNzc3NTkgMTIxLjExOSA4LjI0ODcxVjE5LjQ5MzZIMTI1LjQzOVY3Ljk1OTU0QzEyNS40MzkgNS42NjU4NiAxMjcuMTEgNC4wMjk0IDEyOS41NDIgNC4wMjk0QzEzMS42ODYgNC4wMjk0IDEzMy4xNzQgNS43Nzc1OSAxMzMuMTc0IDguMjQ4NzFWMTkuNDkzNkgxMzcuNDkzVjcuNTE5MkMxMzcuNDkzIDMuMjYwNDYgMTM0LjU1NyAwLjIzNzI4NSAxMzAuNjM3IDAuMjM3Mjg1TDEzMC42MyAwLjI0Mzg1N1pNOS43NjY2MyAxNi4wMDM4QzcuNzg3MDkgMTYuMDAzOCA2LjM0NTA0IDE1LjEwMzQgNS40NDA0NyAxMy44MDIyTDE1LjMwNTQgOS45NTA4OUwxOC41MzA0IDguNzIxOUMxOC4wMTkxIDMuNDQ0NDggMTQuMDc5NyAwLjI0Mzg1NyA5LjU0Mzc3IDAuMjQzODU3QzQuMjA4MTcgMC4yNDM4NTcgMCA0LjM5MDg3IDAgMTAuMDM2M0MwIDE1LjgxOTggNC40MzEwNCAxOS45MzQgOS43OTk0MSAxOS45MzRDMTIuNTE5NiAxOS45MzQgMTUuNzkwNSAxOC43NzA3IDE3LjQyMjYgMTcuMDIyNUwxNC42MzAzIDE0LjExMTFDMTMuNTc1IDE1LjIwMiAxMS41MTAyIDE2LjAwMzggOS43NjY2MyAxNi4wMDM4Wk00LjMyNjE2IDEwLjQwNDRDNC4xNjIyOSA3LjM0ODMzIDUuOTQ1MTkgNC4xNzM5OSA5LjcyNzMxIDQuMTczOTlDMTEuNjgwNiA0LjE3Mzk5IDEzLjA4OTkgNS4xMDA2NiAxNC4wMTQxIDYuNDY3NjZMNC4zMjYxNiAxMC4zOTc4VjEwLjQwNDRaTTMxLjYxMzcgMTkuOTM0QzM0LjU4OTYgMTkuOTM0IDM3LjA5MzUgMTguNjk4NCAzOC45MDkyIDE2Ljc2NjJMMzUuOTMzMyAxNC4xODMzQzM0Ljg3OCAxNS4zODYgMzMuMjg1MiAxNi4xNDg0IDMxLjY1MzEgMTYuMTQ4NEMyOC41NjU4IDE2LjE0ODQgMjUuOTg5NyAxMy4zODE1IDI1Ljk4OTcgMTAuMDY5MkMyNS45ODk3IDYuNzk2MjcgMjguNTY1OCA0LjAyOTQgMzEuNjUzMSA0LjAyOTRDMzMuMjUyNCA0LjAyOTQgMzQuODEyNSA0Ljc5MTc3IDM1LjgyODUgNS45MjIxOEwzOC44MDQzIDMuMjk5OUMzNy4wMjggMS40NDY1NiAzNC41MjQxIDAuMjQzODU3IDMxLjY5MjQgMC4yNDM4NTdDMjYuMjEyNiAwLjI0Mzg1NyAyMS42MDQ2IDQuNzE5NDggMjEuNjA0NiAxMC4wNjkyQzIxLjYwNDYgMTUuNDE4OSAyNi4yMTI2IDE5LjkzNCAzMS42MjAzIDE5LjkzNEgzMS42MTM3Wk01MS4wNjg0IDE5LjkzNEM1Ni41MTU0IDE5LjkzNCA2MS4xMjM0IDE1LjQxODkgNjEuMTIzNCAxMC4wNjkyQzYxLjEyMzQgNC43MTk0OCA1Ni41MTU0IDAuMjQzODU3IDUxLjA2ODQgMC4yNDM4NTdDNDUuNjIxMyAwLjI0Mzg1NyA0MS4wMTMzIDQuNzE5NDggNDEuMDEzMyAxMC4wNjkyQzQxLjAxMzMgMTUuNDE4OSA0NS42MjEzIDE5LjkzNCA1MS4wNjg0IDE5LjkzNFpNNTEuMDY4NCAxNi4xNDg0QzQ3Ljk0ODMgMTYuMTQ4NCA0NS4zMzI5IDEzLjM4MTUgNDUuMzMyOSAxMC4wNjkyQzQ1LjMzMjkgNi43OTYyNyA0Ny45NDgzIDQuMDI5NCA1MS4wNjg0IDQuMDI5NEM1NC4xNTU3IDQuMDI5NCA1Ni43NjQ1IDYuNzk2MjcgNTYuNzY0NSAxMC4wNjkyQzU2Ljc2NDUgMTMuMzgxNSA1NC4xNDkxIDE2LjE0ODQgNTEuMDY4NCAxNi4xNDg0Wk03NS4yMDMxIDAuMjQzODU3QzcyLjczMTkgMC4yNDM4NTcgNzAuOTA5NyAwLjU1Mjc0NyA2OS4zOTU1IDIuMDY0MzRWMC42Nzc2MThINjQuOTY0NVYxOS40OTM2SDY5LjM5NTVWNy41OTE1QzY5LjY4NCA1LjU4NyA3MS42MTExIDQuMDIyODMgNzMuOTMxNSA0LjAyMjgzQzc2LjI1MTkgNC4wMjI4MyA3Ny44OTA1IDUuODQzMzEgNzcuODkwNSA4LjM4NjczVjE5LjQ4NzFIODIuMTcwOFY3LjUxMjYzQzgyLjE3MDggMy4yNTM4OSA3OS4zMDY0IDAuMjMwNzEzIDc1LjIwMzEgMC4yMzA3MTNWMC4yNDM4NTdaTTk5LjY2NTYgMC42ODQxOVYxMi41ODYzQzk5LjM3NzIgMTQuNTg0MiA5Ny40NSAxNi4xNTUgOTUuMTI5NiAxNi4xNTVDOTIuODA5MiAxNi4xNTUgOTEuMTcwNSAxNC4zMzQ1IDkxLjE3MDUgMTEuNzkxMVYwLjY5MDc2Mkg4Ni44OTAzVjEyLjY2NTJDODYuODkwMyAxNi45MjM5IDg5Ljc1NDcgMTkuOTQ3MSA5My44NTggMTkuOTQ3MUM5Ni4zMjkyIDE5Ljk0NzEgOTguMzYxMiAxOS40NzM5IDk5LjY2NTYgMTguMDY3NVYxOS41MDY4SDEwNC4wOTdWMC42OTA3NjJIOTkuNjY1NlYwLjY4NDE5WiIKICAgIGZpbGw9IiMzMzMzMzMiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIKICAgICAgICBkPSJNMTgzLjkwMSAwLjAwMDUwOTk4M0MxODEuMjE0IDAuMDAwNTA5OTgzIDE3OC43ODIgMS4wNjUxOSAxNzYuOTg2IDIuNzkzNjdDMTc3Ljc3MiAzLjgxODkyIDE3OC4zOTUgNC45ODIxOCAxNzguODE1IDYuMjMwODlDMTc5Ljk2OCA0LjY2NjcyIDE4MS44MTcgMy42NTQ2MSAxODMuOTAxIDMuNjU0NjFDMTg3LjM5NSAzLjY1NDYxIDE5MC4yMjcgNi40OTM3NyAxOTAuMjI3IDkuOTk2NzJDMTkwLjIyNyAxMy40OTk3IDE4Ny4zOTUgMTYuMzM4OCAxODMuOTAxIDE2LjMzODhDMTgxLjgxNyAxNi4zMzg4IDE3OS45NjIgMTUuMzI2NyAxNzguODE1IDEzLjc2MjZDMTc4LjM5NSAxNS4wMTc4IDE3Ny43NzIgMTYuMTc0NSAxNzYuOTg2IDE3LjE5OThDMTc4Ljc4MiAxOC45MjgyIDE4MS4yMTQgMTkuOTkyOSAxODMuOTAxIDE5Ljk5MjlDMTg5LjQwNyAxOS45OTI5IDE5My44NzggMTUuNTE3MyAxOTMuODc4IDkuOTkwMTVDMTkzLjg3OCA0LjQ2OTU2IDE4OS40MTQgLTAuMDEyNjM0MyAxODMuOTAxIC0wLjAxMjYzNDNWMC4wMDA1MDk5ODNaTTE1MS4zMDQgMC4wMDA1MDk5ODNDMTQ1Ljc5OCAwLjAwMDUwOTk4MyAxNDEuMzI4IDQuNDc2MTMgMTQxLjMyOCAxMC4wMDMzQzE0MS4zMjggMTUuNTIzOSAxNDUuNzkyIDIwLjAwNjEgMTUxLjMwNCAyMC4wMDYxQzE1Ni44MSAyMC4wMDYxIDE2MS4yODEgMTUuNTMwNSAxNjEuMjgxIDEwLjAwMzNDMTYxLjI4MSA0LjQ4MjcgMTU2LjgxNyAwLjAwMDUwOTk4MyAxNTEuMzA0IDAuMDAwNTA5OTgzWk0xNTEuMzA0IDMuNjYxMTlDMTQ3LjgxMSAzLjY2MTE5IDE0NC45NzkgNi41MDAzNSAxNDQuOTc5IDEwLjAwMzNDMTQ0Ljk3OSAxMy41MDYyIDE0Ny44MTEgMTYuMzQ1NCAxNTEuMzA0IDE2LjM0NTRDMTU0Ljc5OCAxNi4zNDU0IDE1Ny42MyAxMy41MDYyIDE1Ny42MyAxMC4wMDMzQzE1Ny42MyA2LjUwMDM1IDE1NC43OTggMy42NjExOSAxNTEuMzA0IDMuNjYxMTlaTTE2Ny41OTkgMC4wMDA1MDk5ODNDMTY0LjkxMiAwLjAwMDUwOTk4MyAxNjIuNDggMS4wNjUxOSAxNjAuNjg0IDIuNzkzNjdDMTYxLjQ3MSAzLjgxODkyIDE2Mi4wOTMgNC45ODIxOCAxNjIuNTEzIDYuMjMwODlDMTYzLjY2NyA0LjY2NjcyIDE2NS41MTUgMy42NTQ2MSAxNjcuNTk5IDMuNjU0NjFDMTcxLjA5MyAzLjY1NDYxIDE3My45MjUgNi40OTM3NyAxNzMuOTI1IDkuOTk2NzJDMTczLjkyNSAxMy40OTk3IDE3MS4wOTMgMTYuMzM4OCAxNjcuNTk5IDE2LjMzODhDMTY1LjUxNSAxNi4zMzg4IDE2My42NiAxNS4zMjY3IDE2Mi41MTMgMTMuNzYyNkMxNjIuMDkzIDE1LjAxNzggMTYxLjQ3MSAxNi4xNzQ1IDE2MC42ODQgMTcuMTk5OEMxNjIuNDggMTguOTI4MiAxNjQuOTEyIDE5Ljk5MjkgMTY3LjU5OSAxOS45OTI5QzE3My4xMDUgMTkuOTkyOSAxNzcuNTc2IDE1LjUxNzMgMTc3LjU3NiA5Ljk5MDE1QzE3Ny41NzYgNC40Njk1NiAxNzMuMTEyIC0wLjAxMjYzNDMgMTY3LjU5OSAtMC4wMTI2MzQzVjAuMDAwNTA5OTgzWiIKICAgICAgICBmaWxsPSIjRkZDNzFGIi8+Cjwvc3ZnPgo="},1359:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTExIDlIMTNWN0gxMVY5Wk0xMSAxN0gxM1YxMUgxMVYxN1pNMTEuOTkgMjJDNi40NyAyMiAyIDE3LjUyIDIgMTJDMiA2LjQ4IDYuNDcgMiAxMS45OSAyQzE3LjUyIDIgMjIgNi40OCAyMiAxMkMyMiAxNy41MiAxNy41MiAyMiAxMS45OSAyMlpNMTIgNEM3LjU4IDQgNCA3LjU4IDQgMTJDNCAxNi40MiA3LjU4IDIwIDEyIDIwQzE2LjQyIDIwIDIwIDE2LjQyIDIwIDEyQzIwIDcuNTggMTYuNDIgNCAxMiA0WiIgZmlsbD0iIzY2NjY2NiIvPgo8L3N2Zz4K"}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var a=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(a.exports,a,a.exports,__webpack_require__),a.loaded=!0,a.exports}__webpack_require__.m=__webpack_modules__,(()=>{var e=[];__webpack_require__.O=(t,a,n,o)=>{if(!a){var l=1/0;for(r=0;r<e.length;r++){for(var[a,n,o]=e[r],s=!0,c=0;c<a.length;c++)(!1&o||l>=o)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](a[c])))?a.splice(c--,1):(s=!1,o<l&&(l=o));if(s){e.splice(r--,1);var i=n();void 0!==i&&(t=i)}}return t}o=o||0;for(var r=e.length;r>0&&e[r-1][2]>o;r--)e[r]=e[r-1];e[r]=[a,n,o]}})(),(()=>{__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return __webpack_require__.d(t,{a:t}),t}})(),(()=>{__webpack_require__.d=(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,a)=>(__webpack_require__.f[a](e,t),t)),[]))})(),(()=>{__webpack_require__.u=e=>"js/"+e+".2304f3c9.js"})(),(()=>{__webpack_require__.miniCssF=e=>{}})(),(()=>{__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="app-frontend:";__webpack_require__.l=(a,n,o,l)=>{if(e[a])e[a].push(n);else{var s,c;if(void 0!==o)for(var i=document.getElementsByTagName("script"),r=0;r<i.length;r++){var u=i[r];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+o){s=u;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",t+o),s.src=a),e[a]=[n];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(m);var o=e[a];if(delete e[a],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),c&&document.head.appendChild(s)}}})(),(()=>{__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{__webpack_require__.p=""})(),(()=>{var e={524:0};__webpack_require__.f.j=(t,a)=>{var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var o=new Promise(((a,o)=>n=e[t]=[a,o]));a.push(n[2]=o);var l=__webpack_require__.p+__webpack_require__.u(t),s=new Error,c=a=>{if(__webpack_require__.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var o=a&&("load"===a.type?"missing":a.type),l=a&&a.target&&a.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+l+")",s.name="ChunkLoadError",s.type=o,s.request=l,n[1](s)}};__webpack_require__.l(l,c,"chunk-"+t,t)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,a)=>{var n,o,[l,s,c]=a,i=0;if(l.some((t=>0!==e[t]))){for(n in s)__webpack_require__.o(s,n)&&(__webpack_require__.m[n]=s[n]);if(c)var r=c(__webpack_require__)}for(t&&t(a);i<l.length;i++)o=l[i],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return __webpack_require__.O(r)},a=globalThis["webpackChunkapp_frontend"]=globalThis["webpackChunkapp_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var __webpack_exports__=__webpack_require__.O(void 0,[121],(()=>__webpack_require__(8802)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();